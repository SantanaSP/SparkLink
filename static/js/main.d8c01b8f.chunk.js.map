{"version":3,"sources":["project.secret.js","web3.js","imgs/books.png","TopBar.js","App.js","serviceWorker.js","contract.js","Publish.js","NFTInfo.js","SellSingle.js","BuySingle.js","Collections.js","NFTSpark.js","IntroPublish.js","EncryptedPublish.js","Router.js","index.js"],"names":["module","exports","pinata_api_key","pinata_secret_api_key","web3","Web3","window","ethereum","error","TopBar","createTheme","breakpoints","values","xs","sm","md","lg","xl","palette","primary","main","secondary","state","isConnected","user_address","sleep","ms","a","Promise","resolve","setTimeout","getAccount","request","method","accounts","account","alert","setState","console","debug","eth","getAccounts","length","this","classes","props","Toolbar","Grid","container","direction","justifyContent","item","className","titleGrid","Typography","component","color","noWrap","title","btnGrid","Button","size","btn","href","target","icon1","btnConnected","icon2","onClick","Component","withStyles","theme","down","fontSize","up","marginTop","marginBottom","marginLeft","textAlign","minWidth","fontFamily","between","borderColor","width","avatar","margin","spacing","backgroundColor","height","withTheme","App","Helmet","ThemeProvider","page","Container","paper","style","title2","title3","src","books","variant","btnMain","btnSecond","icon","marginRight","titleFont","borderWidth","borderRadius","maxWidth","Boolean","location","hostname","match","Contract","require","FormData","bs58","Publish","name","bonusFee","price","buffer","ipfsHashCover","ipfsMeta","fileIpfs","description","shareTimes","onLoading","rootNFTId","usedAcc","sig","fileType","finished","coverURL","handleGetPubName","event","value","handleGetBonusFee","handleGetPrice","handleGetShareTimes","handleGetDescription","e","submit","img_url","trimmed_des","replace","file_url","JSONBody","obj","axios","post","headers","then","response","data","IpfsHash","bytesToContract","decode","toString","substring","log","price_eth","utils","toWei","ipfsToContract","contract","methods","publish","send","from","receipt","returned_values","events","returnValues","root_nft_id","issue_id","issueId","catch","checkDetail","new_url","open","chainId","TextArea","Input","prop","action","beforeUpload","file","reject","reader","FileReader","readAsArrayBuffer","onload","b","result","params","append","message","onChange","info","status","success","onDrop","dataTransfer","files","propFile","file_type","split","file_suffix","type","titleCon","Paper","paperImg","button","titlePub","form","noValidate","placeholder","allowClear","id","input","defaultValue","min","max","formatter","parser","inputNum","rows","minHeight","accept","InboxOutlined","startIcon","display","flexDirection","alignItems","blue","fileBtn","padding","background","border","boxShadow","FileSaver","CryptoJS","NFTInfo","gateway","backend","ipfs_node","Name","Description","BonusFee","Cover","childrenNum","spark","dataUrl","Profit","isEncrypt","loadItem","downloadIPFS","finishDownload","dataHash","cipher_config","url","ciphertext","signJson","JSON","stringify","signDataAndDecrypt","responseType","URL","createObjectURL","Blob","link","document","createElement","suffix","setAttribute","body","appendChild","click","claim","claimProfit","signer","json_str","personal","sign","payload","payload_str","req_key_url","res","key","plainText","AES","decrypt","enc","Utf8","wordArray","Hex","parse","BaText","wordArrayToByteArray","arrayBufferView","Uint8Array","blob","saveAs","error_msg","reason","wordToByteArray","word","ba","push","hasOwnProperty","sigBytes","words","bytes","i","Math","concat","apply","showLoading","getElementById","innerHTML","nft","ownerOf","call","owner","toChecksumAddress","getProfitByNFTId","fromWei","tokenURI","meta","hash","getIssueIdByNFTId","issue","getRoyaltyFeeByIssueId","royalty","file_hash","request_url","timeout","fileAddr","attributes","trait_type","image","leafUrl","get","children_num","children_count","undefined","includes","cbutton","gutterBottom","content","Skeleton","animation","imagePapaer","imageStyle","content2","align","paragraph","toUrl","host","share","text","onCopy","copied","IconButton","sell_info","heroContent","cardGrid","paddingTop","paddingBottom","card","cardMedia","cardContent","flexGrow","dbutton","SellSingle","ipfsHashMeta","toAddress","NFTId","onSale","currentAcc","handleClickOpen","handleClose","handleGetAddr","handleClickLink","sell","determinePriceAndApprove","metadata","bonus","name_holder","toLowerCase","getTransferPriceByNFTId","showSellBtn","btnSell","disabled","img","imgPaper","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","loader","BuySingle","address","approvedAddr","encrypted","handleBuy","safeTransferFrom","toUpperCase","getApproved","approved","buyButton","btnDisable","Collections","cards","isLogin","viewable","onloading","SkeletoNumber","loadNft","getNft","ids","getMetadata","element","reversed_cards","reverse","metaDatas","ipfs_link","ipfs_hash_arr","ipfs_hash","sendOption","filter","fromBlock","receiveOption","to","getPastEvents","sendLog","receiveLog","showId","balanceMap","Map","map","tokenId","set","viewMap","balanceId","renderDescription","on","_chainId","reload","Array","Card","CardMedia","CardContent","CardActions","showCard","NFTSpark","priceString","Leaf","shill","acceptShill","loadLoadingState","recommendNFT","bouns","getShillPriceByNFTId","etherPrice","suggest_next_nft","showRecommend","Link","textDecoration","IntroPublish","shouldKnow","lineHeight","EncryptedPublish","allowSubmitPDF","jumped","handleGetNFTId","String","jump","submitWork","setURI","SetURI","nft_id","secret_key","lib","WordArray","create","str","cipher_text","TripleDES","encrypt","myblob","btnPub","BasicRoute","basename","ReactDOM","render","Router","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d8c01b8f.chunk.js","sourcesContent":["const pinata_api_key = '3da01378391b7f0b7be4'\nconst pinata_secret_api_key = 'b9f43c3c12fb3956453db6a8b8594b603af6ef74f8eeac0eb83934a38bea4c03'\n\nmodule.exports = {\n  pinata_api_key,\n  pinata_secret_api_key,\n}","import Web3 from 'web3';\nvar web3;\ntry{\n    web3 = new Web3(window.ethereum);\n}catch(error){\n    web3 = new Web3('ws://localhost:8546');\n}\nexport default web3;","export default __webpack_public_path__ + \"static/media/books.6e483aa8.png\";","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport AccountBalanceWalletIcon from '@material-ui/icons/AccountBalanceWallet';\nimport web3 from './web3';\n\n\nconst theme = createTheme({\n  breakpoints: {\n    values: {\n      xs: 0,\n      sm: 600,\n      md: 900,\n      lg: 1200,\n      xl: 1536,\n    },\n  },\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\nconst styles = theme => ({\n  icon1: {\n    [theme.breakpoints.down('xl')]: {\n      fontSize: 19,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 27,\n    },\n  },\n  icon2: {\n    [theme.breakpoints.down('xl')]: {\n      fontSize: 22,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 32,\n    },\n  },\n  titleGrid: {\n    marginTop: 25, \n    marginBottom: 10,\n    marginLeft: '5%',\n    textAlign: 'center' \n  },\n  title: {\n    minWidth: 100,\n    fontSize: 25,\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 45,\n    },\n\n  },\n  btnGrid: {\n    // marginTop: 25,\n    marginBottom: 10,\n    minWidth: 370,\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginTop: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginTop: 25,\n      marginLeft: '20%',\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginTop: 25,\n      marginLeft: '50%',\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginTop: 25,\n      marginLeft: '60%',\n    },\n  },\n  btn: {\n    color: '#424949',\n    borderColor: '#e3f2fd',\n    fontSize: 15,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 15,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 15,\n      width: 100\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 15,\n      width: 100\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 25,\n    },\n    // [theme.breakpoints.between('lg', 'xl')]: {\n    //   fontSize: 15,\n    //   width: '10%'\n    // },\n    // [theme.breakpoints.up('xl')]: {\n    //   fontSize: 20,\n    //   width: '10%'\n    // },\n  },\n  btnConnected: {\n    color: '#03A9F4',\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: '#2196f3',\n    width: 10,\n    height: 10\n  },\n\n});\n\nclass TopBar extends Component {\n\n  state = {\n    isConnected: false,\n    user_address: ''\n  };\n\n  async componentWillMount() {\n    const accounts = await web3.eth.getAccounts();\n    if (accounts.length == 0) {\n      this.setState({\n        isConnected: false\n      });\n    }else{\n      this.setState({\n        isConnected: true\n      });\n    }\n    // const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n    // const account = accounts[0];\n    // this.setState({\n    //   isConnected: true\n    // });\n    // console.debug(\"connected: \", connect)\n    // this.setState({\n    //   isConnected: connect\n    // });\n  }\n\n  sleep = async (ms) => {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  getAccount = async () => {\n    try {\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n      const account = accounts[0];\n      alert('您已经连接metamask')\n      this.setState({ isConnected: true, });\n      this.setState({ user_address: account, });\n    } catch (error) {\n      console.debug(error)\n      this.setState({ isConnected: false, });\n    }\n  }\n\n  // getConnected = async () => {\n  //   var connect = window.ethereum.isConnected()\n  //   console.debug(\"connected: \", connect)\n  //   this.setState({\n  //     isConnected: connect\n  //   });\n  // }\n\n  render() {\n    const { classes } = this.props\n\n    return (\n      <div>\n        <Toolbar>\n          <Grid container direction=\"row\" justifyContent=\"flex-start\">\n            <Grid item className={classes.titleGrid}>\n              <Typography component=\"h1\" color=\"inherit\" noWrap className={classes.title}>\n                <b>SparkNFT</b>\n              </Typography>\n            </Grid>\n            <Grid item className={classes.btnGrid}>\n              <Button size=\"large\" className={classes.btn} href='/' >\n                <b>首页</b>\n              </Button>\n              <Button size=\"large\" className={classes.btn} href='/#/introPublish'>\n                <b>发布</b>\n              </Button>\n\n\n              <Button size=\"large\" className={classes.btn} href='/#/collections'>\n                <b>我的NFTs</b>\n              </Button>\n\n              <Button size=\"large\" href='https://github.com/SparkNFT' target=\"_blank\">\n                <GitHubIcon className={classes.icon1}/>\n              </Button>\n              {this.state.isConnected ? (\n                <Button color='primary' className={classes.btnConnected} >\n                  <AccountBalanceWalletIcon className={classes.icon2} />\n                </Button>\n              ) : (\n                <Button className={classes.btn} onClick={this.getAccount}>\n                  <AccountBalanceWalletIcon className={classes.icon2} />\n                </Button>\n              )}\n            </Grid>\n          </Grid>\n        </Toolbar>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(TopBar);","import books from './imgs/books.png';\nimport './App.css';\nimport { Helmet } from 'react-helmet';\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport TopBar from './TopBar';\n\nconst styles = theme => ({\n  // page: {\n  //   maxWidth: '90%',\n  // },\n  title: {\n    fontFamily: 'Teko',\n    marginTop: '25%',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 100,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 150,\n    },\n  },\n  title2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 15,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 55,\n    },\n  },\n  title3: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 8,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 15,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 45,\n    },\n  },\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  titleFont: {\n    fontFamily: 'Teko',\n  },\n  btnMain: {\n    // marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    borderColor: '#e3f2fd',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  btnSecond: {\n    // marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderColor: '#03A9F4',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(7),\n    textAlign: 'center'\n  },\n  container: {\n    maxWidth: '100%'\n  },\n  books: {\n    width: '90%',\n    height: 'auto'\n  }\n});\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#FDFEFE',\n    },\n    secondary: {\n      main: '#2196f3',\n    }\n  },\n});\n\nclass App extends Component {\n  render() {\n    const { classes } = this.props\n    return(\n      <div>\n        <Helmet>\n          <title>SparkNFT | HOME</title>\n        </Helmet>\n\n        <ThemeProvider theme={theme}>\n          <div className={classes.page}>\n            <TopBar />\n            <Container component=\"main\" className={classes.container}>\n              <div className={classes.paper}>\n                <Grid container justifyContent=\"center\" >\n                  <Grid item style={{minWidth: '50%'}}>\n                    <Typography color=\"inherit\" noWrap className={classes.title} >\n                      <b>SparkNFT</b>\n                    </Typography>\n                    <Typography color=\"inherit\" noWrap className={classes.title2}>\n                      <b>人人传播，互相支持，仿若星星之火，点亮一片世界。</b>\n                    </Typography>\n                    <Typography color=\"inherit\" noWrap className={classes.title3}>\n                      发布你爱的 & 支持你爱的 & 传播你爱的\n                    </Typography>\n                    \n                  </Grid>\n                  <Grid item xs={5} >\n                    <img src={books} className={classes.books}/>\n                  </Grid>\n                  <Grid container justifyContent=\"center\" spacing={5} >\n                    <Grid item >\n                      <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnMain} href='/#/introPublish'>\n                        <b>去发布</b>\n                      </Button>\n                    </Grid>\n                    <Grid item >\n                      <Button size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} href='/#/buy'>\n                        <b>去购买</b>\n                      </Button>\n                    </Grid>\n                  </Grid>\n                </Grid>\n              </div>\n            </Container>\n          </div>\n        </ThemeProvider>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.0/8 are considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n  );\n  \n  export function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n      // The URL constructor is available in all browsers that support SW.\n      const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n      if (publicUrl.origin !== window.location.origin) {\n        // Our service worker won't work if PUBLIC_URL is on a different origin\n        // from what our page is served on. This might happen if a CDN is used to\n        // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n        return;\n      }\n  \n      window.addEventListener('load', () => {\n        const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n  \n        if (isLocalhost) {\n          // This is running on localhost. Let's check if a service worker still exists or not.\n          checkValidServiceWorker(swUrl, config);\n  \n          // Add some additional logging to localhost, pointing developers to the\n          // service worker/PWA documentation.\n          navigator.serviceWorker.ready.then(() => {\n            console.log(\n              'This web app is being served cache-first by a service ' +\n                'worker. To learn more, visit https://bit.ly/CRA-PWA'\n            );\n          });\n        } else {\n          // Is not localhost. Just register service worker\n          registerValidSW(swUrl, config);\n        }\n      });\n    }\n  }\n  \n  function registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n      .register(swUrl)\n      .then(registration => {\n        registration.onupdatefound = () => {\n          const installingWorker = registration.installing;\n          if (installingWorker == null) {\n            return;\n          }\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the updated precached content has been fetched,\n                // but the previous service worker will still serve the older\n                // content until all client tabs are closed.\n                console.log(\n                  'New content is available and will be used when all ' +\n                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                );\n  \n                // Execute callback\n                if (config && config.onUpdate) {\n                  config.onUpdate(registration);\n                }\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // \"Content is cached for offline use.\" message.\n                console.log('Content is cached for offline use.');\n  \n                // Execute callback\n                if (config && config.onSuccess) {\n                  config.onSuccess(registration);\n                }\n              }\n            }\n          };\n        };\n      })\n      .catch(error => {\n        console.error('Error during service worker registration:', error);\n      });\n  }\n  \n  function checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n      headers: { 'Service-Worker': 'script' }\n    })\n      .then(response => {\n        // Ensure service worker exists, and that we really are getting a JS file.\n        const contentType = response.headers.get('content-type');\n        if (\n          response.status === 404 ||\n          (contentType != null && contentType.indexOf('javascript') === -1)\n        ) {\n          // No service worker found. Probably a different app. Reload the page.\n          navigator.serviceWorker.ready.then(registration => {\n            registration.unregister().then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n          // Service worker found. Proceed as normal.\n          registerValidSW(swUrl, config);\n        }\n      })\n      .catch(() => {\n        console.log(\n          'No internet connection found. App is running in offline mode.'\n        );\n      });\n  }\n  \n  export function unregister() {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.ready.then(registration => {\n        registration.unregister();\n      });\n    }\n  }\n  ","import web3 from './web3';\n\nconst address = '0xf7c08bEabb314A5105577f0209B28C2354DFbf5D'; // rinkeby 0x7B5B92B0eD1DfeafdbD724b177A7733Bda67497F\n\nconst abi = [\n  {\n    \"inputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"constructor\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"approved\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Approval\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"operator\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bool\",\n        \"name\": \"approved\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"name\": \"ApprovalForAll\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"receiver\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint128\",\n        \"name\": \"amount\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"name\": \"Claim\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint128\",\n        \"name\": \"transfer_price\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"name\": \"DeterminePrice\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint128\",\n        \"name\": \"transfer_price\",\n        \"type\": \"uint128\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"DeterminePriceAndApprove\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"string\",\n        \"name\": \"content\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"Label\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint32\",\n        \"name\": \"issue_id\",\n        \"type\": \"uint32\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"publisher\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint64\",\n        \"name\": \"rootNFTId\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"Publish\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes32\",\n        \"name\": \"old_URI\",\n        \"type\": \"bytes32\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes32\",\n        \"name\": \"new_URI\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"SetURI\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Transfer\",\n    \"type\": \"event\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"acceptShill\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"approve\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"balanceOf\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"claimProfit\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"_price\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"name\": \"determinePrice\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"_price\",\n        \"type\": \"uint128\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"determinePriceAndApprove\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"getApproved\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getDepthByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getEditionIdByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getFatherByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getIssueIdByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"getLossRatio\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"\",\n        \"type\": \"uint8\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getProfitByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getRemainShillTimesByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"\",\n        \"type\": \"uint8\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getRootNFTIdByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getRoyaltyFeeByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"\",\n        \"type\": \"uint8\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getShillPriceByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getShillTimesByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"\",\n        \"type\": \"uint8\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getTotalAmountByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getTransferPriceByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"operator\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"isApprovedForAll\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"isEditionExist\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"isIssueExist\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"isRootNFT\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"string\",\n        \"name\": \"content\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"label\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"name\",\n    \"outputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"ownerOf\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"_first_sell_price\",\n        \"type\": \"uint128\"\n      },\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"_royalty_fee\",\n        \"type\": \"uint8\"\n      },\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"_shill_times\",\n        \"type\": \"uint8\"\n      },\n      {\n        \"internalType\": \"bytes32\",\n        \"name\": \"_ipfs_hash\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"publish\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"safeTransferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"bytes\",\n        \"name\": \"_data\",\n        \"type\": \"bytes\"\n      }\n    ],\n    \"name\": \"safeTransferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"operator\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"approved\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"name\": \"setApprovalForAll\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"bytes32\",\n        \"name\": \"ipfs_hash\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"setURI\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"bytes4\",\n        \"name\": \"interfaceId\",\n        \"type\": \"bytes4\"\n      }\n    ],\n    \"name\": \"supportsInterface\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"symbol\",\n    \"outputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"tokenURI\",\n    \"outputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"transferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  }\n]\nexport default new web3.eth.Contract(abi, address);","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport { blue} from '@material-ui/core/colors';\nimport { Helmet } from 'react-helmet';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport {message} from 'antd';\nimport { InboxOutlined } from '@ant-design/icons';\nimport Dragger from 'antd/lib/upload/Dragger';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport { Input, InputNumber } from 'antd';\nimport 'antd/dist/antd.css';\nimport TopBar from './TopBar';\nimport axios from 'axios';\nimport contract from './contract';\nimport web3 from './web3';\nimport ReactLoading from 'react-loading';\nimport Paper from '@material-ui/core/Paper';\nimport { event } from 'jquery';\n\n\n// const IPFS = require('ipfs-core')\n// const Websockets = require('libp2p-websockets')\nconst {\n\tpinata_api_key,\n\tpinata_secret_api_key,\n} = require('./project.secret');\nconst FormData = require('form-data');\nconst bs58 = require('bs58');\nvar CryptoJS = require(\"crypto-js\");\n\n\nconst theme = createTheme({\n  palette: {\n\t\tprimary: {\n\t\t\tmain: '#2196f3',\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: '#FDFEFE',\n\t\t},\n  },\n});\n\n\nconst styles = theme => ({\n  main: {\n\t\t[theme.breakpoints.between('xs', 'sm')]: {\n\t\t\twidth: '60%'\n\t\t},\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\twidth: 500\n\t\t},\n\t},\n\ttitleCon: {\n\t\tmarginTop: 50, \n\t\tfontFamily: 'Ubuntu',\n\t\t[theme.breakpoints.between('xs', 'sm')]: {\n\t\t\tfontSize: 30\n\t\t},\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\tfontSize: 40\n\t\t},\n\t},\n\tpaperImg: {\n\t\tbackgroundColor: '#EFEBE9',\n\t\twidth: 330,\n\t\t[theme.breakpoints.between('xs', 'sm')]: {\n\t\t\tmarginLeft: '5%',\n\t\t\tmarginTop: 30,\n\t\t},\n\t\t[theme.breakpoints.between('sm', 'md')]: {\n\t\t\tmarginLeft: '30%',\n\t\t\tmarginTop: 30,\n\t\t},\n\t\t[theme.breakpoints.between('md', 'lg')]: {\n\t\t\tmarginLeft: '30%',\n\t\t\tmarginTop: 30,\n\t\t},\n\t\t[theme.breakpoints.between('lg', 'xl')]: {\n\t\t\tmarginLeft: '40%',\n\t\t\tmarginTop: 30,\n\t\t},\n\t\t[theme.breakpoints.up('xl')]: {\n\t\t\tmarginLeft: '45%',\n\t\t\tmarginTop: 30,\n\t\t},\n\t},\n\ttitlePub: {\n\t\tmarginTop: \"3%\",\n\t\tfontFamily: 'Ubuntu',\n\t\t[theme.breakpoints.between('xs', 'sm')]: {\n\t\t\tfontSize: 30\n\t\t},\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\tfontSize: 40\n\t\t},\n\t},\n\tbtn: {\n\t\tcolor: '#424949',\n\t\tborderWidth: 2,\n\t\tborderColor: '#e3f2fd',\n\t\tfontSize: 16,\n\t},\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: blue[500],\n\t\twidth: 60,\n\t\theight: 60\n  },\n  form: {\n    width: '150%', \n    marginTop: theme.spacing(7),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n\tfileBtn: {\n\t\tpadding: '10px 30px 10px 30px',\n    background: '#66C1E4',\n    border: 'none',\n    color: '#FFF',\n    boxShadow: '1px 1px 1px #4C6E91',\n\t},\n\tbutton: {\n    margin: theme.spacing(1),\n\t\tfontSize: 20,\n\t\tborderRadius: 25,\n\t\tcolor: '#FFFFFF',\n\t\tbackgroundColor: '#2196f3'\n  },\n\tinput: {\n\t\theight: 40,\n\t\tborderRadius: 5,\n\t},\n\tinputNum: {\n\t\theight: 40,\n\t\tborderRadius: 5,\n\t\twidth: '100%',\n\t\tfontSize: 20,\n\t}\n});\n\n\nclass Publish extends Component {\n\tstate = {\n    name: '',\n\t\tbonusFee: 0,\n\t\tprice: 0,\n\t\tbuffer: null,\n\t\tipfsHashCover: '',\n\t\tipfsMeta: '',\n\t\tfileIpfs: '',\n\t\tdescription: '',\n\t\tshareTimes: 0,\n\t\tonLoading: false,\n\t\trootNFTId: '',\n\t\tusedAcc: '',\n\t\tsig: '',\n\t\tfileType: '',\n\t\tfinished: false,\n\t\tcoverURL: ''\n  };\n\n\tasync componentDidMount() {\n\t\tif (!window.ethereum) {\n\t\t\talert(\"请先安装metamask\");\n\t\t\twindow.location.href = '/#/introPublish';\n\t\t\treturn;\n\t\t}\n\t\t// if (!window.ethereum.isConnected()) {\n\t\t// \talert(\"请先链接metamask\");\n\t\t// \twindow.location.href = '/#/introPublish';\n\t\t// \treturn;\n\t\t// }\n\t\t// const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n\t\twindow.ethereum.request({ method: 'eth_chainId' }).then(chainId => {\n\t\t\tif (chainId !== '0x4') {\n\t\t\t\talert(\"请切换至rinkeby network\");\n\t\t\t\twindow.location.href = '/#/introPublish';\n\t\t\t\treturn;\n\t\t\t}\n\t\t})\n\t}\n\t//21474836481\n\t//4294967297\n\t//8589934593\n\n\thandleGetPubName = (event) => {\n\t\tthis.setState({\n      name : event.target.value,\n    })\n\t}\n\n\thandleGetBonusFee = (value) => {\n\t\tthis.setState({\n\t\t\tbonusFee : value,\n    })\n\t}\n\n\thandleGetPrice = (value) => {\n\t\tthis.setState({\n\t\t\tprice: value,\n\t\t})\n\t}\n\n\thandleGetShareTimes = (value) => {\n\t\tthis.setState({\n\t\t\tshareTimes: value,\n\t\t})\n\t}\n\n\thandleGetDescription = (e) => {\n\t\tthis.setState({\n\t\t\tdescription: e.target.value,\n\t\t})\n\t}\n\n\tsubmit = async (event) => {\n\t\t/*TODO: call smart contract publish() and wait for publish success event\n\t\t * then call backend to get a secret key. Then encrypt the pdf file and upload it to IPFS\n\t\t * Finally, form a new metadata json file and send its ipfs hash to backend and publish it\n\t\t*/\n\t\t\n\t\tif (this.state.price === 0 || this.state.bonusFee === 0 || this.state.shareTimes === 0 || this.state.ipfsHashCover === '' || this.state.fileIpfs === '') {\n\t\t\talert(\"你有信息尚未填写\")\n\t\t} else {\n\t\t\t\n\t\t\tthis.setState({\n\t\t\t\tonLoading: true\n\t\t\t})\n\t\t\tvar img_url = 'https://gateway.pinata.cloud/ipfs/' + this.state.ipfsHashCover\n\t\t\tthis.setState({\n\t\t\t\tcoverURL: img_url\n\t\t\t})\n\t\t\tconsole.debug(\"coverURL: \", this.state.coverURL)\n\t\t\tvar trimmed_des = this.state.description.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \" \");\n\t\t\tconst accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n\t\t\tconst account = accounts[0];\n\t\t\tthis.setState({\n\t\t\t\tusedAcc: account\n\t\t\t})\n\t\t\tvar file_url = 'https://gateway.pinata.cloud/ipfs/' + this.state.fileIpfs\n\t\t\tvar JSONBody = {\n\t\t\t\t\"name\": this.state.name,\n\t\t\t\t\"description\": trimmed_des,\n\t\t\t\t\"image\": this.state.coverURL,\n\t\t\t\t\"attributes\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"display_type\": \"boost_percentage\",\n\t\t\t\t\t\t\"trait_type\": \"Bonuse Percentage\",\n\t\t\t\t\t\t\"value\": this.state.bonusFee\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"trait_type\": \"File Address\",\n\t\t\t\t\t\t\"value\": file_url\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"value\": this.state.fileType\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"trait_type\": \"Encrypted\",\n\t\t\t\t\t\t\"value\": \"FALSE\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\n\t\t\tconst url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`\n\t\t\tlet obj = this\n\t\t\taxios.post(url, JSONBody, {\n\t\t\t\theaders: {\n\t\t\t\t\tpinata_api_key: pinata_api_key,\n\t\t\t\t\tpinata_secret_api_key: pinata_secret_api_key\n\t\t\t\t},\n\t\t\t})\n\t\t\t\t.then(function (response) {\n\t\t\t\t\tconsole.debug(\"metadata: \", response.data.IpfsHash)\n\t\t\t\t\tconst bytes = bs58.decode(response.data.IpfsHash)\n\t\t\t\t\tconst bytesToContract = bytes.toString('hex').substring(4,);\n\t\t\t\t\tconsole.log(bytesToContract)\n\t\t\t\t\tconsole.log(response.data.IpfsHash)\n\t\t\t\t\tobj.setState({\n\t\t\t\t\t\tipfsMeta: bytesToContract\n\t\t\t\t\t})\n\n\t\t\t\t\tvar price_eth = web3.utils.toWei(obj.state.price.toString())\n\t\t\t\t\tvar ipfsToContract = '0x' + bytesToContract\n\t\t\t\t\tcontract.methods.publish(price_eth, obj.state.bonusFee, obj.state.shareTimes, ipfsToContract).send({\n\t\t\t\t\t\tfrom: obj.state.usedAcc\n\t\t\t\t\t}).then(function (receipt) {\n\t\t\t\t\t\t//55834574849\n\t\t\t\t\t\tconsole.log(receipt)\n\t\t\t\t\t\tvar publish_event = receipt.events.Publish\n\t\t\t\t\t\tvar returned_values = publish_event.returnValues\n\t\t\t\t\t\tvar root_nft_id = returned_values.rootNFTId\n\t\t\t\t\t\tvar issue_id = returned_values.issue_id\n\t\t\t\t\t\tobj.setState({\n\t\t\t\t\t\t\tonLoading: false,\n\t\t\t\t\t\t\trootNFTId: root_nft_id,\n\t\t\t\t\t\t\tissueId: issue_id\n\t\t\t\t\t\t})\n\t\t\t\t\t\talert(\"已经成功发布作品\");\n\t\t\t\t\t});\n\n\t\t\t\t\tobj.setState({\n\t\t\t\t\t\tfinished: true\n\t\t\t\t\t})\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\tconsole.debug(error)\n\t\t\t\t\talert(\"上传pinata失败，请试着删除文件后重试\")\n\t\t\t\t})\n\n\t\t}\n\t\t\n\t}\n\n\tcheckDetail = async (event) => {\n\t\tvar new_url = '/#/NFT/' + this.state.rootNFTId\n\t\twindow.open(new_url, '_self')\n\t}\n\n\trender(){\n\t\tconst { classes } = this.props\n\t\tlet obj = this\n\t\tconst { TextArea } = Input;\n\t\tconst prop = {\n\t\t\tname: 'file',\n\t\t\taction: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n\t\t\theaders: {\n\t\t\t\tpinata_api_key: pinata_api_key,\n\t\t\t\tpinata_secret_api_key: pinata_secret_api_key\n\t\t\t},\n\t\t\tdata: this.state.buffer,\n\t\t\tbeforeUpload: file => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst reader = new FileReader()\n\t\t\t\t\t\treader.readAsArrayBuffer(file)\n\t\t\t\t\t\treader.onload = (e) => {\n\t\t\t\t\t\t\tvar b = e.target.result\n\t\t\t\t\t\t\tlet params = new FormData()\n\t\t\t\t\t\t\tparams.append('file', b)\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tbuffer: params\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tmessage.error('Read file error')\n\t\t\t\t\t\treject()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tasync onChange(info) {\n\t\t\t\tconst { status } = info.file;\n\t\t\t\t// text/plain image/jpeg application/pdf\n\t\t\t\tif (status === 'done') {\n\t\t\t\t\tmessage.success(`${info.file.name} file uploaded successfully.`);\n\t\t\t\t\tobj.setState({\n\t\t\t\t\t\tipfsHashCover: info.file.response.IpfsHash\n\t\t\t\t\t})\n\n\t\t\t\t} else if (status === 'error') {\n\t\t\t\t\tmessage.error(`${info.file.name} file upload failed.`);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDrop(e) {\n\t\t\t\tmessage.error(`Only image file supported`);\n\t\t\t\tconsole.log('Dropped files', e.dataTransfer.files);\n\t\t\t},\n\t\t};\n\n\t\tconst propFile = {\n\t\t\tname: 'file',\n\t\t\taction: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n\t\t\theaders: {\n\t\t\t\tpinata_api_key: pinata_api_key,\n\t\t\t\tpinata_secret_api_key: pinata_secret_api_key\n\t\t\t},\n\t\t\tdata: this.state.buffer,\n\t\t\tbeforeUpload: file => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst reader = new FileReader()\n\t\t\t\t\t\treader.readAsArrayBuffer(file)\n\t\t\t\t\t\treader.onload = (e) => {\n\t\t\t\t\t\t\tvar b = e.target.result\n\t\t\t\t\t\t\tlet params = new FormData()\n\t\t\t\t\t\t\tparams.append('file', b)\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tbuffer: params\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tmessage.error('Read file error')\n\t\t\t\t\t\treject()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tasync onChange(info) {\n\t\t\t\tconst { status } = info.file;\n\t\t\t\t// console.debug(typeof info.file.type)\n\t\t\t\t// text/plain image/jpeg application/pdf\n\t\t\t\tif (status === 'done') {\n\t\t\t\t\tmessage.success(`${info.file.name} file uploaded successfully.`);\n\t\t\t\t\tvar file_type = info.file.name.split('\\.')\n\t\t\t\t\tvar file_suffix = file_type[file_type.length - 1]\n\t\t\t\t\tconsole.debug(file_suffix)\n\t\t\t\t\tconsole.debug(\"file ipfs hash: \", info.file.response.IpfsHash)\n\t\t\t\t\tobj.setState({\n\t\t\t\t\t\tfileIpfs: info.file.response.IpfsHash,\n\t\t\t\t\t\tfileType: file_suffix\n\t\t\t\t\t})\n\n\n\t\t\t\t} else if (status === 'error') {\n\t\t\t\t\tmessage.error(`${info.file.name} file upload failed.`);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDrop(e) {\n\t\t\t\tmessage.error(`Only image file supported`);\n\t\t\t\tconsole.log('Dropped files', e.dataTransfer.files);\n\t\t\t},\n\t\t};\n\n\n\t\tif (this.state.onLoading){\n\t\t\treturn(\n\t\t\t\t<div>\n\t\t\t\t\t<Helmet>\n\t\t\t\t\t\t<title>SparkNFT | Publish</title>\n\t\t\t\t\t</Helmet>\n\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t<TopBar />\n\t\t\t\t\t\t<div style={{marginLeft: '35%', marginTop: '10%'}}>\n\t\t\t\t\t\t\t<ReactLoading type={'bars'} color={'#2196f3'} width={'40%'}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ThemeProvider>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else if (this.state.finished){\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<Helmet>\n\t\t\t\t\t\t<title>SparkNFT | Publish</title>\n\t\t\t\t\t</Helmet>\n\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t<TopBar />\n\t\t\t\t\t\t<div style={{ textAlign: 'center'}}>\n\t\t\t\t\t\t\t<Typography className={classes.titleCon}>\n\t\t\t\t\t\t\t\t<b> 🎉 恭喜您发布成功</b>\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Paper className={classes.paperImg}>\n\t\t\t\t\t\t\t\t<img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t\t<Typography variant=\"h4\" style={{ marginTop: 20, fontFamily: 'Ubuntu' }}>\n\t\t\t\t\t\t\t\t<b>您获得的根结点NFT是： #{this.state.rootNFTId}</b>\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\tstyle={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\n\t\t\t\t\t\t\t\tonClick={this.checkDetail}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t查看详情\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ThemeProvider>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}else{\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<Helmet>\n\t\t\t\t\t\t<title>SparkNFT | Publish</title>\n\t\t\t\t\t</Helmet>\n\n\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t<TopBar />\n\t\t\t\t\t\t<Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\n\t\t\t\t\t\t\t<div className={classes.paper}>\n\t\t\t\t\t\t\t\t{/* {showLoading()} */}\n\t\t\t\t\t\t\t\t<Typography className={classes.titlePub}>\n\t\t\t\t\t\t\t\t\t<b>发布作品信息</b>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<form className={classes.form} noValidate>\n\t\t\t\t\t\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t\t\t\t\t\t<Grid item style={{ width: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"作品名称\"\n\t\t\t\t\t\t\t\t\t\t\t\tallowClear\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"pubName\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleGetPubName}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.name}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item style={{width: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 20 }}>收益比例 *</label>\n\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 14 }}>当您的作品被成功分享时，您希望从分享价格中获得多少比例的收益</p>\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"bonusFee\"\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={0}\n\t\t\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\t\t\t\t\t\tformatter={value => `${value}%`}\n\t\t\t\t\t\t\t\t\t\t\t\tparser={value => value.replace('%', '')}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleGetBonusFee}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.inputNum}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item style={{width: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 20 }}>售卖价格 (ether)*</label>\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"price\"\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={0}\n\t\t\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleGetPrice}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.inputNum}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item style={{ width: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 20 }}>最高分享次数 *</label>\n\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 14 }}>您希望每一个帮助您传播的用户最多能够分享多少次？</p>\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"shareTimes\"\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={0}\n\t\t\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleGetShareTimes}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.inputNum}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item style={{ width: \"100%\" }} >\n\t\t\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\n\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\n\t\t\t\t\t\t\t\t\t\t\t<TextArea\n\t\t\t\t\t\t\t\t\t\t\t\trows={6}\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"Description\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleGetDescription}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 50 }}>封面图片 *</label>\n\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 14 }}>请在下方区域上传您的封面图片 <br />\n\t\t\t\t\t\t\t\t\t\t封面文件支持这些格式：JPEG/JPG/PNG</p>\n\t\t\t\t\t\t\t\t\t<Dragger {...prop} style={{ width: '100%', minHeight: 200 }} id=\"Uploader\" accept=\".png, .jpg, .jpeg\" >\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-drag-icon\">\n\t\t\t\t\t\t\t\t\t\t\t<InboxOutlined />\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-hint\">\n\t\t\t\t\t\t\t\t\t\t\t支持单个文件的上传，支持多种类型文件的上传\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</Dragger>\n\n\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 50 }}>作品文件 *</label>\n\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 14 }}>请在下方区域上传您的作品文件 </p>\n\t\t\t\t\t\t\t\t\t<Dragger {...propFile} style={{ width: '100%', minHeight: 200 }} id=\"Uploader2\" >\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-drag-icon\">\n\t\t\t\t\t\t\t\t\t\t\t<InboxOutlined />\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-hint\">\n\t\t\t\t\t\t\t\t\t\t\t仅支持单个文件的上传，支持多种类型文件的上传\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</Dragger>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\tstartIcon={<CloudUploadIcon />}\n\t\t\t\t\t\t\t\t\tstyle={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\n\t\t\t\t\t\t\t\t\tonClick={this.submit}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t提交信息\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</ThemeProvider>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\t\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Publish);","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport { Helmet } from 'react-helmet';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport Typography from '@material-ui/core/Typography';\nimport TopBar from \"./TopBar\";\nimport Card from '@material-ui/core/Card';\nimport Paper from '@material-ui/core/Paper';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport WhatshotIcon from '@material-ui/icons/Whatshot';\nimport Web3 from 'web3';\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\nimport BigNumber from 'bignumber.js';\nimport AttachMoneyIcon from '@material-ui/icons/AttachMoney';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport {IconButton, Container} from \"@material-ui/core\";\nimport contract from './contract';\n// import { Typography, Paper, Container }from '@material-ui/core';\nimport axios from 'axios';\nimport web3 from './web3';\nimport LocalAtmIcon from '@material-ui/icons/LocalAtm';\nimport ReactLoading from 'react-loading';\nconst FileSaver = require('file-saver');\nvar CryptoJS = require(\"crypto-js\");\nconst sigUtil = require('ethereumjs-util');\nconst ethUtil = require('ethereumjs-util');\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\nconst styles = theme => ({\n  container: {\n    maxWidth: 1500,\n    // backgroundColor: '#2196f3'\n  },\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1370,\n    // backgroundColor: \"green\"\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  btnMain: {\n    marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 120,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  btnSecond: {\n    marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderWidth: 3,\n    borderColor: '#03A9F4',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 120,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardMedia: {\n    // paddingTop: '56.25%', // 16:9\n    paddingTop: '100%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: 10, maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n  cbutton: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n  },\n  dbutton: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n  },\n  imageStyle: {\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: 280,\n      height: 365, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      width: 290, \n      height: 385, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      width: 300, \n      height: 420, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      width: 300, \n      marginTop: 20, \n      marginBottom: 50 \n    },\n    [theme.breakpoints.up('xl')]: {\n      width: 300, \n      marginTop: 20, \n      marginBottom: 50 \n    },\n  },\n  imagePapaer: {\n\n    [theme.breakpoints.between('xs', 'sm')]: {\n      backgroundColor: '#EFEBE9', width: 330, height: 420, marginLeft: 25 \n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      backgroundColor: '#EFEBE9', width: 340, height: 440, marginLeft: 25 \n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      backgroundColor: '#EFEBE9', width: 350, height: 465, marginLeft: 25 \n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10 \n    },\n    [theme.breakpoints.up('xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10 \n    },\n  },\n  share: {\n    fontFamily: 'Teko',\n    marginBottom: '10%',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 14,\n      // width: '5%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 18,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 20,\n    },\n\n  }\n});\n\nclass NFTInfo extends Component{\n\n  gateway = 'https://gateway.pinata.cloud/ipfs/';\n  backend = 'http://192.168.0.64:3000';\n  ipfs_node = \"http://18.162.56.46:5001\"\n  state = {\n      Name: '',\n      Description: '',\n      BonusFee: 0,\n      Cover: '',\n      contract: null,\n      childrenNum: 0,\n      spark: false,\n      dataUrl: null,\n      account: null,\n      Profit: '',\n      issueId: 0,\n      fileType: \"\",\n      isEncrypt: false,\n      onLoading: false,\n      loadItem: true,\n  };\n\n  downloadIPFS = async (event) =>{\n    const Method = 'GET';\n    let obj = this;\n    let url = \"\";\n    let dataHash = this.state.dataUrl\n    this.setState({onLoading: true})\n    console.log(\"onload\" + this.state.onLoading)\n    this.finishDownload();\n  }\n\n  finishDownload = () => {\n    let obj = this;\n    let dataHash = this.state.dataUrl\n    if (this.state.isEncrypt) {\n      var cipher_config = {\n        method: 'get',\n        url: dataHash,\n        headers: {},\n      };\n      axios(cipher_config).then(async (response) => {\n        let ciphertext = response.data\n        let accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n        let account = accounts[0]\n        let signJson = {\n          account: account,\n          root_nft_id: this.props.match.params.id\n        }\n        signJson = JSON.stringify(signJson);\n        await this.signDataAndDecrypt(account, ciphertext);\n        obj.setState({ onLoading: false })\n      });\n    } else {\n      axios({\n        url: dataHash, //your url\n        method: 'GET',\n        responseType: 'blob', // important\n      }).then((response) => {\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        // text/plain application/pdf\n        let suffix = '.' + obj.state.fileType;\n        link.setAttribute(\"download\", this.state.Name +  suffix); //or any other extension\n        document.body.appendChild(link);\n        link.click();\n        obj.setState({ onLoading: false })\n        console.log('set close')\n      }).catch(error => {\n        obj.setState({ onLoading: false })\n        alert(\"下载失败：\" + error);\n      });\n    }\n\n    // this.setState({ onLoading: false })\n  }\n\n  constructor(props)  {\n    super(props);\n    let obj = this\n    if(!window.ethereum) {\n      alert(\"请先安装metamask\");\n      window.location.href = '/#/collections';\n      return;\n    }\n    // const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n    window.ethereum.request({ method: 'eth_chainId' }).then(chainId => {\n      if(chainId !== '0x4') {\n        alert(\"请切换至rinkeby network\");\n        window.location.href = '/#/collections';\n        return;\n      }\n    })\n    let web3 = new Web3(window.ethereum);\n    let nft = contract;\n    this.setState({contract: contract});\n    nft.methods.ownerOf(this.props.match.params.id).call().then(owner => {\n      window.ethereum.request({ method: 'eth_requestAccounts' }).then( accounts => {\n        const account = accounts[0];\n        obj.setState({account: account});\n        if(web3.utils.toChecksumAddress(account) !== owner) {\n          alert(\"这枚nft不属于你\");\n          window.location.href = '/#';\n        }\n      })\n        \n    })\n    nft.methods.getProfitByNFTId(this.props.match.params.id).call().then(res => {\n      this.setState({Profit: web3.utils.fromWei(res) + 'ETH'});\n    })\n    nft.methods.tokenURI(this.props.match.params.id).call().then(meta => {\n      let hash = meta.split('/');\n      nft.methods.getIssueIdByNFTId(this.props.match.params.id).call().then(issue => {\n        nft.methods.getRoyaltyFeeByIssueId(issue).call().then(royalty => {\n          var file_hash = hash[hash.length - 1]\n          // this.setState({ hash: hash[hash.length - 1] });\n          console.debug('meta here: ', file_hash)\n          var request_url = \"https://gateway.pinata.cloud/ipfs/\" + file_hash\n          axios({\n            method: 'get',\n            url: request_url,\n            timeout: 1000 * 5,\n          }).then(res => {\n            let data = res.data;\n            let bouns = 0;\n            let fileAddr = \"\";\n            let isEncrypt = false;\n            let fileType = bouns = data.attributes[2].value\n            for (let i = 0; i < data.attributes.length; i++) {\n              if (data.attributes[i].trait_type === \"Bonuse Percentage\") {\n                bouns = data.attributes[i].value;\n              }\n              if (data.attributes[i].trait_type === \"File Address\") {\n                fileAddr = data.attributes[i].value;\n              }\n              if (data.attributes[i].trait_type === \"Encrypted\") {\n                if(data.attributes[i].value === \"FALSE\") {\n                  isEncrypt = false\n                } else {\n                  isEncrypt = true\n                }\n              }\n            }\n            this.setState({ Name: data.name });\n            this.setState({ Description: data.description });\n            this.setState({ BonusFee: royalty });\n            this.setState({ Cover: data.image });\n            this.setState({ dataUrl: fileAddr });\n            this.setState({ isEncrypt: isEncrypt });\n            this.setState({ fileType: fileType ,loadItem: false,});\n          }).catch(error => {\n            this.setState({ Name: 'SparkNFT' });\n            this.setState({ Description: '暂时无法获取到该nft的相关描述' });\n            this.setState({ BonusFee: royalty });\n            this.setState({ Cover: 'https://via.placeholder.com/100x140.png?text=SparkNFT' });\n            this.setState({ dataUrl: 'fileAddr_PlaceHolder' ,loadItem: false,});\n          })\n        })\n      })\n      \n      \n      // axios.get(meta).then(res => {\n      //   let data = res.data;\n      //   let bouns = 0;\n      //   let fileAddr = \"\";\n      //   for(let i = 0; i < data.attributes.length; i++) {\n      //     if (data.attributes[i].trait_type === \"Bonuse Percentage\") {\n      //       bouns = data.attributes[i].value;\n      //     }\n      //     if(data.attributes[i].trait_type === \"File Address\") {\n      //       fileAddr = data.attributes[i].value;\n      //     }\n      //   }\n      //   this.setState({Name: data.name});\n      //   this.setState({Description: data.description});\n      //   this.setState({BonusFee: bouns});\n      //   this.setState({Cover: data.image});\n      //   this.setState({dataUrl: fileAddr});\n      // });\n    });\n\n    const leafUrl = this.backend + '/api/v1/nft/info?nft_id=' + this.props.match.params.id\n    axios.get(leafUrl).then(res => {\n      var children_num = res.data.children_count\n      this.setState({\n        childrenNum: children_num\n      })\n    }).catch(error => {\n      if (error.response === undefined) {\n        alert('服务器未响应叶子节点数量请求')\n        return;\n      }\n      if (error.response.status == 400 && error.response.data.message.includes(\"children not found\")) {\n        console.debug(\"no children\")\n      } else {\n        console.debug(leafUrl)\n        alert('获取nft子节点情况页面失败(' + error + ')')\n      }\n    })\n  }\n\n  claim = async () => {\n    this.setState({\n      onLoading: true\n    })\n    try{\n      await contract.methods.claimProfit(this.props.match.params.id).send({\n        from: this.state.account\n      });\n    } catch{\n      this.setState({\n        onLoading: false\n      })\n    }\n    \n    this.setState({\n      onLoading: false\n    })\n  }\n\n  signDataAndDecrypt = async (signer, ciphertext) => {\n    //event.preventDefault();\n      var JSONBody = {\n        \"account\": signer,\n        \"nft_id\": this.props.match.params.id\n      }\n      var json_str = JSON.stringify(JSONBody)\n      let sig\n      await web3.eth.personal.sign(json_str, signer).then((response) => {\n        sig = response\n      })\n      console.log(sig)\n      var payload = {\n        \"account\": signer,\n        \"nft_id\": this.props.match.params.id,\n        \"signature\": sig\n      }\n      console.log(sig)\n      var payload_str = JSON.stringify(payload)\n      console.log(payload_str)\n      var req_key_url = this.backend + \"/api/v1/key/claim\"\n      console.log(req_key_url)\n      axios.post(req_key_url, payload_str, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        console.log(res);\n        if(res.status == 200) {\n          let key = res.data.key;\n          let data = CryptoJS.AES.decrypt(ciphertext, key);\n          let plainText = data.toString(CryptoJS.enc.Utf8);\n          //console.log(plainText.length)\n          const wordArray = CryptoJS.enc.Hex.parse(plainText);\n          let BaText = this.wordArrayToByteArray(wordArray, wordArray.length);\n          var arrayBufferView = new Uint8Array(BaText);\n          var blob = new Blob( [ arrayBufferView ] );\n          let suffix = '.' + this.state.fileType;\n          FileSaver.saveAs(blob,this.state.Name + suffix);\n        } else {\n          var error_msg = res.data.message\n          alert(\"获取密钥失败  \" + error_msg)\n        }\n      }).catch(reason => {\n        console.log(reason);\n        //var error_msg = reason.data.message\n\t\t\t\talert(\"获取密钥失败(\" + reason + \")\")\n\n      })\n    }\n    wordToByteArray = (word, length) => {\n      var ba = [],\n        i,\n        xFF = 0xFF;\n      if (length > 0)\n        ba.push(word >>> 24);\n      if (length > 1)\n        ba.push((word >>> 16) & xFF);\n      if (length > 2)\n        ba.push((word >>> 8) & xFF);\n      if (length > 3)\n        ba.push(word & xFF);\n    \n      return ba;\n    }\n    \n    wordArrayToByteArray = (wordArray, length) => {\n      if (wordArray.hasOwnProperty(\"sigBytes\") && wordArray.hasOwnProperty(\"words\")) {\n        length = wordArray.sigBytes;\n        wordArray = wordArray.words;\n      }\n    \n      var result = [],\n        bytes,\n        i = 0;\n      while (length > 0) {\n        bytes = this.wordToByteArray(wordArray[i], Math.min(4, length));\n        length -= bytes.length;\n        result.push(bytes);\n        i++;\n      }\n      return [].concat.apply([], result);\n    }\n  \n  showLoading = () => {\n      if (this.state.onLoading) {\n        return (\n          <div>\n            <ReactLoading type={'bars'} color={'#2196f3'} height={200} width={200} />\n          </div>\n        );\n      }\n    }\n  spark = () => {\n    \n    if(this.state.spark) {\n      document.getElementById('isSpark').innerHTML = '点火—分享';\n    } else {\n      document.getElementById('isSpark').innerHTML = '隐藏';\n    }\n    this.setState({spark: !this.state.spark});\n  }\n  \n\n  render() {\n    const { classes } = this.props\n    const gateway = this.gateway\n    const sell_info = () => {\n      let url = window.location.host;\n      let toUrl = url + '/#/NFT/Spark/' + this.props.match.params.id;\n      let share = '分享复制链接：' + toUrl;\n      // this.state.onSale\n      if (this.state.spark) {\n        return (\n          <Grid container >\n            <Grid item xs>\n              <Typography color=\"inherit\" align=\"center\" noWrap className={classes.share} >\n                请将下方链接分享给买方，<br /> 买方会进入此链接来购买这个NFT <br />\n                {toUrl}\n                <CopyToClipboard text={toUrl}\n                  onCopy={() => this.setState({ copied: true })}>\n                  <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\n                    <FileCopyOutlinedIcon />\n                  </IconButton>\n                </CopyToClipboard>\n              </Typography>\n            </Grid>\n          </Grid>\n        );\n      }\n    }\n\n\n\n    if (this.state.onLoading) {\n      return (\n        <div>\n          <Helmet>\n            <title>SparkNFT | Publish</title>\n          </Helmet>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ marginLeft: '35%', marginTop: '10%' }}>\n              <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    } else {\n      return (\n\n        <div>\n          <Helmet>\n            <title>SparkNFT | INFO</title>\n          </Helmet>\n\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" className={classes.container}>\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"flex-start\">\n                <Grid>\n              <Button\n                startIcon={<ArrowBackIosOutlinedIcon style={{ fontSize: '2rem' }} />}\n                href='/#/collections'\n                style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\n              >\n                回到我的收藏馆\n              </Button>\n              </Grid>\n              <Grid xs={9}></Grid>\n              <Grid container  direction=\"row\" className={classes.cbutton}>\n              <Grid>\n                  <Button style={{ marginTop: 10,marginRight: 30, marginBottom: 20}} size=\"large\" variant=\"contained\" color=\"primary\"  className={classes.btnMain} startIcon={<LocalAtmIcon />} onClick={this.claim} >\n                    <Typography id=\"isSpark\" variant=\"button\" component=\"h3\" gutterBottom >\n                      <font size=\"3\" color='white'>\n                            领收益\n                      </font>\n                    </Typography>\n                  </Button>\n              </Grid>\n              {/* <Grid xs ={1}></Grid> */}\n              <Grid>\n                <Button style={{ marginTop: 10, marginBottom: 20}} size=\"large\" variant=\"outlined\" color=\"secondary\"  className={classes.btnSecond} startIcon={<AttachMoneyIcon />}  href={'/#/sellSingle/' +  this.props.match.params.id}  >\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                    \n                    <font size=\"3\">\n                    售卖\n                      </font>\n                  </Typography>\n                </Button>\n              </Grid>\n              </Grid>\n              </Grid>\n              <div className={classes.paper}>\n                {/* <Grid container direction=\"column\" justifyContent=\"center\" alignItems=\"center\"> */}\n                {this.state.loadItem ? (\n                  <Grid container className={classes.content} spacing={5}>\n                    <Grid item xs={4}>\n                      <Skeleton variant=\"rect\" width={300} height={500} style={{ width: 370, marginLeft: 50, marginBottom: 50 }}/>\n                    </Grid>\n                    <Grid item xs style={{ marginLeft: '5%' }}>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={200} height={30}/>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={400} height={70}/>\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={500} height={300} style={{ marginBottom: 50 }}/>\n\n                    </Grid>\n\n                  </Grid>\n                ) : (<Grid container   spacing= {5} className={classes.content}>\n                  {/* <Grid xs={2}></Grid> */}\n                  {/* <Grid xs={1}></Grid> */}\n                  <Grid    style={{ maxWidth: 200}}>\n                        <Paper className={classes.imagePapaer}>\n                          <img className={classes.imageStyle} src={this.state.Cover}></img>  \n                      </Paper>\n      \n                    <Grid>\n                      <font size=\"3\">\n                          目前收益:{this.state.Profit}\n                      </font>\n                    </Grid>\n                  </Grid>\n                  {/* <Grid xs={1}></Grid> */}\n                  <Grid xs={1}></Grid>\n                  <Grid   className={classes.content2} >\n                    <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                      #{this.props.match.params.id}\n                    </Typography>\n                    <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34, marginTop: '2%'}}>\n                      <b>{this.state.Name}</b>\n                    </Typography>\n                    <Typography align=\"left\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                      {this.state.Description}\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '100%', fontSize: 24 }}>\n                      分红比例: {this.state.BonusFee} %\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                      当前拥有的子节点数量: {this.state.childrenNum}\n                    </Typography>\n                    <Grid container direction=\"row\" className={classes.cbutton}>\n                    <Grid>\n                      <Button size=\"small\" variant=\"contained\"  color=\"primary\" target=\"_blank\" className={classes.btnMain} startIcon={<GetAppIcon />} onClick={this.downloadIPFS} >\n                        <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                          <font size=\"3\" color='white'>\n                            下载\n                          </font>\n                        </Typography>\n                      </Button>\n                      </Grid>\n                      <Grid xs ={1}></Grid>\n                      <Grid>\n                        <Button size=\"small\"  variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<WhatshotIcon />} onClick={this.spark} >\n                          <Typography id=\"isSpark\" variant=\"button\" component=\"h2\" gutterBottom >\n                            \n                            <font size=\"3\">\n                            点火分享\n                          </font>\n                          </Typography>\n                        </Button>\n                      </Grid>\n                      \n                    </Grid>\n                  </Grid>\n                  \n                  \n                </Grid>)}\n                <br /><br /><br /><br />\n              </div>\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"flex-start\">\n            <Grid xs={8}>\n              <div style={{marginTop: 0}}>\n                  {sell_info()}\n                  {this.showLoading()}\n              </div>\n            </Grid>\n          </Grid>\n              <br /><br />\n            </Container>\n          </ThemeProvider>\n        </div>\n      );\n    }\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(NFTInfo);","import React, { Component } from 'react';\nimport './App.css';\nimport {Button, Grid } from '@material-ui/core';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport { Helmet } from 'react-helmet';\nimport TopBar from './TopBar';\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, IconButton} from \"@material-ui/core\";\nimport { Typography, Paper, Container }from '@material-ui/core';\nimport axios from 'axios';\nimport MonetizationOnOutlinedIcon from '@material-ui/icons/MonetizationOnOutlined';\nimport { Input, InputNumber } from 'antd';\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport contract from './contract';\nimport web3 from './web3';\nimport ReactLoading from 'react-loading';\nimport Skeleton from '@material-ui/lab/Skeleton';\n\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\nconst styles = theme => ({\n  container: {\n    maxWidth: 1500,\n    // backgroundColor: '#2196f3'\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1500,\n  },\n  btnSell: {\n    margin: theme.spacing(1),\n    fontSize: 16,\n    borderRadius: 10,\n    borderWidth: 2,\n    borderColor: '#2196f3',\n    color: '#2196f3',\n    marginLeft: '10%',\n    width: 100\n  },\n  inputNum: {\n    height: 40,\n    borderRadius: 5,\n    width: 550,\n    fontSize: 20,\n  },\n  input: {\n    height: 40,\n    borderRadius: 5,\n  },\n  loader: {\n    textAlign: 'center'\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n  },\n  img: {\n    width: 300,\n    marginBottom: 50,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '40%'\n    },\n  },\n  imgPaper: {\n    width: 350,\n    marginBottom: 50,\n    backgroundColor: '#EFEBE9', \n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '40%'\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    textAlign: 'center',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n  share: {\n    fontFamily: 'Teko',\n    marginBottom: '10%',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 14,\n      // width: '5%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 18,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 20,\n    },\n    \n  }\n});\n\nclass SellSingle extends Component {\n\n  gateway = 'https://gateway.pinata.cloud/ipfs/'\n  backend = 'http://192.168.0.64:3000'\n  state = {\n    name: '',\n    bonusFee: 0,\n    coverURL: '',\n    description: '',\n    price: 0,\n    ipfsHashMeta: '',\n    shareTimes: 0,\n    open: false,\n    toAddress: '',\n    NFTId: '',\n    onSale: false,\n    copied: false,\n    onLoading: false,\n    owner: '',\n    currentAcc: '',\n    childrenNum: 0,\n    loadItem: true,\n  };\n\n  // https://gateway.pinata.cloud/ipfs/QmPsymsaqMZsiwLHXepXtEpYMq3xtnBLLbPgTEyybz1idQ\n  constructor(props){\n    super(props);\n    window.ethereum.request({ method: 'eth_chainId' }).then(chainId => {\n      if (chainId !== '0x4') {\n        alert(\"请切换至rinkeby network\");\n        window.location.href = '/#';\n        return;\n      }\n    })\n  }\n\n  async componentDidMount() {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    let obj = this\n    this.setState({\n      currentAcc: account\n    })\n    this.setState({\n      NFTId: this.props.match.params.NFTId\n    })\n    console.debug(this.state.NFTId)\n    const issueId = await contract.methods.getIssueIdByNFTId(this.state.NFTId).call()\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\n    await contract.methods.tokenURI(this.props.match.params.NFTId).call().then(metadata => {\n      let hash = metadata.split('/')\n      this.setState({ ipfsHashMeta: hash[hash.length - 1] })\n      var url = this.gateway + this.state.ipfsHashMeta\n      axios({\n        method: 'get',\n        url: url,\n        timeout: 1000 * 2,\n      }).then(res => {\n        let content = res.data;\n        let bonus = 0;\n        let encrypted;\n        for (let i = 0; i < content.attributes.length; i++) {\n          if (i === 0) {\n            bonus = content.attributes[i].value;\n            continue\n          }\n          if (i === 3) {\n            encrypted = content.attributes[i].value;\n            continue\n          }\n        }\n        obj.setState({\n          loadItem: false,\n          name: content.name,\n          description: content.description,\n          bonusFee: bonus,\n          coverURL: content.image\n        })\n      }).catch(error => {\n        var name_holder = 'SparkNFT#' + this.props.match.params.NFTId\n        obj.setState({\n          loadItem: false,\n          name: name_holder,\n          description: '暂时无法获取到该nft的相关描述',\n          bonusFee: royalty,\n          coverURL: 'https://via.placeholder.com/100x140.png?text=SparkNFT'\n        })\n        console.debug(error)\n      })\n    })\n\n    await contract.methods.ownerOf(this.props.match.params.NFTId).call().then(owner => {\n      this.setState({\n        owner: owner.toLowerCase()\n      })\n    })\n\n    await contract.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call().then(price => {\n      if (price == '0'){\n        this.setState({\n          onSale: false\n        })\n      }else {\n        this.setState({\n          onSale: true\n        })\n      }\n    })\n\n    const url = this.backend + '/api/v1/nft/info?nft_id=' + this.state.NFTId\n    axios.get(url).then(res => {\n      var children_num = res.data.children_count\n      obj.setState({\n        childrenNum: children_num\n      })\n    })\n      .catch(error => {\n        console.debug(error.message)\n        if (error.response === undefined) {\n          alert('服务器未响应,子节点数量获取失败')\n          return;\n        }\n        console.log(error.response);\n        if (error.response.status == 400 && error.response.data.message.includes(\"children not found\")) {\n          console.debug(\"no children\")\n        } else {\n          alert('获取nft子节点情况页面失败(' + error + ')')\n        }\n      })\n    \n  }\n\n  handleClickOpen = (e) => {\n    this.setState({\n      open: true,\n    })\n  }\n\n  handleClose = (e) => {\n    this.setState({\n      open: false,\n    })\n  }\n\n  handleGetPrice = (value) => {\n    this.setState({\n      price: value,\n    })\n  }\n\n  handleGetAddr = (e) => {\n    this.setState({\n      toAddress: e.target.value,\n    })\n  }\n\n  handleClickLink = (event) => {\n    var new_url = '/#/NFT/' + this.state.NFTId\n    window.open(new_url, '_self')\n  }\n\n  sell = async (e) => {\n    // TODO: call smart contract to approve nft \n    this.setState({\n      open: false,\n    })\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n\n    var price_eth = web3.utils.toWei(this.state.price.toString())\n    var obj = this\n    this.setState({\n      onLoading: true\n    })\n    contract.methods.determinePriceAndApprove(this.state.NFTId, price_eth, this.state.toAddress).send({\n      from: account\n    }).then(function (receipt) {\n      obj.setState({\n        onSale: true,\n        onLoading: false\n      })\n      alert(\"已经成功授权买方\");\n    });\n    \n  }\n\n  render() {\n    const { classes } = this.props\n    const sell_info = () => {\n      let url = window.location.host;\n      let toUrl = url + '/#/buySingle/' + this.state.NFTId\n      if (this.state.onSale) {\n        return (\n          <Grid container >\n            <Grid item xs>\n            <Typography color=\"inherit\" align=\"center\" noWrap className={classes.share} >\n                请将下方链接分享给买方，<br /> 买方会进入此链接来购买这个NFT <br />\n                {toUrl}\n                <CopyToClipboard text={toUrl}\n                  onCopy={() => this.setState({ copied: true })}>\n                  <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\n                    <FileCopyOutlinedIcon />\n                  </IconButton>\n                </CopyToClipboard>\n            </Typography>\n            </Grid>\n          </Grid>\n        );\n      }\n    }\n\n    const showSellBtn = () => {\n      if (this.state.currentAcc == this.state.owner){\n        return(\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            startIcon={<MonetizationOnOutlinedIcon style={{ fontSize: 22 }} />}\n            className={classes.btnSell}\n            onClick={this.handleClickOpen}\n          >\n            售卖\n          </Button>\n        );\n      }else{\n        return (\n          <Button\n            variant=\"outlined\"\n            startIcon={<MonetizationOnOutlinedIcon style={{ fontSize: 22 }} />}\n            className={classes.btnSell}\n            disabled\n          >\n            售卖\n          </Button>\n        );\n      }\n    }\n\n    // const showLoading = () => {\n    //   if (this.state.onLoading) {\n    //     return (\n    //       <div>\n    //         <ReactLoading type={'bars'} color={'#2196f3'} height={200} width={200} />\n    //       </div>\n    //     );\n    //   }\n    // }\n    if (this.state.onLoading) {\n      return (\n        <div>\n          <Helmet>\n            <title>SparkNFT | Publish</title>\n          </Helmet>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ marginLeft: '35%', marginTop: '10%' }}>\n              <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    }else {\n      return (\n        <div>\n          <Helmet>\n            <title>SparkNFT | Sell</title>\n          </Helmet>\n\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" className={classes.container}>\n              <Button\n                startIcon={<ArrowBackIosOutlinedIcon style={{ fontSize: 22 }} />}\n                onClick={this.handleClickLink}\n                style={{ marginTop: 50, marginBottom: 100, fontSize: 22 }}\n              >\n                返回\n              </Button>\n              <div className={classes.paper}>\n                {this.state.loadItem ? (\n                  <Grid container spacing={5} className={classes.content}>\n                    <Grid item xs={4}>\n                      <Skeleton variant=\"rect\" width={300} height={500} className={classes.img} />\n                    </Grid>\n                    <Grid item xs style={{ marginLeft: '5%', maxWidth: 500, minWidth: 350 }}>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={'70%'} height={30} />\n                      <Skeleton animation=\"wave\" variant=\"text\" width={'100%'} height={70} />\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={'100%'} height={300} style={{ marginBottom: 50 }} />\n                      {showSellBtn()}\n                    </Grid>\n\n                  </Grid>\n                ) : (\n                  <Grid container className={classes.content} spacing={5}>\n                    <Grid item xs={4} style={{ maxWidth: 600 }}>\n                      <Paper className={classes.imgPaper}>\n                        <img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\n                      </Paper>\n                    </Grid>\n                    <Grid item xs className={classes.content2}>\n                      <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                        #{this.state.NFTId}\n                      </Typography>\n                      <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 30, marginTop: '2%' }}>\n                        <b>{this.state.name}</b>\n                      </Typography>\n                      <Typography align=\"left\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                        {this.state.description}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '65%', fontSize: 20 }}>\n                        创作者分红比例: {this.state.bonusFee} %\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                        当前拥有的子节点数量: {this.state.childrenNum}\n                      </Typography>\n                      {showSellBtn()}\n                      <Dialog\n                        open={this.state.open}\n                        onClose={this.handleClose}\n                        aria-labelledby=\"form-dialog-title\"\n                      >\n                        <DialogTitle id=\"form-dialog-title\">填写售卖信息</DialogTitle>\n                        <DialogContent>\n                          <DialogContentText>\n                            请在下方区域填写你希望售卖的价格，以及售卖对象的钱包地址。\n                          </DialogContentText>\n                          <label style={{ fontSize: 14, marginBottom: 10 }}>售卖价格 *</label>\n                          <InputNumber\n                            defaultValue={0}\n                            min={0}\n                            onChange={this.handleGetPrice}\n                            className={classes.inputNum}\n                          />\n                          <label style={{ fontSize: 14, marginBottom: 10, marginTop: 10 }}>买方钱包地址 *</label>\n                          <Input\n                            placeholder=\"买方钱包地址\"\n                            allowClear\n                            id=\"pubName\"\n                            onChange={this.handleGetAddr}\n                            className={classes.input}\n                          />\n                        </DialogContent>\n                        <DialogActions>\n                          <Button onClick={this.handleClose} color=\"primary\">\n                            取消\n                          </Button>\n                          <Button variant=\"contained\" onClick={this.sell} color=\"primary\" >\n                            卖出\n                          </Button>\n                        </DialogActions>\n                      </Dialog>\n                    </Grid>\n                  </Grid>\n                )}\n              </div>\n              <div style={{ marginTop: 50 }}>\n                {sell_info()}\n              </div>\n            </Container>\n          </ThemeProvider>\n        </div>\n      );\n    }\n\n    \n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(SellSingle);\n","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport { Helmet } from 'react-helmet';\nimport TopBar from './TopBar';\nimport Typography from '@material-ui/core/Typography';\nimport axios from 'axios';\nimport Paper from '@material-ui/core/Paper';\nimport Container from '@material-ui/core/Container';\nimport MonetizationOnOutlinedIcon from '@material-ui/icons/MonetizationOnOutlined';\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\nimport contract from './contract';\nimport web3 from './web3';\nimport ReactLoading from 'react-loading';\nimport Skeleton from '@material-ui/lab/Skeleton';\n\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\nconst styles = theme => ({\n  container: {\n    maxWidth: 1500,\n    // backgroundColor: '#2196f3'\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1500,\n  },\n  btnSell: {\n    margin: theme.spacing(1),\n    fontSize: 16,\n    borderRadius: 10,\n    borderWidth: 2,\n    borderColor: '#2196f3',\n    color: '#2196f3',\n    marginLeft: '10%',\n    width: 100\n  },\n  btnDisable: {\n    margin: theme.spacing(1),\n    fontSize: 16,\n    borderRadius: 10,\n    borderWidth: 3,\n    borderColor: '#909497',\n    color: '#909497',\n    marginLeft: '10%',\n    width: 100\n  },\n  inputNum: {\n    height: 40,\n    borderRadius: 5,\n    width: 550,\n    fontSize: 20,\n  },\n  input: {\n    height: 40,\n    borderRadius: 5,\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n  },\n  img: {\n    width: 300,\n    marginBottom: 50,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '40%'\n    },\n  },\n  imgPaper: {\n    width: 350,\n    marginBottom: 50,\n    backgroundColor: '#EFEBE9',\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '40%'\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    textAlign: 'center',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n});\n\nclass BuySingle extends Component {\n  gateway = 'https://gateway.pinata.cloud/ipfs/'\n  backend = 'http://192.168.0.64:3000'\n  state = {\n    name: '',\n    bonusFee: 0,\n    coverURL: '',\n    description: '',\n    price: 0,\n    ipfsHashMeta: '',\n    open: false,\n    address: '',\n    NFTId: '',\n    onSale: false,\n    owner: '',\n    approvedAddr: '',\n    currentAcc: '',\n    onLoading: false,\n    childrenNum: 0,\n    loadItem: true,\n    encrypted: '未知'\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  async componentWillMount() {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    var obj = this\n    this.setState({\n      currentAcc: account\n    })\n    this.setState({\n      NFTId: this.props.match.params.NFTId\n    })\n    const issueId = await contract.methods.getIssueIdByNFTId(this.state.NFTId).call()\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\n    await contract.methods.tokenURI(this.props.match.params.NFTId).call().then(metadata => {\n      let hash = metadata.split('/')\n      this.setState({ ipfsHashMeta: hash[hash.length - 1] })\n      var url = this.gateway + this.state.ipfsHashMeta\n      axios({\n        method: 'get',\n        url: url,\n        timeout: 1000 * 3,\n      }).then(res => {\n        let content = res.data;\n        let bonus = 0;\n        let encrypted = '未知';\n\n        for (let i = 0; i < content.attributes.length; i++) {\n          if(i === 0){\n            bonus = content.attributes[i].value;\n            continue\n          }\n          if(i === 3){\n            if (content.attributes[i].value.toUpperCase() === 'TRUE'){\n              encrypted = '是';\n            }else{\n              encrypted = '否';\n            }\n            continue\n          }\n        }\n        obj.setState({\n          loadItem: false,\n          name: content.name,\n          description: content.description,\n          bonusFee: bonus,\n          coverURL: content.image,\n          encrypted: encrypted\n        })\n      }).catch(error => {\n        var name_holder = 'SparkNFT#' + this.props.match.params.NFTId\n        obj.setState({\n          loadItem: false,\n          name: name_holder,\n          description: '暂时无法获取到该nft的相关描述',\n          bonusFee: royalty,\n          coverURL: 'https://via.placeholder.com/100x140.png?text=SparkNFT'\n        })\n      })\n    })\n\n    await contract.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call().then(price => {\n      this.setState({\n        price: price/1000000000000000000\n      })\n    })\n    await contract.methods.ownerOf(this.props.match.params.NFTId).call().then(owner => {\n      this.setState({\n        owner: owner\n      })\n    })\n\n    await contract.methods.getApproved(this.props.match.params.NFTId).call().then(approved => {\n      this.setState({\n        approvedAddr: approved.toLowerCase()\n      })\n    })\n\n    const url = this.backend + '/api/v1/nft/info?nft_id=' + this.state.NFTId\n    axios.get(url).then(res => {\n      var children_num = res.data.children_count\n      obj.setState({\n        childrenNum: children_num\n      })\n    })\n      .catch(error => {\n        console.debug(error.message)\n        if (error.response === undefined) {\n          alert('服务器未响应,子节点数量获取失败')\n          return;\n        }\n        console.log(error.response);\n        if (error.response.status == 400 && error.response.data.message.includes(\"children not found\")) {\n          console.debug(\"no children\")\n        } else {\n          alert('获取nft子节点情况页面失败(' + error + ')')\n        }\n      })\n  }\n\n  handleBuy = async (e) => {\n\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n\n    var price_eth = web3.utils.toWei(this.state.price.toString())\n    var obj = this\n    this.setState({\n      onLoading: true\n    })\n    contract.methods.safeTransferFrom(this.state.owner, account, this.state.NFTId).send({\n      from: account,\n      value: price_eth\n    }).then(function (receipt) {\n      obj.setState({\n        onLoading: false\n      })\n      alert(\"交易已经上链\");\n    });\n  }\n\n  handleGetPrice = (value) => {\n    this.setState({\n      price: value,\n    })\n  }\n\n  handleGetAddr = (e) => {\n    this.setState({\n      address: e.target.value,\n    })\n  }\n\n\n\n  render() {\n    const { classes } = this.props\n    const buyButton = () => {\n      if (this.state.approvedAddr == this.state.currentAcc) {\n        return (\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            startIcon={<MonetizationOnOutlinedIcon style={{ fontSize: 22 }} />}\n            className={classes.btnSell}\n            onClick={this.handleBuy}\n          >\n            购买\n          </Button>\n        );\n      }else {\n        return (\n          <Button\n            variant=\"outlined\"\n            startIcon={<MonetizationOnOutlinedIcon style={{ fontSize: 22 }} />}\n            className={classes.btnDisable}\n            disabled\n          >\n            购买\n          </Button>\n        );\n      }\n    }\n\n    // const showLoading = () => {\n    //   if (this.state.onLoading) {\n    //     return (\n    //       <div>\n    //         <ReactLoading type={'bars'} color={'#2196f3'} height={200} width={200} />\n    //       </div>\n    //     );\n    //   }\n    // }\n\n    if (this.state.onLoading) {\n      return (\n        <div>\n          <Helmet>\n            <title>SparkNFT | Publish</title>\n          </Helmet>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ marginLeft: '35%', marginTop: '10%' }}>\n              <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <Helmet>\n            <title>SparkNFT | Sell</title>\n          </Helmet>\n\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" className={classes.container}>\n              <Button\n                startIcon={<ArrowBackIosOutlinedIcon style={{ fontSize: 22 }} />}\n                href='/'\n                style={{ marginTop: 50, marginBottom: 100, fontSize: 22 }}\n              >\n                回到首页\n              </Button>\n              <div className={classes.paper}>\n                {this.state.loadItem ? (\n                  <Grid container spacing={5} className={classes.content}>\n                    <Grid item xs={4}>\n                      <Skeleton variant=\"rect\" width={300} height={500} className={classes.img} />\n                    </Grid>\n                    <Grid item xs style={{ marginLeft: '5%', maxWidth: 500, minWidth: 350 }}>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={'70%'} height={30} />\n                      <Skeleton animation=\"wave\" variant=\"text\" width={'100%'} height={70} />\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={'100%'} height={300} style={{ marginBottom: 50 }} />\n                      {buyButton()}\n                    </Grid>\n                  </Grid>\n                ) : (\n                    <Grid container className={classes.content} spacing={5}>\n                    <Grid item xs={4} style={{ maxWidth: 600 }}>\n                      <Paper className={classes.imgPaper}>\n                        <img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\n                      </Paper>\n                    </Grid>\n                    <Grid item xs className={classes.content2}>\n                      <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                        #{this.state.NFTId}\n                      </Typography>\n                      <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34 }}>\n                        <b>{this.state.name}</b>\n                      </Typography>\n                      <Typography align=\"left\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                        {this.state.description}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '2%', maxWidth: '65%', fontSize: 20 }}>\n                        创作者分红比例: {this.state.bonusFee} %\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 18 }}>\n                        售价: {this.state.price} ETH\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '1%', maxWidth: '65%', fontSize: 12 }}>\n                        当前拥有者: {this.state.owner}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                        当前拥有的子节点数量: {this.state.childrenNum}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                        NFT作品是否加密: {this.state.encrypted}\n                      </Typography>\n                      {buyButton()}\n                    </Grid>\n                  </Grid>\n                )}\n              </div>\n            </Container>\n          </ThemeProvider>\n        </div>\n      );\n    }\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(BuySingle);\n","\nimport React, { Component} from 'react';\n\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Container from '@material-ui/core/Container';\nimport {  Helmet } from 'react-helmet';\nimport Typography from '@material-ui/core/Typography';\nimport GitHubIcon from '@material-ui/icons/GitHub';\n//import web3 from './web3';\n// import Web3 from 'web3';\nimport contract from './contract';\nimport TopBar from \"./TopBar\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport axios from 'axios';\n\nconst theme = createTheme({\n    palette: {\n      primary: {\n        main: '#FDFEFE',\n      },\n      secondary: {\n        main: '#2196f3',\n      }\n    },\n  });\n  \nconst styles = theme => ({\n\ticon: {\n\t  marginRight: theme.spacing(2),\n\t},\n    titleFont: {\n        fontFamily: 'Teko',\n      },\n\tbtn: {\n\t\tcolor: '#424949',\n\t\tborderWidth: 8,\n\t\tborderColor: '#e3f2fd',\n\t\tfontSize: 16,\n\t},\n\theroContent: {\n\t\tbackgroundColor: theme.palette.background.paper,\n\t\tpadding: theme.spacing(36, 0, 6),\n\t},\n\tcardGrid: {\n\t\tpaddingTop: theme.spacing(8),\n\t\tpaddingBottom: theme.spacing(8),\n\t},\n\tcard: {\n\t\theight: '100%',\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t},\n\tcardMedia: {\n\t\t// paddingTop: '56.25%', // 16:9\n\t\tpaddingTop: '100%', // 16:9\n\t},\n\tcardContent: {\n\t\tflexGrow: 2,\n\t},\n  paper: {\n      marginTop: theme.spacing(7),\n      textAlign: 'center'\n    },\n    container: {\n      maxWidth: '100%'\n    },\n    btnMain: {\n      marginTop: theme.spacing(3),\n      color: '#FFFFFF',\n      borderWidth: 2,\n      borderColor: '#e3f2fd',\n      fontSize: 16,\n      borderRadius: 25,\n      width: 150\n    },\n    btnSecond: {\n      marginTop: theme.spacing(3),\n      color: '#03A9F4',\n      borderWidth: 3,\n      borderColor: '#03A9F4',\n      fontSize: 16,\n      borderRadius: 25,\n      width: 150\n    },\n    title: {\n      fontFamily: 'Teko',\n      marginTop: '5%',\n      [theme.breakpoints.between('xs', 'sm')]: {\n        fontSize: 35,\n      },\n      [theme.breakpoints.between('sm', 'md')]: {\n        fontSize: 40,\n      },\n      [theme.breakpoints.between('md', 'lg')]: {\n        fontSize: 55,\n      },\n      [theme.breakpoints.between('lg', 'xl')]: {\n        fontSize: 90,\n      },\n      [theme.breakpoints.up('xl')]: {\n        fontSize: 110,\n      },\n    },\n    title2: {\n      fontFamily: 'Teko',\n      [theme.breakpoints.between('xs', 'sm')]: {\n        fontSize: 16,\n      },\n      [theme.breakpoints.between('sm', 'md')]: {\n        fontSize: 25,\n      },\n      [theme.breakpoints.between('md', 'lg')]: {\n        fontSize: 35,\n      },\n      [theme.breakpoints.between('lg', 'xl')]: {\n        fontSize: 45,\n      },\n      [theme.breakpoints.up('xl')]: {\n        fontSize: 55,\n      },\n    },\n});\n\nclass Collections extends Component {\n    gateway = 'https://gateway.pinata.cloud/ipfs/';\n    web3;\n    cards = [];\n    // constructor(props) {\n    //     super(props);\n        \n    //   }\n    state = {\n        isLogin: false,\n        user_address: null,\n        name: '',\n        viewable: false,\n        cards: [],\n        onloading: false,\n        SkeletoNumber: 0\n    };\n    getAccount = async () => {\n        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n        const account = accounts[0];\n        this.setState({\n            name : '22',\n          });\n        this.setState({ isLogin: true ,});\n         this.setState({ user_address: account ,});\n         //setUser(account);\n    }\n\n    loadNft = async () => {\n        if(!window.ethereum.isConnected()) {\n            alert(\"请先链接metamask\");\n            return;\n        }\n        const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n\n        if(chainId !== '0x4') {\n            alert(\"请切换至rinkeby网络\");\n            return;\n        }\n        document.getElementById('viewButton').innerHTML = '正在加载。。';\n        let nft = contract;\n        let cards = [];\n\n        let ids = await this.getNft(nft);\n\n        if(ids.length === 0) {\n          alert(\"暂无可展示NFTs\");\n          document.getElementById('viewButton').innerHTML = '查看我的收藏';\n          return;\n        } else {\n\n        }\n        let data = await this.getMetadata(nft, ids);\n\n        for(let i = 0; i < ids.length; i++) {\n            let element = {\n                id: ids[i],\n                title: data[i].name,\n                description: data[i].description,\n                bonusFee: data[i].attributes.value,\n                image: data[i].image,\n            }\n            cards.push(element);\n        }\n        document.getElementById('viewButton').innerHTML = '玩得尽兴！';\n        var reversed_cards = cards.reverse()\n        this.setState({viewable: true ,});\n      this.setState({ cards: reversed_cards ,});\n        this.setState({\n          onloading: false,\n          SkeletoNumber: 0\n        })\n    };\n\n\n    getMetadata = async (nft, id) => {\n      let metaDatas = [];\n      for(let i = 0; i < id.length; i++) {\n        let ipfs_link = await nft.methods.tokenURI(id[i]).call();\n        var ipfs_hash_arr = ipfs_link.split('/')\n        var ipfs_hash = ipfs_hash_arr[ipfs_hash_arr.length -1]\n        var meta = \"https://gateway.pinata.cloud/ipfs/\" + ipfs_hash\n        // console.debug(\"meta: \" + id[i] + \" \" + meta)\n        await axios({\n          method: 'get',\n          url: meta,\n          timeout: 1000 * 3,\n        }).then(res => {\n          console.log(\"meta: \", res.data)\n          metaDatas.push(res.data)\n        }).catch(error => {\n          console.log('time out')\n          console.debug(meta)\n          var name_holder = 'SparkNFT#' + id[i]\n          var placeholder = {\n            \"name\": name_holder,\n            \"description\": '暂时无法获取到该nft的相关描述',\n            \"image\": 'https://testnets.opensea.io/static/images/placeholder.png',\n            \"attributes\": [\n              {\n                \"display_type\": \"boost_percentage\",\n                \"trait_type\": \"Bonuse Percentage\",\n                \"value\": 0\n              },\n              {\n                \"trait_type\": \"File Address\",\n                \"value\": 'file_url'\n              }\n            ]\n          }\n          metaDatas.push(placeholder);\n        })\n      }\n      return metaDatas;\n    }\n\n    getNft = async(nft) => {\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n      const account = accounts[0];\n      \n      let sendOption = {\n        filter: {from: account},\n        fromBlock: \"9186438\",\n      }\n      let receiveOption = {\n        filter: {to: account},\n        fromBlock: \"9186438\",\n      }\n      let sendLog = await nft.getPastEvents(\"Transfer\", sendOption);\n      let receiveLog = await nft.getPastEvents(\"Transfer\", receiveOption);\n      let showId = [];\n      let balanceMap = new Map();\n      sendLog.map( (log) => {\n        let id = log.returnValues.tokenId;\n        showId.push(id);\n        if(typeof(balanceMap.get(id)) == 'undefined') {\n          balanceMap.set(id, -1);\n        }else {\n          balanceMap.set(id, balanceMap.get(id) - 1);\n        }\n      });\n      receiveLog.map( (log) => {\n        let id = log.returnValues.tokenId;\n        //console.log(log.returnValues.tokenId);\n        showId.push(id);\n        if(typeof(balanceMap.get(id)) == 'undefined') {\n          balanceMap.set(id, 1);\n        } else{\n          balanceMap.set(id, balanceMap.get(id) + 1);\n        }\n      });\n      \n      let viewMap = new Map();\n      let balanceId = [];\n      showId.map( (id) => {\n        //console.log(typeof(viewMap.get(id)) == 'undefined');\n        if(typeof(viewMap.get(id)) === 'undefined' || viewMap.get(id) === false ) {\n          if(balanceMap.get(id) > 0) {\n            balanceId.push(id);\n          }\n          viewMap.set(id, true);\n        }\n        \n      });\n\n      if(balanceId.length > 0) {\n        this.setState({\n          onloading: true,\n          SkeletoNumber: balanceId.length\n        })\n      }\n      return balanceId;\n  };\n\n    \n  renderDescription = (description) => {\n    if(description.length <= 150) {\n    \n      return (description);\n    } else {\n        let newDescription = description.substring(0,150) + \"..........\";\n        return (newDescription); \n    }\n}\n   \n    \n\n\trender(){\n        //const cards = [1, 2, 3, 4, 5, 6, 7, 8, 9,10,11];\n        const { classes } = this.props\n        // \n\n        let obj = this;\n        window.ethereum.on('chainChanged', handleChainChanged);\n\n        function handleChainChanged(_chainId) {\n        // We recommend reloading the page, unless you must do otherwise\n            window.location.reload();\n        }\n        \n        function showCard(card) {\n            let res = (\n                <Grid item xs={12} sm={6} md={4}>\n                  {\n                  card ?(<Card className={classes.card}>\n                    <CardMedia\n                        className={classes.cardMedia}\n                        image={card.image}\n                        title=\"Image title\" \n                      />\n                    <CardContent className={classes.cardContent}>\n                    <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                        <b>{card.title}</b>\n                    </Typography>\n                    <Typography>\n                        {obj.renderDescription(card.description)}\n                    </Typography>\n                    </CardContent>\n                    <CardActions>\n                        <Button size=\"small\" variant=\"contained\"  color=\"primary\" target=\"_blank\" href={'/#/NFT/' +  card.id} >\n                            <b>查看 </b>\n                        </Button>\n                        <Grid xs={3}></Grid>\n                        <Typography variant=\"body2\" gutterBottom>\n                        <b>NFT id: {card.id} </b>\n                        </Typography>\n                    </CardActions>\n                    </Card>):(\n                      <Card className={classes.card}>\n                        <Skeleton variant=\"rect\" style={{marginLeft:70,}} width={260} height={288} />\n                        <Skeleton width=\"60%\" style={{marginTop:40,}} height={33} />\n                        <Skeleton height={33}/>\n                        <Skeleton height={33}/>\n                        <Skeleton height={33}/>\n                      </Card>\n                    )\n                  }          \n                </Grid>\n            );\n            \n            return res;\n\n        }\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Helmet>\n\t\t\t\t\t<title>Publish Token | Collections</title>\n\t\t\t\t</Helmet>\n\t\t\t\n\t\t\t\t<ThemeProvider theme={theme}>\n                    <TopBar />\n                    <Container component=\"main\" className={classes.container}>\n            <div className={classes.paper}>\n              <Grid container justifyContent=\"center\">\n                <Grid item xs={10}>\n                  <Typography color=\"inherit\" noWrap className={classes.title}>\n                    <b>我的收藏馆</b>\n                  </Typography>\n                  <Typography color=\"inherit\" noWrap className={classes.title2}>\n                    <b>An ERC721 Token Trying to Solve Existing Publishing Dilemma</b>\n                  </Typography>\n                  <Grid container justifyContent=\"center\" spacing={5}>\n                    <Grid  >\n                      <Button size=\"large\" variant=\"contained\" color=\"secondary\" id='viewButton' className={classes.btnMain} onClick={this.loadNft}>\n                        <b>查看我的收藏</b>\n                      </Button>\n                    </Grid>\n                    {/* <Grid item xs={3} >\n                      <Button size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} href='/#/buy'>\n                        <b>去购买</b>\n                      </Button>\n                    </Grid> */}\n                  </Grid>\n                </Grid>\n              </Grid>\n            </div>\n          </Container>\n\t\t\t\t</ThemeProvider>\n\t\t\t\t<main>\n\t\t\t\t\t{<Container className={classes.cardGrid} maxWidth=\"md\">\n\t\t\t\t\t\t<Grid container spacing={4}>\n\t\t\t\t\t\t\t{\n                (this.state.onloading?Array.from(new Array(this.state.SkeletoNumber)):this.state.cards).map((card) => {\n                      return showCard(card);\n                  })\n              }\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Container>}\n\t\t\t\t</main>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Collections);","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport { Helmet } from 'react-helmet';\nimport Typography from '@material-ui/core/Typography';\nimport TopBar from \"./TopBar\";\nimport { Paper, Container, Link } from '@material-ui/core';\nimport axios from 'axios';\nimport contract from './contract';\nimport web3 from './web3';\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport ReactLoading from 'react-loading';\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\nconst styles = theme => ({\n    container: {\n        maxWidth: 1500,\n        // backgroundColor: '#2196f3'\n      },\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1370,\n    // backgroundColor: \"green\"\n  },\n  btnMain: {\n    marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 150,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  btnSecond: {\n    marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderWidth: 3,\n    borderColor: '#03A9F4',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 150,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardMedia: {\n    // paddingTop: '56.25%', // 16:9\n    paddingTop: '100%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  title: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 48,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 60,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 70,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 75,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 80,\n    },\n  },\n  title2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 45,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 55,\n    },\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: 10, maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n  cbutton: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n  },\n  imageStyle: {\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: 280,\n      height: 365, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      width: 290, \n      height: 385, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      width: 300, \n      height: 420, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      width: 300, \n      marginTop: 20, \n      marginBottom: 50 \n    },\n    [theme.breakpoints.up('xl')]: {\n      width: 300, \n      marginTop: 20, \n      marginBottom: 50 \n    },\n  },\n  imagePapaer: {\n\n    [theme.breakpoints.between('xs', 'sm')]: {\n      backgroundColor: '#EFEBE9', width: 330, height: 420, marginLeft: 10 \n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      backgroundColor: '#EFEBE9', width: 340, height: 440, marginLeft: 10 \n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      backgroundColor: '#EFEBE9', width: 350, height: 465, marginLeft: 10\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10 \n    },\n    [theme.breakpoints.up('xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10 \n    },\n  },\n});\n\n\n\nclass NFTSpark extends Component{\n\n  gateway = 'https://gateway.pinata.cloud/ipfs/';\n  backend = 'http://192.168.0.64:3000';\n  state = {\n      Name: '',\n      Description: '',\n      BonusFee: 0,\n      Cover: '',\n      contract: null,\n      price: '',\n      priceString: '',\n      Leaf: 0,\n      onLoading: false,\n      loadItem: true,\n      open: false,\n  };\n\n  constructor(props) {\n    super(props);\n    console.log(this.state.loadItem)\n    if (!window.ethereum) {\n      alert(\"请先安装metamask\");\n      //window.location.href = '/#/collections';\n      return;\n    }\n    if (!window.ethereum.isConnected()) {\n      window.ethereum.request({ method: 'eth_requestAccounts' })\n      //window.location.href = '/#/collections';\n    }\n    // const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n    window.ethereum.request({ method: 'eth_chainId' }).then(chainId => {\n      if (chainId !== '0x4') {\n        alert(\"请切换至rinkeby network\");\n        // window.location.href = '/#/collections';\n        return;\n      }\n    })\n    \n  }\n\n  async componentDidMount() {\n    let nft = contract;\n    let obj = this;\n    nft.methods.tokenURI(this.props.match.params.id).call().then(meta => {\n      let hash = meta.split('/');\n\n      this.setState({ hash: hash[hash.length - 1] });\n      axios.get(meta).then(res => {\n        let data = res.data;\n        console.log(data);\n        let bouns;\n        for (let i = 0; i < data.attributes.length; i++) {\n          if (data.attributes[i].trait_type === 'bonusFee') {\n            bouns = data.attributes[i].value;\n          }\n        }\n        this.setState({ Name: data.name });\n        this.setState({ Description: data.description });\n        this.setState({ BonusFee: bouns });\n        this.setState({ Cover: data.image });\n      });\n    });\n    nft.methods.getShillPriceByNFTId(this.props.match.params.id).call().then(price => {\n      this.setState({ price: price });\n      let etherPrice = web3.utils.fromWei(price, 'ether');\n      etherPrice += ' ETH';\n      this.setState({ priceString: etherPrice });\n    });\n\n\n    const leafUrl = this.backend + '/api/v1/nft/info?nft_id=' + this.props.match.params.id\n    axios.get(leafUrl).then(res => {\n      var children_num = res.data.children_count\n      if (res.data.suggest_next_nft === this.props.match.params.id) {\n        obj.setState({\n          childrenNum: children_num,\n          recommendNFT: res.data.suggest_next_nft,\n          showRecommend: false,\n        })\n      } else if (res.data.suggest_next_nft === '0') {\n        obj.setState({\n          childrenNum: children_num,\n          recommendNFT: res.data.suggest_next_nft,\n          showRecommend: false\n        })\n      } else {\n        obj.setState({\n          childrenNum: children_num,\n          recommendNFT: res.data.suggest_next_nft,\n          showRecommend: true\n        })\n      }\n      obj.setState({\n        loadItem: false\n      })\n    }).catch(error => {\n      if (error.response === undefined) {\n        alert('服务器未响应')\n        return;\n      }\n      console.log(error.response);\n      if (error.response.status === 400 && error.response.data.message.includes(\"children not found\")) {\n        console.debug(\"no children\")\n      } else {\n        alert('获取nft子节点情况页面失败(' + error + ')')\n      }\n      obj.setState({\n        loadItem: false\n      })\n    })\n    console.log(this.state.loadItem)\n  }\n\n  shill = async(event) => {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    let nft = contract;\n\n    this.setState({ onLoading: true });\n    const receipt = await nft.methods.acceptShill(this.props.match.params.id).send({\n      from: account,\n      value: this.state.price\n    })\n    alert('交易已上链')\n    this.setState({ \n      onLoading: false,\n      onSale: true\n    });\n  }\n  \n  loadLoadingState = () => {\n    this.setState({onloading: true});\n    \n  }\n\n  handleClickLink = (event) => {\n    var new_url = '/#/NFT/Spark/' + this.state.recommendNFT\n    window.open(new_url)\n  }\n\n  render() {\n    const { classes } = this.props\n    if (this.state.onLoading) {\n      return (\n        <div>\n          <Helmet>\n            <title>SparkNFT | Publish</title>\n          </Helmet>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ marginLeft: '35%', marginTop: '10%' }}>\n              <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <Helmet>\n            <title>SparkNFT | Spark</title>\n          </Helmet>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n          </ThemeProvider>\n          <main>\n\n            <Container component=\"main\" className={classes.container}>\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"flex-start\">\n                <Grid>\n                  <Button\n                    startIcon={<ArrowBackIosOutlinedIcon style={{ fontSize: '2rem' }} />}\n                    href='/#/collections'\n                    style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\n                  >\n                    回到我的收藏馆\n                  </Button>\n                </Grid>\n                <Grid xs={9}></Grid>\n              </Grid>\n\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"center\" xs={12}>\n                <Typography color=\"inherit\" noWrap className={classes.title}>\n                  🔥 NFT 🔥\n                </Typography>\n              </Grid>\n\n              <div className={classes.paper}>\n                {this.state.loadItem ? (\n                  <Grid container spacing= {5} className={classes.content}>\n                    <Grid item>\n                      <Skeleton variant=\"rect\" width={300} height={500} style={{ width: 370,marginLeft: 50, marginBottom: 50 }} />\n                    </Grid>\n                    <Grid item style={{ marginLeft: '5%' }}>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={200} height={30} />\n                      <Skeleton animation=\"wave\" variant=\"text\" width={400} height={70} />\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={500} height={300} style={{ marginBottom: 50 }} />\n\n                    </Grid>\n\n                  </Grid>\n                ) : (\n                    <Grid container  spacing= {5} className={classes.content}>\n                      {/* <Grid xs={2}></Grid> */}\n                      <Grid item style={{ maxWidth: 200 }}>\n                        <Paper className={classes.imagePapaer}>\n                          <img className={classes.imageStyle} src={this.state.Cover}></img>\n                        </Paper>\n                      </Grid>\n                      {/* <Grid xs={2}></Grid> */}\n                      <Grid xs={1}></Grid>\n                      <Grid item xs className={classes.content2} >\n                        <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                          #{this.props.match.params.id}\n                        </Typography>\n                        <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34, marginTop: '2%' }}>\n                          <b>{this.state.Name}</b>\n                        </Typography>\n                        <Typography align=\"left\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                          {this.state.Description}\n                        </Typography>\n                        <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '100%', fontSize: 24 }}>\n                          点火价格: {this.state.priceString}\n                        </Typography>\n                        <Grid container direction=\"row\"  className={classes.cbutton}>\n                          <Grid>\n                            <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"center\">\n                              <Grid xs={2}></Grid>\n                              {this.state.showRecommend ? (\n                                <Grid>\n                                  <Button size=\"large\" style={{ fontSize: '2rem' }}  variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} disabled>\n                                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                                      <font size=\"4\">🔥   </font >&nbsp;  <font size=\"3\">铸造  </font>  \n                                    </Typography>\n                                  </Button>\n                                </Grid>\n\n                              ) : (\n                                <Grid>\n                                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} onClick={this.shill}>\n                                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                                      <font size=\"4\">🔥   </font>&nbsp;  <font size=\"3\">铸造  </font>  \n                                    </Typography>\n                                  </Button>\n                                </Grid>\n                              )}\n                            </Grid>\n                          </Grid>\n                        </Grid>\n                      </Grid>\n\n                    </Grid>\n                ) }\n                {/* <Grid container direction=\"column\" justifyContent=\"center\" alignItems=\"center\"> */}\n                \n                <br /><br /><br /><br />\n                {this.state.showRecommend ? (\n                  <Grid>\n                    <Typography variant=\"h4\" gutterBottom >\n                      此NFT的子节点已经售完，我们给您推荐了其他还能购买的节点：\n                    </Typography>\n                    <Link onClick={this.handleClickLink} style={{ fontSize: 20, textDecoration: 'underline' }}>\n                      {window.location.host + '/#/NFT/Spark/' + this.state.recommendNFT}\n                    </Link>\n                  </Grid>\n                ) : (\n                  <div></div>\n                )}\n              </div>\n\n              <br /><br />\n            </Container>\n          </main>\n        </div>\n      );\n    }\n    }\n  \n}\n\nexport default withStyles(styles, { withTheme: true })(NFTSpark);","import books from './imgs/books.png';\nimport './App.css';\nimport { Helmet } from 'react-helmet';\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport TopBar from './TopBar';\n\nconst styles = theme => ({\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  titleFont: {\n    fontFamily: 'Teko',\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  btnMain: {\n    // marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    borderColor: '#e3f2fd',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  btnSecond: {\n    // marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderColor: '#03A9F4',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n      width: 95\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(7),\n    maxWidth: '150%',\n    \n  },\n\n  content: {\n    fontFamily: 'Teko',\n    marginTop: 20,\n    lineHeight: 1.5,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n    },\n  },\n\n  shouldKnow: {\n    fontFamily: 'Teko', \n    textAlign: 'center',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 40,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 40,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 60,\n    },\n  },\n  // container: {\n  //   maxWidth: 1000\n  // }\n});\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#FDFEFE',\n    },\n    secondary: {\n      main: '#2196f3',\n    }\n  },\n});\n\nclass IntroPublish extends Component {\n  render() {\n    const { classes } = this.props\n    return (\n      <div>\n        <Helmet>\n          <title>SparkNFT | Publish</title>\n        </Helmet>\n\n        <ThemeProvider theme={theme}>\n          <TopBar />\n          <Container component=\"main\" className={classes.container}>\n            <div className={classes.paper}>\n              <Typography color=\"inherit\" noWrap className={classes.shouldKnow}>\n                <b>发布须知</b>\n              </Typography>\n              <Typography variant=\"h4\" paragraph className={classes.content}>\n                在去发布您的作品之前，您需要了解以下信息，它们将有助于您了解完整的发布流程：\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>1.</b> 您的作品将被存储在IPFS（InterPlanetary File System）中，而存储地址将被记录在以太坊上，与您的NFT绑定在一起\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>2.</b> 您可以选择是将您的作品开源得保存在IPFS上，或者加密保存在IPFS上。针对加密的作品，只有持有您发行的NFT的读者才能访问。 <br />\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>3.</b> 如果您选择加密保存在IPFS上，您需要在将作品基本信息上传到链上后，再设置作品的地址。这个过程我们会引导您完成，请勿担心。 <br />\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>4.</b> 当您将作品发布在我们平台时，我们默认您会支持二次创作，处于您宣传网络中的读者有权将他们持有的NFT对应的地址替换为他们自己的二次创作作品。 <br />\n              </Typography>\n              <Grid container justifyContent=\"center\" style={{ fontFamily: 'Teko', marginTop: 70 }}>\n                <Grid item xs={4} >\n                  <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnMain} href='/#/encryptedPublish'>\n                    <b>加密发布</b>\n                  </Button>\n                </Grid>\n                <Grid item xs={3} >\n                  <Button size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} href='/#/publish'>\n                    <b>开源发布</b>\n                  </Button>\n                </Grid>\n              </Grid>\n            </div>\n          </Container>\n        </ThemeProvider>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(IntroPublish);","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport { blue } from '@material-ui/core/colors';\nimport { Helmet } from 'react-helmet';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport { Alert, message } from 'antd';\nimport { InboxOutlined } from '@ant-design/icons';\nimport Dragger from 'antd/lib/upload/Dragger';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport { Input, InputNumber } from 'antd';\nimport 'antd/dist/antd.css';\nimport TopBar from './TopBar';\nimport axios from 'axios';\nimport contract from './contract';\nimport web3 from './web3';\nimport ReactLoading from 'react-loading';\nimport Paper from '@material-ui/core/Paper';\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Link } from \"@material-ui/core\";\n\nconst {\n  pinata_api_key,\n  pinata_secret_api_key,\n} = require('./project.secret');\nconst FormData = require('form-data');\nconst bs58 = require('bs58');\nvar CryptoJS = require(\"crypto-js\");\n\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\n\nconst styles = theme => ({\n  main: {\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: '60%'\n    },\n    [theme.breakpoints.up('sm')]: {\n      width: 500\n    },\n  },\n  titleCon: {\n    marginTop: 50,\n    fontFamily: 'Ubuntu',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 30\n    },\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 40\n    },\n  },\n  titlePub: {\n    marginTop: \"3%\",\n    fontFamily: 'Ubuntu',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 30\n    },\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 40\n    },\n  },\n  paperImg: {\n\n    backgroundColor: '#EFEBE9',\n    width: 330,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: '5%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '30%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '30%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '40%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '45%',\n      marginTop: 30,\n    },\n  },\n  btnPub: {\n    margin: theme.spacing(1),\n    borderRadius: 25,\n    color: '#FFFFFF',\n    backgroundColor: '#2196f3',\n    marginBottom: 20,\n    marginTop: 40,\n    height: 45,\n    minWidth: 200,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: '50%',\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 16,\n      width: '30%',\n    },\n    [theme.breakpoints.up('md')]: {\n      fontSize: 16,\n      width: '30%',\n    },\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: blue[500],\n    width: 60,\n    height: 60\n  },\n  form: {\n    width: '150%',\n    marginTop: theme.spacing(7),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  fileBtn: {\n    padding: '10px 30px 10px 30px',\n    background: '#66C1E4',\n    border: 'none',\n    color: '#FFF',\n    boxShadow: '1px 1px 1px #4C6E91',\n  },\n  button: {\n    margin: theme.spacing(1),\n    fontSize: 20,\n    borderRadius: 25,\n    color: '#FFFFFF',\n    backgroundColor: '#2196f3'\n  },\n  input: {\n    height: 40,\n    borderRadius: 5,\n  },\n  inputNum: {\n    height: 40,\n    borderRadius: 5,\n    width: '100%',\n    fontSize: 20,\n  }\n});\n\n\nclass EncryptedPublish extends Component {\n  backend = 'http://192.168.0.64:3000'\n  state = {\n    name: '',\n    bonusFee: 0,\n    price: 0,\n    buffer: null,\n    file: null,\n    ipfsHashCover: '',\n    ipfsMeta: '',\n    fileType: '',\n    fileIpfs: '',\n    description: '',\n    shareTimes: 0,\n    onLoading: false,\n    rootNFTId: '',\n    issueId: '',\n    allowSubmitPDF: false,\n    usedAcc: '',\n    sig: '',\n    finished: false,\n    open: false,\n    coverURL: '',\n    jumped: false,\n  };\n\n  async componentDidMount() {\n    if (!window.ethereum) {\n      alert(\"请先安装metamask\");\n      window.location.href = '/#/introPublish';\n      return;\n    }\n    // if (!window.ethereum.isConnected()) {\n    //   alert(\"请先链接metamask\");\n    //   window.location.href = '/#/introPublish';\n    //   return;\n    // }\n    // const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n    window.ethereum.request({ method: 'eth_chainId' }).then(chainId => {\n      if (chainId !== '0x4') {\n        alert(\"请切换至rinkeby network\");\n        window.location.href = '/#/introPublish';\n        return;\n      }\n    })\n\n\n    \n  }\n\n  handleGetPubName = (event) => {\n    this.setState({\n      name: event.target.value,\n    })\n  }\n\n  handleGetBonusFee = (value) => {\n    this.setState({\n      bonusFee: value,\n    })\n  }\n\n  handleGetPrice = (value) => {\n    this.setState({\n      price: value,\n    })\n  }\n\n  handleGetShareTimes = (value) => {\n    this.setState({\n      shareTimes: value,\n    })\n  }\n\n  handleGetDescription = (e) => {\n    this.setState({\n      description: e.target.value,\n    })\n  }\n\n  handleGetNFTId = (value) => {\n    this.setState({\n      rootNFTId: String(value),\n    })\n  }\n\n  handleClose = (e) => {\n    this.setState({\n      open: false,\n    })\n  }\n\n  handleClickOpen = (e) => {\n    this.setState({\n      open: true,\n    })\n  }\n\n  jump = async (event) => {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    this.setState({\n      usedAcc: account\n    })\n    \n    const owner = await contract.methods.ownerOf(this.state.rootNFTId).call()\n    var issueId = await contract.methods.getIssueIdByNFTId(this.state.rootNFTId).call()\n    \n    var bonus = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\n    \n    if (account == owner.toLowerCase()) {\n      this.setState({\n        onLoading: false,\n        allowSubmitPDF: true,\n        jumped: true,\n        bonusFee: bonus\n      })\n    } else {\n      alert('您并不是此NFT的持有者')\n    }\n  }\n\n  submit = async (event) => {\n    /*TODO: call smart contract publish() and wait for publish success event\n     * then call backend to get a secret key. Then encrypt the pdf file and upload it to IPFS\n     * Finally, form a new metadata json file and send its ipfs hash to backend and publish it\n    */\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    this.setState({\n      usedAcc: account\n    })\n    if (this.state.price === 0 || this.state.bonusFee === 0 || this.state.shareTimes === 0 ) {\n      alert(\"你有信息尚未填写\")\n    } else {\n\n      this.setState({\n        onLoading: true\n      })\n      let obj = this\n      var price_eth = web3.utils.toWei(this.state.price.toString())\n      var ipfsToContract = '0x0000000000000000000000000000000000000000000000000000000000000000'\n      contract.methods.publish(price_eth, this.state.bonusFee, this.state.shareTimes, ipfsToContract).send({\n        from: this.state.usedAcc\n      }).then(function (receipt) {\n        //55834574849\n        console.log(receipt)\n        var publish_event = receipt.events.Publish\n        var returned_values = publish_event.returnValues\n        var root_nft_id = String(returned_values.rootNFTId)\n        console.debug(typeof root_nft_id)\n        var issue_id = returned_values.issue_id\n        obj.setState({\n          onLoading: false,\n          rootNFTId: root_nft_id,\n          issueId: issue_id,\n          allowSubmitPDF: true\n        })\n        alert(\"已经成功发布作品\");\n      });\n\n    }\n    \n  }\n\n  checkDetail = async (event) => {\n    var new_url = '/#/NFT/' + this.state.rootNFTId\n    window.open(new_url, '_self')\n  }\n\n  submitWork = async () => {\n    if (this.state.ipfsHashCover === '' || this.state.fileIpfs === '' ) {\n      alert(\"你有文件尚未填写\")\n    } else {\n      \n      var img_url = 'https://gateway.pinata.cloud/ipfs/' + this.state.ipfsHashCover\n      this.setState({\n        coverURL: img_url\n      })\n      console.debug(\"coverURL: \", this.state.coverURL)\n      var trimmed_des = this.state.description.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \" \");\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n      const account = accounts[0];\n      if (account !== this.state.usedAcc){\n        alert('账户发生变化，请切换回原账户')\n        return\n      }\n      var file_url = 'https://gateway.pinata.cloud/ipfs/' + this.state.fileIpfs\n      var JSONBody = {\n        \"name\": this.state.name,\n        \"description\": trimmed_des,\n        \"image\": this.state.coverURL,\n        \"attributes\": [\n          {\n            \"display_type\": \"boost_percentage\",\n            \"trait_type\": \"Bonuse Percentage\",\n            \"value\": this.state.bonusFee\n          },\n          {\n            \"trait_type\": \"File Address\",\n            \"value\": file_url\n          },\n          {\n            \"value\": this.state.fileType\n          },\n          {\n            \"trait_type\": \"Encrypted\",\n            \"value\": \"TRUE\"\n          }\n        ]\n      }\n      console.debug(JSONBody)\n      const url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`\n      let obj = this\n      this.setState({\n        onLoading: true\n      })\n      axios.post(url, JSONBody, {\n        headers: {\n          pinata_api_key: pinata_api_key,\n          pinata_secret_api_key: pinata_secret_api_key\n        },\n      })\n        .then(function (response) {\n          console.debug(\"metadata: \", response.data.IpfsHash)\n          const bytes = bs58.decode(response.data.IpfsHash)\n          const bytesToContract = bytes.toString('hex').substring(4,);\n          console.log(bytesToContract)\n          console.log(response.data.IpfsHash)\n          obj.setState({\n            ipfsMeta: bytesToContract\n          })\n\n          var ipfsToContract = '0x' + bytesToContract\n\n          contract.methods.setURI(obj.state.rootNFTId, ipfsToContract).send({\n            from: obj.state.usedAcc\n          }).then(receipt => {\n            console.debug(receipt.events.SetURI)\n            alert(\"已经成功发布作品\");\n            obj.setState({\n              allowSubmitPDF: false,\n              finished: true,\n              onLoading: false\n            })\n          })\n        \n        }).catch((error) => {\n          alert(`似乎遇到了些小问题： ${ error }`);\n        })\n    }\n  }\n\n  render() {\n    const { classes } = this.props\n    let obj = this\n    const { TextArea } = Input;\n    const prop = {\n      name: 'file',\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n      headers: {\n        pinata_api_key: pinata_api_key,\n        pinata_secret_api_key: pinata_secret_api_key\n      },\n      data: this.state.buffer,\n      beforeUpload: file => {\n        return new Promise((resolve, reject) => {\n          try {\n            const reader = new FileReader()\n            reader.readAsArrayBuffer(file)\n            reader.onload = (e) => {\n              var b = e.target.result\n              let params = new FormData()\n              params.append('file', b)\n              this.setState({\n                buffer: params\n              })\n            }\n            resolve()\n          } catch (e) {\n            message.error('Read file error')\n            reject()\n          }\n        })\n      },\n      async onChange(info) {\n        const { status } = info.file;\n        // text/plain image/jpeg application/pdf\n        if (status === 'done') {\n          message.success(`${info.file.name} file uploaded successfully.`);\n          obj.setState({\n            ipfsHashCover: info.file.response.IpfsHash\n          })\n\n        } else if (status === 'error') {\n          message.error(`${info.file.name} file upload failed.`);\n        }\n      },\n      onDrop(e) {\n        message.error(`Only image file supported`);\n        console.log('Dropped files', e.dataTransfer.files);\n      },\n    };\n\n    const propFile = {\n      name: 'file',\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n      headers: {\n        pinata_api_key: pinata_api_key,\n        pinata_secret_api_key: pinata_secret_api_key\n      },\n      beforeUpload: file => {\n        return new Promise(async (resolve, reject) => {\n          try {\n            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n            const signer = accounts[0];\n            var message = {\n              account: signer,\n              nft_id: obj.state.rootNFTId\n            };\n            const sig = await web3.eth.personal.sign(JSON.stringify(message), signer)\n            console.debug(sig)\n            var payload = {\n              \"nft_id\": obj.state.rootNFTId,\n              \"account\": signer,\n              \"signature\": sig\n            }\n            var payload_str = JSON.stringify(payload)\n            console.log(payload_str);\n            var req_key_url = this.backend + '/api/v1/key/claim'\n            try {\n              const res = await axios.post(req_key_url, payload_str, {\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              })\n              var secret_key = res.data.key//res.data.key\n              console.debug(secret_key)\n              // if (file.type === 'text/plain') {\n              const reader = new FileReader()\n              reader.readAsArrayBuffer(file)\n              reader.onload = (e) => {\n                var b = e.target.result\n                var wordArray = CryptoJS.lib.WordArray.create(b);\n                const str = CryptoJS.enc.Hex.stringify(wordArray);\n                var cipher_text = CryptoJS.TripleDES.encrypt(str, secret_key).toString();\n                var myblob = new Blob([cipher_text]);\n                resolve(myblob)\n              }\n              \n            } catch (error) {\n              if (error.response.status == 400) {\n                if (error.response.data.message.includes(\"signature invalid\")) {\n                  alert(\"您的签名有误，请查看签名账号是否正确\")\n                } else if (error.response.data.message.includes(\"param invalid\")) {\n                  alert(\"参数错误\")\n                } else if (error.response.data.message.includes(\"not owned\")) {\n                  alert(\"您并不拥有此nft\")\n                } else if (error.response.data.message.includes(\"not found\")) {\n                  alert(\"此nft还未生成\")\n                } \n              } else {\n                alert('请求文件加密密钥失败')\n              }\n            }\n\n\n          } catch (e) {\n            console.log(e)\n            message.error('Read file error')\n            reject()\n          }\n        })\n      },\n      onChange(info) {\n        const { status } = info.file;\n        if (status === 'done') {\n          var file_type = info.file.name.split('\\.')\n          var file_suffix = file_type[file_type.length - 1]\n          obj.setState({\n            fileIpfs: info.file.response.IpfsHash,\n            fileType: file_suffix\n          })\n          console.debug(\"encrypted file hash: \", info.file.response.IpfsHash)\n          message.success(`${info.file.name} file uploaded successfully.`);\n        }\n\n      },\n      onDrop(e) {\n        console.log('Dropped files', e.dataTransfer.files);\n      },\n    };\n\n    if (this.state.onLoading) {\n      return (\n        <div>\n          <Helmet>\n            <title>SparkNFT | Publish</title>\n          </Helmet>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ marginLeft: '35%', marginTop: '10%' }}>\n              <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    } else if (this.state.allowSubmitPDF) {\n      \n      return (\n        <div>\n          <Helmet>\n            <title>SparkNFT | Publish</title>\n          </Helmet>\n          <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\n           \n            <div className={classes.paper}>\n              <Typography className={classes.titlePub}>\n                <b>上传作品文件</b>\n              </Typography>\n              <form className={classes.form} noValidate>\n                {this.state.jumped ? (\n                  <div>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\n                      <TextArea\n                        rows={4}\n                        id=\"Description\"\n                        onChange={this.handleGetDescription}\n                      />\n                    </Grid>\n                  </div>\n                ) : (\n                  <div>\n\n                  </div>\n                )}\n                <label style={{ fontSize: 18, marginTop: 50 }}>封面图片 *</label>\n                <p style={{ fontSize: 12 }}>请在下方区域上传您的封面图片 <br />\n                  封面文件支持这些格式：JPEG/JPG/PNG</p>\n                <Dragger {...prop} style={{ width: '100%', minHeight: 100 }} id=\"Uploader\" accept=\".png, .jpg, .jpeg\" >\n                  <p className=\"ant-upload-drag-icon\">\n                    <InboxOutlined />\n                  </p>\n                  <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n                  <p className=\"ant-upload-hint\">\n                    支持单个文件的上传，支持多种类型文件的上传\n                  </p>\n                </Dragger>\n\n                <label style={{ fontSize: 18, marginTop: 50 }}>作品文件 *</label>\n                <p style={{ fontSize: 12 }}>请在下方区域上传您的作品文件 </p>\n                <Dragger {...propFile} style={{ width: '100%', minHeight: 100 }} id=\"Uploader2\">\n                  <p className=\"ant-upload-drag-icon\">\n                    <InboxOutlined />\n                  </p>\n                  <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n                  <p className=\"ant-upload-hint\">\n                    支持单个文件的上传和多个文件的上传，支持多种类型文件的上传\n                  </p>\n                </Dragger>\n                <div style={{textAlign: 'center'}}>\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<CloudUploadIcon />}\n                    className={classes.btnPub}\n                    onClick={this.submitWork}\n                  >\n                    发布作品\n                  </Button>\n                </div>\n              </form>\n            </div>\n          </Container>\n          \n        </div>\n      );\n\n    } else if (this.state.finished) {\n      return (\n        <div>\n          <Helmet>\n            <title>SparkNFT | Publish</title>\n          </Helmet>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ textAlign: 'center' }}>\n              <Typography className={classes.titleCon}>\n                <b> 🎉 恭喜您发布成功</b>\n              </Typography>\n\n              <Paper className={classes.paperImg}>\n                <img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\n              </Paper>\n              <Typography variant=\"h4\" style={{ marginTop: 20, fontFamily: 'Ubuntu' }}>\n                <b>您获得的根结点NFT是： #{this.state.rootNFTId}</b>\n              </Typography>\n\n              <Button\n                variant=\"contained\"\n                className={classes.button}\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\n                onClick={this.checkDetail}\n              >\n                查看详情\n              </Button>\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <Helmet>\n            <title>SparkNFT | Publish</title>\n          </Helmet>\n\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\n              <div className={classes.paper}>\n                <Typography className={classes.titlePub}>\n                  <b>发布作品信息</b>\n                </Typography>\n                <form className={classes.form} noValidate>\n                  <Grid container spacing={2}>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\n                      <Input\n                        placeholder=\"作品名称\"\n                        allowClear\n                        id=\"pubName\"\n                        onChange={this.handleGetPubName}\n                        value={this.state.name}\n                        className={classes.input}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>收益比例 *</label>\n                      <p style={{ fontSize: 14 }}>当您的作品被成功分享时，您希望从分享价格中获得多少比例的收益</p>\n                      <InputNumber\n                        id=\"bonusFee\"\n                        defaultValue={0}\n                        min={0}\n                        max={100}\n                        formatter={value => `${value}%`}\n                        parser={value => value.replace('%', '')}\n                        onChange={this.handleGetBonusFee}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>售卖价格 (ether)*</label>\n                      <InputNumber\n                        id=\"price\"\n                        defaultValue={0}\n                        min={0}\n                        onChange={this.handleGetPrice}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>最高分享次数 *</label>\n                      <p style={{ fontSize: 14 }}>您希望每一个帮助您传播的用户最多能够分享多少次？</p>\n                      <InputNumber\n                        id=\"shareTimes\"\n                        defaultValue={0}\n                        min={0}\n                        onChange={this.handleGetShareTimes}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\n                      <TextArea\n                        rows={4}\n                        id=\"Description\"\n                        onChange={this.handleGetDescription}\n                      />\n                    </Grid>\n                  </Grid>\n                </form>\n                <Grid container alignItems=\"center\" spacing={4} style={{ marginTop: 20, marginBottom: 50}}>\n                  <Grid item xs style={{ textAlign: 'center' }}>\n                    <Button\n                      variant=\"contained\"\n                      className={classes.button}\n                      startIcon={<CloudUploadIcon />}\n                      style={{ width: 200, height: 50, marginBottom: 20, marginTop: 20 }}\n                      onClick={this.submit}\n                    >\n                      提交信息\n                    </Button>\n                  </Grid>\n                  <Grid item xs style={{textAlign: 'center'}}>\n                    <Link onClick={this.handleClickOpen} style={{ fontSize: 10, textDecoration: 'underline'}}>\n                      已经上传过基本信息？\n                    </Link>\n                  </Grid>\n                </Grid>\n                <Dialog\n                  open={this.state.open}\n                  onClose={this.handleClose}\n                  aria-labelledby=\"form-dialog-title\"\n                >\n                  <DialogTitle id=\"form-dialog-title\">填写 NFT ID</DialogTitle>\n                  <DialogContent>\n                    <DialogContentText>\n                      请在下方区域填写您要绑定内容的 NFT ID\n                    </DialogContentText>\n                    <label style={{ fontSize: 14, marginBottom: 10 }}>NFT ID *</label>\n                    <InputNumber\n                      defaultValue={0}\n                      min={0}\n                      onChange={this.handleGetNFTId}\n                    />\n                  </DialogContent>\n                  <DialogActions>\n                    <Button onClick={this.handleClose} color=\"primary\">\n                      取消\n                    </Button>\n                    <Button variant=\"contained\" onClick={this.jump} color=\"primary\" >\n                      去上传作品\n                    </Button>\n                  </DialogActions>\n                </Dialog>\n              </div>\n            </Container>\n          </ThemeProvider>\n        </div>\n      );\n    }\n\n\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(EncryptedPublish);","import React from 'react';\nimport {HashRouter, Route, Switch} from 'react-router-dom';\n\nimport App from './App';\nimport Publish from './Publish';\nimport NFTInfo from './NFTInfo';\nimport SellSingle from './SellSingle';\nimport BuySingle from './BuySingle';\nimport Collections from './Collections';\nimport Spark from './NFTSpark';\nimport IntroPublish from './IntroPublish';\nimport EncryptedPublish from './EncryptedPublish';\n\nconst BasicRoute = () => (\n    <HashRouter basename=\"/SparkLink\">\n        <Switch>\n            {/* <Route exact path=\"/\" component={App}/>\n            <Route path=\"/SparkLink/introPublish\" component={IntroPublish} />\n            <Route path=\"/SparkLink/publish\" component={Publish}/>\n            <Route path=\"/SparkLink/encryptedPublish\" component={EncryptedPublish} />\n            <Route path=\"/SparkLink/sellSingle/:NFTId\" component={SellSingle} />\n            <Route path=\"/SparkLink/buySingle/:NFTId\" component={BuySingle} />\n            <Route path=\"/SparkLink/collections\" component={Collections}/>\n            <Route path=\"/SparkLink/NFT/:id\" component={NFTInfo} />\n            <Route path=\"/SparkLink/NFT/spark/:id\" component={Spark} /> */}\n        </Switch>\n    </HashRouter>\n);\n\n\nexport default BasicRoute;","// import React from 'react';\n// import ReactDOM from 'react-dom';\n// import './index.css';\n// import App from './App';\n// import reportWebVitals from './reportWebVitals';\n\n// ReactDOM.render(\n//   <React.StrictMode>\n//     <App />\n//   </React.StrictMode>,\n//   document.getElementById('root')\n// );\n\n// // If you want to start measuring performance in your app, pass a function\n// // to log results (for example: reportWebVitals(console.log))\n// // or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap/dist/css/bootstrap-theme.css';\nimport Router from './Router';\n\nReactDOM.render(\n  <Router/>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}