(this["webpackJsonppublish-token"]=this["webpackJsonppublish-token"]||[]).push([[0],{371:function(e,t){e.exports={pinata_api_key:"3da01378391b7f0b7be4",pinata_secret_api_key:"b9f43c3c12fb3956453db6a8b8594b603af6ef74f8eeac0eb83934a38bea4c03"}},446:function(e,t,n){},460:function(e,t){},469:function(e,t){},487:function(e,t){},489:function(e,t){},508:function(e,t){},509:function(e,t){},578:function(e,t){},580:function(e,t){},612:function(e,t){},614:function(e,t){},615:function(e,t){},620:function(e,t){},622:function(e,t){},628:function(e,t){},630:function(e,t){},643:function(e,t){},655:function(e,t){},658:function(e,t){},663:function(e,t){},671:function(e,t){},766:function(e,t){},82:function(e,t,n){},962:function(e,t,n){"use strict";n.r(t);var a,i=n(0),r=n(37),s=n.n(r),o=(n(446),n(12)),c=n(15),l=n(20),d=n(21),p=n(3),b=n.p+"static/media/books.6e483aa8.png",u=(n(82),n(39)),m=n(993),h=n(992),j=n(425),f=n(994),x=n(23),g=n(266),O=n(995),y=n(9),w=n.n(y),k=n(28),T=n(990),S=n(260),v=n.n(S),F=n(262),N=n.n(F),I=n(161),C=n.n(I);try{a=new C.a(window.ethereum)}catch(ht){a=new C.a("ws://localhost:8546")}var z=a,_=n(1),L=(Object(j.a)({breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}}),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={isConnected:!1,user_address:""},e.sleep=function(){var e=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.getAccount=Object(k.a)(w.a.mark((function t(){var n,a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:n=t.sent,a=n[0],alert("\u60a8\u5df2\u7ecf\u8fde\u63a5metamask"),e.setState({isConnected:!0}),e.setState({user_address:a}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.debug(t.t0),e.setState({isConnected:!1});case 14:case"end":return t.stop()}}),t,null,[[0,10]])}))),e}return Object(c.a)(n,[{key:"componentWillMount",value:function(){var e=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.eth.getAccounts();case 2:0==e.sent.length?this.setState({isConnected:!1}):this.setState({isConnected:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return Object(_.jsx)("div",{children:Object(_.jsx)(T.a,{children:Object(_.jsxs)(h.a,{container:!0,direction:"row",justifyContent:"flex-start",children:[Object(_.jsx)(h.a,{item:!0,className:e.titleGrid,children:Object(_.jsx)(g.a,{component:"h1",color:"inherit",noWrap:!0,className:e.title,children:Object(_.jsx)("b",{children:"SparkNFT"})})}),Object(_.jsxs)(h.a,{item:!0,className:e.btnGrid,children:[Object(_.jsx)(m.a,{size:"large",className:e.btn,href:"/SparkLink/#/",children:Object(_.jsx)("b",{children:"\u9996\u9875"})}),Object(_.jsx)(m.a,{size:"large",className:e.btn,href:"/SparkLink/#/introPublish",children:Object(_.jsx)("b",{children:"\u53d1\u5e03"})}),Object(_.jsx)(m.a,{size:"large",className:e.btn,href:"/SparkLink/#/collections",children:Object(_.jsx)("b",{children:"\u6211\u7684NFTs"})}),Object(_.jsx)(m.a,{size:"large",href:"https://github.com/SparkNFT",target:"_blank",children:Object(_.jsx)(v.a,{className:e.icon1})}),this.state.isConnected?Object(_.jsx)(m.a,{color:"primary",className:e.btnConnected,children:Object(_.jsx)(N.a,{className:e.icon2})}):Object(_.jsx)(m.a,{className:e.btn,onClick:this.getAccount,children:Object(_.jsx)(N.a,{className:e.icon2})})]})]})})})}}]),n}(i.Component)),B=Object(x.a)((function(e){var t,n,a,i,r;return{icon1:(t={},Object(p.a)(t,e.breakpoints.down("xl"),{fontSize:19}),Object(p.a)(t,e.breakpoints.up("xl"),{fontSize:27}),t),icon2:(n={},Object(p.a)(n,e.breakpoints.down("xl"),{fontSize:22}),Object(p.a)(n,e.breakpoints.up("xl"),{fontSize:32}),n),titleGrid:{marginTop:25,marginBottom:10,marginLeft:"5%",textAlign:"center"},title:(a={minWidth:100,fontSize:25,fontFamily:"Teko"},Object(p.a)(a,e.breakpoints.between("xs","sm"),{fontSize:25}),Object(p.a)(a,e.breakpoints.between("sm","md"),{fontSize:25}),Object(p.a)(a,e.breakpoints.between("md","lg"),{fontSize:35}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{fontSize:35}),Object(p.a)(a,e.breakpoints.up("xl"),{fontSize:45}),a),btnGrid:(i={marginBottom:10,minWidth:370},Object(p.a)(i,e.breakpoints.between("sm","md"),{marginTop:10}),Object(p.a)(i,e.breakpoints.between("md","lg"),{marginTop:25,marginLeft:"20%"}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{marginTop:25,marginLeft:"50%"}),Object(p.a)(i,e.breakpoints.up("xl"),{marginTop:25,marginLeft:"60%"}),i),btn:(r={color:"#424949",borderColor:"#e3f2fd",fontSize:15},Object(p.a)(r,e.breakpoints.between("xs","sm"),{fontSize:15}),Object(p.a)(r,e.breakpoints.between("sm","md"),{fontSize:15,width:100}),Object(p.a)(r,e.breakpoints.between("md","lg"),{fontSize:15,width:100}),Object(p.a)(r,e.breakpoints.up("xl"),{fontSize:25}),r),btnConnected:{color:"#03A9F4",borderColor:"#e3f2fd",fontSize:16},avatar:{margin:e.spacing(1),backgroundColor:"#2196f3",width:10,height:10}}}),{withTheme:!0})(L),A=Object(j.a)({palette:{primary:{main:"#FDFEFE"},secondary:{main:"#2196f3"}}}),W=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | HOME"})}),Object(_.jsx)(f.a,{theme:A,children:Object(_.jsxs)("div",{className:e.page,children:[Object(_.jsx)(B,{}),Object(_.jsx)(O.a,{component:"main",className:e.container,children:Object(_.jsx)("div",{className:e.paper,children:Object(_.jsxs)(h.a,{container:!0,justifyContent:"center",children:[Object(_.jsxs)(h.a,{item:!0,style:{minWidth:"50%"},children:[Object(_.jsx)(g.a,{color:"inherit",noWrap:!0,className:e.title,children:Object(_.jsx)("b",{children:"SparkNFT"})}),Object(_.jsx)(g.a,{color:"inherit",noWrap:!0,className:e.title2,children:Object(_.jsx)("b",{children:"\u4eba\u4eba\u4f20\u64ad\uff0c\u4e92\u76f8\u652f\u6301\uff0c\u4eff\u82e5\u661f\u661f\u4e4b\u706b\uff0c\u70b9\u4eae\u4e00\u7247\u4e16\u754c\u3002"})}),Object(_.jsx)(g.a,{color:"inherit",noWrap:!0,className:e.title3,children:"\u53d1\u5e03\u4f60\u7231\u7684 & \u652f\u6301\u4f60\u7231\u7684 & \u4f20\u64ad\u4f60\u7231\u7684"})]}),Object(_.jsx)(h.a,{item:!0,xs:5,children:Object(_.jsx)("img",{src:b,className:e.books})}),Object(_.jsxs)(h.a,{container:!0,justifyContent:"center",spacing:5,children:[Object(_.jsx)(h.a,{item:!0,children:Object(_.jsx)(m.a,{size:"large",variant:"contained",color:"secondary",className:e.btnMain,href:"/SparkLink/#/introPublish",children:Object(_.jsx)("b",{children:"\u53bb\u53d1\u5e03"})})}),Object(_.jsx)(h.a,{item:!0,children:Object(_.jsx)(m.a,{size:"large",variant:"outlined",color:"secondary",className:e.btnSecond,href:"/SparkLink/#/buy",children:Object(_.jsx)("b",{children:"\u53bb\u8d2d\u4e70"})})})]})]})})})]})})]})}}]),n}(i.Component),P=Object(x.a)((function(e){var t,n,a,i,r;return{title:(t={fontFamily:"Teko",marginTop:"25%"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{fontSize:25}),Object(p.a)(t,e.breakpoints.between("sm","md"),{fontSize:25}),Object(p.a)(t,e.breakpoints.between("md","lg"),{fontSize:35}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{fontSize:100}),Object(p.a)(t,e.breakpoints.up("xl"),{fontSize:150}),t),title2:(n={fontFamily:"Teko"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:10}),Object(p.a)(n,e.breakpoints.between("sm","md"),{fontSize:15}),Object(p.a)(n,e.breakpoints.between("md","lg"),{fontSize:25}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{fontSize:35}),Object(p.a)(n,e.breakpoints.up("xl"),{fontSize:55}),n),title3:(a={fontFamily:"Teko"},Object(p.a)(a,e.breakpoints.between("xs","sm"),{fontSize:8}),Object(p.a)(a,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(a,e.breakpoints.between("md","lg"),{fontSize:15}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{fontSize:25}),Object(p.a)(a,e.breakpoints.up("xl"),{fontSize:45}),a),icon:{marginRight:e.spacing(2)},titleFont:{fontFamily:"Teko"},btnMain:(i={color:"#FFFFFF",borderColor:"#e3f2fd",borderWidth:2,borderRadius:25},Object(p.a)(i,e.breakpoints.between("xs","sm"),{fontSize:5}),Object(p.a)(i,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(i,e.breakpoints.between("md","lg"),{fontSize:16}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{fontSize:16,width:150}),Object(p.a)(i,e.breakpoints.up("xl"),{fontSize:30,width:300,height:70}),i),btnSecond:(r={color:"#03A9F4",borderColor:"#03A9F4",borderWidth:2,borderRadius:25},Object(p.a)(r,e.breakpoints.between("xs","sm"),{fontSize:5}),Object(p.a)(r,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(r,e.breakpoints.between("md","lg"),{fontSize:16}),Object(p.a)(r,e.breakpoints.between("lg","xl"),{fontSize:16,width:150}),Object(p.a)(r,e.breakpoints.up("xl"),{fontSize:30,width:300,height:70}),r),paper:{marginTop:e.spacing(7),textAlign:"center"},container:{maxWidth:"100%"},books:{width:"90%",height:"auto"}}}),{withTheme:!0})(W);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(746),n(747);var E=n(424),R=n(45),M=n(89),D=n(60),U=n(211),G=n(427),H=n(1010),q=n(117),J=n.n(q),V=n(164),K=n.n(V),Y=n(1007),$=n(1008),Q=(n(362),n(43)),X=n.n(Q),Z=new z.eth.Contract([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint64",name:"NFT_id",type:"uint64"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint128",name:"amount",type:"uint128"}],name:"Claim",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint64",name:"NFT_id",type:"uint64"},{indexed:!1,internalType:"uint128",name:"transfer_price",type:"uint128"}],name:"DeterminePrice",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint64",name:"NFT_id",type:"uint64"},{indexed:!1,internalType:"uint128",name:"transfer_price",type:"uint128"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"DeterminePriceAndApprove",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint64",name:"NFT_id",type:"uint64"},{indexed:!1,internalType:"string",name:"content",type:"string"}],name:"Label",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"issue_id",type:"uint32"},{indexed:!0,internalType:"address",name:"publisher",type:"address"},{indexed:!1,internalType:"uint64",name:"rootNFTId",type:"uint64"}],name:"Publish",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint64",name:"NFT_id",type:"uint64"},{indexed:!1,internalType:"bytes32",name:"old_URI",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"new_URI",type:"bytes32"}],name:"SetURI",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"acceptShill",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"claimProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"},{internalType:"uint128",name:"_price",type:"uint128"}],name:"determinePrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"},{internalType:"uint128",name:"_price",type:"uint128"},{internalType:"address",name:"_to",type:"address"}],name:"determinePriceAndApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getDepthByNFTId",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getEditionIdByNFTId",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getFatherByNFTId",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getIssueIdByNFTId",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"getLossRatio",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getProfitByNFTId",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getRemainShillTimesByNFTId",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_issue_id",type:"uint32"}],name:"getRootNFTIdByIssueId",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint32",name:"_issue_id",type:"uint32"}],name:"getRoyaltyFeeByIssueId",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getShillPriceByNFTId",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_issue_id",type:"uint32"}],name:"getShillTimesByIssueId",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_issue_id",type:"uint32"}],name:"getTotalAmountByIssueId",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getTransferPriceByNFTId",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"isEditionExist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_issue_id",type:"uint32"}],name:"isIssueExist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"isRootNFT",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"},{internalType:"string",name:"content",type:"string"}],name:"label",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint128",name:"_first_sell_price",type:"uint128"},{internalType:"uint8",name:"_royalty_fee",type:"uint8"},{internalType:"uint8",name:"_shill_times",type:"uint8"},{internalType:"bytes32",name:"_ipfs_hash",type:"bytes32"}],name:"publish",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"},{internalType:"bytes32",name:"ipfs_hash",type:"bytes32"}],name:"setURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"payable",type:"function"}],"0xf7c08bEabb314A5105577f0209B28C2354DFbf5D"),ee=n(67),te=n.n(ee),ne=n(969),ae=(n(765),n(371)),ie=ae.pinata_api_key,re=ae.pinata_secret_api_key,se=n(372),oe=n(373),ce=(n(247),Object(j.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}})),le=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={name:"",bonusFee:0,price:0,buffer:null,ipfsHashCover:"",ipfsMeta:"",fileIpfs:"",description:"",shareTimes:0,onLoading:!1,rootNFTId:"",usedAcc:"",sig:"",fileType:"",finished:!1,coverURL:""},e.handleGetPubName=function(t){e.setState({name:t.target.value})},e.handleGetBonusFee=function(t){e.setState({bonusFee:t})},e.handleGetPrice=function(t){e.setState({price:t})},e.handleGetShareTimes=function(t){e.setState({shareTimes:t})},e.handleGetDescription=function(t){e.setState({description:t.target.value})},e.submit=function(){var t=Object(k.a)(w.a.mark((function t(n){var a,i,r,s,o,c,l;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.price&&0!==e.state.bonusFee&&0!==e.state.shareTimes&&""!==e.state.ipfsHashCover&&""!==e.state.fileIpfs){t.next=4;break}alert("\u4f60\u6709\u4fe1\u606f\u5c1a\u672a\u586b\u5199"),t.next=19;break;case 4:return e.setState({onLoading:!0}),a="https://gateway.pinata.cloud/ipfs/"+e.state.ipfsHashCover,e.setState({coverURL:a}),console.debug("coverURL: ",e.state.coverURL),i=e.state.description.replace(/(\r\n\t|\n|\r\t)/gm," "),t.next=11,window.ethereum.request({method:"eth_requestAccounts"});case 11:r=t.sent,s=r[0],e.setState({usedAcc:s}),o="https://gateway.pinata.cloud/ipfs/"+e.state.fileIpfs,c={name:e.state.name,description:i,image:e.state.coverURL,attributes:[{display_type:"boost_percentage",trait_type:"Bonuse Percentage",value:e.state.bonusFee},{trait_type:"File Address",value:o},{value:e.state.fileType},{trait_type:"Encrypted",value:"FALSE"}]},"https://api.pinata.cloud/pinning/pinJSONToIPFS",l=Object(D.a)(e),X.a.post("https://api.pinata.cloud/pinning/pinJSONToIPFS",c,{headers:{pinata_api_key:ie,pinata_secret_api_key:re}}).then((function(e){console.debug("metadata: ",e.data.IpfsHash);var t=oe.decode(e.data.IpfsHash).toString("hex").substring(4);console.log(t),console.log(e.data.IpfsHash),l.setState({ipfsMeta:t});var n=z.utils.toWei(l.state.price.toString()),a="0x"+t;Z.methods.publish(n,l.state.bonusFee,l.state.shareTimes,a).send({from:l.state.usedAcc}).then((function(e){console.log(e);var t=e.events.Publish.returnValues,n=t.rootNFTId,a=t.issue_id;l.setState({onLoading:!1,rootNFTId:n,issueId:a}),alert("\u5df2\u7ecf\u6210\u529f\u53d1\u5e03\u4f5c\u54c1")})),l.setState({finished:!0})})).catch((function(e){console.debug(e),alert("\u4e0a\u4f20pinata\u5931\u8d25\uff0c\u8bf7\u8bd5\u7740\u5220\u9664\u6587\u4ef6\u540e\u91cd\u8bd5")}));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.checkDetail=function(){var t=Object(k.a)(w.a.mark((function t(n){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a="/SparkLink/#/NFT/"+e.state.rootNFTId,window.open(a,"_self");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=4;break}return alert("\u8bf7\u5148\u5b89\u88c5metamask"),window.location.href="/SparkLink/#/introPublish",e.abrupt("return");case 4:window.ethereum.request({method:"eth_chainId"}).then((function(e){if("0x4"!==e)return alert("\u8bf7\u5207\u6362\u81f3rinkeby network"),void(window.location.href="/SparkLink/#/introPublish")}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,n=this,a=Y.a.TextArea,i={name:"file",action:"https://api.pinata.cloud/pinning/pinFileToIPFS",headers:{pinata_api_key:ie,pinata_secret_api_key:re},data:this.state.buffer,beforeUpload:function(t){return new Promise((function(n,a){try{var i=new FileReader;i.readAsArrayBuffer(t),i.onload=function(t){var n=t.target.result,a=new se;a.append("file",n),e.setState({buffer:a})},n()}catch(r){G.b.error("Read file error"),a()}}))},onChange:function(e){return Object(k.a)(w.a.mark((function t(){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"done"===(a=e.file.status)?(G.b.success("".concat(e.file.name," file uploaded successfully.")),n.setState({ipfsHashCover:e.file.response.IpfsHash})):"error"===a&&G.b.error("".concat(e.file.name," file upload failed."));case 2:case"end":return t.stop()}}),t)})))()},onDrop:function(e){G.b.error("Only image file supported"),console.log("Dropped files",e.dataTransfer.files)}},r={name:"file",action:"https://api.pinata.cloud/pinning/pinFileToIPFS",headers:{pinata_api_key:ie,pinata_secret_api_key:re},data:this.state.buffer,beforeUpload:function(t){return new Promise((function(n,a){try{var i=new FileReader;i.readAsArrayBuffer(t),i.onload=function(t){var n=t.target.result,a=new se;a.append("file",n),e.setState({buffer:a})},n()}catch(r){G.b.error("Read file error"),a()}}))},onChange:function(e){return Object(k.a)(w.a.mark((function t(){var a,i,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"done"===(a=e.file.status)?(G.b.success("".concat(e.file.name," file uploaded successfully.")),i=e.file.name.split("."),r=i[i.length-1],console.debug(r),console.debug("file ipfs hash: ",e.file.response.IpfsHash),n.setState({fileIpfs:e.file.response.IpfsHash,fileType:r})):"error"===a&&G.b.error("".concat(e.file.name," file upload failed."));case 2:case"end":return t.stop()}}),t)})))()},onDrop:function(e){G.b.error("Only image file supported"),console.log("Dropped files",e.dataTransfer.files)}};return this.state.onLoading?Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Publish"})}),Object(_.jsxs)(f.a,{theme:ce,children:[Object(_.jsx)(B,{}),Object(_.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(_.jsx)(te.a,{type:"bars",color:"#2196f3",width:"40%"})})]})]}):this.state.finished?Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Publish"})}),Object(_.jsxs)(f.a,{theme:ce,children:[Object(_.jsx)(B,{}),Object(_.jsxs)("div",{style:{textAlign:"center"},children:[Object(_.jsx)(g.a,{className:t.titleCon,children:Object(_.jsx)("b",{children:" \ud83c\udf89 \u606d\u559c\u60a8\u53d1\u5e03\u6210\u529f"})}),Object(_.jsx)(ne.a,{className:t.paperImg,children:Object(_.jsx)("img",{style:{width:300,marginTop:20,marginBottom:50},src:this.state.coverURL})}),Object(_.jsx)(g.a,{variant:"h4",style:{marginTop:20,fontFamily:"Ubuntu"},children:Object(_.jsxs)("b",{children:["\u60a8\u83b7\u5f97\u7684\u6839\u7ed3\u70b9NFT\u662f\uff1a #",this.state.rootNFTId]})}),Object(_.jsx)(m.a,{variant:"contained",className:t.button,style:{marginTop:50,width:200,height:50,marginBottom:50},onClick:this.checkDetail,children:"\u67e5\u770b\u8be6\u60c5"})]})]})]}):Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Publish"})}),Object(_.jsxs)(f.a,{theme:ce,children:[Object(_.jsx)(B,{}),Object(_.jsx)(O.a,{component:"main",maxWidth:"xs",className:t.main,children:Object(_.jsxs)("div",{className:t.paper,children:[Object(_.jsx)(g.a,{className:t.titlePub,children:Object(_.jsx)("b",{children:"\u53d1\u5e03\u4f5c\u54c1\u4fe1\u606f"})}),Object(_.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(_.jsxs)(h.a,{container:!0,spacing:2,children:[Object(_.jsxs)(h.a,{item:!0,style:{width:"100%"},children:[Object(_.jsx)("label",{style:{fontSize:18,marginBottom:10},children:"\u4f5c\u54c1\u540d\u5b57 *"}),Object(_.jsx)(Y.a,{placeholder:"\u4f5c\u54c1\u540d\u79f0",allowClear:!0,id:"pubName",onChange:this.handleGetPubName,value:this.state.name,className:t.input})]}),Object(_.jsxs)(h.a,{item:!0,style:{width:"100%"},children:[Object(_.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u6536\u76ca\u6bd4\u4f8b *"}),Object(_.jsx)("p",{style:{fontSize:14},children:"\u5f53\u60a8\u7684\u4f5c\u54c1\u88ab\u6210\u529f\u5206\u4eab\u65f6\uff0c\u60a8\u5e0c\u671b\u4ece\u5206\u4eab\u4ef7\u683c\u4e2d\u83b7\u5f97\u591a\u5c11\u6bd4\u4f8b\u7684\u6536\u76ca"}),Object(_.jsx)($.a,{id:"bonusFee",defaultValue:0,min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},onChange:this.handleGetBonusFee,className:t.inputNum})]}),Object(_.jsxs)(h.a,{item:!0,style:{width:"100%"},children:[Object(_.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u552e\u5356\u4ef7\u683c (ether)*"}),Object(_.jsx)($.a,{id:"price",defaultValue:0,min:0,onChange:this.handleGetPrice,className:t.inputNum})]}),Object(_.jsxs)(h.a,{item:!0,style:{width:"100%"},children:[Object(_.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u6700\u9ad8\u5206\u4eab\u6b21\u6570 *"}),Object(_.jsx)("p",{style:{fontSize:14},children:"\u60a8\u5e0c\u671b\u6bcf\u4e00\u4e2a\u5e2e\u52a9\u60a8\u4f20\u64ad\u7684\u7528\u6237\u6700\u591a\u80fd\u591f\u5206\u4eab\u591a\u5c11\u6b21\uff1f"}),Object(_.jsx)($.a,{id:"shareTimes",defaultValue:0,min:0,onChange:this.handleGetShareTimes,className:t.inputNum})]}),Object(_.jsxs)(h.a,{item:!0,style:{width:"100%"},children:[Object(_.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u4f5c\u54c1\u63cf\u8ff0 *"}),Object(_.jsx)("p",{style:{fontSize:14},children:"\u8bf7\u7528\u7b80\u5355\u7684\u8bdd\u8bed\u5bf9\u60a8\u7684\u4f5c\u54c1\u8fdb\u884c\u63cf\u8ff0\uff0c\u7cbe\u51c6\u6709\u6548\u7684\u63cf\u8ff0\u80fd\u5e2e\u52a9\u5176\u4ed6\u7528\u6237\u66f4\u51c6\u786e\u5f97\u4e86\u89e3\u60a8\u7684\u4f5c\u54c1"}),Object(_.jsx)(a,{rows:6,id:"Description",onChange:this.handleGetDescription})]})]}),Object(_.jsx)("label",{style:{fontSize:18,marginTop:50},children:"\u5c01\u9762\u56fe\u7247 *"}),Object(_.jsxs)("p",{style:{fontSize:14},children:["\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u4e0a\u4f20\u60a8\u7684\u5c01\u9762\u56fe\u7247 ",Object(_.jsx)("br",{}),"\u5c01\u9762\u6587\u4ef6\u652f\u6301\u8fd9\u4e9b\u683c\u5f0f\uff1aJPEG/JPG/PNG"]}),Object(_.jsxs)(J.a,Object(M.a)(Object(M.a)({},i),{},{style:{width:"100%",minHeight:200},id:"Uploader",accept:".png, .jpg, .jpeg",children:[Object(_.jsx)("p",{className:"ant-upload-drag-icon",children:Object(_.jsx)(H.a,{})}),Object(_.jsx)("p",{className:"ant-upload-text",children:"\u4e0a\u4f20\u6587\u4ef6\u8bf7\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904"}),Object(_.jsx)("p",{className:"ant-upload-hint",children:"\u652f\u6301\u5355\u4e2a\u6587\u4ef6\u7684\u4e0a\u4f20\uff0c\u652f\u6301\u591a\u79cd\u7c7b\u578b\u6587\u4ef6\u7684\u4e0a\u4f20"})]})),Object(_.jsx)("label",{style:{fontSize:18,marginTop:50},children:"\u4f5c\u54c1\u6587\u4ef6 *"}),Object(_.jsx)("p",{style:{fontSize:14},children:"\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u4e0a\u4f20\u60a8\u7684\u4f5c\u54c1\u6587\u4ef6 "}),Object(_.jsxs)(J.a,Object(M.a)(Object(M.a)({},r),{},{style:{width:"100%",minHeight:200},id:"Uploader2",children:[Object(_.jsx)("p",{className:"ant-upload-drag-icon",children:Object(_.jsx)(H.a,{})}),Object(_.jsx)("p",{className:"ant-upload-text",children:"\u4e0a\u4f20\u6587\u4ef6\u8bf7\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904"}),Object(_.jsx)("p",{className:"ant-upload-hint",children:"\u4ec5\u652f\u6301\u5355\u4e2a\u6587\u4ef6\u7684\u4e0a\u4f20\uff0c\u652f\u6301\u591a\u79cd\u7c7b\u578b\u6587\u4ef6\u7684\u4e0a\u4f20"})]}))]}),Object(_.jsx)(m.a,{variant:"contained",className:t.button,startIcon:Object(_.jsx)(K.a,{}),style:{marginTop:50,width:200,height:50,marginBottom:50},onClick:this.submit,children:"\u63d0\u4ea4\u4fe1\u606f"})]})})]})]})}}]),n}(i.Component),de=Object(x.a)((function(e){var t,n,a,i;return{main:(t={},Object(p.a)(t,e.breakpoints.between("xs","sm"),{width:"60%"}),Object(p.a)(t,e.breakpoints.up("sm"),{width:500}),t),titleCon:(n={marginTop:50,fontFamily:"Ubuntu"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:30}),Object(p.a)(n,e.breakpoints.up("sm"),{fontSize:40}),n),paperImg:(a={backgroundColor:"#EFEBE9",width:330},Object(p.a)(a,e.breakpoints.between("xs","sm"),{marginLeft:"5%",marginTop:30}),Object(p.a)(a,e.breakpoints.between("sm","md"),{marginLeft:"30%",marginTop:30}),Object(p.a)(a,e.breakpoints.between("md","lg"),{marginLeft:"30%",marginTop:30}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{marginLeft:"40%",marginTop:30}),Object(p.a)(a,e.breakpoints.up("xl"),{marginLeft:"45%",marginTop:30}),a),titlePub:(i={marginTop:"3%",fontFamily:"Ubuntu"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{fontSize:30}),Object(p.a)(i,e.breakpoints.up("sm"),{fontSize:40}),i),btn:{color:"#424949",borderWidth:2,borderColor:"#e3f2fd",fontSize:16},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:U.a[500],width:60,height:60},form:{width:"150%",marginTop:e.spacing(7)},submit:{margin:e.spacing(3,0,2)},fileBtn:{padding:"10px 30px 10px 30px",background:"#66C1E4",border:"none",color:"#FFF",boxShadow:"1px 1px 1px #4C6E91"},button:{margin:e.spacing(1),fontSize:20,borderRadius:25,color:"#FFFFFF",backgroundColor:"#2196f3"},input:{height:40,borderRadius:5},inputNum:{height:40,borderRadius:5,width:"100%",fontSize:20}}}),{withTheme:!0})(le),pe=n(140),be=n(997),ue=n(422),me=n.n(ue),he=n(423),je=n.n(he),fe=n(102),xe=n.n(fe),ge=(n(956),n(421)),Oe=n.n(ge),ye=n(207),we=n(208),ke=n.n(we),Te=n(996),Se=n(420),ve=n.n(Se),Fe=n(960),Ne=n(247),Ie=(n(85),n(85),Object(j.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}})),Ce=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).gateway="https://gateway.pinata.cloud/ipfs/",a.backend="http://192.168.0.64:3000",a.ipfs_node="http://18.162.56.46:5001",a.state={Name:"",Description:"",BonusFee:0,Cover:"",contract:null,childrenNum:0,spark:!1,dataUrl:null,account:null,Profit:"",issueId:0,fileType:"",isEncrypt:!1,onLoading:!1,loadItem:!0},a.downloadIPFS=function(){var e=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"GET",Object(D.a)(a),"",a.state.dataUrl,a.setState({onLoading:!0}),console.log("onload"+a.state.onLoading),a.finishDownload();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.finishDownload=function(){var e=Object(D.a)(a),t=a.state.dataUrl;if(a.state.isEncrypt){var n={method:"get",url:t,headers:{}};X()(n).then(function(){var t=Object(k.a)(w.a.mark((function t(n){var i,r,s,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.data,t.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return r=t.sent,s=r[0],o={account:s,root_nft_id:a.props.match.params.id},o=JSON.stringify(o),t.next=9,a.signDataAndDecrypt(s,i);case 9:e.setState({onLoading:!1});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}else X()({url:t,method:"GET",responseType:"blob"}).then((function(t){var n=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=n;var r="."+e.state.fileType;i.setAttribute("download",a.state.Name+r),document.body.appendChild(i),i.click(),e.setState({onLoading:!1}),console.log("set close")})).catch((function(t){e.setState({onLoading:!1}),alert("\u4e0b\u8f7d\u5931\u8d25\uff1a"+t)}))},a.claim=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({onLoading:!0}),e.prev=1,e.next=4,Z.methods.claimProfit(a.props.match.params.id).send({from:a.state.account});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),a.setState({onLoading:!1});case 9:a.setState({onLoading:!1});case 10:case"end":return e.stop()}}),e,null,[[1,6]])}))),a.signDataAndDecrypt=function(){var e=Object(k.a)(w.a.mark((function e(t,n){var i,r,s,o,c,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={account:t,nft_id:a.props.match.params.id},r=JSON.stringify(i),e.next=4,z.eth.personal.sign(r,t).then((function(e){s=e}));case 4:console.log(s),o={account:t,nft_id:a.props.match.params.id,signature:s},console.log(s),c=JSON.stringify(o),console.log(c),l=a.backend+"/api/v1/key/claim",console.log(l),X.a.post(l,c,{headers:{"Content-Type":"application/json"}}).then((function(e){if(console.log(e),200==e.status){var t=e.data.key,i=Ne.AES.decrypt(n,t).toString(Ne.enc.Utf8),r=Ne.enc.Hex.parse(i),s=a.wordArrayToByteArray(r,r.length),o=new Uint8Array(s),c=new Blob([o]),l="."+a.state.fileType;Fe.saveAs(c,a.state.Name+l)}else{var d=e.data.message;alert("\u83b7\u53d6\u5bc6\u94a5\u5931\u8d25  "+d)}})).catch((function(e){console.log(e),alert("\u83b7\u53d6\u5bc6\u94a5\u5931\u8d25("+e+")")}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.wordToByteArray=function(e,t){var n=[];return t>0&&n.push(e>>>24),t>1&&n.push(e>>>16&255),t>2&&n.push(e>>>8&255),t>3&&n.push(255&e),n},a.wordArrayToByteArray=function(e,t){e.hasOwnProperty("sigBytes")&&e.hasOwnProperty("words")&&(t=e.sigBytes,e=e.words);for(var n,i=[],r=0;t>0;)t-=(n=a.wordToByteArray(e[r],Math.min(4,t))).length,i.push(n),r++;return[].concat.apply([],i)},a.showLoading=function(){if(a.state.onLoading)return Object(_.jsx)("div",{children:Object(_.jsx)(te.a,{type:"bars",color:"#2196f3",height:200,width:200})})},a.spark=function(){a.state.spark?document.getElementById("isSpark").innerHTML="\u70b9\u706b\u2014\u5206\u4eab":document.getElementById("isSpark").innerHTML="\u9690\u85cf",a.setState({spark:!a.state.spark})};var i=Object(D.a)(a);if(!window.ethereum)return alert("\u8bf7\u5148\u5b89\u88c5metamask"),window.location.href="/SparkLink/#/collections",Object(pe.a)(a);window.ethereum.request({method:"eth_chainId"}).then((function(e){if("0x4"!==e)return alert("\u8bf7\u5207\u6362\u81f3rinkeby network"),void(window.location.href="/SparkLink/#/collections")}));var r=new C.a(window.ethereum),s=Z;a.setState({contract:Z}),s.methods.ownerOf(a.props.match.params.id).call().then((function(e){window.ethereum.request({method:"eth_requestAccounts"}).then((function(t){var n=t[0];i.setState({account:n}),r.utils.toChecksumAddress(n)!==e&&(alert("\u8fd9\u679anft\u4e0d\u5c5e\u4e8e\u4f60"),window.location.href="/SparkLink/#")}))})),s.methods.getProfitByNFTId(a.props.match.params.id).call().then((function(e){a.setState({Profit:r.utils.fromWei(e)+"ETH"})})),s.methods.tokenURI(a.props.match.params.id).call().then((function(e){var t=e.split("/");s.methods.getIssueIdByNFTId(a.props.match.params.id).call().then((function(e){s.methods.getRoyaltyFeeByIssueId(e).call().then((function(e){var n=t[t.length-1];console.debug("meta here: ",n);var i="https://gateway.pinata.cloud/ipfs/"+n;X()({method:"get",url:i,timeout:5e3}).then((function(t){for(var n=t.data,i="",r=!1,s=n.attributes[2].value,o=0;o<n.attributes.length;o++)"Bonuse Percentage"===n.attributes[o].trait_type&&n.attributes[o].value,"File Address"===n.attributes[o].trait_type&&(i=n.attributes[o].value),"Encrypted"===n.attributes[o].trait_type&&(r="FALSE"!==n.attributes[o].value);a.setState({Name:n.name}),a.setState({Description:n.description}),a.setState({BonusFee:e}),a.setState({Cover:n.image}),a.setState({dataUrl:i}),a.setState({isEncrypt:r}),a.setState({fileType:s,loadItem:!1})})).catch((function(t){a.setState({Name:"SparkNFT"}),a.setState({Description:"\u6682\u65f6\u65e0\u6cd5\u83b7\u53d6\u5230\u8be5nft\u7684\u76f8\u5173\u63cf\u8ff0"}),a.setState({BonusFee:e}),a.setState({Cover:"https://via.placeholder.com/100x140.png?text=SparkNFT"}),a.setState({dataUrl:"fileAddr_PlaceHolder",loadItem:!1})}))}))}))}));var c=a.backend+"/api/v1/nft/info?nft_id="+a.props.match.params.id;return X.a.get(c).then((function(e){var t=e.data.children_count;a.setState({childrenNum:t})})).catch((function(e){void 0!==e.response?400==e.response.status&&e.response.data.message.includes("children not found")?console.debug("no children"):(console.debug(c),alert("\u83b7\u53d6nft\u5b50\u8282\u70b9\u60c5\u51b5\u9875\u9762\u5931\u8d25("+e+")")):alert("\u670d\u52a1\u5668\u672a\u54cd\u5e94\u53f6\u5b50\u8282\u70b9\u6570\u91cf\u8bf7\u6c42")})),a}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props.classes;this.gateway;return this.state.onLoading?Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Publish"})}),Object(_.jsxs)(f.a,{theme:Ie,children:[Object(_.jsx)(B,{}),Object(_.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(_.jsx)(te.a,{type:"bars",color:"#2196f3",width:"40%"})})]})]}):Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | INFO"})}),Object(_.jsxs)(f.a,{theme:Ie,children:[Object(_.jsx)(B,{}),Object(_.jsxs)(O.a,{component:"main",className:n.container,children:[Object(_.jsxs)(h.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"flex-start",children:[Object(_.jsx)(h.a,{children:Object(_.jsx)(m.a,{startIcon:Object(_.jsx)(xe.a,{style:{fontSize:"2rem"}}),href:"/SparkLink/#/collections",style:{marginTop:20,marginBottom:10,fontSize:"2rem"},children:"\u56de\u5230\u6211\u7684\u6536\u85cf\u9986"})}),Object(_.jsx)(h.a,{xs:9}),Object(_.jsxs)(h.a,{container:!0,direction:"row",className:n.cbutton,children:[Object(_.jsx)(h.a,{children:Object(_.jsx)(m.a,{style:{marginTop:10,marginRight:30,marginBottom:20},size:"large",variant:"contained",color:"primary",className:n.btnMain,startIcon:Object(_.jsx)(ve.a,{}),onClick:this.claim,children:Object(_.jsx)(g.a,{id:"isSpark",variant:"button",component:"h3",gutterBottom:!0,children:Object(_.jsx)("font",{size:"3",color:"white",children:"\u9886\u6536\u76ca"})})})}),Object(_.jsx)(h.a,{children:Object(_.jsx)(m.a,{style:{marginTop:10,marginBottom:20},size:"large",variant:"outlined",color:"secondary",className:n.btnSecond,startIcon:Object(_.jsx)(Oe.a,{}),href:"/SparkLink/#/sellSingle/"+this.props.match.params.id,children:Object(_.jsx)(g.a,{variant:"button",component:"h2",gutterBottom:!0,children:Object(_.jsx)("font",{size:"3",children:"\u552e\u5356"})})})})]})]}),Object(_.jsxs)("div",{className:n.paper,children:[this.state.loadItem?Object(_.jsxs)(h.a,{container:!0,className:n.content,spacing:5,children:[Object(_.jsx)(h.a,{item:!0,xs:4,children:Object(_.jsx)(be.a,{variant:"rect",width:300,height:500,style:{width:370,marginLeft:50,marginBottom:50}})}),Object(_.jsxs)(h.a,{item:!0,xs:!0,style:{marginLeft:"5%"},children:[Object(_.jsx)(be.a,{animation:"wave",variant:"text",width:200,height:30}),Object(_.jsx)(be.a,{animation:"wave",variant:"text",width:400,height:70}),Object(_.jsx)(be.a,{animation:"wave",variant:"rect",width:500,height:300,style:{marginBottom:50}})]})]}):Object(_.jsxs)(h.a,{container:!0,spacing:5,className:n.content,children:[Object(_.jsxs)(h.a,{style:{maxWidth:200},children:[Object(_.jsx)(ne.a,{className:n.imagePapaer,children:Object(_.jsx)("img",{className:n.imageStyle,src:this.state.Cover})}),Object(_.jsx)(h.a,{children:Object(_.jsxs)("font",{size:"3",children:["\u76ee\u524d\u6536\u76ca:",this.state.Profit]})})]}),Object(_.jsx)(h.a,{xs:1}),Object(_.jsxs)(h.a,{className:n.content2,children:[Object(_.jsxs)(g.a,(e={color:"inherit",align:"left"},Object(p.a)(e,"color","textSecondary"),Object(p.a)(e,"noWrap",!0),Object(p.a)(e,"style",{fontFamily:"Teko",fontSize:16,marginTop:"2%"}),Object(p.a)(e,"children",["#",this.props.match.params.id]),e)),Object(_.jsx)(g.a,{color:"inherit",align:"left",noWrap:!0,style:{fontFamily:"Teko",fontSize:34,marginTop:"2%"},children:Object(_.jsx)("b",{children:this.state.Name})}),Object(_.jsx)(g.a,{align:"left",color:"textSecondary",paragraph:!0,style:{marginTop:"2%",maxWidth:"100%",fontSize:16},children:this.state.Description}),Object(_.jsxs)(g.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"6%",maxWidth:"100%",fontSize:24},children:["\u5206\u7ea2\u6bd4\u4f8b: ",this.state.BonusFee," %"]}),Object(_.jsxs)(g.a,{align:"left",color:"textPrimary",paragraph:!0,style:{maxWidth:"65%",fontSize:12},children:["\u5f53\u524d\u62e5\u6709\u7684\u5b50\u8282\u70b9\u6570\u91cf: ",this.state.childrenNum]}),Object(_.jsxs)(h.a,{container:!0,direction:"row",className:n.cbutton,children:[Object(_.jsx)(h.a,{children:Object(_.jsx)(m.a,{size:"small",variant:"contained",color:"primary",target:"_blank",className:n.btnMain,startIcon:Object(_.jsx)(me.a,{}),onClick:this.downloadIPFS,children:Object(_.jsx)(g.a,{variant:"button",component:"h2",gutterBottom:!0,children:Object(_.jsx)("font",{size:"3",color:"white",children:"\u4e0b\u8f7d"})})})}),Object(_.jsx)(h.a,{xs:1}),Object(_.jsx)(h.a,{children:Object(_.jsx)(m.a,{size:"small",variant:"outlined",color:"secondary",target:"_blank",className:n.btnSecond,startIcon:Object(_.jsx)(je.a,{}),onClick:this.spark,children:Object(_.jsx)(g.a,{id:"isSpark",variant:"button",component:"h2",gutterBottom:!0,children:Object(_.jsx)("font",{size:"3",children:"\u70b9\u706b\u5206\u4eab"})})})})]})]})]}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{})]}),Object(_.jsx)(h.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"flex-start",children:Object(_.jsx)(h.a,{xs:8,children:Object(_.jsxs)("div",{style:{marginTop:0},children:[function(){var e=window.location.host+"/SparkLink/#/NFT/Spark/"+t.props.match.params.id;if(t.state.spark)return Object(_.jsx)(h.a,{container:!0,children:Object(_.jsx)(h.a,{item:!0,xs:!0,children:Object(_.jsxs)(g.a,{color:"inherit",align:"center",noWrap:!0,className:n.share,children:["\u8bf7\u5c06\u4e0b\u65b9\u94fe\u63a5\u5206\u4eab\u7ed9\u4e70\u65b9\uff0c",Object(_.jsx)("br",{})," \u4e70\u65b9\u4f1a\u8fdb\u5165\u6b64\u94fe\u63a5\u6765\u8d2d\u4e70\u8fd9\u4e2aNFT ",Object(_.jsx)("br",{}),e,Object(_.jsx)(ye.CopyToClipboard,{text:e,onCopy:function(){return t.setState({copied:!0})},children:Object(_.jsx)(Te.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(_.jsx)(ke.a,{})})})]})})})}(),this.showLoading()]})})}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{})]})]})]})}}]),n}(i.Component),ze=Object(x.a)((function(e){var t,n,a,i,r,s,o;return{container:{maxWidth:1500},icon:{marginRight:e.spacing(2)},paper:{marginTop:e.spacing(1),textAlign:"center",maxWidth:1370},btn:{color:"#424949",borderWidth:2,borderColor:"#e3f2fd",fontSize:16},btnMain:{marginTop:e.spacing(3),color:"#FFFFFF",borderWidth:2,borderColor:"#e3f2fd",fontSize:16,borderRadius:25,width:120,maxWidth:"20rem",minWidth:"10rem"},btnSecond:{marginTop:e.spacing(3),color:"#03A9F4",borderWidth:3,borderColor:"#03A9F4",fontSize:16,borderRadius:25,width:120,maxWidth:"20rem",minWidth:"10rem"},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"100%"},cardContent:{flexGrow:1},content:(t={fontFamily:"Teko"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("sm","md"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("md","lg"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.up("xl"),{justifyContent:"center",alignItems:"flex-start"}),t),content2:(n={fontFamily:"Teko"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{marginLeft:10,maxWidth:500}),Object(p.a)(n,e.breakpoints.between("sm","md"),{marginLeft:90,maxWidth:500}),Object(p.a)(n,e.breakpoints.between("md","lg"),{marginLeft:80,maxWidth:500}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{marginLeft:50,maxWidth:500}),Object(p.a)(n,e.breakpoints.up("xl"),{marginLeft:60,maxWidth:500}),n),cbutton:(a={fontFamily:"Teko"},Object(p.a)(a,e.breakpoints.between("xs","sm"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("sm","md"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("md","lg"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.up("xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),a),dbutton:(i={fontFamily:"Teko"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(i,e.breakpoints.between("sm","md"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(i,e.breakpoints.between("md","lg"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(i,e.breakpoints.up("xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),i),imageStyle:(r={},Object(p.a)(r,e.breakpoints.between("xs","sm"),{width:280,height:365,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.between("sm","md"),{width:290,height:385,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.between("md","lg"),{width:300,height:420,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.between("lg","xl"),{width:300,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.up("xl"),{width:300,marginTop:20,marginBottom:50}),r),imagePapaer:(s={},Object(p.a)(s,e.breakpoints.between("xs","sm"),{backgroundColor:"#EFEBE9",width:330,height:420,marginLeft:25}),Object(p.a)(s,e.breakpoints.between("sm","md"),{backgroundColor:"#EFEBE9",width:340,height:440,marginLeft:25}),Object(p.a)(s,e.breakpoints.between("md","lg"),{backgroundColor:"#EFEBE9",width:350,height:465,marginLeft:25}),Object(p.a)(s,e.breakpoints.between("lg","xl"),{backgroundColor:"#EFEBE9",width:350,marginLeft:10}),Object(p.a)(s,e.breakpoints.up("xl"),{backgroundColor:"#EFEBE9",width:350,marginLeft:10}),s),share:(o={fontFamily:"Teko",marginBottom:"10%"},Object(p.a)(o,e.breakpoints.between("xs","sm"),{fontSize:14}),Object(p.a)(o,e.breakpoints.between("sm","md"),{fontSize:16}),Object(p.a)(o,e.breakpoints.between("md","lg"),{fontSize:18}),Object(p.a)(o,e.breakpoints.between("lg","xl"),{fontSize:20}),Object(p.a)(o,e.breakpoints.up("xl"),{fontSize:20}),o)}}),{withTheme:!0})(Ce),_e=n(1009),Le=n(998),Be=n(999),Ae=n(1e3),We=n(1001),Pe=n(143),Ee=n.n(Pe),Re=Object(j.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}}),Me=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).gateway="https://gateway.pinata.cloud/ipfs/",a.backend="http://192.168.0.64:3000",a.state={name:"",bonusFee:0,coverURL:"",description:"",price:0,ipfsHashMeta:"",shareTimes:0,open:!1,toAddress:"",NFTId:"",onSale:!1,copied:!1,onLoading:!1,owner:"",currentAcc:"",childrenNum:0,loadItem:!0},a.handleClickOpen=function(e){a.setState({open:!0})},a.handleClose=function(e){a.setState({open:!1})},a.handleGetPrice=function(e){a.setState({price:e})},a.handleGetAddr=function(e){a.setState({toAddress:e.target.value})},a.handleClickLink=function(e){var t="/SparkLink/#/NFT/"+a.state.NFTId;window.open(t,"_self")},a.sell=function(){var e=Object(k.a)(w.a.mark((function e(t){var n,i,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({open:!1}),e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:n=e.sent,i=n[0],r=z.utils.toWei(a.state.price.toString()),s=Object(D.a)(a),a.setState({onLoading:!0}),Z.methods.determinePriceAndApprove(a.state.NFTId,r,a.state.toAddress).send({from:i}).then((function(e){s.setState({onSale:!0,onLoading:!1}),alert("\u5df2\u7ecf\u6210\u529f\u6388\u6743\u4e70\u65b9")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.ethereum.request({method:"eth_chainId"}).then((function(e){if("0x4"!==e)return alert("\u8bf7\u5207\u6362\u81f3rinkeby network"),void(window.location.href="/SparkLink/#")})),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(k.a)(w.a.mark((function e(){var t,n,a,i,r,s,o=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return t=e.sent,n=t[0],a=this,this.setState({currentAcc:n}),this.setState({NFTId:this.props.match.params.NFTId}),console.debug(this.state.NFTId),e.next=10,Z.methods.getIssueIdByNFTId(this.state.NFTId).call();case 10:return i=e.sent,e.next=13,Z.methods.getRoyaltyFeeByIssueId(i).call();case 13:return r=e.sent,e.next=16,Z.methods.tokenURI(this.props.match.params.NFTId).call().then((function(e){var t=e.split("/");o.setState({ipfsHashMeta:t[t.length-1]});var n=o.gateway+o.state.ipfsHashMeta;X()({method:"get",url:n,timeout:2e3}).then((function(e){for(var t=e.data,n=0,i=0;i<t.attributes.length;i++)0!==i?3!==i||t.attributes[i].value:n=t.attributes[i].value;a.setState({loadItem:!1,name:t.name,description:t.description,bonusFee:n,coverURL:t.image})})).catch((function(e){var t="SparkNFT#"+o.props.match.params.NFTId;a.setState({loadItem:!1,name:t,description:"\u6682\u65f6\u65e0\u6cd5\u83b7\u53d6\u5230\u8be5nft\u7684\u76f8\u5173\u63cf\u8ff0",bonusFee:r,coverURL:"https://via.placeholder.com/100x140.png?text=SparkNFT"}),console.debug(e)}))}));case 16:return e.next=18,Z.methods.ownerOf(this.props.match.params.NFTId).call().then((function(e){o.setState({owner:e.toLowerCase()})}));case 18:return e.next=20,Z.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call().then((function(e){"0"==e?o.setState({onSale:!1}):o.setState({onSale:!0})}));case 20:s=this.backend+"/api/v1/nft/info?nft_id="+this.state.NFTId,X.a.get(s).then((function(e){var t=e.data.children_count;a.setState({childrenNum:t})})).catch((function(e){console.debug(e.message),void 0!==e.response?(console.log(e.response),400==e.response.status&&e.response.data.message.includes("children not found")?console.debug("no children"):alert("\u83b7\u53d6nft\u5b50\u8282\u70b9\u60c5\u51b5\u9875\u9762\u5931\u8d25("+e+")")):alert("\u670d\u52a1\u5668\u672a\u54cd\u5e94,\u5b50\u8282\u70b9\u6570\u91cf\u83b7\u53d6\u5931\u8d25")}));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.props.classes,a=function(){return t.state.currentAcc==t.state.owner?Object(_.jsx)(m.a,{variant:"outlined",color:"primary",startIcon:Object(_.jsx)(Ee.a,{style:{fontSize:22}}),className:n.btnSell,onClick:t.handleClickOpen,children:"\u552e\u5356"}):Object(_.jsx)(m.a,{variant:"outlined",startIcon:Object(_.jsx)(Ee.a,{style:{fontSize:22}}),className:n.btnSell,disabled:!0,children:"\u552e\u5356"})};return this.state.onLoading?Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Publish"})}),Object(_.jsxs)(f.a,{theme:Re,children:[Object(_.jsx)(B,{}),Object(_.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(_.jsx)(te.a,{type:"bars",color:"#2196f3",width:"40%"})})]})]}):Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Sell"})}),Object(_.jsxs)(f.a,{theme:Re,children:[Object(_.jsx)(B,{}),Object(_.jsxs)(O.a,{component:"main",className:n.container,children:[Object(_.jsx)(m.a,{startIcon:Object(_.jsx)(xe.a,{style:{fontSize:22}}),onClick:this.handleClickLink,style:{marginTop:50,marginBottom:100,fontSize:22},children:"\u8fd4\u56de"}),Object(_.jsx)("div",{className:n.paper,children:this.state.loadItem?Object(_.jsxs)(h.a,{container:!0,spacing:5,className:n.content,children:[Object(_.jsx)(h.a,{item:!0,xs:4,children:Object(_.jsx)(be.a,{variant:"rect",width:300,height:500,className:n.img})}),Object(_.jsxs)(h.a,{item:!0,xs:!0,style:{marginLeft:"5%",maxWidth:500,minWidth:350},children:[Object(_.jsx)(be.a,{animation:"wave",variant:"text",width:"70%",height:30}),Object(_.jsx)(be.a,{animation:"wave",variant:"text",width:"100%",height:70}),Object(_.jsx)(be.a,{animation:"wave",variant:"rect",width:"100%",height:300,style:{marginBottom:50}}),a()]})]}):Object(_.jsxs)(h.a,{container:!0,className:n.content,spacing:5,children:[Object(_.jsx)(h.a,{item:!0,xs:4,style:{maxWidth:600},children:Object(_.jsx)(ne.a,{className:n.imgPaper,children:Object(_.jsx)("img",{style:{width:300,marginTop:20,marginBottom:50},src:this.state.coverURL})})}),Object(_.jsxs)(h.a,{item:!0,xs:!0,className:n.content2,children:[Object(_.jsxs)(g.a,(e={color:"inherit",align:"left"},Object(p.a)(e,"color","textSecondary"),Object(p.a)(e,"noWrap",!0),Object(p.a)(e,"style",{fontFamily:"Teko",fontSize:16,marginTop:"2%"}),Object(p.a)(e,"children",["#",this.state.NFTId]),e)),Object(_.jsx)(g.a,{color:"inherit",align:"left",noWrap:!0,style:{fontFamily:"Teko",fontSize:30,marginTop:"2%"},children:Object(_.jsx)("b",{children:this.state.name})}),Object(_.jsx)(g.a,{align:"left",color:"textSecondary",paragraph:!0,style:{marginTop:"2%",maxWidth:"100%",fontSize:16},children:this.state.description}),Object(_.jsxs)(g.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"6%",maxWidth:"65%",fontSize:20},children:["\u521b\u4f5c\u8005\u5206\u7ea2\u6bd4\u4f8b: ",this.state.bonusFee," %"]}),Object(_.jsxs)(g.a,{align:"left",color:"textPrimary",paragraph:!0,style:{maxWidth:"65%",fontSize:12},children:["\u5f53\u524d\u62e5\u6709\u7684\u5b50\u8282\u70b9\u6570\u91cf: ",this.state.childrenNum]}),a(),Object(_.jsxs)(_e.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(_.jsx)(Le.a,{id:"form-dialog-title",children:"\u586b\u5199\u552e\u5356\u4fe1\u606f"}),Object(_.jsxs)(Be.a,{children:[Object(_.jsx)(Ae.a,{children:"\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u586b\u5199\u4f60\u5e0c\u671b\u552e\u5356\u7684\u4ef7\u683c\uff0c\u4ee5\u53ca\u552e\u5356\u5bf9\u8c61\u7684\u94b1\u5305\u5730\u5740\u3002"}),Object(_.jsx)("label",{style:{fontSize:14,marginBottom:10},children:"\u552e\u5356\u4ef7\u683c *"}),Object(_.jsx)($.a,{defaultValue:0,min:0,onChange:this.handleGetPrice,className:n.inputNum}),Object(_.jsx)("label",{style:{fontSize:14,marginBottom:10,marginTop:10},children:"\u4e70\u65b9\u94b1\u5305\u5730\u5740 *"}),Object(_.jsx)(Y.a,{placeholder:"\u4e70\u65b9\u94b1\u5305\u5730\u5740",allowClear:!0,id:"pubName",onChange:this.handleGetAddr,className:n.input})]}),Object(_.jsxs)(We.a,{children:[Object(_.jsx)(m.a,{onClick:this.handleClose,color:"primary",children:"\u53d6\u6d88"}),Object(_.jsx)(m.a,{variant:"contained",onClick:this.sell,color:"primary",children:"\u5356\u51fa"})]})]})]})]})}),Object(_.jsx)("div",{style:{marginTop:50},children:function(){var e=window.location.host+"/SparkLink/#/buySingle/"+t.state.NFTId;if(t.state.onSale)return Object(_.jsx)(h.a,{container:!0,children:Object(_.jsx)(h.a,{item:!0,xs:!0,children:Object(_.jsxs)(g.a,{color:"inherit",align:"center",noWrap:!0,className:n.share,children:["\u8bf7\u5c06\u4e0b\u65b9\u94fe\u63a5\u5206\u4eab\u7ed9\u4e70\u65b9\uff0c",Object(_.jsx)("br",{})," \u4e70\u65b9\u4f1a\u8fdb\u5165\u6b64\u94fe\u63a5\u6765\u8d2d\u4e70\u8fd9\u4e2aNFT ",Object(_.jsx)("br",{}),e,Object(_.jsx)(ye.CopyToClipboard,{text:e,onCopy:function(){return t.setState({copied:!0})},children:Object(_.jsx)(Te.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(_.jsx)(ke.a,{})})})]})})})}()})]})]})]})}}]),n}(i.Component),De=Object(x.a)((function(e){var t,n,a,i,r;return{container:{maxWidth:1500},paper:{marginTop:e.spacing(1),textAlign:"center",maxWidth:1500},btnSell:{margin:e.spacing(1),fontSize:16,borderRadius:10,borderWidth:2,borderColor:"#2196f3",color:"#2196f3",marginLeft:"10%",width:100},inputNum:{height:40,borderRadius:5,width:550,fontSize:20},input:{height:40,borderRadius:5},loader:{textAlign:"center"},content:(t={fontFamily:"Teko"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("sm","md"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("md","lg"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.up("xl"),{justifyContent:"center",alignItems:"flex-start"}),t),img:(n={width:300,marginBottom:50},Object(p.a)(n,e.breakpoints.between("xs","sm"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("sm","md"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("md","lg"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{marginLeft:"30%"}),Object(p.a)(n,e.breakpoints.up("xl"),{marginLeft:"40%"}),n),imgPaper:(a={width:350,marginBottom:50,backgroundColor:"#EFEBE9"},Object(p.a)(a,e.breakpoints.between("sm","md"),{marginLeft:"20%"}),Object(p.a)(a,e.breakpoints.between("md","lg"),{marginLeft:"20%"}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{marginLeft:"30%"}),Object(p.a)(a,e.breakpoints.up("xl"),{marginLeft:"40%"}),a),content2:(i={fontFamily:"Teko",textAlign:"center"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{maxWidth:500}),Object(p.a)(i,e.breakpoints.between("sm","md"),{marginLeft:90,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("md","lg"),{marginLeft:80,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{marginLeft:50,maxWidth:500}),Object(p.a)(i,e.breakpoints.up("xl"),{marginLeft:60,maxWidth:500}),i),share:(r={fontFamily:"Teko",marginBottom:"10%"},Object(p.a)(r,e.breakpoints.between("xs","sm"),{fontSize:14}),Object(p.a)(r,e.breakpoints.between("sm","md"),{fontSize:16}),Object(p.a)(r,e.breakpoints.between("md","lg"),{fontSize:18}),Object(p.a)(r,e.breakpoints.between("lg","xl"),{fontSize:20}),Object(p.a)(r,e.breakpoints.up("xl"),{fontSize:20}),r)}}),{withTheme:!0})(Me),Ue=Object(j.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}}),Ge=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).gateway="https://gateway.pinata.cloud/ipfs/",a.backend="http://192.168.0.64:3000",a.state={name:"",bonusFee:0,coverURL:"",description:"",price:0,ipfsHashMeta:"",open:!1,address:"",NFTId:"",onSale:!1,owner:"",approvedAddr:"",currentAcc:"",onLoading:!1,childrenNum:0,loadItem:!0,encrypted:"\u672a\u77e5"},a.handleBuy=function(){var e=Object(k.a)(w.a.mark((function e(t){var n,i,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:n=e.sent,i=n[0],r=z.utils.toWei(a.state.price.toString()),s=Object(D.a)(a),a.setState({onLoading:!0}),Z.methods.safeTransferFrom(a.state.owner,i,a.state.NFTId).send({from:i,value:r}).then((function(e){s.setState({onLoading:!1}),alert("\u4ea4\u6613\u5df2\u7ecf\u4e0a\u94fe")}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleGetPrice=function(e){a.setState({price:e})},a.handleGetAddr=function(e){a.setState({address:e.target.value})},a}return Object(c.a)(n,[{key:"componentWillMount",value:function(){var e=Object(k.a)(w.a.mark((function e(){var t,n,a,i,r,s,o=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return t=e.sent,n=t[0],a=this,this.setState({currentAcc:n}),this.setState({NFTId:this.props.match.params.NFTId}),e.next=9,Z.methods.getIssueIdByNFTId(this.state.NFTId).call();case 9:return i=e.sent,e.next=12,Z.methods.getRoyaltyFeeByIssueId(i).call();case 12:return r=e.sent,e.next=15,Z.methods.tokenURI(this.props.match.params.NFTId).call().then((function(e){var t=e.split("/");o.setState({ipfsHashMeta:t[t.length-1]});var n=o.gateway+o.state.ipfsHashMeta;X()({method:"get",url:n,timeout:3e3}).then((function(e){for(var t=e.data,n=0,i="\u672a\u77e5",r=0;r<t.attributes.length;r++)0!==r?3!==r||(i="TRUE"===t.attributes[r].value.toUpperCase()?"\u662f":"\u5426"):n=t.attributes[r].value;a.setState({loadItem:!1,name:t.name,description:t.description,bonusFee:n,coverURL:t.image,encrypted:i})})).catch((function(e){var t="SparkNFT#"+o.props.match.params.NFTId;a.setState({loadItem:!1,name:t,description:"\u6682\u65f6\u65e0\u6cd5\u83b7\u53d6\u5230\u8be5nft\u7684\u76f8\u5173\u63cf\u8ff0",bonusFee:r,coverURL:"https://via.placeholder.com/100x140.png?text=SparkNFT"})}))}));case 15:return e.next=17,Z.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call().then((function(e){o.setState({price:e/1e18})}));case 17:return e.next=19,Z.methods.ownerOf(this.props.match.params.NFTId).call().then((function(e){o.setState({owner:e})}));case 19:return e.next=21,Z.methods.getApproved(this.props.match.params.NFTId).call().then((function(e){o.setState({approvedAddr:e.toLowerCase()})}));case 21:s=this.backend+"/api/v1/nft/info?nft_id="+this.state.NFTId,X.a.get(s).then((function(e){var t=e.data.children_count;a.setState({childrenNum:t})})).catch((function(e){console.debug(e.message),void 0!==e.response?(console.log(e.response),400==e.response.status&&e.response.data.message.includes("children not found")?console.debug("no children"):alert("\u83b7\u53d6nft\u5b50\u8282\u70b9\u60c5\u51b5\u9875\u9762\u5931\u8d25("+e+")")):alert("\u670d\u52a1\u5668\u672a\u54cd\u5e94,\u5b50\u8282\u70b9\u6570\u91cf\u83b7\u53d6\u5931\u8d25")}));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.props.classes,a=function(){return t.state.approvedAddr==t.state.currentAcc?Object(_.jsx)(m.a,{variant:"outlined",color:"primary",startIcon:Object(_.jsx)(Ee.a,{style:{fontSize:22}}),className:n.btnSell,onClick:t.handleBuy,children:"\u8d2d\u4e70"}):Object(_.jsx)(m.a,{variant:"outlined",startIcon:Object(_.jsx)(Ee.a,{style:{fontSize:22}}),className:n.btnDisable,disabled:!0,children:"\u8d2d\u4e70"})};return this.state.onLoading?Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Buy"})}),Object(_.jsxs)(f.a,{theme:Ue,children:[Object(_.jsx)(B,{}),Object(_.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(_.jsx)(te.a,{type:"bars",color:"#2196f3",width:"40%"})})]})]}):Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Buy"})}),Object(_.jsxs)(f.a,{theme:Ue,children:[Object(_.jsx)(B,{}),Object(_.jsxs)(O.a,{component:"main",className:n.container,children:[Object(_.jsx)(m.a,{startIcon:Object(_.jsx)(xe.a,{style:{fontSize:22}}),href:"/",style:{marginTop:50,marginBottom:100,fontSize:22},children:"\u56de\u5230\u9996\u9875"}),Object(_.jsx)("div",{className:n.paper,children:this.state.loadItem?Object(_.jsxs)(h.a,{container:!0,spacing:5,className:n.content,children:[Object(_.jsx)(h.a,{item:!0,xs:4,children:Object(_.jsx)(be.a,{variant:"rect",width:300,height:500,className:n.img})}),Object(_.jsxs)(h.a,{item:!0,xs:!0,style:{marginLeft:"5%",maxWidth:500,minWidth:350},children:[Object(_.jsx)(be.a,{animation:"wave",variant:"text",width:"70%",height:30}),Object(_.jsx)(be.a,{animation:"wave",variant:"text",width:"100%",height:70}),Object(_.jsx)(be.a,{animation:"wave",variant:"rect",width:"100%",height:300,style:{marginBottom:50}}),a()]})]}):Object(_.jsxs)(h.a,{container:!0,className:n.content,spacing:5,children:[Object(_.jsx)(h.a,{item:!0,xs:4,style:{maxWidth:600},children:Object(_.jsx)(ne.a,{className:n.imgPaper,children:Object(_.jsx)("img",{style:{width:300,marginTop:20,marginBottom:50},src:this.state.coverURL})})}),Object(_.jsxs)(h.a,{item:!0,xs:!0,className:n.content2,children:[Object(_.jsxs)(g.a,(e={color:"inherit",align:"left"},Object(p.a)(e,"color","textSecondary"),Object(p.a)(e,"noWrap",!0),Object(p.a)(e,"style",{fontFamily:"Teko",fontSize:16,marginTop:"2%"}),Object(p.a)(e,"children",["#",this.state.NFTId]),e)),Object(_.jsx)(g.a,{color:"inherit",align:"left",noWrap:!0,style:{fontFamily:"Teko",fontSize:34},children:Object(_.jsx)("b",{children:this.state.name})}),Object(_.jsx)(g.a,{align:"left",color:"textSecondary",paragraph:!0,style:{marginTop:"2%",maxWidth:"100%",fontSize:16},children:this.state.description}),Object(_.jsxs)(g.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"2%",maxWidth:"65%",fontSize:20},children:["\u521b\u4f5c\u8005\u5206\u7ea2\u6bd4\u4f8b: ",this.state.bonusFee," %"]}),Object(_.jsxs)(g.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"2%",maxWidth:"100%",fontSize:18},children:["\u552e\u4ef7: ",this.state.price," ETH"]}),Object(_.jsxs)(g.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"1%",maxWidth:"65%",fontSize:12},children:["\u5f53\u524d\u62e5\u6709\u8005: ",this.state.owner]}),Object(_.jsxs)(g.a,{align:"left",color:"textPrimary",paragraph:!0,style:{maxWidth:"65%",fontSize:12},children:["\u5f53\u524d\u62e5\u6709\u7684\u5b50\u8282\u70b9\u6570\u91cf: ",this.state.childrenNum]}),Object(_.jsxs)(g.a,{align:"left",color:"textPrimary",paragraph:!0,style:{maxWidth:"65%",fontSize:12},children:["NFT\u4f5c\u54c1\u662f\u5426\u52a0\u5bc6: ",this.state.encrypted]}),a()]})]})})]})]})]})}}]),n}(i.Component),He=Object(x.a)((function(e){var t,n,a,i;return{container:{maxWidth:1500},paper:{marginTop:e.spacing(1),textAlign:"center",maxWidth:1500},btnSell:{margin:e.spacing(1),fontSize:16,borderRadius:10,borderWidth:2,borderColor:"#2196f3",color:"#2196f3",marginLeft:"10%",width:100},btnDisable:{margin:e.spacing(1),fontSize:16,borderRadius:10,borderWidth:3,borderColor:"#909497",color:"#909497",marginLeft:"10%",width:100},inputNum:{height:40,borderRadius:5,width:550,fontSize:20},input:{height:40,borderRadius:5},content:(t={fontFamily:"Teko"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("sm","md"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("md","lg"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.up("xl"),{justifyContent:"center",alignItems:"flex-start"}),t),img:(n={width:300,marginBottom:50},Object(p.a)(n,e.breakpoints.between("xs","sm"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("sm","md"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("md","lg"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{marginLeft:"30%"}),Object(p.a)(n,e.breakpoints.up("xl"),{marginLeft:"40%"}),n),imgPaper:(a={width:350,marginBottom:50,backgroundColor:"#EFEBE9"},Object(p.a)(a,e.breakpoints.between("sm","md"),{marginLeft:"20%"}),Object(p.a)(a,e.breakpoints.between("md","lg"),{marginLeft:"20%"}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{marginLeft:"30%"}),Object(p.a)(a,e.breakpoints.up("xl"),{marginLeft:"40%"}),a),content2:(i={fontFamily:"Teko",textAlign:"center"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{maxWidth:500}),Object(p.a)(i,e.breakpoints.between("sm","md"),{marginLeft:90,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("md","lg"),{marginLeft:80,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{marginLeft:50,maxWidth:500}),Object(p.a)(i,e.breakpoints.up("xl"),{marginLeft:60,maxWidth:500}),i)}}),{withTheme:!0})(Ge),qe=n(1002),Je=n(1005),Ve=n(1004),Ke=n(1003),Ye=Object(j.a)({palette:{primary:{main:"#FDFEFE"},secondary:{main:"#2196f3"}}}),$e=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).gateway="https://gateway.pinata.cloud/ipfs/",e.cards=[],e.state={isLogin:!1,user_address:null,name:"",viewable:!1,cards:[],onloading:!1,SkeletoNumber:0},e.getAccount=Object(k.a)(w.a.mark((function t(){var n,a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:n=t.sent,a=n[0],e.setState({name:"22"}),e.setState({isLogin:!0}),e.setState({user_address:a});case 7:case"end":return t.stop()}}),t)}))),e.loadNft=Object(k.a)(w.a.mark((function t(){var n,a,i,r,s,o,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.ethereum.isConnected()){t.next=3;break}return alert("\u8bf7\u5148\u94fe\u63a5metamask"),t.abrupt("return");case 3:return t.next=5,window.ethereum.request({method:"eth_chainId"});case 5:if("0x4"===t.sent){t.next=9;break}return alert("\u8bf7\u5207\u6362\u81f3rinkeby\u7f51\u7edc"),t.abrupt("return");case 9:return document.getElementById("viewButton").innerHTML="\u6b63\u5728\u52a0\u8f7d\u3002\u3002",n=Z,a=[],t.next=14,e.getNft(n);case 14:if(0!==(i=t.sent).length){t.next=21;break}return alert("\u6682\u65e0\u53ef\u5c55\u793aNFTs"),document.getElementById("viewButton").innerHTML="\u67e5\u770b\u6211\u7684\u6536\u85cf",t.abrupt("return");case 21:return t.next=23,e.getMetadata(n,i);case 23:for(r=t.sent,s=0;s<i.length;s++)o={id:i[s],title:r[s].name,description:r[s].description,bonusFee:r[s].attributes.value,image:r[s].image},a.push(o);document.getElementById("viewButton").innerHTML="\u73a9\u5f97\u5c3d\u5174\uff01",c=a.reverse(),e.setState({viewable:!0}),e.setState({cards:c}),e.setState({onloading:!1,SkeletoNumber:0});case 30:case"end":return t.stop()}}),t)}))),e.getMetadata=function(){var e=Object(k.a)(w.a.mark((function e(t,n){var a,i,r,s,o,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=w.a.mark((function e(i){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.tokenURI(n[i]).call();case 2:return r=e.sent,s=r.split("/"),o=s[s.length-1],c="https://gateway.pinata.cloud/ipfs/"+o,e.next=8,X()({method:"get",url:c,timeout:3e3}).then((function(e){console.log("meta: ",e.data),a.push(e.data)})).catch((function(e){console.log("time out"),console.debug(c);var t={name:"SparkNFT#"+n[i],description:"\u6682\u65f6\u65e0\u6cd5\u83b7\u53d6\u5230\u8be5nft\u7684\u76f8\u5173\u63cf\u8ff0",image:"https://testnets.opensea.io/static/images/placeholder.png",attributes:[{display_type:"boost_percentage",trait_type:"Bonuse Percentage",value:0},{trait_type:"File Address",value:"file_url"}]};a.push(t)}));case 8:case"end":return e.stop()}}),e)})),r=0;case 3:if(!(r<n.length)){e.next=8;break}return e.delegateYield(i(r),"t0",5);case 5:r++,e.next=3;break;case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.getNft=function(){var t=Object(k.a)(w.a.mark((function t(n){var a,i,r,s,o,c,l,d,p,b;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return a=t.sent,i=a[0],r={filter:{from:i},fromBlock:"9186438"},s={filter:{to:i},fromBlock:"9186438"},t.next=8,n.getPastEvents("Transfer",r);case 8:return o=t.sent,t.next=11,n.getPastEvents("Transfer",s);case 11:return c=t.sent,l=[],d=new Map,o.map((function(e){var t=e.returnValues.tokenId;l.push(t),"undefined"==typeof d.get(t)?d.set(t,-1):d.set(t,d.get(t)-1)})),c.map((function(e){var t=e.returnValues.tokenId;l.push(t),"undefined"==typeof d.get(t)?d.set(t,1):d.set(t,d.get(t)+1)})),p=new Map,b=[],l.map((function(e){"undefined"!==typeof p.get(e)&&!1!==p.get(e)||(d.get(e)>0&&b.push(e),p.set(e,!0))})),b.length>0&&e.setState({onloading:!0,SkeletoNumber:b.length}),t.abrupt("return",b);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderDescription=function(e){return e.length<=150?e:e.substring(0,150)+".........."},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.classes,t=this;return window.ethereum.on("chainChanged",(function(e){window.location.reload()})),Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"Publish Token | Collections"})}),Object(_.jsxs)(f.a,{theme:Ye,children:[Object(_.jsx)(B,{}),Object(_.jsx)(O.a,{component:"main",className:e.container,children:Object(_.jsx)("div",{className:e.paper,children:Object(_.jsx)(h.a,{container:!0,justifyContent:"center",children:Object(_.jsxs)(h.a,{item:!0,xs:10,children:[Object(_.jsx)(g.a,{color:"inherit",noWrap:!0,className:e.title,children:Object(_.jsx)("b",{children:"\u6211\u7684\u6536\u85cf\u9986"})}),Object(_.jsx)(g.a,{color:"inherit",noWrap:!0,className:e.title2,children:Object(_.jsx)("b",{children:"An ERC721 Token Trying to Solve Existing Publishing Dilemma"})}),Object(_.jsx)(h.a,{container:!0,justifyContent:"center",spacing:5,children:Object(_.jsx)(h.a,{children:Object(_.jsx)(m.a,{size:"large",variant:"contained",color:"secondary",id:"viewButton",className:e.btnMain,onClick:this.loadNft,children:Object(_.jsx)("b",{children:"\u67e5\u770b\u6211\u7684\u6536\u85cf"})})})})]})})})})]}),Object(_.jsx)("main",{children:Object(_.jsx)(O.a,{className:e.cardGrid,maxWidth:"md",children:Object(_.jsx)(h.a,{container:!0,spacing:4,children:(this.state.onloading?Array.from(new Array(this.state.SkeletoNumber)):this.state.cards).map((function(n){return function(n){return Object(_.jsx)(h.a,{item:!0,xs:12,sm:6,md:4,children:n?Object(_.jsxs)(qe.a,{className:e.card,children:[Object(_.jsx)(Ke.a,{className:e.cardMedia,image:n.image,title:"Image title"}),Object(_.jsxs)(Ve.a,{className:e.cardContent,children:[Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h5",component:"h2",children:Object(_.jsx)("b",{children:n.title})}),Object(_.jsx)(g.a,{children:t.renderDescription(n.description)})]}),Object(_.jsxs)(Je.a,{children:[Object(_.jsx)(m.a,{size:"small",variant:"contained",color:"primary",href:"/SparkLink/#/NFT/"+n.id,children:Object(_.jsx)("b",{children:"\u67e5\u770b "})}),Object(_.jsx)(h.a,{xs:3}),Object(_.jsx)(g.a,{variant:"body2",gutterBottom:!0,children:Object(_.jsxs)("b",{children:["NFT id: ",n.id," "]})})]})]}):Object(_.jsxs)(qe.a,{className:e.card,children:[Object(_.jsx)(be.a,{variant:"rect",style:{marginLeft:70},width:260,height:288}),Object(_.jsx)(be.a,{width:"60%",style:{marginTop:40},height:33}),Object(_.jsx)(be.a,{height:33}),Object(_.jsx)(be.a,{height:33}),Object(_.jsx)(be.a,{height:33})]})})}(n)}))})})})]})}}]),n}(i.Component),Qe=Object(x.a)((function(e){var t,n;return{icon:{marginRight:e.spacing(2)},titleFont:{fontFamily:"Teko"},btn:{color:"#424949",borderWidth:8,borderColor:"#e3f2fd",fontSize:16},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(36,0,6)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"100%"},cardContent:{flexGrow:2},paper:{marginTop:e.spacing(7),textAlign:"center"},container:{maxWidth:"100%"},btnMain:{marginTop:e.spacing(3),color:"#FFFFFF",borderWidth:2,borderColor:"#e3f2fd",fontSize:16,borderRadius:25,width:150},btnSecond:{marginTop:e.spacing(3),color:"#03A9F4",borderWidth:3,borderColor:"#03A9F4",fontSize:16,borderRadius:25,width:150},title:(t={fontFamily:"Teko",marginTop:"5%"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{fontSize:35}),Object(p.a)(t,e.breakpoints.between("sm","md"),{fontSize:40}),Object(p.a)(t,e.breakpoints.between("md","lg"),{fontSize:55}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{fontSize:90}),Object(p.a)(t,e.breakpoints.up("xl"),{fontSize:110}),t),title2:(n={fontFamily:"Teko"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:16}),Object(p.a)(n,e.breakpoints.between("sm","md"),{fontSize:25}),Object(p.a)(n,e.breakpoints.between("md","lg"),{fontSize:35}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{fontSize:45}),Object(p.a)(n,e.breakpoints.up("xl"),{fontSize:55}),n)}}),{withTheme:!0})($e),Xe=n(1006),Ze=Object(j.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}}),et=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).gateway="https://gateway.pinata.cloud/ipfs/",a.backend="http://192.168.0.64:3000",a.state={Name:"",Description:"",BonusFee:0,Cover:"",contract:null,price:"",priceString:"",Leaf:0,onLoading:!1,loadItem:!0,open:!1},a.shill=function(){var e=Object(k.a)(w.a.mark((function e(t){var n,i,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return n=e.sent,i=n[0],r=Z,a.setState({onLoading:!0}),e.next=8,r.methods.acceptShill(a.props.match.params.id).send({from:i,value:a.state.price});case 8:e.sent,alert("\u4ea4\u6613\u5df2\u4e0a\u94fe"),a.setState({onLoading:!1,onSale:!0});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loadLoadingState=function(){a.setState({onloading:!0})},a.handleClickLink=function(e){var t="/SparkLink/#/NFT/Spark/"+a.state.recommendNFT;window.open(t)},console.log(a.state.loadItem),window.ethereum?(window.ethereum.isConnected()||window.ethereum.request({method:"eth_requestAccounts"}),window.ethereum.request({method:"eth_chainId"}).then((function(e){"0x4"===e||alert("\u8bf7\u5207\u6362\u81f3rinkeby network")})),a):(alert("\u8bf7\u5148\u5b89\u88c5metamask"),Object(pe.a)(a))}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(k.a)(w.a.mark((function e(){var t,n,a,i=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this,(t=Z).methods.tokenURI(this.props.match.params.id).call().then((function(e){var t=e.split("/");i.setState({hash:t[t.length-1]}),X.a.get(e).then((function(e){var t,n=e.data;console.log(n);for(var a=0;a<n.attributes.length;a++)"bonusFee"===n.attributes[a].trait_type&&(t=n.attributes[a].value);i.setState({Name:n.name}),i.setState({Description:n.description}),i.setState({BonusFee:t}),i.setState({Cover:n.image})}))})),t.methods.getShillPriceByNFTId(this.props.match.params.id).call().then((function(e){i.setState({price:e});var t=z.utils.fromWei(e,"ether");t+=" ETH",i.setState({priceString:t})})),a=this.backend+"/api/v1/nft/info?nft_id="+this.props.match.params.id,X.a.get(a).then((function(e){var t=e.data.children_count;e.data.suggest_next_nft===i.props.match.params.id||"0"===e.data.suggest_next_nft?n.setState({childrenNum:t,recommendNFT:e.data.suggest_next_nft,showRecommend:!1}):n.setState({childrenNum:t,recommendNFT:e.data.suggest_next_nft,showRecommend:!0}),n.setState({loadItem:!1})})).catch((function(e){void 0!==e.response?(console.log(e.response),400===e.response.status&&e.response.data.message.includes("children not found")?console.debug("no children"):alert("\u83b7\u53d6nft\u5b50\u8282\u70b9\u60c5\u51b5\u9875\u9762\u5931\u8d25("+e+")"),n.setState({loadItem:!1})):alert("\u670d\u52a1\u5668\u672a\u54cd\u5e94")})),console.log(this.state.loadItem);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this.props.classes;return this.state.onLoading?Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Publish"})}),Object(_.jsxs)(f.a,{theme:Ze,children:[Object(_.jsx)(B,{}),Object(_.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(_.jsx)(te.a,{type:"bars",color:"#2196f3",width:"40%"})})]})]}):Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Spark"})}),Object(_.jsx)(f.a,{theme:Ze,children:Object(_.jsx)(B,{})}),Object(_.jsx)("main",{children:Object(_.jsxs)(O.a,{component:"main",className:t.container,children:[Object(_.jsxs)(h.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"flex-start",children:[Object(_.jsx)(h.a,{children:Object(_.jsx)(m.a,{startIcon:Object(_.jsx)(xe.a,{style:{fontSize:"2rem"}}),href:"/SparkLink/#/collections",style:{marginTop:20,marginBottom:10,fontSize:"2rem"},children:"\u56de\u5230\u6211\u7684\u6536\u85cf\u9986"})}),Object(_.jsx)(h.a,{xs:9})]}),Object(_.jsx)(h.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",xs:12,children:Object(_.jsx)(g.a,{color:"inherit",noWrap:!0,className:t.title,children:"\ud83d\udd25 NFT \ud83d\udd25"})}),Object(_.jsxs)("div",{className:t.paper,children:[this.state.loadItem?Object(_.jsxs)(h.a,{container:!0,spacing:5,className:t.content,children:[Object(_.jsx)(h.a,{item:!0,children:Object(_.jsx)(be.a,{variant:"rect",width:300,height:500,style:{width:370,marginLeft:50,marginBottom:50}})}),Object(_.jsxs)(h.a,{item:!0,style:{marginLeft:"5%"},children:[Object(_.jsx)(be.a,{animation:"wave",variant:"text",width:200,height:30}),Object(_.jsx)(be.a,{animation:"wave",variant:"text",width:400,height:70}),Object(_.jsx)(be.a,{animation:"wave",variant:"rect",width:500,height:300,style:{marginBottom:50}})]})]}):Object(_.jsxs)(h.a,{container:!0,spacing:5,className:t.content,children:[Object(_.jsx)(h.a,{item:!0,style:{maxWidth:200},children:Object(_.jsx)(ne.a,{className:t.imagePapaer,children:Object(_.jsx)("img",{className:t.imageStyle,src:this.state.Cover})})}),Object(_.jsx)(h.a,{xs:1}),Object(_.jsxs)(h.a,{item:!0,xs:!0,className:t.content2,children:[Object(_.jsxs)(g.a,(e={color:"inherit",align:"left"},Object(p.a)(e,"color","textSecondary"),Object(p.a)(e,"noWrap",!0),Object(p.a)(e,"style",{fontFamily:"Teko",fontSize:16,marginTop:"2%"}),Object(p.a)(e,"children",["#",this.props.match.params.id]),e)),Object(_.jsx)(g.a,{color:"inherit",align:"left",noWrap:!0,style:{fontFamily:"Teko",fontSize:34,marginTop:"2%"},children:Object(_.jsx)("b",{children:this.state.Name})}),Object(_.jsx)(g.a,{align:"left",color:"textSecondary",paragraph:!0,style:{marginTop:"2%",maxWidth:"100%",fontSize:16},children:this.state.Description}),Object(_.jsxs)(g.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"6%",maxWidth:"100%",fontSize:24},children:["\u70b9\u706b\u4ef7\u683c: ",this.state.priceString]}),Object(_.jsx)(h.a,{container:!0,direction:"row",className:t.cbutton,children:Object(_.jsx)(h.a,{children:Object(_.jsxs)(h.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",children:[Object(_.jsx)(h.a,{xs:2}),this.state.showRecommend?Object(_.jsx)(h.a,{children:Object(_.jsx)(m.a,{size:"large",style:{fontSize:"2rem"},variant:"outlined",color:"secondary",target:"_blank",className:t.btnSecond,disabled:!0,children:Object(_.jsxs)(g.a,{variant:"button",component:"h2",gutterBottom:!0,children:[Object(_.jsx)("font",{size:"4",children:"\ud83d\udd25   "}),"\xa0  ",Object(_.jsx)("font",{size:"3",children:"\u94f8\u9020  "})]})})}):Object(_.jsx)(h.a,{children:Object(_.jsx)(m.a,{size:"large",style:{fontSize:"3rem"},variant:"outlined",color:"secondary",target:"_blank",className:t.btnSecond,onClick:this.shill,children:Object(_.jsxs)(g.a,{variant:"button",component:"h2",gutterBottom:!0,children:[Object(_.jsx)("font",{size:"4",children:"\ud83d\udd25   "}),"\xa0  ",Object(_.jsx)("font",{size:"3",children:"\u94f8\u9020  "})]})})})]})})})]})]}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),this.state.showRecommend?Object(_.jsxs)(h.a,{children:[Object(_.jsx)(g.a,{variant:"h4",gutterBottom:!0,children:"\u6b64NFT\u7684\u5b50\u8282\u70b9\u5df2\u7ecf\u552e\u5b8c\uff0c\u6211\u4eec\u7ed9\u60a8\u63a8\u8350\u4e86\u5176\u4ed6\u8fd8\u80fd\u8d2d\u4e70\u7684\u8282\u70b9\uff1a"}),Object(_.jsx)(Xe.a,{onClick:this.handleClickLink,style:{fontSize:20,textDecoration:"underline"},children:window.location.host+"/SparkLink/#/NFT/Spark/"+this.state.recommendNFT})]}):Object(_.jsx)("div",{})]}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{})]})})]})}}]),n}(i.Component),tt=Object(x.a)((function(e){var t,n,a,i,r,s,o;return{container:{maxWidth:1500},icon:{marginRight:e.spacing(2)},btn:{color:"#424949",borderWidth:2,borderColor:"#e3f2fd",fontSize:16},paper:{marginTop:e.spacing(1),textAlign:"center",maxWidth:1370},btnMain:{marginTop:e.spacing(3),color:"#FFFFFF",borderWidth:2,borderColor:"#e3f2fd",fontSize:16,borderRadius:25,width:150,maxWidth:"20rem",minWidth:"10rem"},btnSecond:{marginTop:e.spacing(3),color:"#03A9F4",borderWidth:3,borderColor:"#03A9F4",fontSize:16,borderRadius:25,width:150,maxWidth:"20rem",minWidth:"10rem"},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"100%"},cardContent:{flexGrow:1},title:(t={fontFamily:"Teko"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{fontSize:48}),Object(p.a)(t,e.breakpoints.between("sm","md"),{fontSize:60}),Object(p.a)(t,e.breakpoints.between("md","lg"),{fontSize:70}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{fontSize:75}),Object(p.a)(t,e.breakpoints.up("xl"),{fontSize:80}),t),title2:(n={fontFamily:"Teko"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:16}),Object(p.a)(n,e.breakpoints.between("sm","md"),{fontSize:25}),Object(p.a)(n,e.breakpoints.between("md","lg"),{fontSize:35}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{fontSize:45}),Object(p.a)(n,e.breakpoints.up("xl"),{fontSize:55}),n),content:(a={fontFamily:"Teko"},Object(p.a)(a,e.breakpoints.between("xs","sm"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("sm","md"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("md","lg"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.up("xl"),{justifyContent:"center",alignItems:"flex-start"}),a),content2:(i={fontFamily:"Teko"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{marginLeft:10,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("sm","md"),{marginLeft:90,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("md","lg"),{marginLeft:80,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{marginLeft:50,maxWidth:500}),Object(p.a)(i,e.breakpoints.up("xl"),{marginLeft:60,maxWidth:500}),i),cbutton:(r={fontFamily:"Teko"},Object(p.a)(r,e.breakpoints.between("xs","sm"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(r,e.breakpoints.between("sm","md"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(r,e.breakpoints.between("md","lg"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(r,e.breakpoints.between("lg","xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(r,e.breakpoints.up("xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),r),imageStyle:(s={},Object(p.a)(s,e.breakpoints.between("xs","sm"),{width:280,height:365,marginTop:20,marginBottom:50}),Object(p.a)(s,e.breakpoints.between("sm","md"),{width:290,height:385,marginTop:20,marginBottom:50}),Object(p.a)(s,e.breakpoints.between("md","lg"),{width:300,height:420,marginTop:20,marginBottom:50}),Object(p.a)(s,e.breakpoints.between("lg","xl"),{width:300,marginTop:20,marginBottom:50}),Object(p.a)(s,e.breakpoints.up("xl"),{width:300,marginTop:20,marginBottom:50}),s),imagePapaer:(o={},Object(p.a)(o,e.breakpoints.between("xs","sm"),{backgroundColor:"#EFEBE9",width:330,height:420,marginLeft:10}),Object(p.a)(o,e.breakpoints.between("sm","md"),{backgroundColor:"#EFEBE9",width:340,height:440,marginLeft:10}),Object(p.a)(o,e.breakpoints.between("md","lg"),{backgroundColor:"#EFEBE9",width:350,height:465,marginLeft:10}),Object(p.a)(o,e.breakpoints.between("lg","xl"),{backgroundColor:"#EFEBE9",width:350,marginLeft:10}),Object(p.a)(o,e.breakpoints.up("xl"),{backgroundColor:"#EFEBE9",width:350,marginLeft:10}),o)}}),{withTheme:!0})(et),nt=Object(j.a)({palette:{primary:{main:"#FDFEFE"},secondary:{main:"#2196f3"}}}),at=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Publish"})}),Object(_.jsxs)(f.a,{theme:nt,children:[Object(_.jsx)(B,{}),Object(_.jsx)(O.a,{component:"main",className:e.container,children:Object(_.jsxs)("div",{className:e.paper,children:[Object(_.jsx)(g.a,{color:"inherit",noWrap:!0,className:e.shouldKnow,children:Object(_.jsx)("b",{children:"\u53d1\u5e03\u987b\u77e5"})}),Object(_.jsx)(g.a,{variant:"h4",paragraph:!0,className:e.content,children:"\u5728\u53bb\u53d1\u5e03\u60a8\u7684\u4f5c\u54c1\u4e4b\u524d\uff0c\u60a8\u9700\u8981\u4e86\u89e3\u4ee5\u4e0b\u4fe1\u606f\uff0c\u5b83\u4eec\u5c06\u6709\u52a9\u4e8e\u60a8\u4e86\u89e3\u5b8c\u6574\u7684\u53d1\u5e03\u6d41\u7a0b\uff1a"}),Object(_.jsxs)(g.a,{color:"textSecondary",paragraph:!0,className:e.content,children:[Object(_.jsx)("b",{children:"1."})," \u60a8\u7684\u4f5c\u54c1\u5c06\u88ab\u5b58\u50a8\u5728IPFS\uff08InterPlanetary File System\uff09\u4e2d\uff0c\u800c\u5b58\u50a8\u5730\u5740\u5c06\u88ab\u8bb0\u5f55\u5728\u4ee5\u592a\u574a\u4e0a\uff0c\u4e0e\u60a8\u7684NFT\u7ed1\u5b9a\u5728\u4e00\u8d77"]}),Object(_.jsxs)(g.a,{color:"textSecondary",paragraph:!0,className:e.content,children:[Object(_.jsx)("b",{children:"2."})," \u60a8\u53ef\u4ee5\u9009\u62e9\u662f\u5c06\u60a8\u7684\u4f5c\u54c1\u5f00\u6e90\u5f97\u4fdd\u5b58\u5728IPFS\u4e0a\uff0c\u6216\u8005\u52a0\u5bc6\u4fdd\u5b58\u5728IPFS\u4e0a\u3002\u9488\u5bf9\u52a0\u5bc6\u7684\u4f5c\u54c1\uff0c\u53ea\u6709\u6301\u6709\u60a8\u53d1\u884c\u7684NFT\u7684\u8bfb\u8005\u624d\u80fd\u8bbf\u95ee\u3002 ",Object(_.jsx)("br",{})]}),Object(_.jsxs)(g.a,{color:"textSecondary",paragraph:!0,className:e.content,children:[Object(_.jsx)("b",{children:"3."})," \u5982\u679c\u60a8\u9009\u62e9\u52a0\u5bc6\u4fdd\u5b58\u5728IPFS\u4e0a\uff0c\u60a8\u9700\u8981\u5728\u5c06\u4f5c\u54c1\u57fa\u672c\u4fe1\u606f\u4e0a\u4f20\u5230\u94fe\u4e0a\u540e\uff0c\u518d\u8bbe\u7f6e\u4f5c\u54c1\u7684\u5730\u5740\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u6211\u4eec\u4f1a\u5f15\u5bfc\u60a8\u5b8c\u6210\uff0c\u8bf7\u52ff\u62c5\u5fc3\u3002 ",Object(_.jsx)("br",{})]}),Object(_.jsxs)(g.a,{color:"textSecondary",paragraph:!0,className:e.content,children:[Object(_.jsx)("b",{children:"4."})," \u5f53\u60a8\u5c06\u4f5c\u54c1\u53d1\u5e03\u5728\u6211\u4eec\u5e73\u53f0\u65f6\uff0c\u6211\u4eec\u9ed8\u8ba4\u60a8\u4f1a\u652f\u6301\u4e8c\u6b21\u521b\u4f5c\uff0c\u5904\u4e8e\u60a8\u5ba3\u4f20\u7f51\u7edc\u4e2d\u7684\u8bfb\u8005\u6709\u6743\u5c06\u4ed6\u4eec\u6301\u6709\u7684NFT\u5bf9\u5e94\u7684\u5730\u5740\u66ff\u6362\u4e3a\u4ed6\u4eec\u81ea\u5df1\u7684\u4e8c\u6b21\u521b\u4f5c\u4f5c\u54c1\u3002 ",Object(_.jsx)("br",{})]}),Object(_.jsxs)(h.a,{container:!0,justifyContent:"center",style:{fontFamily:"Teko",marginTop:70},children:[Object(_.jsx)(h.a,{item:!0,xs:4,children:Object(_.jsx)(m.a,{size:"large",variant:"contained",color:"secondary",className:e.btnMain,href:"/SparkLink/#/encryptedPublish",children:Object(_.jsx)("b",{children:"\u52a0\u5bc6\u53d1\u5e03"})})}),Object(_.jsx)(h.a,{item:!0,xs:3,children:Object(_.jsx)(m.a,{size:"large",variant:"outlined",color:"secondary",className:e.btnSecond,href:"/SparkLink/#/publish",children:Object(_.jsx)("b",{children:"\u5f00\u6e90\u53d1\u5e03"})})})]})]})})]})]})}}]),n}(i.Component),it=Object(x.a)((function(e){var t,n,a,i;return{icon:{marginRight:e.spacing(2)},titleFont:{fontFamily:"Teko"},btn:{color:"#424949",borderWidth:2,borderColor:"#e3f2fd",fontSize:16},btnMain:(t={color:"#FFFFFF",borderColor:"#e3f2fd",borderWidth:2,borderRadius:25},Object(p.a)(t,e.breakpoints.between("xs","sm"),{fontSize:5}),Object(p.a)(t,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(t,e.breakpoints.between("md","lg"),{fontSize:16}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{fontSize:16,width:150}),Object(p.a)(t,e.breakpoints.up("xl"),{fontSize:30,width:300,height:70}),t),btnSecond:(n={color:"#03A9F4",borderColor:"#03A9F4",borderWidth:2,borderRadius:25},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:5,width:95}),Object(p.a)(n,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(n,e.breakpoints.between("md","lg"),{fontSize:16}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{fontSize:16,width:150}),Object(p.a)(n,e.breakpoints.up("xl"),{fontSize:30,width:300,height:70}),n),paper:{marginTop:e.spacing(7),maxWidth:"150%"},content:(a={fontFamily:"Teko",marginTop:20,lineHeight:1.5},Object(p.a)(a,e.breakpoints.between("xs","sm"),{fontSize:16}),Object(p.a)(a,e.breakpoints.between("sm","md"),{fontSize:20}),Object(p.a)(a,e.breakpoints.between("md","lg"),{fontSize:20}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{fontSize:20}),Object(p.a)(a,e.breakpoints.up("xl"),{fontSize:30}),a),shouldKnow:(i={fontFamily:"Teko",textAlign:"center"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{fontSize:16}),Object(p.a)(i,e.breakpoints.between("sm","md"),{fontSize:20}),Object(p.a)(i,e.breakpoints.between("md","lg"),{fontSize:40}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{fontSize:40}),Object(p.a)(i,e.breakpoints.up("xl"),{fontSize:60}),i)}}),{withTheme:!0})(at),rt=n(371),st=rt.pinata_api_key,ot=rt.pinata_secret_api_key,ct=n(372),lt=n(373),dt=n(247),pt=Object(j.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}}),bt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).backend="http://192.168.0.64:3000",e.state={name:"",bonusFee:0,price:0,buffer:null,file:null,ipfsHashCover:"",ipfsMeta:"",fileType:"",fileIpfs:"",description:"",shareTimes:0,onLoading:!1,rootNFTId:"",issueId:"",allowSubmitPDF:!1,usedAcc:"",sig:"",finished:!1,open:!1,coverURL:"",jumped:!1},e.handleGetPubName=function(t){e.setState({name:t.target.value})},e.handleGetBonusFee=function(t){e.setState({bonusFee:t})},e.handleGetPrice=function(t){e.setState({price:t})},e.handleGetShareTimes=function(t){e.setState({shareTimes:t})},e.handleGetDescription=function(t){e.setState({description:t.target.value})},e.handleGetNFTId=function(t){e.setState({rootNFTId:String(t)})},e.handleClose=function(t){e.setState({open:!1})},e.handleClickOpen=function(t){e.setState({open:!0})},e.jump=function(){var t=Object(k.a)(w.a.mark((function t(n){var a,i,r,s,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return a=t.sent,i=a[0],e.setState({usedAcc:i}),t.next=7,Z.methods.ownerOf(e.state.rootNFTId).call();case 7:return r=t.sent,t.next=10,Z.methods.getIssueIdByNFTId(e.state.rootNFTId).call();case 10:return s=t.sent,t.next=13,Z.methods.getRoyaltyFeeByIssueId(s).call();case 13:o=t.sent,i==r.toLowerCase()?e.setState({onLoading:!1,allowSubmitPDF:!0,jumped:!0,bonusFee:o}):alert("\u60a8\u5e76\u4e0d\u662f\u6b64NFT\u7684\u6301\u6709\u8005");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.submit=function(){var t=Object(k.a)(w.a.mark((function t(n){var a,i,r,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:a=t.sent,i=a[0],e.setState({usedAcc:i}),0===e.state.price||0===e.state.bonusFee||0===e.state.shareTimes?alert("\u4f60\u6709\u4fe1\u606f\u5c1a\u672a\u586b\u5199"):(e.setState({onLoading:!0}),r=Object(D.a)(e),s=z.utils.toWei(e.state.price.toString()),"0x0000000000000000000000000000000000000000000000000000000000000000",Z.methods.publish(s,e.state.bonusFee,e.state.shareTimes,"0x0000000000000000000000000000000000000000000000000000000000000000").send({from:e.state.usedAcc}).then((function(e){console.log(e);var t=e.events.Publish.returnValues,n=String(t.rootNFTId);console.debug(typeof n);var a=t.issue_id;r.setState({onLoading:!1,rootNFTId:n,issueId:a,allowSubmitPDF:!0}),alert("\u5df2\u7ecf\u6210\u529f\u53d1\u5e03\u4f5c\u54c1")})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.checkDetail=function(){var t=Object(k.a)(w.a.mark((function t(n){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a="/SparkLink/#/NFT/"+e.state.rootNFTId,window.open(a,"_self");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.submitWork=Object(k.a)(w.a.mark((function t(){var n,a,i,r,s,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.state.ipfsHashCover&&""!==e.state.fileIpfs){t.next=4;break}alert("\u4f60\u6709\u6587\u4ef6\u5c1a\u672a\u586b\u5199"),t.next=22;break;case 4:return n="https://gateway.pinata.cloud/ipfs/"+e.state.ipfsHashCover,e.setState({coverURL:n}),console.debug("coverURL: ",e.state.coverURL),a=e.state.description.replace(/(\r\n\t|\n|\r\t)/gm," "),t.next=10,window.ethereum.request({method:"eth_requestAccounts"});case 10:if(i=t.sent,i[0]===e.state.usedAcc){t.next=15;break}return alert("\u8d26\u6237\u53d1\u751f\u53d8\u5316\uff0c\u8bf7\u5207\u6362\u56de\u539f\u8d26\u6237"),t.abrupt("return");case 15:r="https://gateway.pinata.cloud/ipfs/"+e.state.fileIpfs,s={name:e.state.name,description:a,image:e.state.coverURL,attributes:[{display_type:"boost_percentage",trait_type:"Bonuse Percentage",value:e.state.bonusFee},{trait_type:"File Address",value:r},{value:e.state.fileType},{trait_type:"Encrypted",value:"TRUE"}]},console.debug(s),"https://api.pinata.cloud/pinning/pinJSONToIPFS",o=Object(D.a)(e),e.setState({onLoading:!0}),X.a.post("https://api.pinata.cloud/pinning/pinJSONToIPFS",s,{headers:{pinata_api_key:st,pinata_secret_api_key:ot}}).then((function(e){console.debug("metadata: ",e.data.IpfsHash);var t=lt.decode(e.data.IpfsHash).toString("hex").substring(4);console.log(t),console.log(e.data.IpfsHash),o.setState({ipfsMeta:t});var n="0x"+t;Z.methods.setURI(o.state.rootNFTId,n).send({from:o.state.usedAcc}).then((function(e){console.debug(e.events.SetURI),alert("\u5df2\u7ecf\u6210\u529f\u53d1\u5e03\u4f5c\u54c1"),o.setState({allowSubmitPDF:!1,finished:!0,onLoading:!1})}))})).catch((function(e){alert("\u4f3c\u4e4e\u9047\u5230\u4e86\u4e9b\u5c0f\u95ee\u9898\uff1a ".concat(e))}));case 22:case"end":return t.stop()}}),t)}))),e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=4;break}return alert("\u8bf7\u5148\u5b89\u88c5metamask"),window.location.href="/SparkLink/#/introPublish",e.abrupt("return");case 4:window.ethereum.request({method:"eth_chainId"}).then((function(e){if("0x4"!==e)return alert("\u8bf7\u5207\u6362\u81f3rinkeby network"),void(window.location.href="/SparkLink/#/introPublish")}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,n=this,a=Y.a.TextArea,i={name:"file",action:"https://api.pinata.cloud/pinning/pinFileToIPFS",headers:{pinata_api_key:st,pinata_secret_api_key:ot},data:this.state.buffer,beforeUpload:function(t){return new Promise((function(n,a){try{var i=new FileReader;i.readAsArrayBuffer(t),i.onload=function(t){var n=t.target.result,a=new ct;a.append("file",n),e.setState({buffer:a})},n()}catch(r){G.b.error("Read file error"),a()}}))},onChange:function(e){return Object(k.a)(w.a.mark((function t(){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"done"===(a=e.file.status)?(G.b.success("".concat(e.file.name," file uploaded successfully.")),n.setState({ipfsHashCover:e.file.response.IpfsHash})):"error"===a&&G.b.error("".concat(e.file.name," file upload failed."));case 2:case"end":return t.stop()}}),t)})))()},onDrop:function(e){G.b.error("Only image file supported"),console.log("Dropped files",e.dataTransfer.files)}},r={name:"file",action:"https://api.pinata.cloud/pinning/pinFileToIPFS",headers:{pinata_api_key:st,pinata_secret_api_key:ot},beforeUpload:function(t){return new Promise(function(){var a=Object(k.a)(w.a.mark((function a(i,r){var s,o,c,l,d,p,b,u,m,h;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return s=a.sent,o=s[0],c={account:o,nft_id:n.state.rootNFTId},a.next=8,z.eth.personal.sign(JSON.stringify(c),o);case 8:return l=a.sent,console.debug(l),d={nft_id:n.state.rootNFTId,account:o,signature:l},p=JSON.stringify(d),console.log(p),b=e.backend+"/api/v1/key/claim",a.prev=14,a.next=17,X.a.post(b,p,{headers:{"Content-Type":"application/json"}});case 17:u=a.sent,m=u.data.key,console.debug(m),(h=new FileReader).readAsArrayBuffer(t),h.onload=function(e){var t=e.target.result,n=dt.lib.WordArray.create(t),a=dt.enc.Hex.stringify(n),r=dt.TripleDES.encrypt(a,m).toString(),s=new Blob([r]);i(s)},a.next=28;break;case 25:a.prev=25,a.t0=a.catch(14),400==a.t0.response.status?a.t0.response.data.message.includes("signature invalid")?alert("\u60a8\u7684\u7b7e\u540d\u6709\u8bef\uff0c\u8bf7\u67e5\u770b\u7b7e\u540d\u8d26\u53f7\u662f\u5426\u6b63\u786e"):a.t0.response.data.message.includes("param invalid")?alert("\u53c2\u6570\u9519\u8bef"):a.t0.response.data.message.includes("not owned")?alert("\u60a8\u5e76\u4e0d\u62e5\u6709\u6b64nft"):a.t0.response.data.message.includes("not found")&&alert("\u6b64nft\u8fd8\u672a\u751f\u6210"):alert("\u8bf7\u6c42\u6587\u4ef6\u52a0\u5bc6\u5bc6\u94a5\u5931\u8d25");case 28:a.next=35;break;case 30:a.prev=30,a.t1=a.catch(0),console.log(a.t1),c.error("Read file error"),r();case 35:case"end":return a.stop()}}),a,null,[[0,30],[14,25]])})));return function(e,t){return a.apply(this,arguments)}}())},onChange:function(e){if("done"===e.file.status){var t=e.file.name.split("."),a=t[t.length-1];n.setState({fileIpfs:e.file.response.IpfsHash,fileType:a}),console.debug("encrypted file hash: ",e.file.response.IpfsHash),G.b.success("".concat(e.file.name," file uploaded successfully."))}},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return this.state.onLoading?Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Publish"})}),Object(_.jsxs)(f.a,{theme:pt,children:[Object(_.jsx)(B,{}),Object(_.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(_.jsx)(te.a,{type:"bars",color:"#2196f3",width:"40%"})})]})]}):this.state.allowSubmitPDF?Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Publish"})}),Object(_.jsx)(O.a,{component:"main",maxWidth:"xs",className:t.main,children:Object(_.jsxs)("div",{className:t.paper,children:[Object(_.jsx)(g.a,{className:t.titlePub,children:Object(_.jsx)("b",{children:"\u4e0a\u4f20\u4f5c\u54c1\u6587\u4ef6"})}),Object(_.jsxs)("form",{className:t.form,noValidate:!0,children:[this.state.jumped?Object(_.jsx)("div",{children:Object(_.jsxs)(h.a,{item:!0,style:{width:"100%"},children:[Object(_.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u4f5c\u54c1\u63cf\u8ff0 *"}),Object(_.jsx)("p",{style:{fontSize:14},children:"\u8bf7\u7528\u7b80\u5355\u7684\u8bdd\u8bed\u5bf9\u60a8\u7684\u4f5c\u54c1\u8fdb\u884c\u63cf\u8ff0\uff0c\u7cbe\u51c6\u6709\u6548\u7684\u63cf\u8ff0\u80fd\u5e2e\u52a9\u5176\u4ed6\u7528\u6237\u66f4\u51c6\u786e\u5f97\u4e86\u89e3\u60a8\u7684\u4f5c\u54c1"}),Object(_.jsx)(a,{rows:4,id:"Description",onChange:this.handleGetDescription})]})}):Object(_.jsx)("div",{}),Object(_.jsx)("label",{style:{fontSize:18,marginTop:50},children:"\u5c01\u9762\u56fe\u7247 *"}),Object(_.jsxs)("p",{style:{fontSize:12},children:["\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u4e0a\u4f20\u60a8\u7684\u5c01\u9762\u56fe\u7247 ",Object(_.jsx)("br",{}),"\u5c01\u9762\u6587\u4ef6\u652f\u6301\u8fd9\u4e9b\u683c\u5f0f\uff1aJPEG/JPG/PNG"]}),Object(_.jsxs)(J.a,Object(M.a)(Object(M.a)({},i),{},{style:{width:"100%",minHeight:100},id:"Uploader",accept:".png, .jpg, .jpeg",children:[Object(_.jsx)("p",{className:"ant-upload-drag-icon",children:Object(_.jsx)(H.a,{})}),Object(_.jsx)("p",{className:"ant-upload-text",children:"\u4e0a\u4f20\u6587\u4ef6\u8bf7\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904"}),Object(_.jsx)("p",{className:"ant-upload-hint",children:"\u652f\u6301\u5355\u4e2a\u6587\u4ef6\u7684\u4e0a\u4f20\uff0c\u652f\u6301\u591a\u79cd\u7c7b\u578b\u6587\u4ef6\u7684\u4e0a\u4f20"})]})),Object(_.jsx)("label",{style:{fontSize:18,marginTop:50},children:"\u4f5c\u54c1\u6587\u4ef6 *"}),Object(_.jsx)("p",{style:{fontSize:12},children:"\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u4e0a\u4f20\u60a8\u7684\u4f5c\u54c1\u6587\u4ef6 "}),Object(_.jsxs)(J.a,Object(M.a)(Object(M.a)({},r),{},{style:{width:"100%",minHeight:100},id:"Uploader2",children:[Object(_.jsx)("p",{className:"ant-upload-drag-icon",children:Object(_.jsx)(H.a,{})}),Object(_.jsx)("p",{className:"ant-upload-text",children:"\u4e0a\u4f20\u6587\u4ef6\u8bf7\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904"}),Object(_.jsx)("p",{className:"ant-upload-hint",children:"\u652f\u6301\u5355\u4e2a\u6587\u4ef6\u7684\u4e0a\u4f20\u548c\u591a\u4e2a\u6587\u4ef6\u7684\u4e0a\u4f20\uff0c\u652f\u6301\u591a\u79cd\u7c7b\u578b\u6587\u4ef6\u7684\u4e0a\u4f20"})]})),Object(_.jsx)("div",{style:{textAlign:"center"},children:Object(_.jsx)(m.a,{variant:"contained",startIcon:Object(_.jsx)(K.a,{}),className:t.btnPub,onClick:this.submitWork,children:"\u53d1\u5e03\u4f5c\u54c1"})})]})]})})]}):this.state.finished?Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Publish"})}),Object(_.jsxs)(f.a,{theme:pt,children:[Object(_.jsx)(B,{}),Object(_.jsxs)("div",{style:{textAlign:"center"},children:[Object(_.jsx)(g.a,{className:t.titleCon,children:Object(_.jsx)("b",{children:" \ud83c\udf89 \u606d\u559c\u60a8\u53d1\u5e03\u6210\u529f"})}),Object(_.jsx)(ne.a,{className:t.paperImg,children:Object(_.jsx)("img",{style:{width:300,marginTop:20,marginBottom:50},src:this.state.coverURL})}),Object(_.jsx)(g.a,{variant:"h4",style:{marginTop:20,fontFamily:"Ubuntu"},children:Object(_.jsxs)("b",{children:["\u60a8\u83b7\u5f97\u7684\u6839\u7ed3\u70b9NFT\u662f\uff1a #",this.state.rootNFTId]})}),Object(_.jsx)(m.a,{variant:"contained",className:t.button,style:{marginTop:50,width:200,height:50,marginBottom:50},onClick:this.checkDetail,children:"\u67e5\u770b\u8be6\u60c5"})]})]})]}):Object(_.jsxs)("div",{children:[Object(_.jsx)(u.a,{children:Object(_.jsx)("title",{children:"SparkNFT | Publish"})}),Object(_.jsxs)(f.a,{theme:pt,children:[Object(_.jsx)(B,{}),Object(_.jsx)(O.a,{component:"main",maxWidth:"xs",className:t.main,children:Object(_.jsxs)("div",{className:t.paper,children:[Object(_.jsx)(g.a,{className:t.titlePub,children:Object(_.jsx)("b",{children:"\u53d1\u5e03\u4f5c\u54c1\u4fe1\u606f"})}),Object(_.jsx)("form",{className:t.form,noValidate:!0,children:Object(_.jsxs)(h.a,{container:!0,spacing:2,children:[Object(_.jsxs)(h.a,{item:!0,style:{width:"100%"},children:[Object(_.jsx)("label",{style:{fontSize:18,marginBottom:10},children:"\u4f5c\u54c1\u540d\u5b57 *"}),Object(_.jsx)(Y.a,{placeholder:"\u4f5c\u54c1\u540d\u79f0",allowClear:!0,id:"pubName",onChange:this.handleGetPubName,value:this.state.name,className:t.input})]}),Object(_.jsxs)(h.a,{item:!0,style:{width:"100%"},children:[Object(_.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u6536\u76ca\u6bd4\u4f8b *"}),Object(_.jsx)("p",{style:{fontSize:14},children:"\u5f53\u60a8\u7684\u4f5c\u54c1\u88ab\u6210\u529f\u5206\u4eab\u65f6\uff0c\u60a8\u5e0c\u671b\u4ece\u5206\u4eab\u4ef7\u683c\u4e2d\u83b7\u5f97\u591a\u5c11\u6bd4\u4f8b\u7684\u6536\u76ca"}),Object(_.jsx)($.a,{id:"bonusFee",defaultValue:0,min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},onChange:this.handleGetBonusFee,className:t.inputNum})]}),Object(_.jsxs)(h.a,{item:!0,style:{width:"100%"},children:[Object(_.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u552e\u5356\u4ef7\u683c (ether)*"}),Object(_.jsx)($.a,{id:"price",defaultValue:0,min:0,onChange:this.handleGetPrice,className:t.inputNum})]}),Object(_.jsxs)(h.a,{item:!0,style:{width:"100%"},children:[Object(_.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u6700\u9ad8\u5206\u4eab\u6b21\u6570 *"}),Object(_.jsx)("p",{style:{fontSize:14},children:"\u60a8\u5e0c\u671b\u6bcf\u4e00\u4e2a\u5e2e\u52a9\u60a8\u4f20\u64ad\u7684\u7528\u6237\u6700\u591a\u80fd\u591f\u5206\u4eab\u591a\u5c11\u6b21\uff1f"}),Object(_.jsx)($.a,{id:"shareTimes",defaultValue:0,min:0,onChange:this.handleGetShareTimes,className:t.inputNum})]}),Object(_.jsxs)(h.a,{item:!0,style:{width:"100%"},children:[Object(_.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u4f5c\u54c1\u63cf\u8ff0 *"}),Object(_.jsx)("p",{style:{fontSize:14},children:"\u8bf7\u7528\u7b80\u5355\u7684\u8bdd\u8bed\u5bf9\u60a8\u7684\u4f5c\u54c1\u8fdb\u884c\u63cf\u8ff0\uff0c\u7cbe\u51c6\u6709\u6548\u7684\u63cf\u8ff0\u80fd\u5e2e\u52a9\u5176\u4ed6\u7528\u6237\u66f4\u51c6\u786e\u5f97\u4e86\u89e3\u60a8\u7684\u4f5c\u54c1"}),Object(_.jsx)(a,{rows:4,id:"Description",onChange:this.handleGetDescription})]})]})}),Object(_.jsxs)(h.a,{container:!0,alignItems:"center",spacing:4,style:{marginTop:20,marginBottom:50},children:[Object(_.jsx)(h.a,{item:!0,xs:!0,style:{textAlign:"center"},children:Object(_.jsx)(m.a,{variant:"contained",className:t.button,startIcon:Object(_.jsx)(K.a,{}),style:{width:200,height:50,marginBottom:20,marginTop:20},onClick:this.submit,children:"\u63d0\u4ea4\u4fe1\u606f"})}),Object(_.jsx)(h.a,{item:!0,xs:!0,style:{textAlign:"center"},children:Object(_.jsx)(Xe.a,{onClick:this.handleClickOpen,style:{fontSize:10,textDecoration:"underline"},children:"\u5df2\u7ecf\u4e0a\u4f20\u8fc7\u57fa\u672c\u4fe1\u606f\uff1f"})})]}),Object(_.jsxs)(_e.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(_.jsx)(Le.a,{id:"form-dialog-title",children:"\u586b\u5199 NFT ID"}),Object(_.jsxs)(Be.a,{children:[Object(_.jsx)(Ae.a,{children:"\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u586b\u5199\u60a8\u8981\u7ed1\u5b9a\u5185\u5bb9\u7684 NFT ID"}),Object(_.jsx)("label",{style:{fontSize:14,marginBottom:10},children:"NFT ID *"}),Object(_.jsx)($.a,{defaultValue:0,min:0,onChange:this.handleGetNFTId})]}),Object(_.jsxs)(We.a,{children:[Object(_.jsx)(m.a,{onClick:this.handleClose,color:"primary",children:"\u53d6\u6d88"}),Object(_.jsx)(m.a,{variant:"contained",onClick:this.jump,color:"primary",children:"\u53bb\u4e0a\u4f20\u4f5c\u54c1"})]})]})]})})]})]})}}]),n}(i.Component),ut=Object(x.a)((function(e){var t,n,a,i,r;return{main:(t={},Object(p.a)(t,e.breakpoints.between("xs","sm"),{width:"60%"}),Object(p.a)(t,e.breakpoints.up("sm"),{width:500}),t),titleCon:(n={marginTop:50,fontFamily:"Ubuntu"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:30}),Object(p.a)(n,e.breakpoints.up("sm"),{fontSize:40}),n),titlePub:(a={marginTop:"3%",fontFamily:"Ubuntu"},Object(p.a)(a,e.breakpoints.between("xs","sm"),{fontSize:30}),Object(p.a)(a,e.breakpoints.up("sm"),{fontSize:40}),a),paperImg:(i={backgroundColor:"#EFEBE9",width:330},Object(p.a)(i,e.breakpoints.between("xs","sm"),{marginLeft:"5%",marginTop:30}),Object(p.a)(i,e.breakpoints.between("sm","md"),{marginLeft:"30%",marginTop:30}),Object(p.a)(i,e.breakpoints.between("md","lg"),{marginLeft:"30%",marginTop:30}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{marginLeft:"40%",marginTop:30}),Object(p.a)(i,e.breakpoints.up("xl"),{marginLeft:"45%",marginTop:30}),i),btnPub:(r={margin:e.spacing(1),borderRadius:25,color:"#FFFFFF",backgroundColor:"#2196f3",marginBottom:20,marginTop:40,height:45,minWidth:200},Object(p.a)(r,e.breakpoints.between("xs","sm"),{width:"50%"}),Object(p.a)(r,e.breakpoints.between("sm","md"),{fontSize:16,width:"30%"}),Object(p.a)(r,e.breakpoints.up("md"),{fontSize:16,width:"30%"}),r),btn:{color:"#424949",borderWidth:2,borderColor:"#e3f2fd",fontSize:16},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:U.a[500],width:60,height:60},form:{width:"150%",marginTop:e.spacing(7)},submit:{margin:e.spacing(3,0,2)},fileBtn:{padding:"10px 30px 10px 30px",background:"#66C1E4",border:"none",color:"#FFF",boxShadow:"1px 1px 1px #4C6E91"},button:{margin:e.spacing(1),fontSize:20,borderRadius:25,color:"#FFFFFF",backgroundColor:"#2196f3"},input:{height:40,borderRadius:5},inputNum:{height:40,borderRadius:5,width:"100%",fontSize:20}}}),{withTheme:!0})(bt),mt=function(){return Object(_.jsx)(E.a,{children:Object(_.jsxs)(R.c,{children:[Object(_.jsx)(R.a,{exact:!0,path:"/",component:P}),Object(_.jsx)(R.a,{exact:!0,path:"/introPublish",component:it}),Object(_.jsx)(R.a,{exact:!0,path:"/publish",component:de}),Object(_.jsx)(R.a,{exact:!0,path:"/encryptedPublish",component:ut}),Object(_.jsx)(R.a,{exact:!0,path:"/sellSingle/:NFTId",component:De}),Object(_.jsx)(R.a,{exact:!0,path:"/buySingle/:NFTId",component:He}),Object(_.jsx)(R.a,{exact:!0,path:"/collections",component:Qe}),Object(_.jsx)(R.a,{exact:!0,path:"/NFT/:id",component:ze}),Object(_.jsx)(R.a,{exact:!0,path:"/NFT/spark/:id",component:tt})]})})};s.a.render(Object(_.jsx)(mt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[962,1,2]]]);
//# sourceMappingURL=main.adc40503.chunk.js.map