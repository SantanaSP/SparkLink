{"version":3,"sources":["project.secret.js","imgs/books.png","imgs/sparkLink.png","TopBar.js","App.js","serviceWorker.js","web3.js","contract.js","Publish.js","NFTInfo.js","SellSingle.js","BuySingle.js","Collections.js","NFTSpark.js","IntroPublish.js","EncryptedPublish.js","Buy.js","Router.js","index.js"],"names":["module","exports","pinata_api_key","pinata_secret_api_key","TopBar","createTheme","breakpoints","values","xs","sm","md","lg","xl","palette","primary","main","secondary","state","isConnected","userAddress","accountInfo","sleep","ms","a","Promise","resolve","setTimeout","getAccount","window","ethereum","request","method","accounts","account","alert","setState","console","debug","w3","Web3","eth","getAccounts","length","this","substring","classes","props","Toolbar","Grid","container","direction","justifyContent","item","className","titleGrid","Typography","component","color","noWrap","title","src","logo","btnGrid","Button","size","btn","href","target","GithubOutlined","icon","onClick","WalletTwoTone","WalletFilled","Component","withStyles","theme","down","fontSize","up","marginTop","marginBottom","textAlign","minWidth","fontFamily","between","marginLeft","borderColor","width","objectFit","withTheme","App","ThemeProvider","page","Container","paper","style","title2","title3","books","spacing","variant","btnMain","btnSecond","marginRight","titleFont","borderWidth","borderRadius","height","maxWidth","Boolean","location","hostname","match","web3","error","Contract","require","FormData","bs58","Option","Select","abi","Publish","name","bonusFee","price","buffer","ipfsHashCover","ipfsMeta","fileIpfs","description","shareTimes","onLoading","rootNFTId","usedAcc","sig","fileType","finished","coverURL","data","token_addr","token_symbol","decimal","handleGetPubName","event","value","handleGetBonusFee","handleGetPrice","handleGetShareTimes","handleGetDescription","e","handleSearch","toLowerCase","tokens_list","tokens","matched_data","reg","RegExp","token","symbol_lower_case","symbol","showed_text","address","info","text","test","includes","push","handleSelectChange","token_decimal","decimals","undefined","token_contract","methods","call","message","submit","obj","content","img_url","trimmed_des","replace","file_url","JSONBody","axios","post","headers","response","IpfsHash","bytes","decode","bytesToContract","toString","price_with_decimal","ipfsToContract","getGasPrice","gasPrice","new_gas_price","Math","floor","parseInt","contract","publish","send","from","on","receipt","log","returned_values","events","returnValues","root_nft_id","issue_id","issueId","success","warning","checkDetail","new_url","open","params","chainId","TextArea","Input","options","map","d","prop","action","beforeUpload","file","reject","reader","FileReader","readAsArrayBuffer","onload","b","result","append","onChange","status","onDrop","dataTransfer","files","propFile","file_type","split","file_suffix","spinning","titleCon","Paper","paperImg","button","titlePub","form","noValidate","placeholder","allowClear","id","input","defaultValue","min","max","formatter","parser","inputNum","showSearch","defaultActiveFirstOption","showArrow","filterOption","onSearch","notFoundContent","rows","minHeight","accept","InboxOutlined","startIcon","CloudUploadOutlined","backgroundColor","display","flexDirection","alignItems","avatar","margin","blue","fileBtn","padding","background","border","boxShadow","FileSaver","CryptoJS","NFTInfo","gateway","backend","loading","showDecryptProgress","decryptPercentage","showProgress","percentage","Profit","loadItem","Cover","Name","Description","BonusFee","childrenNum","encrypted","dataUrl","isEncrypt","spark","tokenAddr","tokenSymbol","return","reload","claim","claimProfit","downloadIPFS","dataSplits","dataHash","cipher_config","url","onDownloadProgress","progress","round","loaded","total","ciphertext","signJSON","JSON","stringify","signDataAndDecrypt","open_config","responseType","URL","createObjectURL","Blob","link","document","createElement","suffix","fileName","download","body","appendChild","click","removeChild","revokeObjectURL","signer","json_str","personal","sign","payload","payload_str","req_key_url","res","key","AES","decrypt","plainText","enc","Utf8","wordArray","Hex","parse","BaText","wordArrayToByteArray","blob","saveAs","error_msg","wordToByteArray","word","lengthBefore","addedLength","hasOwnProperty","sigBytes","words","bytesAdded","current_bytes","i","added_info","percent","Uint8Array","ownerOf","owner","utils","toChecksumAddress","getTokenAddrByNFTId","getProfitByNFTId","profit","tokenURI","meta","hash","getIssueIdByNFTId","issue","getRoyaltyFeeByIssueId","royalty","file_hash","request_url","timeout","fileAddr","attributes","trait_type","image","leafUrl","get","then","children_num","children_count","catch","gutterBottom","type","ArrowLeftOutlined","alignContent","cbutton","MoneyCollectOutlined","DollarCircleOutlined","Skeleton","animation","imagePapaer","imageStyle","content2","align","paragraph","cbutton2","DownloadOutlined","FireOutlined","toUrl","host","share","onCopy","copied","IconButton","CopyOutlined","sell_info","SellSingle","ipfsHashMeta","toAddress","NFTId","onSale","currentAcc","handleClickOpen","handleClose","handleGetAddr","handleClickLink","sell","determinePriceAndApprove","metadata","bonus","name_holder","getTransferPriceByNFTId","child_url","showSellBtn","btnSell","disabled","img","imgPaper","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","BuySingle","sparkAddr","priceString","approvedAddr","approved","handleBuy","safeTransferFrom","handleApprove","approve","toUpperCase","getApproved","allowance","buyButton","btnDisable","Collections","cards","isLogin","user_address","viewable","onloading","SkeletoNumber","noNFT","getMetadata","nft","metaDatas","ipfs_link","ipfs_hash_arr","ipfs_hash","getNft","balanceId","checksum_address","renderDescription","balanceOf","nft_number","ids","element","reversed_cards","reverse","_chainId","cardGrid","Array","card","index","Card","CardMedia","cardMedia","CardContent","cardContent","CardActions","showCard","heroContent","paddingTop","paddingBottom","flexGrow","NFTSpark","remainShillTimes","maxShillTimes","recommendNFT","shill","acceptShill","bouns","getShillPriceByNFTId","remain_shill_times","max_shill_times","shill_times","suggest_next_nft","showRecommend","imagePaper","Link","textDecoration","IntroPublish","shouldKnow","lineHeight","EncryptedPublish","allowSubmitPDF","jumped","handleGetNFTId","String","jump","submitWork","setURI","SetURI","nft_id","secret_key","lib","WordArray","create","str","cipher_text","encrypt","myblob","btnPub","Buy","BasicRoute","exact","path","Spark","ReactDOM","render","Router","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c9202f7b.chunk.js","sourcesContent":["const pinata_api_key = '3da01378391b7f0b7be4'\nconst pinata_secret_api_key = 'b9f43c3c12fb3956453db6a8b8594b603af6ef74f8eeac0eb83934a38bea4c03'\n\nmodule.exports = {\n  pinata_api_key,\n  pinata_secret_api_key,\n}","export default __webpack_public_path__ + \"static/media/books.6e483aa8.png\";","export default __webpack_public_path__ + \"static/media/sparkLink.250e0a02.png\";","import React, { Component } from 'react';\nimport logo from './imgs/sparkLink.png';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, withStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport { GithubOutlined, WalletOutlined, WalletTwoTone, WalletFilled} from '@ant-design/icons';\nimport Web3 from 'web3';\n\nconst theme = createTheme({\n  breakpoints: {\n    values: {\n      xs: 0,\n      sm: 600,\n      md: 900,\n      lg: 1200,\n      xl: 1536,\n    },\n  },\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\nconst styles = theme => ({\n  icon: {\n    [theme.breakpoints.down('xl')]: {\n      fontSize: 19,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 27,\n    },\n  },\n  titleGrid: {\n    marginTop: 25,\n    marginBottom: 10,\n    textAlign: 'center',\n  },\n  title: {\n    minWidth: 100,\n    fontSize: 25,\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 45,\n    },\n\n  },\n  btnGrid: {\n    // marginTop: 25,\n    marginBottom: 10,\n    minWidth: 370,\n    // backgroundColor: '#e3f2fd',\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginTop: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginTop: 25,\n      marginLeft: '20%',\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginTop: 25,\n      marginLeft: '50%',\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginTop: 25,\n      marginLeft: '60%',\n    },\n  },\n  btn: {\n    color: '#424949',\n    borderColor: '#e3f2fd',\n    fontSize: 15,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 15,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 15,\n      width: 100\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 15,\n      width: 100\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 25,\n    },\n  },\n  logo: {\n    objectFit: 'contain',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: '20%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      width: '18%'\n    },\n    [theme.breakpoints.up('md')]: {\n      width: '13%'\n    },\n  }\n\n});\n\nclass TopBar extends Component {\n\n  state = {\n    isConnected: false,\n    userAddress: '',\n    accountInfo: ''\n  };\n\n  async componentWillMount() {\n    let w3 = new Web3(window.ethereum);\n    const accounts = await w3.eth.getAccounts();\n    if (accounts.length == 0) {\n      this.setState({\n        isConnected: false\n      });\n    } else {\n      var account = accounts[0]\n      this.setState({ accountInfo: account.substring(0, 5), });\n      this.setState({\n        isConnected: true\n      });\n    }\n\n  }\n\n  sleep = async (ms) => {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  getAccount = async () => {\n    try {\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n      const account = accounts[0];\n      alert('您已经连接metamask, 当前账户： ' + account)\n      this.setState({ isConnected: true, });\n      this.setState({ userAddress: account, });\n    } catch (error) {\n      console.debug(error)\n      this.setState({ isConnected: false, });\n    }\n  }\n\n  render() {\n    const { classes } = this.props\n\n    return (\n      <div>\n        <Toolbar>\n          <Grid container direction=\"row\" justifyContent=\"flex-start\" >\n            <Grid item className={classes.titleGrid } xs ={2}>\n              <Typography component=\"h1\" color=\"inherit\" noWrap className={classes.title}>\n                <img src={logo} className={classes.logo} />\n                <b>SparkLink</b>\n              </Typography>\n            </Grid>\n            <Grid item className={classes.btnGrid}>\n              <Button size=\"large\" className={classes.btn} href='/#/' >\n                <b>首页</b>\n              </Button>\n              <Button size=\"large\" className={classes.btn} href='/#/introPublish'>\n                <b>发布</b>\n              </Button>\n\n\n              <Button size=\"large\" className={classes.btn} href='/#/collections'>\n                <b>我的收藏</b>\n              </Button>\n\n              <Button size=\"large\" href='https://github.com/SparkNFT' target=\"_blank\">\n                <GithubOutlined className={classes.icon} />\n              </Button>\n              {this.state.isConnected ? (\n                <Button onClick={this.getAccount}>\n                  <WalletTwoTone className={classes.icon} />\n                </Button>\n              ) : (\n                <Button onClick={this.getAccount}>\n                  <WalletFilled className={classes.icon} />\n                </Button>\n              )}\n            </Grid>\n          </Grid>\n        </Toolbar>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(TopBar);","import books from './imgs/books.png';\nimport './App.css';\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport TopBar from './TopBar';\n\nconst styles = theme => ({\n  title: {\n    fontFamily: 'Teko',\n    marginTop: '25%',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 100,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 150,\n    },\n  },\n  title2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 15,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 55,\n    },\n  },\n  title3: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 8,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 15,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 45,\n    },\n  },\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  titleFont: {\n    fontFamily: 'Teko',\n  },\n  btnMain: {\n    // marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    borderColor: '#e3f2fd',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  btnSecond: {\n    // marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderColor: '#03A9F4',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(7),\n    textAlign: 'center'\n  },\n  container: {\n    maxWidth: '100%'\n  },\n  books: {\n    width: '90%',\n    height: 'auto'\n  }\n});\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#FDFEFE',\n    },\n    secondary: {\n      main: '#2196f3',\n    }\n  },\n});\n\nclass App extends Component {\n  render() {\n    const { classes } = this.props\n    return (\n      <div>\n\n        <ThemeProvider theme={theme}>\n          <div className={classes.page}>\n            <TopBar />\n            <Container component=\"main\" className={classes.container}>\n              <div className={classes.paper}>\n                <Grid container justifyContent=\"center\" >\n                  <Grid item style={{ minWidth: '50%' }}>\n                    <Typography color=\"inherit\" noWrap className={classes.title} >\n                      <b>SparkLink</b>\n                    </Typography>\n                    <Typography color=\"inherit\" noWrap className={classes.title2}>\n                      <b>人人传播，互相支持，仿若星星之火，点亮一片世界。</b>\n                    </Typography>\n                    <Typography color=\"inherit\" noWrap className={classes.title3}>\n                      发布你爱的 & 支持你爱的 & 传播你爱的\n                    </Typography>\n\n                  </Grid>\n                  <Grid item xs={5} >\n                    <img src={books} className={classes.books} />\n                  </Grid>\n                  <Grid container justifyContent=\"center\" spacing={5} >\n                    <Grid item >\n                      <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnMain} href='/#/introPublish'>\n                        <b>去发布</b>\n                      </Button>\n                    </Grid>\n                    <Grid item >\n                      <Button size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} href='/#/buy'>\n                        <b>去购买</b>\n                      </Button>\n                    </Grid>\n                  </Grid>\n                </Grid>\n              </div>\n            </Container>\n          </div>\n        </ThemeProvider>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import Web3 from 'web3';\nvar web3;\ntry {\n  web3 = new Web3(window.ethereum);\n  // web3 = new Web3(new Web3.providers.HttpProvider('https://matic-mainnet--jsonrpc.datahub.figment.io/apikey/e84b63fff0e37deb30837101f20eb793/'))\n} catch (error) {\n  web3 = new Web3('ws://localhost:8546');\n}\nexport default web3;","import web3 from './web3';\n\nconst address = '0xb42d4525841008A69E427026DF354067fD6A524f'; // rinkeby 0x7B5B92B0eD1DfeafdbD724b177A7733Bda67497F\nconst abi = [\n  {\n    \"inputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"constructor\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"approved\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Approval\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"operator\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bool\",\n        \"name\": \"approved\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"name\": \"ApprovalForAll\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"receiver\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint128\",\n        \"name\": \"amount\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"name\": \"Claim\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint128\",\n        \"name\": \"transfer_price\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"name\": \"DeterminePrice\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint128\",\n        \"name\": \"transfer_price\",\n        \"type\": \"uint128\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"DeterminePriceAndApprove\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"string\",\n        \"name\": \"content\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"Label\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint32\",\n        \"name\": \"issue_id\",\n        \"type\": \"uint32\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"publisher\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint64\",\n        \"name\": \"rootNFTId\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"address\",\n        \"name\": \"token_addr\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"Publish\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes32\",\n        \"name\": \"old_URI\",\n        \"type\": \"bytes32\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes32\",\n        \"name\": \"new_URI\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"SetURI\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Transfer\",\n    \"type\": \"event\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"acceptShill\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"approve\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"balanceOf\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"claimProfit\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"_price\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"name\": \"determinePrice\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"_price\",\n        \"type\": \"uint128\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"determinePriceAndApprove\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"getApproved\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getDepthByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getEditionIdByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getFatherByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getIssueIdByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"getLossRatio\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"\",\n        \"type\": \"uint8\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getProfitByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getRemainShillTimesByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint16\",\n        \"name\": \"\",\n        \"type\": \"uint16\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getRootNFTIdByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getRoyaltyFeeByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"\",\n        \"type\": \"uint8\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getShillPriceByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getShillTimesByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint16\",\n        \"name\": \"\",\n        \"type\": \"uint16\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getTokenAddrByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getTokenAddrByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getTotalAmountByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getTransferPriceByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"operator\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"isApprovedForAll\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"isEditionExisting\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"isIssueExisting\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"isRootNFT\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"string\",\n        \"name\": \"content\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"label\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"name\",\n    \"outputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"ownerOf\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"_first_sell_price\",\n        \"type\": \"uint128\"\n      },\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"_royalty_fee\",\n        \"type\": \"uint8\"\n      },\n      {\n        \"internalType\": \"uint16\",\n        \"name\": \"_shill_times\",\n        \"type\": \"uint16\"\n      },\n      {\n        \"internalType\": \"bytes32\",\n        \"name\": \"_ipfs_hash\",\n        \"type\": \"bytes32\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"_token_addr\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"publish\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"safeTransferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"bytes\",\n        \"name\": \"_data\",\n        \"type\": \"bytes\"\n      }\n    ],\n    \"name\": \"safeTransferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"operator\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"approved\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"name\": \"setApprovalForAll\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"bytes32\",\n        \"name\": \"ipfs_hash\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"setURI\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"bytes4\",\n        \"name\": \"interfaceId\",\n        \"type\": \"bytes4\"\n      }\n    ],\n    \"name\": \"supportsInterface\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"symbol\",\n    \"outputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"tokenURI\",\n    \"outputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"transferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  }\n]\n\nexport default new web3.eth.Contract(abi, address);","import React, { Component } from 'react'\nimport './App.css'\nimport Button from '@material-ui/core/Button'\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\nimport { blue } from '@material-ui/core/colors'\nimport Typography from '@material-ui/core/Typography'\nimport Container from '@material-ui/core/Container'\nimport Grid from '@material-ui/core/Grid'\nimport { message } from 'antd'\nimport { InboxOutlined } from '@ant-design/icons'\nimport Dragger from 'antd/lib/upload/Dragger'\nimport { CloudUploadOutlined } from '@ant-design/icons'\n// import CloudUploadIcon from '@material-ui/icons/CloudUpload'\nimport { Input, InputNumber, Select, Spin } from 'antd'\nimport 'antd/dist/antd.css'\nimport TopBar from './TopBar'\nimport axios from 'axios'\nimport contract from './contract'\nimport web3 from './web3'\nimport ReactLoading from 'react-loading'\nimport Paper from '@material-ui/core/Paper'\nimport * as tokens from './tokens_list.json'\n\n\n\nconst {\n  pinata_api_key,\n  pinata_secret_api_key,\n} = require('./project.secret')\n\nconst FormData = require('form-data')\nconst bs58 = require('bs58')\nconst { Option } = Select\nconst abi = require('erc-20-abi')\n\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n})\n\n\nconst styles = theme => ({\n  main: {\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: '60%'\n    },\n    [theme.breakpoints.up('sm')]: {\n      width: 500\n    },\n  },\n  titleCon: {\n    marginTop: 50,\n    fontFamily: 'Ubuntu',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 30\n    },\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 40\n    },\n  },\n  paperImg: {\n    backgroundColor: '#EFEBE9',\n    width: 330,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: '5%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '30%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '30%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '40%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '45%',\n      marginTop: 30,\n    },\n  },\n  titlePub: {\n    marginTop: \"3%\",\n    fontFamily: 'Ubuntu',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 30\n    },\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 40\n    },\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: blue[500],\n    width: 60,\n    height: 60\n  },\n  form: {\n    width: '150%',\n    marginTop: theme.spacing(7),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  fileBtn: {\n    padding: '10px 30px 10px 30px',\n    background: '#66C1E4',\n    border: 'none',\n    color: '#FFF',\n    boxShadow: '1px 1px 1px #4C6E91',\n  },\n  button: {\n    margin: theme.spacing(1),\n    fontSize: 20,\n    borderRadius: 25,\n    color: '#FFFFFF',\n    backgroundColor: '#2196f3'\n  },\n  input: {\n    height: 40,\n    borderRadius: 3,\n    width: '100%',\n  },\n  inputNum: {\n    height: 40,\n    borderRadius: 3,\n    width: '100%',\n    fontSize: 20,\n  }\n})\n\n\nclass Publish extends Component {\n  state = {\n    name: '',\n    bonusFee: 0,\n    price: 0,\n    buffer: null,\n    ipfsHashCover: '',\n    ipfsMeta: '',\n    fileIpfs: '',\n    description: '',\n    shareTimes: 0,\n    onLoading: false,\n    rootNFTId: '',\n    usedAcc: '',\n    sig: '',\n    fileType: '',\n    finished: false,\n    coverURL: '',\n    data: [],\n    token_addr: null,\n    token_symbol: 'MATIC',\n    decimal: 0,\n  }\n\n  async componentDidMount() {\n    if (!window.ethereum) {\n      alert(\"请先安装metamask\")\n      window.location.href = '/#/introPublish'\n      return\n    }\n    // const chainId = await window.ethereum.request({ method: 'eth_chainId' })\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\n    if (chainId !== '0x89') {\n      alert(\"请切换至Polygon 主网络\")\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x89'\n        }]\n      })\n    }\n  }\n\n  handleGetPubName = (event) => {\n    this.setState({\n      name: event.target.value,\n    })\n  }\n\n  handleGetBonusFee = (value) => {\n    this.setState({\n      bonusFee: value,\n    })\n  }\n\n  handleGetPrice = (value) => {\n    this.setState({\n      price: value,\n    })\n  }\n\n  handleGetShareTimes = (value) => {\n    this.setState({\n      shareTimes: value,\n    })\n  }\n\n  handleGetDescription = (e) => {\n    this.setState({\n      description: e.target.value,\n    })\n  }\n\n  handleSearch = async (value) => {\n    if (value) {\n      var value = value.toLowerCase()\n      var tokens_list = tokens.tokens\n      var matched_data = []\n      let reg = new RegExp(value)\n      for (let token of tokens_list) {\n        var symbol_lower_case = token.symbol.toLowerCase()\n        var showed_text = `\\\"${token.symbol}\\\"` + \"   \" + token.address\n        var info = {\n          value: token.address,\n          text: showed_text\n        }\n        if (reg.test(symbol_lower_case) && !matched_data.includes(info)) {\n          matched_data.push(info)\n        }\n      }\n      if (value.includes('0x') && value.length == 42) {\n        var info = {\n          value: value,\n          text: value\n        }\n        matched_data = [info]\n      }\n      this.setState({\n        data: matched_data\n      })\n    } else {\n      this.setState({ data: [] })\n    }\n  }\n\n  handleSelectChange = async (value) => {\n    var tokens_list = tokens.tokens\n    let address\n    let token_symbol\n    let token_decimal\n    for (let token of tokens_list) {\n      if (value === token.address) {\n        address = value\n        token_symbol = token.symbol\n        token_decimal = token.decimals\n      }\n    }\n    if (token_symbol == undefined) {\n\n      try {\n        const token_contract = new web3.eth.Contract(abi, value)\n        token_symbol = await token_contract.methods.symbol().call()\n        token_decimal = await token_contract.methods.decimals().call()\n        address = value\n      } catch (error) {\n        message.error(\"你提供的地址不是erc20代币，请重新输入\")\n      }\n\n    }\n    // console.debug(token_symbol)\n    this.setState({\n      token_addr: address,\n      token_symbol: token_symbol,\n      decimal: token_decimal\n    })\n\n  }\n\n  submit = async (event) => {\n    /*TODO: call smart contract publish() and wait for publish success event\n     * then call backend to get a secret key. Then encrypt the pdf file and upload it to IPFS\n     * Finally, form a new metadata json file and send its ipfs hash to backend and publish it\n    */\n    let obj = this\n    if (this.state.price === 0 || this.state.bonusFee === 0 || this.state.shareTimes === 0 || this.state.ipfsHashCover === '' || this.state.fileIpfs === '' || this.state.token_addr === null) {\n      message.error({\n        content: \"你有信息尚未填写\",\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n    } else {\n\n      this.setState({\n        onLoading: true\n      })\n      var img_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.ipfsHashCover\n      this.setState({\n        coverURL: img_url\n      })\n      console.debug(\"coverURL: \", this.state.coverURL)\n      var trimmed_des = this.state.description.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \" \")\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n      const account = accounts[0]\n      this.setState({\n        usedAcc: account\n      })\n      var file_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.fileIpfs\n      var JSONBody = {\n        \"name\": this.state.name,\n        \"description\": trimmed_des,\n        \"image\": this.state.coverURL,\n        \"attributes\": [\n          {\n            \"display_type\": \"boost_percentage\",\n            \"trait_type\": \"Bonuse Percentage\",\n            \"value\": this.state.bonusFee\n          },\n          {\n            \"trait_type\": \"File Address\",\n            \"value\": file_url\n          },\n          {\n            \"value\": this.state.fileType\n          },\n          {\n            \"trait_type\": \"Encrypted\",\n            \"value\": \"FALSE\"\n          }\n        ]\n      }\n\n      const url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`\n\n      try {\n        const response = await axios.post(url, JSONBody, {\n          headers: {\n            pinata_api_key: pinata_api_key,\n            pinata_secret_api_key: pinata_secret_api_key\n          },\n        })\n        console.debug(\"metadata: \", response.data.IpfsHash)\n        const bytes = bs58.decode(response.data.IpfsHash)\n        const bytesToContract = bytes.toString('hex').substring(4,)\n        this.setState({\n          ipfsMeta: bytesToContract\n        })\n\n        var price_with_decimal = this.state.price * (10 ** this.state.decimal)\n        price_with_decimal = price_with_decimal.toString()\n        console.debug(\"price_with_decimal: \", price_with_decimal)\n        var ipfsToContract = '0x' + bytesToContract\n\n        var gasPrice = await web3.eth.getGasPrice()\n        var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n        contract.methods.publish(price_with_decimal, this.state.bonusFee, this.state.shareTimes, ipfsToContract, this.state.token_addr).send({\n          from: this.state.usedAcc,\n          gasPrice: new_gas_price\n        })\n          .on('receipt', function (receipt) {\n            console.log(receipt)\n            var publish_event = receipt.events.Publish\n            var returned_values = publish_event.returnValues\n            var root_nft_id = returned_values.rootNFTId\n            var issue_id = returned_values.issue_id\n            obj.setState({\n              onLoading: false,\n              rootNFTId: root_nft_id,\n              issueId: issue_id,\n              finished: true\n            })\n            message.success({\n              content: \"已经成功发布作品\",\n              className: 'custom-class',\n              style: {\n                marginTop: '10vh',\n              },\n            })\n          })\n          .on('error', function (error) {\n            obj.setState({\n              onLoading: false,\n            })\n            if (error.message.includes('not mined')) {\n              message.warning({\n                content: \"交易已提交，当前网络较拥堵，请稍等后去我的收藏中查看\",\n                className: 'custom-class',\n                style: {\n                  marginTop: '10vh',\n                },\n              })\n            } else {\n              console.debug(error.message)\n              message.error({\n                content: `Error: ${error.message}`,\n                className: 'custom-class',\n                style: {\n                  marginTop: '10vh',\n                },\n              })\n            }\n          })\n\n\n      } catch (error) {\n        console.debug(error)\n        message.error({\n          content: `似乎遇到了些小问题： ${error}`,\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      }\n\n    }\n\n  }\n\n  checkDetail = async (event) => {\n    var new_url = '/#/NFT/' + this.state.rootNFTId\n    window.open(new_url, '_self')\n  }\n\n  render() {\n    const { classes } = this.props\n    let obj = this\n    const { TextArea } = Input\n    const options = this.state.data.map(d => <Option key={d.value}>{d.text}</Option>)\n    const prop = {\n      name: 'file',\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n      headers: {\n        pinata_api_key: pinata_api_key,\n        pinata_secret_api_key: pinata_secret_api_key\n      },\n      data: this.state.buffer,\n      beforeUpload: file => {\n        return new Promise((resolve, reject) => {\n          try {\n            const reader = new FileReader()\n            reader.readAsArrayBuffer(file)\n            reader.onload = (e) => {\n              var b = e.target.result\n              let params = new FormData()\n              params.append('file', b)\n              this.setState({\n                buffer: params\n              })\n            }\n            resolve()\n          } catch (e) {\n            message.error('Read file error')\n            reject()\n          }\n        })\n      },\n      async onChange(info) {\n        const { status } = info.file\n        // text/plain image/jpeg application/pdf\n        if (status === 'done') {\n          message.success(`${info.file.name} file uploaded successfully.`)\n          obj.setState({\n            ipfsHashCover: info.file.response.IpfsHash\n          })\n\n        } else if (status === 'error') {\n          message.error(`${info.file.name} file upload failed.`)\n        }\n      },\n      onDrop(e) {\n        message.error(`Only image file supported`)\n        console.log('Dropped files', e.dataTransfer.files)\n      },\n    }\n\n    const propFile = {\n      name: 'file',\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n      headers: {\n        pinata_api_key: pinata_api_key,\n        pinata_secret_api_key: pinata_secret_api_key\n      },\n      data: this.state.buffer,\n      beforeUpload: file => {\n        return new Promise((resolve, reject) => {\n          try {\n            const reader = new FileReader()\n            reader.readAsArrayBuffer(file)\n            reader.onload = (e) => {\n              var b = e.target.result\n              let params = new FormData()\n              params.append('file', b)\n              this.setState({\n                buffer: params\n              })\n            }\n            resolve()\n          } catch (e) {\n            message.error('Read file error')\n            reject()\n          }\n        })\n      },\n      async onChange(info) {\n        const { status } = info.file\n        // console.debug(typeof info.file.type)\n        // text/plain image/jpeg application/pdf\n        if (status === 'done') {\n          message.success(`${info.file.name} file uploaded successfully.`)\n          var file_type = info.file.name.split('\\.')\n          var file_suffix = file_type[file_type.length - 1]\n          console.debug(file_suffix)\n          console.debug(\"file ipfs hash: \", info.file.response.IpfsHash)\n          obj.setState({\n            fileIpfs: info.file.response.IpfsHash,\n            fileType: file_suffix\n          })\n\n\n        } else if (status === 'error') {\n          message.error(`${info.file.name} file upload failed.`)\n        }\n      },\n      onDrop(e) {\n        message.error(`Only image file supported`)\n        console.log('Dropped files', e.dataTransfer.files)\n      },\n    }\n\n\n    // if (this.state.onLoading) {\n    //   return (\n    //     <div>\n    //       <ThemeProvider theme={theme}>\n    //         <TopBar />\n    //         <div style={{ marginLeft: '35%', marginTop: '10%' }}>\n    //           <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\n    //         </div>\n    //       </ThemeProvider>\n    //     </div>\n    //   )\n    // } else \n    if (this.state.finished) {\n      return (\n        <Spin spinning={this.state.onLoading} size='large'>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ textAlign: 'center' }}>\n              <Typography className={classes.titleCon}>\n                <b> 🎉 恭喜您发布成功</b>\n              </Typography>\n\n              <Paper className={classes.paperImg}>\n                <img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\n              </Paper>\n              <Typography variant=\"h4\" style={{ marginTop: 20, fontFamily: 'Ubuntu' }}>\n                <b>您获得的NFT是： #{this.state.rootNFTId}</b>\n              </Typography>\n\n              <Button\n                variant=\"contained\"\n                className={classes.button}\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\n                onClick={this.checkDetail}\n              >\n                查看详情\n              </Button>\n            </div>\n          </ThemeProvider>\n        </Spin>\n      )\n    } else {\n      return (\n        <Spin spinning={this.state.onLoading} size='large' style={{marginTop: 1000}}>\n\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\n              <div className={classes.paper}>\n                {/* {showLoading()} */}\n                <Typography className={classes.titlePub}>\n                  <b>发布作品信息</b>\n                </Typography>\n                <form className={classes.form} noValidate>\n                  <Grid container spacing={2}>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\n                      <Input\n                        placeholder=\"作品名称\"\n                        allowClear\n                        id=\"pubName\"\n                        onChange={this.handleGetPubName}\n                        value={this.state.name}\n                        className={classes.input}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>收益比例 *</label>\n                      <p style={{ fontSize: 14 }}>当您的作品被他人分享并获利时，您希望从他的分享利润中获得多少比例的收益</p>\n                      <InputNumber\n                        id=\"bonusFee\"\n                        defaultValue={0}\n                        min={0}\n                        max={100}\n                        formatter={value => `${value}%`}\n                        parser={value => value.replace('%', '')}\n                        onChange={this.handleGetBonusFee}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>通行代币 *</label>\n                      <p style={{ fontSize: 14 }}>请选择您支持的支付货币 (输入代币符号或地址)</p>\n                      <Select\n                        showSearch\n                        value={this.state.token_addr}\n                        placeholder={\"请输入代币符号或地址\"}\n                        // className={classes.input}\n                        style={{ width: \"100%\" }}\n                        size=\"large\"\n                        defaultActiveFirstOption={false}\n                        showArrow={false}\n                        filterOption={false}\n                        onSearch={this.handleSearch}\n                        onChange={this.handleSelectChange}\n                        notFoundContent={null}\n                      >\n                        {options}\n                      </Select>\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>售卖价格 ({this.state.token_symbol})*</label>\n                      <InputNumber\n                        id=\"price\"\n                        defaultValue={0}\n                        min={0}\n                        onChange={this.handleGetPrice}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>最高分享次数 (MAX： 65535)*</label>\n                      <p style={{ fontSize: 14 }}>您希望每一个帮助您传播的用户最多能够分享多少次？</p>\n                      <InputNumber\n                        id=\"shareTimes\"\n                        defaultValue={0}\n                        min={0}\n                        max={65535}\n                        onChange={this.handleGetShareTimes}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }} >\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\n                      <TextArea\n                        rows={6}\n                        id=\"Description\"\n                        onChange={this.handleGetDescription}\n                      />\n                    </Grid>\n                  </Grid>\n                  <label style={{ fontSize: 18, marginTop: 50 }}>封面图片 *</label>\n                  <p style={{ fontSize: 14 }}>请在下方区域上传您的封面图片 <br />\n                    封面文件支持这些格式：JPEG/JPG/PNG</p>\n                  <Dragger {...prop} style={{ width: '100%', minHeight: 200 }} id=\"Uploader\" accept=\".png, .jpg, .jpeg\" >\n                    <p className=\"ant-upload-drag-icon\">\n                      <InboxOutlined />\n                    </p>\n                    <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n                    <p className=\"ant-upload-hint\">\n                      支持单个文件的上传，支持多种类型文件的上传\n                    </p>\n                  </Dragger>\n\n                  <label style={{ fontSize: 18, marginTop: 50 }}>作品文件 *</label>\n                  <p style={{ fontSize: 14 }}>请在下方区域上传您的作品文件 </p>\n                  <Dragger {...propFile} style={{ width: '100%', minHeight: 200 }} id=\"Uploader2\" >\n                    <p className=\"ant-upload-drag-icon\">\n                      <InboxOutlined />\n                    </p>\n                    <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n                    <p className=\"ant-upload-hint\">\n                      仅支持单个文件的上传，支持多种类型文件的上传\n                    </p>\n                  </Dragger>\n                </form>\n                <Button\n                  variant=\"contained\"\n                  className={classes.button}\n                  startIcon={<CloudUploadOutlined />}\n                  style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\n                  onClick={this.submit}\n                >\n                  提交信息\n                </Button>\n              </div>\n            </Container>\n          </ThemeProvider>\n        </Spin>\n      )\n    }\n\n\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(Publish)","import React, { Component } from 'react'\nimport './App.css'\nimport Button from '@material-ui/core/Button'\nimport Grid from '@material-ui/core/Grid'\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\nimport Skeleton from '@material-ui/lab/Skeleton'\nimport Typography from '@material-ui/core/Typography'\nimport TopBar from \"./TopBar\"\nimport Paper from '@material-ui/core/Paper'\nimport { DownloadOutlined, FireOutlined, ArrowLeftOutlined, MoneyCollectOutlined, CopyOutlined, DollarCircleOutlined } from '@ant-design/icons'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\nimport { IconButton, Container } from \"@material-ui/core\"\nimport contract from './contract'\nimport { Progress, Spin, message } from 'antd'\nimport axios from 'axios'\nimport web3 from './web3'\n\nconst FileSaver = require('file-saver')\nvar CryptoJS = require(\"crypto-js\")\nconst abi = require('erc-20-abi')\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n})\n\nconst styles = theme => ({\n  container: {\n    maxWidth: 1500,\n  },\n  cbutton: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent: \"flex-end\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent: \"flex-end\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent: \"flex-end\",\n      alignItems: \"flex-start\"\n    },\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n  },\n  btnMain: {\n    marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 120,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  btnSecond: {\n    marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderWidth: 3,\n    borderColor: '#03A9F4',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 120,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1370,\n    // backgroundColor: \"green\"\n  },\n  imagePapaer: {\n\n    [theme.breakpoints.between('xs', 'sm')]: {\n      backgroundColor: '#EFEBE9', width: 330, marginLeft: 25\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      backgroundColor: '#EFEBE9', width: 340, marginLeft: 25\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 25\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\n    },\n    [theme.breakpoints.up('xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\n    },\n  },\n  imageStyle: {\n    objectFit: 'contain',\n    // object- fit: cover\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: 280,\n      height: 365,\n      marginTop: 20,\n      marginBottom: 50\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      width: 290,\n      height: 385,\n      marginTop: 20,\n      marginBottom: 50\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      width: 300,\n      height: 420,\n      marginTop: 20,\n      marginBottom: 50\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      width: 300,\n      marginTop: 20,\n      marginBottom: 50\n    },\n    [theme.breakpoints.up('xl')]: {\n      width: 300,\n      marginTop: 20,\n      marginBottom: 50\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: 10, maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n  cbutton2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent: \"flex-end\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent: \"space-evenly\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent: \"space-evenly\",\n      alignItems: \"flex-start\"\n    },\n  },\n  share: {\n    fontFamily: 'Teko',\n    marginBottom: '10%',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 14,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 18,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 20,\n    },\n\n  }\n\n\n})\n\n\nclass NFTInfo extends Component {\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\n  backend = 'https://api.sparklink.io'\n  state = {\n    loading: false,\n    showDecryptProgress: null,\n    decryptPercentage: 0,\n    showProgress: false,\n    percentage: 0,\n    Profit: '',\n    account: null,\n    loadItem: true,\n    Cover: '',\n    Name: '',\n    Description: '',\n    BonusFee: 0,\n    childrenNum: 0,\n    encrypted: '未知',\n    dataUrl: null,\n    isEncrypt: false,\n    fileType: '',\n    spark: false,\n    tokenAddr: '',\n    tokenSymbol: '',\n  }\n  async componentDidMount() {\n    if (!window.ethereum) {\n      alert(\"请先安装metamask\");\n      window.location.href = '/#/collections';\n      return;\n    }\n\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n    if (chainId !== '0x89') {\n      alert(\"请切换至Polygon 主网络\");\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x89'\n        }]\n      })\n    }\n\n    const owner = await contract.methods.ownerOf(this.props.match.params.id).call()\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n    const account = accounts[0]\n    if (web3.utils.toChecksumAddress(account) !== owner) {\n      // alert(\"这枚nft不属于你\");\n      message.warning({\n        content: \"这枚nft不属于你\",\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n      window.location.href = '/#/';\n    }\n\n    const token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.id).call()\n    const res = await contract.methods.getProfitByNFTId(this.props.match.params.id).call()  \n    if (token_addr == '0x0000000000000000000000000000000000000000') {\n      var price_with_decimal = res / (10 ** 18)\n      var profit = price_with_decimal + \" MATIC\"\n      this.setState({\n        tokenAddr: '0x0000000000000000000000000000000000000000',\n        tokenSymbol: 'MATIC',\n        Profit: profit\n      })\n    } else {\n      const token_contract = new web3.eth.Contract(abi, token_addr)\n      const token_symbol = await token_contract.methods.symbol().call()\n      const decimal = await token_contract.methods.decimals().call()\n      var price_with_decimal = res / (10 ** decimal)\n      var profit = price_with_decimal + ` ${token_symbol}`\n      this.setState({\n        tokenAddr: token_addr,\n        tokenSymbol: token_symbol,\n        Profit: profit\n      })\n    }\n    const meta = await contract.methods.tokenURI(this.props.match.params.id).call()\n    let hash = meta.split('/');\n    const issue = await contract.methods.getIssueIdByNFTId(this.props.match.params.id).call()\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issue).call()\n    var file_hash = hash[hash.length - 1]\n    var request_url = \"https://coldcdn.com/api/cdn/v5ynur/ipfs/\" + file_hash\n    \n    try {\n      const res = await axios({\n        method: 'get',\n        url: request_url,\n        timeout: 1000 * 5,\n      })\n      let data = res.data;\n      let bouns = 0;\n      let fileAddr = \"\";\n      let isEncrypt = false;\n      let fileType = data.attributes[2].value\n      let encrypted = '未知';\n\n      for (let i = 0; i < data.attributes.length; i++) {\n        if (data.attributes[i].trait_type === \"Bonuse Percentage\") {\n          bouns = data.attributes[i].value;\n        }\n        if (data.attributes[i].trait_type === \"File Address\") {\n          fileAddr = data.attributes[i].value;\n        }\n        if (data.attributes[i].trait_type === \"Encrypted\") {\n          if (data.attributes[i].value === \"FALSE\") {\n            isEncrypt = false\n            encrypted = '否';\n          } else {\n            isEncrypt = true\n            encrypted = '是';\n          }\n        }\n      }\n\n      this.setState({\n        Name: data.name,\n        Description: data.description,\n        BonusFee: royalty,\n        Cover: data.image,\n        dataUrl: fileAddr,\n        isEncrypt: isEncrypt,\n        encrypted: encrypted,\n        fileType: fileType,\n        loadItem: false\n      });\n\n    } catch (error) {\n      this.setState({ Name: 'SparkNFT' });\n      this.setState({ Description: '暂时无法获取到该nft的相关描述' });\n      this.setState({ BonusFee: royalty });\n      this.setState({ Cover: 'https://via.placeholder.com/100x140.png?text=SparkNFT' });\n      this.setState({ dataUrl: 'fileAddr_PlaceHolder', loadItem: false, });\n    }\n\n    const leafUrl = this.backend + '/api/v1/nft/info?nft_id=' + this.props.match.params.id\n    axios.get(leafUrl).then(res => {\n      var children_num = res.data.children_count\n      this.setState({\n        childrenNum: children_num\n      })\n    }).catch(error => {\n      if (error.response === undefined) {\n        message.error({\n          content: \"错误：服务器未响应\",\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n        return;\n      }\n      if (error.response.status === 400 && error.response.data.message.includes(\"children not found\")) {\n        console.debug(\"no children\")\n      } else {\n        message.error({\n          content: `获取nft子节点情况页面失败： ${error}`,\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      }\n    })\n\n  }\n\n  return = async () => {\n    window.location.reload(true)\n  }\n\n  claim = async () => {\n    this.setState({\n      loading: true\n    })\n    var gasPrice = await web3.eth.getGasPrice()\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n    try{\n      await contract.methods.claimProfit(this.props.match.params.id).send({\n        from: this.state.account,\n        gasPrice: new_gas_price\n      })\n    } catch (error){\n      message.error({\n        content: `Error: ${error}`,\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n    } finally {\n      this.setState({\n        loading: false\n      })\n    }\n  }\n\n  \n\n  downloadIPFS = async () => {\n    let obj = this\n    let dataSplits = this.state.dataUrl.split('/')\n    var dataHash = dataSplits[dataSplits.length - 1]\n    var dataUrl = this.gateway + dataHash\n    this.setState({\n      showProgress: true\n    })\n    if(this.state.isEncrypt){\n      var cipher_config = {\n        method: 'get',\n        url: dataUrl,\n        onDownloadProgress(progress) {\n          var percentage = Math.round(progress.loaded / progress.total * 100)\n          obj.setState({\n            percentage: percentage\n          })\n        }\n      }\n\n      const response = await axios(cipher_config)\n      let ciphertext = response.data\n      let accounts = await await window.ethereum.request({ method: 'eth_requestAccounts' })\n      let account = accounts[0]\n      let signJSON = {\n        account: account,\n        root_nft_id: this.props.match.params.id\n      }\n      signJSON = JSON.stringify(signJSON)\n      this.setState({\n        showProgress: false\n      })\n      await this.signDataAndDecrypt(account, ciphertext)\n    } else {\n      var open_config = {\n        url: dataUrl, //your url\n        method: 'GET',\n        responseType: 'blob', // important\n        onDownloadProgress(progress) {\n          var percentage = Math.round(progress.loaded / progress.total * 100)\n          obj.setState({\n            percentage: percentage\n          })\n        }\n      }\n      try{\n        const response = await axios(open_config)\n        const url = window.URL.createObjectURL(new Blob([response.data]))\n        const link = document.createElement('a')\n        link.href = url\n        link.style.display = 'none'\n        var suffix = '.' + obj.state.fileType\n        var fileName = this.state.Name + suffix\n        link.download = fileName\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n        URL.revokeObjectURL(url)\n      } catch(error){\n        message.error({\n          content: `Error: ${error}`,\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      } finally {\n        this.setState({ showProgress: false })\n      }\n    }\n  }\n\n  signDataAndDecrypt = async (signer, ciphertext) => {\n    var JSONBody = {\n      \"account\": signer,\n      \"nft_id\": this.props.match.params.id\n    }\n    var json_str = JSON.stringify(JSONBody)\n    const sig = await web3.eth.personal.sign(json_str, signer)\n\n    this.setState({\n      showDecryptProgress: true\n    })\n\n    var payload = {\n      \"account\": signer,\n      \"nft_id\": this.props.match.params.id,\n      \"signature\": sig\n    }\n    var payload_str = JSON.stringify(payload)\n    var req_key_url = this.backend + \"/api/v1/key/claim\"\n    try{\n      const res = await axios.post(req_key_url, payload_str, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n\n      if (res.status == 200) {\n        let key = res.data.key\n        let data = CryptoJS.AES.decrypt(ciphertext, key)\n        let plainText = data.toString(CryptoJS.enc.Utf8)\n        const wordArray = CryptoJS.enc.Hex.parse(plainText)\n        let BaText = this.wordArrayToByteArray(wordArray, wordArray.length)\n        var blob = new Blob([BaText])\n        let suffix = '.' + this.state.fileType\n        FileSaver.saveAs(blob, this.state.Name + suffix)\n\n      } else {\n        var error_msg = res.data.message\n        message.error({\n          content: `Error: ${error_msg}`,\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      }\n    } catch (error) {\n      message.error({\n        content: `Error: ${error}`,\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n    }\n  }\n\n  wordToByteArray = (result, word, length) => {\n    const lengthBefore = result.length\n    const xff = 0xFF\n    if (length > 0)\n      result.push(word >>> 24)\n    if (length > 1)\n      result.push((word >>> 16) & xff)\n    if (length > 2)\n      result.push((word >>> 8) & xff)\n    if (length > 3)\n      result.push(word & xff)\n\n    var info = {\n      result: result,\n      addedLength: result.length - lengthBefore\n    }\n    return info\n  }\n\n  wordArrayToByteArray = (wordArray, length) => {\n    console.debug(\"enter in wordArrayToByte\")\n    if (wordArray.hasOwnProperty(\"sigBytes\") && wordArray.hasOwnProperty(\"words\")) {\n      length = wordArray.sigBytes\n      wordArray = wordArray.words\n    }\n\n    var result = [],\n      bytesAdded,\n      current_bytes = 0,\n      lengthBefore = length,\n      i = 0\n    while (length > 0) {\n      var added_info = this.wordToByteArray(result, wordArray[i], Math.min(4, length))\n      result = added_info.result\n      bytesAdded = added_info.addedLength\n      current_bytes = current_bytes + bytesAdded\n      var percent = Math.round(current_bytes / lengthBefore * 100)\n      if (percent !== this.state.decryptPercentage) {\n        this.setState({\n          decryptPercentage: percent\n        })\n      }\n      length -= bytesAdded\n      i++\n    }\n\n    return new Uint8Array(result)\n  }\n\n  spark = () => {\n    this.setState({ spark: true });\n  }\n\n\n  render(){\n    const {classes} = this.props\n    const sell_info = () => {\n      let url = window.location.host;\n      let toUrl = \"https://\" + url + '/#/NFT/Spark/' + this.props.match.params.id;\n      let share = '分享复制链接：' + toUrl;\n      // this.state.onSale\n      if (this.state.spark) {\n        return (\n          <Grid container >\n            <Grid item xs>\n              <Typography color=\"inherit\" align=\"center\" noWrap className={classes.share} >\n                请将下方链接分享给买方，<br /> 买方会进入此链接来购买这个NFT <br />\n                {toUrl}\n                <CopyToClipboard text={toUrl}\n                  onCopy={() => this.setState({ copied: true })}>\n                  <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\n                    <CopyOutlined />\n                  </IconButton>\n                </CopyToClipboard>\n              </Typography>\n            </Grid>\n          </Grid>\n        );\n      }\n    }\n\n    if (this.state.showDecryptProgress){\n      return(\n        <Spin spinning={this.state.loading} size='large'>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40 }}>\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\n                <b>正在解密文件</b>\n              </Typography>\n            </div>\n            <div style={{ textAlign: 'center', marginTop: '10%' }}>\n              <Progress type=\"circle\" percent={this.state.decryptPercentage} width={200} />\n            </div>\n            <div style={{ textAlign: 'center' }}>\n              <Button\n                variant=\"contained\"\n                className={classes.button}\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\n                onClick={this.return}\n              >\n                返回信息页面\n              </Button>\n            </div>\n          </ThemeProvider>\n        </Spin>\n      )\n    } else if(this.state.showProgress){\n      return(\n        <Spin spinning={this.state.loading} size='large'>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40 }}>\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\n                <b>正在下载文件</b>\n              </Typography>\n            </div>\n            <div style={{ textAlign: 'center', marginTop: '10%' }}>\n              <Progress type=\"circle\" percent={this.state.percentage} width={200} />\n            </div>\n          </ThemeProvider>\n        </Spin>\n      )\n    } else {\n      return(\n        <Spin spinning={this.state.loading} size='large'>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" className={classes.container}>\n              <Button\n                startIcon={<ArrowLeftOutlined style={{ fontSize: '2rem' }} />}\n                href='/#/collections'\n                style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\n              >\n                回到我的收藏馆\n              </Button>\n              <Grid container direction=\"row\" justifyContent=\"center\" alignContent=\"flex-start\">\n                <Grid container direction=\"row\" className={classes.cbutton}> \n\n                  <Grid item>\n                    <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 14 }}>\n                      <b>目前收益: {this.state.Profit}</b>\n                    </Typography>\n                  </Grid>\n\n                  <Grid item>\n                    <Button style={{ marginTop: 10, marginRight: 30, marginBottom: 20 }} size=\"large\" variant=\"contained\" color=\"primary\" className={classes.btnMain} startIcon={<MoneyCollectOutlined />} onClick={this.claim} >\n                      <Typography id=\"isSpark\" variant=\"button\" component=\"h3\" gutterBottom >\n                        <font size=\"3\" color='white'>\n                          领收益\n                        </font>\n                      </Typography>\n                    </Button>\n                  </Grid>\n\n                  <Grid item>\n                    <Button style={{ marginTop: 10, marginBottom: 20 }} size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} startIcon={<DollarCircleOutlined />} href={'/#/sellSingle/' + this.props.match.params.id}  >\n                      <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                        <font size=\"3\">\n                          售卖\n                        </font>\n                      </Typography>\n                    </Button>\n                  </Grid>\n\n                </Grid>\n              </Grid>\n\n              <div className={classes.paper}>\n                {this.state.loadItem ? (\n                  <Grid container className={classes.content} spacing = {5}>\n\n                    <Grid item xs = {4}>\n                      <Skeleton variant=\"rect\" width={300} height={500} style={{ width: 370, marginLeft: 50, marginBottom: 50 }} />\n                    </Grid>\n\n                    <Grid item xs style={{ marginLeft: '5%' }}>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={200} height={30} />\n                      <Skeleton animation=\"wave\" variant=\"text\" width={400} height={70} />\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={500} height={300} style={{ marginBottom: 50 }} />\n                    </Grid>\n\n                  </Grid>\n                ):(\n                  <Grid container direction=\"row\" justifyContent=\"space-between\" spacing={5} className={classes.content}>\n\n                    <Grid style={{ maxWidth: 200 }}>\n                      <Paper className={classes.imagePapaer}>\n                        <img className={classes.imageStyle} src={this.state.Cover}></img>\n                      </Paper>\n                    </Grid>\n\n                    <Grid item xs={2}></Grid>\n\n                    <Grid item className={classes.content2} >\n                      <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                        #{this.props.match.params.id}\n                      </Typography>\n                      <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34, marginTop: '2%' }}>\n                        <b>{this.state.Name}</b>\n                      </Typography>\n                      <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                        {this.state.Description}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '100%', fontSize: 24 }}>\n                        分红比例: {this.state.BonusFee} %\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                        当前拥有的子节点数量: {this.state.childrenNum}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                        NFT作品是否加密: {this.state.encrypted}\n                      </Typography>\n\n                      <Grid container direction=\"row\" className={classes.cbutton2}>\n                        <Grid item>\n                          <Button size=\"small\" variant=\"contained\" color=\"primary\" target=\"_blank\" className={classes.btnMain} startIcon={<DownloadOutlined />} onClick={this.downloadIPFS} >\n                            <font size=\"3\" color='white'>\n                              下载\n                            </font>\n                          </Button>\n                        </Grid>\n\n                        <Grid>\n                          <Button size=\"small\" variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} onClick={this.spark} >\n                            <font size=\"3\">\n                              点火分享\n                            </font>\n                          </Button>\n                        </Grid>\n                      </Grid>\n                    </Grid>\n                  </Grid>\n\n                )}\n              </div>\n\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"flex-start\">\n                <Grid item xs={8}>\n                  <div style={{ marginTop: 30 }}>\n                    {sell_info()}\n                  </div>\n                </Grid>\n              </Grid>\n            </Container>\n          </ThemeProvider>\n        </Spin>\n      )\n    }\n  }\n\n}\nexport default withStyles(styles, { withTheme: true })(NFTInfo)","import React, { Component } from 'react'\nimport './App.css'\nimport { Button, Grid } from '@material-ui/core'\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\nimport TopBar from './TopBar'\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, IconButton } from \"@material-ui/core\"\nimport { Typography, Paper, Container } from '@material-ui/core'\nimport axios from 'axios'\nimport { DollarCircleOutlined, ArrowLeftOutlined, CopyOutlined } from '@ant-design/icons'\nimport { Spin, message } from 'antd'\nimport { Input, InputNumber } from 'antd'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\nimport contract from './contract'\nimport web3 from './web3'\nimport Skeleton from '@material-ui/lab/Skeleton'\n\nconst abi = require('erc-20-abi')\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n})\n\nconst styles = theme => ({\n  container: {\n    maxWidth: 1500,\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1500,\n  },\n  btnSell: {\n    margin: theme.spacing(1),\n    fontSize: 16,\n    borderRadius: 10,\n    borderWidth: 2,\n    borderColor: '#2196f3',\n    color: '#2196f3',\n    marginLeft: '10%',\n    width: 100\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n  },\n  img: {\n    width: 300,\n    marginBottom: 50,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '40%'\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    textAlign: 'center',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n  share: {\n    fontFamily: 'Teko',\n    marginBottom: '10%',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 14,\n      // width: '5%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 18,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 20,\n    },\n  },\n  imgPaper: {\n    width: 350,\n    marginBottom: 50,\n    backgroundColor: '#EFEBE9',\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '35%'\n    },\n  },\n  inputNum: {\n    height: 40,\n    borderRadius: 5,\n    width: 550,\n    fontSize: 20,\n  },\n  input: {\n    height: 40,\n    borderRadius: 5,\n  },\n})\n\nclass SellSingle extends Component {\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\n  backend = 'https://api.sparklink.io'\n  state = {\n    name: '',\n    bonusFee: 0,\n    coverURL: '',\n    description: '',\n    price: 0,\n    ipfsHashMeta: '',\n    open: false,\n    toAddress: '',\n    NFTId: '',\n    onSale: false,\n    copied: false,\n    onLoading: false,\n    owner: '',\n    currentAcc: '',\n    childrenNum: 0,\n    loadItem: true,\n    tokenAddr: null,\n    tokenSymbol: '',\n    decimal: 0,\n  }\n\n  async componentDidMount() {\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\n    if (chainId !== '0x89') {\n      alert(\"请切换至Polygon 主网络\")\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x89'\n        }]\n      })\n    }\n\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n    const account = accounts[0]\n    let obj = this \n    this.setState({\n      currentAcc: account,\n      NFTId: this.props.match.params.NFTId\n    })\n    const issueId = await contract.methods.getIssueIdByNFTId(this.state.NFTId).call()\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\n    const metadata = await contract.methods.tokenURI(this.props.match.params.NFTId).call()\n    let hash = metadata.split('/')\n    this.setState({ ipfsHashMeta: hash[hash.length - 1] })\n    var url = this.gateway + this.state.ipfsHashMeta\n    try {\n      const res = await axios({method: 'get', url: url, timeout: 1000*2})\n      let content = res.data\n      let bonus = content.attributes[0].value\n      let encrypted = content.attributes[3].value\n      this.setState({\n        loadItem: false,\n        name: content.name,\n        description: content.description,\n        bonusFee: bonus,\n        coverURL: content.image\n      })\n    } catch (error) {\n      var name_holder = 'SparkNFT#' + this.props.match.params.NFTId\n      obj.setState({\n        loadItem: false,\n        name: name_holder,\n        description: '暂时无法获取到该nft的相关描述',\n        bonusFee: royalty,\n        coverURL: 'https://via.placeholder.com/100x140.png?text=SparkNFT'\n      })\n      console.debug(error)\n    }\n\n    var owner = await contract.methods.ownerOf(this.props.match.params.NFTId).call()\n    var price = await contract.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call()\n    var token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.NFTId).call()\n    if(price = '0'){\n      this.setState({\n        owner: owner.toLowerCase(),\n        onSale: false\n      })\n    } else {\n      this.setState({\n        owner: owner.toLowerCase(),\n        onSale: true\n      })\n    }\n\n    if (token_addr == \"0x0000000000000000000000000000000000000000\") {\n      this.setState({\n        tokenAddr: token_addr,\n        tokenSymbol: \"MATIC\",\n        decimal: 18\n      })\n    } else {\n      try{\n        const token_contract = new web3.eth.Contract(abi, token_addr)\n        const token_symbol = await token_contract.methods.symbol().call()\n        const decimal = await token_contract.methods.decimals().call()\n        this.setState({\n          tokenAddr: token_addr,\n          tokenSymbol: token_symbol,\n          decimal: decimal\n        })\n      } catch (error){\n        message.error({\n          content: `Error: ${error}`,\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      }\n    }\n\n    const child_url = this.backend + '/api/v1/nft/info?nft_id=' + this.state.NFTId\n    try{\n      const res = await axios.get(child_url)\n      var children_num = res.data.children_count\n      this.setState({\n        childrenNum: children_num\n      })\n    } catch (error) {\n      if (error.response === undefined) {\n        message.error({\n          content: \"错误：服务器未响应\",\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n        return\n      }\n      if (error.response.status === 400 && error.response.data.message.includes(\"children not found\")) {\n        console.debug(\"no children\")\n      } else {\n        message.error({\n          content: `获取nft子节点情况页面失败： ${error}`,\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      }\n    }\n  }\n\n  handleClickOpen = (e) => {\n    this.setState({\n      open: true,\n    })\n  }\n\n  handleClose = (e) => {\n    this.setState({\n      open: false,\n    })\n  }\n\n  handleGetPrice = (value) => {\n    this.setState({\n      price: value,\n    })\n  }\n\n  handleGetAddr = (e) => {\n    this.setState({\n      toAddress: e.target.value,\n    })\n  }\n\n  handleClickLink = (event) => {\n    var new_url = '/#/NFT/' + this.state.NFTId\n    window.open(new_url, '_self')\n  }\n\n  sell = async (e) => {\n    this.setState({\n      open: false,\n    })\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n\n    var price_with_decimal = this.state.price * (10 ** this.state.decimal)\n    price_with_decimal = price_with_decimal.toString()\n    var obj = this\n    this.setState({\n      onLoading: true\n    })\n    var gasPrice = await web3.eth.getGasPrice()\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n    contract.methods.determinePriceAndApprove(this.state.NFTId, price_with_decimal, this.state.toAddress).send({\n      from: account,\n      gasPrice: new_gas_price\n    })\n      .on('receipt', function (receipt) {\n        obj.setState({\n          onSale: true,\n          onLoading: false\n        })\n        message.success({\n          content: \"已经成功授权买方\",\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      })\n      .on('error', function (error) {\n        obj.setState({\n          onLoading: false\n        })\n        message.error({\n          content: `Error: ${error.message}`,\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      })\n  }\n\n  render() {\n    const { classes } = this.props\n    const sell_info = () => {\n      let host = window.location.host\n      let toUrl = \"https://\" + host + '/#/buySingle/' + this.state.NFTId\n      if (this.state.onSale) {\n        return (\n          <Grid container >\n            <Grid item xs>\n              <Typography color=\"inherit\" align=\"center\" noWrap className={classes.share} >\n                请将下方链接分享给买方，<br /> 买方会进入此链接来购买这个NFT <br />\n                {toUrl}\n                <CopyToClipboard text={toUrl}\n                  onCopy={() => this.setState({ copied: true })}>\n                  <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\n                    <CopyOutlined />\n                  </IconButton>\n                </CopyToClipboard>\n              </Typography>\n            </Grid>\n          </Grid>\n        )\n      }\n    }\n\n    const showSellBtn = () => {\n      if (this.state.currentAcc == this.state.owner) {\n        return (\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            startIcon={< DollarCircleOutlined style={{ fontSize: 22 }} />}\n            className={classes.btnSell}\n            onClick={this.handleClickOpen}\n          >\n            售卖\n          </Button>\n        )\n      } else {\n        return (\n          <Button\n            variant=\"outlined\"\n            startIcon={<DollarCircleOutlined style={{ fontSize: 22 }} />}\n            className={classes.btnSell}\n            disabled\n          >\n            售卖\n          </Button>\n        )\n      }\n    }\n\n    return(\n      <Spin spinning={this.state.onLoading} size='large'>\n        <ThemeProvider theme={theme}>\n          <TopBar />\n          <Container component=\"main\" className={classes.container}>\n            <Button\n              startIcon={<ArrowLeftOutlined style={{ fontSize: 22 }} />}\n              onClick={this.handleClickLink}\n              style={{ marginTop: 50, marginBottom: 100, fontSize: 22 }}\n            >\n              返回\n            </Button>\n            <div className={classes.paper}>\n              {this.state.loadItem?(\n                <Grid container spacing={5} className={classes.content}>\n                  <Grid item xs={4}>\n                    <Skeleton variant=\"rect\" width={300} height={500} className={classes.img} />\n                  </Grid>\n                  <Grid item xs style={{ marginLeft: '5%', maxWidth: 500, minWidth: 350 }}>\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'70%'} height={30} />\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'100%'} height={70} />\n                    <Skeleton animation=\"wave\" variant=\"rect\" width={'100%'} height={300} style={{ marginBottom: 50 }} />\n                    {showSellBtn()}\n                  </Grid>\n                </Grid>\n              ):(\n                <Grid container className={classes.content} spacing={5}>\n                  <Grid item xs={4} style={{ maxWidth: 600 }}>\n                    <Paper className={classes.imgPaper}>\n                      <img style={{ width: 300, marginTop: 20, marginBottom: 50, objectFit: 'contain' }} src={this.state.coverURL}></img>\n                    </Paper>\n                  </Grid>\n\n                  <Grid item xs className={classes.content2}>\n                    <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                      #{this.state.NFTId}\n                    </Typography>\n                    <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 30, marginTop: '2%' }}>\n                      <b>{this.state.name}</b>\n                    </Typography>\n                    <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                      {this.state.description}\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '65%', fontSize: 20 }}>\n                      创作者分红比例: {this.state.bonusFee} %\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                      当前拥有的子节点数量: {this.state.childrenNum}\n                    </Typography>\n                    {showSellBtn()}\n                    <Dialog\n                      open={this.state.open}\n                      onClose={this.handleClose}\n                      aria-labelledby=\"form-dialog-title\"\n                    >\n                      <DialogTitle id=\"form-dialog-title\">填写售卖信息</DialogTitle>\n                      <DialogContent>\n                        <DialogContentText>\n                          请在下方区域填写你希望售卖的价格，以及售卖对象的钱包地址。\n                        </DialogContentText>\n                        <label style={{ fontSize: 14, marginBottom: 10 }}>售卖价格 ({this.state.tokenSymbol})*</label>\n                        <InputNumber\n                          defaultValue={0}\n                          min={0}\n                          onChange={this.handleGetPrice}\n                          className={classes.inputNum}\n                        />\n                        <label style={{ fontSize: 14, marginBottom: 10, marginTop: 10 }}>买方钱包地址 *</label>\n                        <Input\n                          placeholder=\"买方钱包地址\"\n                          allowClear\n                          id=\"pubName\"\n                          onChange={this.handleGetAddr}\n                          className={classes.input}\n                        />\n                      </DialogContent>\n                      <DialogActions>\n                        <Button onClick={this.handleClose} color=\"primary\">\n                          取消\n                        </Button>\n                        <Button variant=\"contained\" onClick={this.sell} color=\"primary\" >\n                          卖出\n                        </Button>\n                      </DialogActions>\n                    </Dialog>\n                    \n                  </Grid>\n                </Grid>\n              )}\n            </div>\n            <div style={{ marginTop: 50 }}>\n              {sell_info()}\n            </div>\n          </Container>\n        </ThemeProvider>\n      </Spin>\n    )\n  }\n\n}\n\nexport default withStyles(styles, {withTheme: true}) (SellSingle)","import React, { Component } from 'react'\nimport './App.css'\nimport Button from '@material-ui/core/Button'\nimport Grid from '@material-ui/core/Grid'\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\nimport TopBar from './TopBar'\nimport Typography from '@material-ui/core/Typography'\nimport axios from 'axios'\nimport Paper from '@material-ui/core/Paper'\nimport Container from '@material-ui/core/Container'\nimport { DollarCircleOutlined, ArrowLeftOutlined } from '@ant-design/icons'\nimport { Spin, message } from 'antd'\nimport contract from './contract'\nimport web3 from './web3'\nimport Skeleton from '@material-ui/lab/Skeleton'\n\nconst abi = require('erc-20-abi')\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n})\n\nconst styles = theme => ({\n  container: {\n    maxWidth: 1500,\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1500,\n  },\n  btnDisable: {\n    margin: theme.spacing(1),\n    fontSize: 16,\n    borderRadius: 10,\n    borderWidth: 3,\n    borderColor: '#909497',\n    color: '#909497',\n    marginLeft: '10%',\n    width: 100\n  },\n  btnSell: {\n    margin: theme.spacing(1),\n    fontSize: 16,\n    borderRadius: 10,\n    borderWidth: 2,\n    borderColor: '#2196f3',\n    color: '#2196f3',\n    marginLeft: '10%',\n    width: 100\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n  },\n  img: {\n    width: 300,\n    marginBottom: 50,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '40%'\n    },\n  },\n  imgPaper: {\n    width: 350,\n    marginBottom: 50,\n    backgroundColor: '#EFEBE9',\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '35%'\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    textAlign: 'center',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n\n})\n\n\nclass BuySingle extends Component {\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\n  backend = 'https://api.sparklink.io'\n  sparkAddr = '0xb42d4525841008A69E427026DF354067fD6A524f'\n  state = {\n    name: '',\n    bonusFee: 0,\n    coverURL: '',\n    description: '',\n    price: 0,\n    priceString: '',\n    ipfsHashMeta: '',\n    open: false,\n    address: '',\n    NFTId: '',\n    onSale: false,\n    owner: '',\n    approvedAddr: '',\n    currentAcc: '',\n    onLoading: false,\n    childrenNum: 0,\n    loadItem: true,\n    encrypted: '未知',\n    tokenAddr: null,\n    tokenSymbol: '',\n    decimal: 0,\n    approved: false,\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  async componentDidMount () {\n    const accounts = await window.ethereum.request({method: 'eth_requestAccounts'})\n    const account = accounts[0]\n    this.setState({\n      currentAcc: account,\n      NFTId: this.props.match.params.NFTId\n    })\n    const issueId = await contract.methods.getIssueIdByNFTId(this.state.NFTId).call()\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\n    const metadata = await contract.methods.tokenURI(this.props.match.params.NFTId).call()\n    let hash = metadata.split('/')\n    this.setState({\n      ipfsHashMeta: hash[hash.length-1]\n    })\n    var url = this.gateway + this.state.ipfsHashMeta\n    try {\n      const res = await axios({method: 'get', url: url, timeout: 1000*3})\n      let content = res.data\n      let bonus = content.attributes[0].value\n      let encrypted\n      if (content.attributes[3].value.toUpperCase() === 'TRUE'){\n        encrypted = '是'\n      } else {\n        encrypted = '否'\n      }\n\n      this.setState({\n        loadItem: false,\n        name: content.name,\n        description: content.description,\n        bonusFee: bonus,\n        coverURL: content.image,\n        encrypted: encrypted\n      })\n    } catch (error) {\n      var name_holder = 'SparkNFT#' + this.props.match.params.NFTId\n      this.setState({\n        loadItem: false,\n        name: name_holder,\n        description: '暂时无法获取到该nft的相关描述',\n        bonusFee: royalty,\n        coverURL: 'https://via.placeholder.com/100x140.png?text=SparkNFT'\n      })\n    }\n\n    var owner = await contract.methods.ownerOf(this.props.match.params.NFTId).call()\n    var approved = await contract.methods.getApproved(this.props.match.params.NFTId).call()\n    var price = await contract.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call()\n    var token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.NFTId).call()\n    this.setState({\n      owner: owner,\n      approvedAddr: approved,\n      price: price\n    })\n    if (token_addr == '0x0000000000000000000000000000000000000000') {\n      this.setState({\n        tokenAddr: token_addr,\n        tokenSymbol: \"MATIC\",\n        decimal: 18,\n        approved: true\n      })\n    } else {\n      try{\n        const token_contract = new web3.eth.Contract(abi, token_addr)\n        const token_symbol = await token_contract.methods.symbol().call()\n        const decimal = await token_contract.methods.decimals().call()\n        const approved_amount = await token_contract.methods.allowance(account, this.sparkAddr).call()\n        if(approved_amount >= price){\n          this.setState({\n            approved: true\n          })\n        } else {\n          this.setState({\n            approved: false\n          })\n        }\n        this.setState({\n          tokenAddr: token_addr,\n          tokenSymbol: token_symbol,\n          decimal: decimal\n        })\n      } catch (error) {\n        message.error({\n          content: `Error: ${error}`,\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      }\n    }\n\n    var price_with_decimal = price / (10 ** this.state.decimal)\n    price_with_decimal = price_with_decimal + \" \" + this.state.tokenSymbol\n    this.setState({\n      priceString: price_with_decimal\n    })\n\n    const child_url = this.backend + '/api/v1/nft/info?nft_id=' + this.state.NFTId\n    try{\n      const response = await axios.get(child_url)\n      var children_num = response.data.children_count\n      this.setState({\n        childrenNum: children_num\n      })\n    } catch (error) {\n      message.error({\n        content: `Error: ${error}`,\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n    }\n    \n  }\n\n  handleBuy = async (e) => {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n    const account = accounts[0]\n    \n    var gasPrice = await web3.eth.getGasPrice()\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n    let obj = this\n    if (this.state.tokenAddr == '0x0000000000000000000000000000000000000000') {\n      this.setState({\n        onLoading: true\n      })\n      contract.methods.safeTransferFrom(this.state.owner, account, this.state.NFTId).send({\n        from: account,\n        value: this.state.price,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          obj.setState({\n            onLoading: false\n          })\n          message.success({\n            content: \"交易已经上链\",\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false\n          })\n          message.error({\n            content: `Error: ${error.message}`,\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n        })\n    } else {\n      this.setState({\n        onLoading: true\n      })\n      contract.methods.safeTransferFrom(this.state.owner, account, this.state.NFTId).send({\n        from: account,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          obj.setState({\n            onLoading: false\n          })\n          message.success({\n            content: \"交易已经上链\",\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false\n          })\n          message.error({\n            content: `Error: ${error.message}`,\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n        })\n    }\n  }\n\n  handleApprove = async (e) => {\n    const accounts = await window.ethereum.request({method: 'eth_requestAccounts'})\n    const account = accounts[0]\n\n    this.setState({\n      onLoading: true\n    })\n    let obj = this\n    try{\n      const token_contract = new web3.eth.Contract(abi, this.state.tokenAddr)\n      var gasPrice = await web3.eth.getGasPrice()\n      var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n      var price = this.state.price.toString()\n\n      token_contract.methods.approve(this.sparkAddr, price).send({\n        from: account,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          obj.setState({\n            onLoading: false,\n            approved: true\n          })\n          message.success({\n            content: \"已经成功授权合约\",\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false,\n          })\n          message.error({\n            content: `Error: ${error.message}`,\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n        })\n    } catch (error) {\n      message.error({\n        content: `Error: ${error}`,\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n    }\n  }\n\n  handleGetPrice = (value) => {\n    this.setState({\n      price: value,\n    })\n  }\n\n  handleGetAddr = (e) => {\n    this.setState({\n      address: e.target.value,\n    })\n  }\n\n  render () {\n    const {classes} = this.props\n    \n    const buyButton = ()=> {\n      if(this.state.approvedAddr.toLowerCase() !== this.state.currentAcc.toLowerCase()){\n        return (\n          <Button\n            variant = 'outlined'\n            startIcon={<DollarCircleOutlined style={{ fontSize: 22 }}/>}\n            className={classes.btnDisable}\n            disabled\n          >\n            购买\n          </Button>\n        )\n      } else if (! this.state.approved) {\n        return(\n          <Button\n            variant = 'outlined'\n            color = 'primary'\n            className = { classes.btnSell }\n            onClick={this.handleApprove}\n          >\n            授权合约\n          </Button>\n        )\n      } else {\n        return(\n          <Button\n            variant='outlined'\n            startIcon={<DollarCircleOutlined style={{ fontSize: 22 }} />}\n            className={classes.btnSell}\n            onClick={this.handleBuy}\n          >\n            购买\n          </Button>\n        )\n      }\n    }\n\n    return(\n      <Spin spinning={this.state.onLoading} size='large'>\n        <ThemeProvider theme={theme}>\n          <TopBar />\n          <Container component=\"main\" className={classes.container}>\n            <Button\n              startIcon={<ArrowLeftOutlined style={{ fontSize: '2rem' }} />}\n              href='/'\n              style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\n            >\n              回到首页\n            </Button>\n            <div className={classes.paper}>\n              {this.state.loadItem ? (\n                <Grid container spacing={5} className={classes.content}>\n                  <Grid item xs={4}>\n                    <Skeleton variant=\"rect\" width={300} height={500} className={classes.img} />\n                  </Grid>\n\n                  <Grid item xs style={{ marginLeft: '5%', maxWidth: 500, minWidth: 350 }}>\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'70%'} height={30} />\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'100%'} height={70} />\n                    <Skeleton animation=\"wave\" variant=\"rect\" width={'100%'} height={300} style={{ marginBottom: 50 }} />\n                    {buyButton()}\n                  </Grid>\n                </Grid>\n              ):(\n                <Grid container className={classes.content} spacing={5}>\n                  <Grid item xs={4} style={{ maxWidth: 600 }}>\n                    <Paper className={classes.imgPaper}>\n                      <img style={{ width: 300, marginTop: 20, marginBottom: 50, objectFit: 'contain' }} src={this.state.coverURL}></img>\n                    </Paper>\n                  </Grid>\n\n                  <Grid item xs className={classes.content2}>\n                    <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                      #{this.state.NFTId}\n                    </Typography>\n                    <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34 }}>\n                      <b>{this.state.name}</b>\n                    </Typography>\n                    <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                      {this.state.description}\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '2%', maxWidth: '65%', fontSize: 20 }}>\n                      创作者分红比例: {this.state.bonusFee} %\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 18 }}>\n                      售价: {this.state.priceString}\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '1%', maxWidth: '65%', fontSize: 12 }}>\n                      当前拥有者: {this.state.owner}\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                      当前拥有的子节点数量: {this.state.childrenNum}\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                      NFT作品是否加密: {this.state.encrypted}\n                    </Typography>\n                    {buyButton()}\n                  </Grid>\n                </Grid>\n              )}\n            </div>\n          </Container>\n        </ThemeProvider>\n      </Spin>\n    )\n  }\n}\n\nexport default withStyles(styles, { withTheme: true})(BuySingle)","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport contract from './contract';\nimport TopBar from \"./TopBar\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { Empty } from 'antd';\nimport axios from 'axios';\nimport web3 from './web3';\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#FDFEFE',\n    },\n    secondary: {\n      main: '#2196f3',\n    }\n  },\n});\n\nconst styles = theme => ({\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  titleFont: {\n    fontFamily: 'Teko',\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 8,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(36, 0, 6),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardMedia: {\n    // paddingTop: '56.25%', // 16:9\n    objectFit: 'contain',\n    paddingTop: '100%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 2,\n  },\n  paper: {\n    marginTop: theme.spacing(7),\n    textAlign: 'center'\n  },\n  container: {\n    maxWidth: '100%'\n  },\n  btnMain: {\n    marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 150\n  },\n  btnSecond: {\n    marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderWidth: 3,\n    borderColor: '#03A9F4',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 150\n  },\n  title: {\n    fontFamily: 'Teko',\n    marginTop: '5%',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 40,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 55,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 90,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 110,\n    },\n  },\n  title2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 45,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 55,\n    },\n  },\n});\n\nclass Collections extends Component {\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/';\n  backend = 'https://api.sparklink.io'\n  web3;\n  cards = [];\n  state = {\n    isLogin: false,\n    user_address: null,\n    name: '',\n    viewable: false,\n    cards: [],\n    onloading: false,\n    SkeletoNumber: 0,\n    noNFT: true,\n  };\n\n  async componentDidMount() {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    if (accounts.length === 0) {\n      alert(\"请先连接Metamask\")\n    }\n    const account = accounts[0];\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n    if (chainId !== '0x89') {\n      alert(\"请切换至Polygon 主网络\");\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x89'\n        }]\n      })\n    }\n\n    let cards = [];\n\n    const nft_number = await contract.methods.balanceOf(account).call()\n    console.log('nft_number: ', nft_number)\n    if (nft_number === 0) {\n      return;\n    }\n\n    let ids = await this.getNft(contract, account);\n    if (ids.length === 0) {\n      return;\n    }\n\n    this.setState({\n      noNFT: false\n    })\n    let data = await this.getMetadata(contract, ids);\n    for (let i = 0; i < ids.length; i++) {\n      let element = {\n        id: ids[i],\n        title: data[i].name,\n        description: data[i].description,\n        bonusFee: data[i].attributes.value,\n        image: data[i].image,\n      }\n      cards.push(element);\n    }\n    var reversed_cards = cards.reverse()\n    this.setState({ viewable: true, });\n    this.setState({ cards: reversed_cards, });\n    this.setState({\n      onloading: false,\n      SkeletoNumber: 0\n    })\n\n  }\n\n  getMetadata = async (nft, id) => {\n    let metaDatas = [];\n    for (let i = 0; i < id.length; i++) {\n      let ipfs_link = await nft.methods.tokenURI(id[i]).call();\n      var ipfs_hash_arr = ipfs_link.split('/')\n      var ipfs_hash = ipfs_hash_arr[ipfs_hash_arr.length - 1]\n      var meta = \"https://coldcdn.com/api/cdn/v5ynur/ipfs/\" + ipfs_hash\n      // console.debug(\"meta: \" + id[i] + \" \" + meta)\n      await axios({\n        method: 'get',\n        url: meta,\n        timeout: 1000 * 2,\n      }).then(res => {\n        // console.log(\"meta: \", res.data)\n        metaDatas.push(res.data)\n      }).catch(error => {\n        var name_holder = 'SparkNFT#' + id[i]\n        var placeholder = {\n          \"name\": name_holder,\n          \"description\": '暂时无法获取到该nft的相关描述',\n          \"image\": 'https://testnets.opensea.io/static/images/placeholder.png',\n          \"attributes\": [\n            {\n              \"display_type\": \"boost_percentage\",\n              \"trait_type\": \"Bonuse Percentage\",\n              \"value\": 0\n            },\n            {\n              \"trait_type\": \"File Address\",\n              \"value\": 'file_url'\n            }\n          ]\n        }\n        metaDatas.push(placeholder);\n      })\n    }\n    return metaDatas;\n  }\n\n  getNft = async (nft, account) => {\n    let balanceId = [];\n    //0x9452644E9fdd59bD46A4d9eC24462995ADfD8d01\n    var checksum_address = web3.utils.toChecksumAddress(account);\n    var url = this.backend + '/api/v1/nft/list?owner=' + checksum_address\n    console.debug('owner: ', checksum_address)\n    try {\n      var res = await axios.get(url)\n      balanceId = res.data.nft\n      this.setState({\n        onloading: true,\n        SkeletoNumber: balanceId.length\n      })\n      return balanceId;\n    } catch (error) {\n      // alert('无法获取您当前拥有的nft')\n      return [];\n    }\n  };\n\n\n  renderDescription = (description) => {\n    if (description.length <= 150) {\n\n      return (description);\n    } else {\n      let newDescription = description.substring(0, 150) + \"..........\";\n      return (newDescription);\n    }\n  }\n\n\n\n  render() {\n    const { classes } = this.props\n    let obj = this;\n    window.ethereum.on('chainChanged', handleChainChanged);\n\n    function handleChainChanged(_chainId) {\n      window.location.reload();\n    }\n\n    function showCard(card, index) {\n      let res = (\n        <Grid item key={index} xs={12} sm={6} md={4}>\n          {\n            card ? (<Card className={classes.card}>\n              <CardMedia\n                className={classes.cardMedia}\n                image={card.image}\n                title=\"Image title\"\n              />\n              <CardContent className={classes.cardContent}>\n                <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                  <b>{card.title}</b>\n                </Typography>\n                <Typography>\n                  {obj.renderDescription(card.description)}\n                </Typography>\n              </CardContent>\n              <CardActions>\n                <Button size=\"small\" variant=\"contained\" color=\"primary\" href={'/#/NFT/' + card.id} >\n                  <b>查看 </b>\n                </Button>\n                <Typography variant=\"body2\" gutterBottom>\n                  <b>NFT id: {card.id} </b>\n                </Typography>\n              </CardActions>\n            </Card>) : (\n              <Card className={classes.card}>\n                <Skeleton variant=\"rect\" style={{ marginLeft: 70, }} width={260} height={288} />\n                <Skeleton width=\"60%\" style={{ marginTop: 40, }} height={33} />\n                <Skeleton height={33} />\n                <Skeleton height={33} />\n                <Skeleton height={33} />\n              </Card>\n            )\n          }\n        </Grid>\n      );\n\n      return res;\n\n    }\n    return (\n      <div>\n        <ThemeProvider theme={theme}>\n          <TopBar />\n          <Container component=\"main\" className={classes.container}>\n            <div className={classes.paper}>\n              <Grid container justifyContent=\"center\">\n                <Grid item xs={10}>\n                  <Typography color=\"inherit\" noWrap className={classes.title}>\n                    <b>我的收藏馆</b>\n                  </Typography>\n                  <Typography color=\"inherit\" noWrap className={classes.title2}>\n                    <b>An ERC721 Token Trying to Solve Existing Publishing Dilemma</b>\n                  </Typography>\n                </Grid>\n              </Grid>\n            </div>\n          </Container>\n        </ThemeProvider>\n        {this.state.noNFT ? (\n          <Empty \n            description={\n              <span style={{ fontFamily: 'Teko' }}>\n                <b>暂无可展示NFT</b>\n              </span>\n            }\n            style={{marginTop: 100}}\n            />\n        ):(\n          <main>\n            { <Container className = {classes.cardGrid} maxWidth=\"md\">\n              <Grid container spacing={4}>\n                {\n                  (this.state.onloading ? Array.from(new Array(this.state.SkeletoNumber)) : this.state.cards).map((card, index) => {\n                    return showCard(card, index);\n                  })\n                }\n              </Grid>\n            </Container>}\n          </main>\n        )}\n        \n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(Collections);","import React, { Component } from 'react'\nimport './App.css'\nimport Button from '@material-ui/core/Button'\nimport Grid from '@material-ui/core/Grid'\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport TopBar from \"./TopBar\"\nimport { Paper, Container, Link } from '@material-ui/core'\nimport axios from 'axios'\nimport contract from './contract'\nimport web3 from './web3'\nimport { ArrowLeftOutlined, FireOutlined } from '@ant-design/icons'\nimport Skeleton from '@material-ui/lab/Skeleton'\nimport { Progress, message, Spin } from 'antd'\n\nconst abi = require('erc-20-abi')\n\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n})\n\nconst styles = theme => ({ \n  container: {\n    maxWidth: 1500,\n    // backgroundColor: '#2196f3'\n  },\n  btnMain: {\n    marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    backgroundColor: '#03A9F4',\n    borderWidth: 3,\n    // borderColor: '#03A9F4',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 150,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  btnSecond: {\n    marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderWidth: 3,\n    borderColor: '#03A9F4',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 150,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1400,\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n  },\n  imagePaper: {\n\n    [theme.breakpoints.between('xs', 'sm')]: {\n      backgroundColor: '#EFEBE9', width: 330, height: 420, marginLeft: 10\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      backgroundColor: '#EFEBE9', width: 340, height: 440, marginLeft: 10\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      backgroundColor: '#EFEBE9', width: 350, height: 465, marginLeft: 10\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\n    },\n    [theme.breakpoints.up('xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\n    },\n  },\n  imageStyle: {\n    objectFit: 'contain',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: 280,\n      height: 365,\n      marginTop: 20,\n      marginBottom: 50\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      width: 290,\n      height: 385,\n      marginTop: 20,\n      marginBottom: 50\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      width: 300,\n      height: 420,\n      marginTop: 20,\n      marginBottom: 50\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      width: 300,\n      marginTop: 20,\n      marginBottom: 50\n    },\n    [theme.breakpoints.up('xl')]: {\n      width: 300,\n      marginTop: 20,\n      marginBottom: 50\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: 10, maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n  title: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 48,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 60,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 70,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 75,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 80,\n    },\n  },\n\n})\n\nclass NFTSpark extends Component {\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\n  backend = 'https://api.sparklink.io'\n  sparkAddr = '0xb42d4525841008A69E427026DF354067fD6A524f'\n  state = {\n    Name: '',\n    Description: '',\n    BonusFee: 0,\n    Cover: '',\n    price: '',\n    priceString: '',\n    onLoading: false,\n    loadItem: true,\n    open: false,\n    approved: false,\n    tokenAddr: '',\n    tokenSymbol: '',\n    isEncrypt: true,\n    percentage: 0,\n    showProgress: false,\n    fileType: '',\n    remainShillTimes: 0,\n    maxShillTimes: 0,\n  }\n\n  async componentDidMount (){\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\n    if (chainId !== '0x89') {\n      alert(\"请切换至Polygon 主网络\")\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x89'\n        }]\n      })\n    }\n\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n    const account = accounts[0]\n\n    const meta = await contract.methods.tokenURI(this.props.match.params.id).call()\n    let hash = meta.split('/')\n    this.setState({ hash: hash[hash.length - 1] })\n    let isEncrypt\n    try {\n      var url = this.gateway + this.state.hash\n      const res = await axios.get(url)\n      let data = res.data\n      let bouns = data.attributes[0].value\n      let fileAddr = data.attributes[1].value\n      let fileType = data.attributes[2].value\n      if (data.attributes[3].value === \"FALSE\") {\n        isEncrypt = false\n      } else {\n        isEncrypt = true\n      }\n      this.setState({\n        Name: data.name,\n        Description: data.description,\n        BonusFee: bouns,\n        Cover: data.image,\n        fileType: fileType,\n        dataUrl: fileAddr,\n        isEncrypt: isEncrypt\n      })\n    } catch (error){\n      message.error({\n        content: `Error: ${error}`,\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n    }\n\n    const price = await contract.methods.getShillPriceByNFTId(this.props.match.params.id).call()\n    const token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.id).call()\n\n    this.setState({\n      price: price,\n      tokenAddr: token_addr\n    })\n\n    if (token_addr == '0x0000000000000000000000000000000000000000') {\n      var price_with_decimal = price / (10 ** 18)\n      price_with_decimal = price_with_decimal + \" MATIC\"\n      this.setState({\n        priceString: price_with_decimal,\n        approved: true\n      })\n    } else {\n      try {\n        const token_contract = new web3.eth.Contract(abi, token_addr)\n        const decimals = await token_contract.methods.decimals().call()\n        const token_symbol = await token_contract.methods.symbol().call()\n        var price_with_decimal = price / (10 ** decimals)\n        price_with_decimal = price_with_decimal + \" \" + token_symbol\n        this.setState({ priceString: price_with_decimal })\n        const approved_amount = await token_contract.methods.allowance(account, this.sparkAddr).call()\n        if (approved_amount >= price) {\n          this.setState({\n            approved: true\n          })\n        } else {\n          this.setState({\n            approved: false\n          })\n        }\n      } catch (error) {\n        message.error({\n          content: `Error: ${error}`,\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      }\n    }\n\n    const leafUrl = this.backend + '/api/v1/nft/info?nft_id=' + this.props.match.params.id\n    try{\n      const res = await axios.get(leafUrl)\n      var children_num = res.data.children_count\n      var remain_shill_times = res.data.max_shill_times - res.data.shill_times\n      var max_shill_times = res.data.max_shill_times\n      this.setState({\n        remainShillTimes: remain_shill_times,\n        maxShillTimes: max_shill_times\n      })\n      if (res.data.suggest_next_nft === this.props.match.params.id) {\n        this.setState({\n          childrenNum: children_num,\n          recommendNFT: res.data.suggest_next_nft,\n          showRecommend: false,\n        })\n      } else if (res.data.suggest_next_nft === '0') {\n        this.setState({\n          childrenNum: children_num,\n          recommendNFT: res.data.suggest_next_nft,\n          showRecommend: false\n        })\n      } else {\n        this.setState({\n          childrenNum: children_num,\n          recommendNFT: res.data.suggest_next_nft,\n          showRecommend: true\n        })\n      }\n    } catch (error) {\n      if (error.response === undefined) {\n        message.error({\n          content: \"错误：服务器未响应\",\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n        return\n      }\n      if (error.response.status === 400 && error.response.data.message.includes(\"children not found\")) {\n        console.debug(\"no children\")\n      } else {\n        message.error({\n          content: `获取nft子节点情况页面失败： ${error}`,\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      }\n    } finally {\n      this.setState({\n        loadItem: false\n      })\n    }\n\n  }\n\n  handleClickLink = (event) => {\n    var new_url = '/#/NFT/Spark/' + this.state.recommendNFT\n    window.open(new_url)\n  }\n\n  downloadIPFS = async (event) => {\n    let obj = this\n    let dataSplits = this.state.dataUrl.split('/')\n    var dataHash = dataSplits[dataSplits.length - 1]\n    var dataUrl = this.gateway + dataHash\n    this.setState({\n      showProgress: true\n    })\n    var open_config = {\n      url: dataUrl, //your url\n      method: 'GET',\n      responseType: 'blob', // important\n      onDownloadProgress(progress) {\n        var percentage = Math.round(progress.loaded / progress.total * 100)\n        obj.setState({\n          percentage: percentage\n        })\n      }\n    }\n\n    try {\n      const response = await axios(open_config)\n      const url = window.URL.createObjectURL(new Blob([response.data]))\n      const link = document.createElement('a')\n      link.href = url\n      link.style.display = 'none'\n      var suffix = '.' + this.state.fileType\n      var fileName = this.state.Name + suffix\n      link.download = fileName\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n      URL.revokeObjectURL(url)\n    } catch (error) {\n      message.error({\n        content: `Error: ${error}`,\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n    } finally {\n      this.setState({ showProgress: false })\n    }\n  }\n\n  approve = async (event) => {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n    const account = accounts[0]\n    this.setState({ onLoading: true })\n\n    let obj = this\n    try{\n      const price = this.state.price.toString()\n      const token_contract = new web3.eth.Contract(abi, this.state.tokenAddr)\n      var gasPrice = await web3.eth.getGasPrice()\n      var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n      token_contract.methods.approve(this.sparkAddr, price).send({\n        from: account,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          message.success({\n            content: \"已经成功授权合约\",\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n          obj.setState({\n            onLoading: false,\n            approved: true\n          })\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false,\n          })\n          message.error({\n            content: `Error: ${error.message}`,\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n        })\n    } catch (error){\n      message.error({\n        content: `Error: ${error}`,\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n    }\n  }\n\n  shill = async (event) => {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n    const account = accounts[0]\n    var gasPrice = await web3.eth.getGasPrice()\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n    let obj = this\n\n    this.setState({ onLoading: true });\n    if (this.state.tokenAddr == '0x0000000000000000000000000000000000000000') {\n      contract.methods.acceptShill(this.props.match.params.id).send({\n        from: account,\n        value: this.state.price,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          message.success({\n            content: \"交易已经上链\",\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n          obj.setState({\n            onLoading: false,\n            onSale: true\n          })\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false,\n          })\n          message.error({\n            content: `Error: ${error.message}`,\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n        })\n    } else {\n      contract.methods.acceptShill(this.props.match.params.id).send({\n        from: account,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          message.success({\n            content: \"交易已经上链\",\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n          obj.setState({\n            onLoading: false,\n            onSale: true\n          });\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false,\n          })\n          message.error({\n            content: `Error: ${error.message}`,\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n        })\n    }\n\n  }\n\n  render() {\n    const {classes} = this.props\n    const showBtn = () => {\n      if (this.state.showRecommend) {\n        return (\n          <div>\n            {this.state.isEncrypt ? (\n              <Grid container justifyContent=\"space-around\" >\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" className={classes.btnMain} disabled>\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                    <font size=\"4\"> 下 载 </font>\n                  </Typography>\n                </Button>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '2rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} disabled>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\"> 铸造  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            ) : (\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" className={classes.btnMain} onClick={this.downloadIPFS}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                      <font size=\"4\"> 下 载 </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '2rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />}disabled>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\"> 铸造  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            )}\n          </div>\n        )\n      } else if (!this.state.approved) {\n        return (\n          <div>\n            {this.state.isEncrypt ? (\n              <Grid container justifyContent=\"space-around\" >\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} disabled>\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                    <font size=\"4\"> 下 载 </font>\n                  </Typography>\n                </Button>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} onClick={this.approve}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\"> 授权合约  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            ) : (\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} onClick={this.downloadIPFS}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                      <font size=\"4\"> 下载 </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} onClick={this.approve}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\"> 授权合约  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            )}\n          </div>\n        )\n      } else {\n        return (\n          <div>\n            {this.state.isEncrypt ? (\n              <Grid container justifyContent=\"space-around\" >\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} disabled>\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                    <font size=\"4\"> 下 载 </font>\n                  </Typography>\n                </Button>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} onClick={this.shill}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\"> 铸造  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            ) : (\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} onClick={this.downloadIPFS}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                      <font size=\"4\"> 下 载 </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} onClick={this.shill}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\"> 铸造  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            )}\n          </div>\n        )\n      }\n    }\n\n    if(this.state.showProgress){\n      return(\n        <Spin spinning={this.state.onLoading} size='large'>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40 }}>\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\n                <b>正在下载文件</b>\n              </Typography>\n            </div>\n            <div style={{ textAlign: 'center', marginTop: '10%' }}>\n              <Progress type=\"circle\" percent={this.state.percentage} width={200} />\n            </div>\n          </ThemeProvider>\n        </Spin>\n      )\n    } else {\n      return (\n        <Spin spinning={this.state.onLoading} size='large'>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" className={classes.container}>\n              <Button\n                startIcon={<ArrowLeftOutlined style={{ fontSize: '2rem' }} />}\n                href='/#/collections'\n                style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\n              >\n                回到我的收藏馆\n              </Button>\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"center\" xs={12}>\n                <Typography color=\"inherit\" noWrap className={classes.title}>\n                  🔥 NFT 🔥\n                </Typography>\n              </Grid>\n\n              <div className={classes.paper}>\n                {this.state.loadItem ? (\n                  <Grid container spacing={5} className={classes.content}>\n                    <Grid item>\n                      <Skeleton variant=\"rect\" width={300} height={500} style={{ width: 370, marginLeft: 50, marginBottom: 50 }} />\n                    </Grid>\n                    <Grid item style={{ marginLeft: '5%' }}>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={200} height={30} />\n                      <Skeleton animation=\"wave\" variant=\"text\" width={400} height={70} />\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={500} height={300} style={{ marginBottom: 50 }} />\n                    </Grid>\n                  </Grid>\n                ):(\n                  <Grid container direction=\"row\" justifyContent=\"space-between\" className={classes.content}>\n                    <Grid item style={{ maxWidth: 200 }}>\n                      <Paper className={classes.imagePaper}>\n                        <img className={classes.imageStyle} src={this.state.Cover}></img>\n                      </Paper>\n                    </Grid>\n\n                    <Grid xs={2}></Grid>\n\n                    <Grid item xs className={classes.content2} >\n                      <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                        #{this.props.match.params.id}\n                      </Typography>\n                      <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34, marginTop: '2%' }}>\n                        <b>{this.state.Name}</b>\n                      </Typography>\n                      <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                        {this.state.Description}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '100%', fontSize: 24 }}>\n                        点火价格: {this.state.priceString}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 18 }}>\n                        最大分享次数: {this.state.maxShillTimes} 次\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 18 }}>\n                        剩余分享次数: {this.state.remainShillTimes} 次\n                      </Typography>\n                      {this.state.isEncrypt ?\n                        (\n                          <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 16 }}>\n                            加密作品\n                          </Typography>\n                        ) : (\n                          <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 16 }}>\n                            开源作品\n                          </Typography>\n                        )}\n                      {showBtn()}\n                    </Grid>\n                  </Grid>\n                  \n                )}\n\n                {this.state.showRecommend ? (\n                  <Grid style={{marginTop: 50}}>\n                    <Typography variant=\"h4\" gutterBottom >\n                      此NFT的子节点已经售完，我们给您推荐了其他还能购买的节点：\n                    </Typography>\n                    <Link onClick={this.handleClickLink} style={{ fontSize: 20, textDecoration: 'underline' }}>\n                      {window.location.host + '/#/NFT/Spark/' + this.state.recommendNFT}\n                    </Link>\n                  </Grid>\n                ) : (\n                  <div></div>\n                )}\n              </div>\n            </Container>\n          </ThemeProvider>\n        </Spin>\n      )\n    }\n  }\n}\n\nexport default withStyles(styles, {withTheme: true})(NFTSpark)","import './App.css';\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport TopBar from './TopBar';\n\nconst styles = theme => ({\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  titleFont: {\n    fontFamily: 'Teko',\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  btnMain: {\n    color: '#FFFFFF',\n    borderColor: '#e3f2fd',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  btnSecond: {\n    // marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderColor: '#03A9F4',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n      width: 95\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(7),\n    maxWidth: '150%',\n\n  },\n\n  content: {\n    fontFamily: 'Teko',\n    marginTop: 20,\n    lineHeight: 1.5,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n    },\n  },\n\n  shouldKnow: {\n    fontFamily: 'Teko',\n    textAlign: 'center',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 40,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 40,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 60,\n    },\n  },\n});\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#FDFEFE',\n    },\n    secondary: {\n      main: '#2196f3',\n    }\n  },\n});\n\nclass IntroPublish extends Component {\n  render() {\n    const { classes } = this.props\n    return (\n      <div>\n\n        <ThemeProvider theme={theme}>\n          <TopBar />\n          <Container component=\"main\" className={classes.container}>\n            <div className={classes.paper}>\n              <Typography color=\"inherit\" noWrap className={classes.shouldKnow}>\n                <b>发布须知</b>\n              </Typography>\n              <Typography variant=\"h4\" paragraph className={classes.content}>\n                在去发布您的作品之前，您需要了解以下信息，它们将有助于您了解完整的发布流程：\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>1.</b> 您的作品将被存储在IPFS（InterPlanetary File System）中，而存储地址将被记录在以太坊上，与您的NFT绑定在一起\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>2.</b> 您可以选择是将您的作品开源得保存在IPFS上，或者加密保存在IPFS上。针对加密的作品，只有持有您发行的NFT的读者才能访问。 <br />\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>3.</b> 如果您选择加密保存在IPFS上，您需要在将作品基本信息上传到链上后，再设置作品的地址。这个过程我们会引导您完成，请勿担心。 <br />\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>4.</b> 当您将作品发布在我们平台时，我们默认您会支持二次创作，处于您宣传网络中的读者有权将他们持有的NFT对应的地址替换为他们自己的二次创作作品。 <br />\n              </Typography>\n              <Grid container justifyContent=\"center\" style={{ fontFamily: 'Teko', marginTop: 70 }}>\n                <Grid item xs={4} >\n                  <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnMain} href='/#/encryptedPublish'>\n                    <b>加密发布</b>\n                  </Button>\n                </Grid>\n                <Grid item xs={3} >\n                  <Button size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} href='/#/publish'>\n                    <b>开源发布</b>\n                  </Button>\n                </Grid>\n              </Grid>\n            </div>\n          </Container>\n        </ThemeProvider>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(IntroPublish);","import React, { Component } from 'react'\nimport './App.css'\nimport Button from '@material-ui/core/Button'\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\nimport { blue } from '@material-ui/core/colors'\nimport Typography from '@material-ui/core/Typography'\nimport Container from '@material-ui/core/Container'\nimport Grid from '@material-ui/core/Grid'\nimport { message } from 'antd'\nimport { InboxOutlined } from '@ant-design/icons'\nimport Dragger from 'antd/lib/upload/Dragger'\nimport { CloudUploadOutlined } from '@ant-design/icons'\nimport { Input, InputNumber, Select, Spin } from 'antd'\nimport 'antd/dist/antd.css'\nimport TopBar from './TopBar'\nimport axios from 'axios'\nimport contract from './contract'\nimport web3 from './web3'\nimport ReactLoading from 'react-loading'\nimport Paper from '@material-ui/core/Paper'\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Link } from \"@material-ui/core\"\nimport * as tokens from './tokens_list.json'\n\nconst {\n  pinata_api_key,\n  pinata_secret_api_key,\n} = require('./project.secret')\nconst FormData = require('form-data')\nconst bs58 = require('bs58')\nvar CryptoJS = require(\"crypto-js\")\nconst { Option } = Select\nconst abi = require('erc-20-abi')\n\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n})\n\n\nconst styles = theme => ({\n  main: {\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: '60%'\n    },\n    [theme.breakpoints.up('sm')]: {\n      width: 500\n    },\n  },\n  titleCon: {\n    marginTop: 50,\n    fontFamily: 'Ubuntu',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 30\n    },\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 40\n    },\n  },\n  titlePub: {\n    marginTop: \"3%\",\n    fontFamily: 'Ubuntu',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 30\n    },\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 40\n    },\n  },\n  paperImg: {\n\n    backgroundColor: '#EFEBE9',\n    width: 330,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: '5%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '30%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '30%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '40%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '45%',\n      marginTop: 30,\n    },\n  },\n  btnPub: {\n    margin: theme.spacing(1),\n    borderRadius: 25,\n    color: '#FFFFFF',\n    backgroundColor: '#2196f3',\n    marginBottom: 20,\n    marginTop: 40,\n    height: 45,\n    minWidth: 200,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: '50%',\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 16,\n      width: '30%',\n    },\n    [theme.breakpoints.up('md')]: {\n      fontSize: 16,\n      width: '30%',\n    },\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: blue[500],\n    width: 60,\n    height: 60\n  },\n  form: {\n    width: '150%',\n    marginTop: theme.spacing(7),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  fileBtn: {\n    padding: '10px 30px 10px 30px',\n    background: '#66C1E4',\n    border: 'none',\n    color: '#FFF',\n    boxShadow: '1px 1px 1px #4C6E91',\n  },\n  button: {\n    margin: theme.spacing(1),\n    fontSize: 20,\n    borderRadius: 25,\n    color: '#FFFFFF',\n    backgroundColor: '#2196f3'\n  },\n  input: {\n    height: 40,\n    borderRadius: 5,\n  },\n  inputNum: {\n    height: 40,\n    borderRadius: 5,\n    width: '100%',\n    fontSize: 20,\n  }\n})\n\n\nclass EncryptedPublish extends Component {\n  backend = 'https://api.sparklink.io' //http://192.168.0.64:3000\n  state = {\n    name: '',\n    bonusFee: 0,\n    price: 0,\n    buffer: null,\n    file: null,\n    ipfsHashCover: '',\n    ipfsMeta: '',\n    fileType: '',\n    fileIpfs: '',\n    description: '',\n    shareTimes: 0,\n    onLoading: false,\n    rootNFTId: '',\n    issueId: '',\n    allowSubmitPDF: false,\n    usedAcc: '',\n    sig: '',\n    finished: false,\n    open: false,\n    coverURL: '',\n    jumped: false,\n    data: [],\n    token_addr: null,\n    token_symbol: 'MATIC',\n    decimal: 0,\n  }\n\n  async componentDidMount() {\n    if (!window.ethereum) {\n      alert(\"请先安装metamask\")\n      window.location.href = '/#/introPublish'\n      return\n    }\n\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\n    if (chainId !== '0x89') {\n      alert(\"请切换至Polygon 主网络\")\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x89'\n        }]\n      })\n    }\n  }\n\n  handleGetPubName = (event) => {\n    this.setState({\n      name: event.target.value,\n    })\n  }\n\n  handleGetBonusFee = (value) => {\n    this.setState({\n      bonusFee: value,\n    })\n  }\n\n  handleGetPrice = (value) => {\n    this.setState({\n      price: value,\n    })\n  }\n\n  handleGetShareTimes = (value) => {\n    this.setState({\n      shareTimes: value,\n    })\n  }\n\n  handleGetDescription = (e) => {\n    this.setState({\n      description: e.target.value,\n    })\n  }\n\n  handleGetNFTId = (value) => {\n    this.setState({\n      rootNFTId: String(value),\n    })\n  }\n\n  handleClose = (e) => {\n    this.setState({\n      open: false,\n    })\n  }\n\n  handleClickOpen = (e) => {\n    this.setState({\n      open: true,\n    })\n  }\n\n  handleSearch = async (value) => {\n    if (value) {\n      value = value.toLowerCase()\n      var tokens_list = tokens.tokens\n      var matched_data = []\n      let reg = new RegExp(value)\n      for (let token of tokens_list) {\n        var symbol_lower_case = token.symbol.toLowerCase()\n        var showed_text = `\\\"${token.symbol}\\\"` + \"   \" + token.address\n        var info = {\n          value: token.address,\n          text: showed_text\n        }\n        if (reg.test(symbol_lower_case) && !matched_data.includes(info)) {\n          matched_data.push(info)\n        }\n      }\n      if (value.includes('0x') && value.length == 42) {\n        var info = {\n          value: value,\n          text: value\n        }\n        matched_data = [info]\n      }\n      this.setState({\n        data: matched_data\n      })\n    } else {\n      this.setState({ data: [] })\n    }\n  }\n\n  handleSelectChange = async (value) => {\n    var tokens_list = tokens.tokens\n    let address\n    let token_symbol\n    let token_decimal\n    for (let token of tokens_list) {\n      if (value === token.address) {\n        address = value\n        token_symbol = token.symbol\n        token_decimal = token.decimals\n      }\n    }\n    if (token_symbol == undefined) {\n\n      try {\n        const token_contract = new web3.eth.Contract(abi, value)\n        token_symbol = await token_contract.methods.symbol().call()\n        token_decimal = await token_contract.methods.decimals().call()\n        address = value\n      } catch (error) {\n        message.error(\"你提供的地址不是erc20代币，请重新输入\")\n      }\n\n    }\n    // console.debug(token_symbol)\n    this.setState({\n      token_addr: address,\n      token_symbol: token_symbol,\n      decimal: token_decimal\n    })\n  }\n\n  jump = async (event) => {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n    const account = accounts[0]\n    this.setState({\n      usedAcc: account\n    })\n\n    const owner = await contract.methods.ownerOf(this.state.rootNFTId).call()\n    var issueId = await contract.methods.getIssueIdByNFTId(this.state.rootNFTId).call()\n\n    var bonus = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\n\n    if (account == owner.toLowerCase()) {\n      this.setState({\n        onLoading: false,\n        allowSubmitPDF: true,\n        jumped: true,\n        bonusFee: bonus\n      })\n    } else {\n      message.warning({\n        content: \"您并不是此NFT的持有者\",\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n    }\n  }\n\n  submit = async (event) => {\n    /*TODO: call smart contract publish() and wait for publish success event\n     * then call backend to get a secret key. Then encrypt the pdf file and upload it to IPFS\n     * Finally, form a new metadata json file and send its ipfs hash to backend and publish it\n    */\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n    const account = accounts[0]\n    this.setState({\n      usedAcc: account\n    })\n    let obj = this\n    if (this.state.price === 0 || this.state.bonusFee === 0 || this.state.shareTimes === 0 || this.state.token_addr === null) {\n      message.error({\n        content: \"你有信息尚未填写\",\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n    } else {\n\n      this.setState({\n        onLoading: true\n      })\n      var price_with_decimal = this.state.price * (10 ** this.state.decimal)\n      price_with_decimal = price_with_decimal.toString()\n      var ipfsToContract = '0x0000000000000000000000000000000000000000000000000000000000000000'\n      console.debug('price_with_decimal: ', price_with_decimal)\n      var gasPrice = await web3.eth.getGasPrice()\n      var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n      contract.methods.publish(price_with_decimal, this.state.bonusFee, this.state.shareTimes, ipfsToContract, this.state.token_addr).send({\n        from: this.state.usedAcc,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          console.log(receipt)\n          var publish_event = receipt.events.Publish\n          var returned_values = publish_event.returnValues\n          var root_nft_id = String(returned_values.rootNFTId)\n          console.debug(typeof root_nft_id)\n          var issue_id = returned_values.issue_id\n          obj.setState({\n            onLoading: false,\n            rootNFTId: root_nft_id,\n            issueId: issue_id,\n            allowSubmitPDF: true\n          })\n          message.success({\n            content: \"作品基本信息已提交成功\",\n            className: 'custom-class',\n            style: {\n              marginTop: '10vh',\n            },\n          })\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false,\n          })\n          if (error.message.includes('not mined')) {\n            message.warning({\n              content: \"交易已提交，当前网络较拥堵，请稍等后去我的收藏中查看\",\n              className: 'custom-class',\n              style: {\n                marginTop: '10vh',\n              },\n            })\n          } else {\n            console.debug(error.message)\n            message.error({\n              content: `Error: ${error.message}`,\n              className: 'custom-class',\n              style: {\n                marginTop: '10vh',\n              },\n            })\n          }\n        })\n\n    }\n\n  }\n\n  checkDetail = async (event) => {\n    var new_url = '/#/NFT/' + this.state.rootNFTId\n    window.open(new_url, '_self')\n  }\n\n  submitWork = async () => {\n    if (this.state.ipfsHashCover === '' || this.state.fileIpfs === '') {\n      message.error({\n        content: \"你有信息尚未填写\",\n        className: 'custom-class',\n        style: {\n          marginTop: '10vh',\n        },\n      })\n    } else {\n\n      var img_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.ipfsHashCover\n      this.setState({\n        coverURL: img_url\n      })\n      console.debug(\"coverURL: \", this.state.coverURL)\n      var trimmed_des = this.state.description.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \" \")\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n      const account = accounts[0]\n      if (account !== this.state.usedAcc) {\n        message.warning({\n          content: \"账户发生变化，请切换回原账户\",\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n        return\n      }\n      var file_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.fileIpfs\n      var JSONBody = {\n        \"name\": this.state.name,\n        \"description\": trimmed_des,\n        \"image\": this.state.coverURL,\n        \"attributes\": [\n          {\n            \"display_type\": \"boost_percentage\",\n            \"trait_type\": \"Bonuse Percentage\",\n            \"value\": this.state.bonusFee\n          },\n          {\n            \"trait_type\": \"File Address\",\n            \"value\": file_url\n          },\n          {\n            \"value\": this.state.fileType\n          },\n          {\n            \"trait_type\": \"Encrypted\",\n            \"value\": \"TRUE\"\n          }\n        ]\n      }\n      console.debug(JSONBody)\n      const url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`\n      let obj = this\n      this.setState({\n        onLoading: true\n      })\n\n      try {\n        const response = await axios.post(url, JSONBody, {\n          headers: {\n            pinata_api_key: pinata_api_key,\n            pinata_secret_api_key: pinata_secret_api_key\n          },\n        })\n        console.debug(\"metadata: \", response.data.IpfsHash)\n        const bytes = bs58.decode(response.data.IpfsHash)\n        const bytesToContract = bytes.toString('hex').substring(4,)\n        console.log(bytesToContract)\n        console.log(response.data.IpfsHash)\n        this.setState({\n          ipfsMeta: bytesToContract\n        })\n\n        var ipfsToContract = '0x' + bytesToContract\n\n        var gasPrice = await web3.eth.getGasPrice()\n        var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n\n        contract.methods.setURI(obj.state.rootNFTId, ipfsToContract).send({\n          from: obj.state.usedAcc,\n          gasPrice: new_gas_price\n        })\n          .on('receipt', function (receipt) {\n            console.debug(receipt.events.SetURI)\n            message.success({\n              content: \"作品基本信息已提交成功\",\n              className: 'custom-class',\n              style: {\n                marginTop: '10vh',\n              },\n            })\n            obj.setState({\n              allowSubmitPDF: false,\n              finished: true,\n              onLoading: false\n            })\n          })\n          .on('error', function (error) {\n            obj.setState({\n              onLoading: false\n            })\n            message.error({\n              content: `Error: ${error.message}`,\n              className: 'custom-class',\n              style: {\n                marginTop: '10vh',\n              },\n            })\n          })\n\n      } catch (error) {\n        message.error({\n          content: `Error: ${error.message}`,\n          className: 'custom-class',\n          style: {\n            marginTop: '10vh',\n          },\n        })\n      }\n\n    }\n  }\n\n  render() {\n    const { classes } = this.props\n    let obj = this\n    const { TextArea } = Input\n    const options = this.state.data.map(d => <Option key={d.value}>{d.text}</Option>)\n    const prop = {\n      name: 'file',\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n      headers: {\n        pinata_api_key: pinata_api_key,\n        pinata_secret_api_key: pinata_secret_api_key\n      },\n      data: this.state.buffer,\n      beforeUpload: file => {\n        return new Promise((resolve, reject) => {\n          try {\n            const reader = new FileReader()\n            reader.readAsArrayBuffer(file)\n            reader.onload = (e) => {\n              var b = e.target.result\n              let params = new FormData()\n              params.append('file', b)\n              this.setState({\n                buffer: params\n              })\n            }\n            resolve()\n          } catch (e) {\n            message.error('Read file error')\n            reject()\n          }\n        })\n      },\n      async onChange(info) {\n        const { status } = info.file\n        // text/plain image/jpeg application/pdf\n        if (status === 'done') {\n          message.success(`${info.file.name} file uploaded successfully.`)\n          obj.setState({\n            ipfsHashCover: info.file.response.IpfsHash\n          })\n\n        } else if (status === 'error') {\n          message.error(`${info.file.name} file upload failed.`)\n        }\n      },\n      onDrop(e) {\n        message.error(`Only image file supported`)\n        console.log('Dropped files', e.dataTransfer.files)\n      },\n    }\n\n    const propFile = {\n      name: 'file',\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n      headers: {\n        pinata_api_key: pinata_api_key,\n        pinata_secret_api_key: pinata_secret_api_key\n      },\n      beforeUpload: file => {\n        return new Promise(async (resolve, reject) => {\n          try {\n            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n            const signer = accounts[0]\n            var message = {\n              account: signer,\n              nft_id: obj.state.rootNFTId\n            }\n            const sig = await web3.eth.personal.sign(JSON.stringify(message), signer)\n            console.debug(sig)\n            var payload = {\n              \"nft_id\": obj.state.rootNFTId,\n              \"account\": signer,\n              \"signature\": sig\n            }\n            var payload_str = JSON.stringify(payload)\n            console.log(payload_str)\n            var req_key_url = this.backend + '/api/v1/key/claim'\n            try {\n              const res = await axios.post(req_key_url, payload_str, {\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              })\n              var secret_key = res.data.key//res.data.key\n              console.debug(secret_key)\n              // if (file.type === 'text/plain') {\n              const reader = new FileReader()\n              reader.readAsArrayBuffer(file)\n              reader.onload = (e) => {\n                var b = e.target.result\n                var wordArray = CryptoJS.lib.WordArray.create(b)\n                const str = CryptoJS.enc.Hex.stringify(wordArray)\n                var cipher_text = CryptoJS.AES.encrypt(str, secret_key).toString()\n                var myblob = new Blob([cipher_text])\n                resolve(myblob)\n              }\n\n            } catch (error) {\n              if (error.response.status == 400) {\n                if (error.response.data.message.includes(\"signature invalid\")) {\n                  message.error({\n                    content: \"您的签名有误，请查看签名账号是否正确\",\n                    className: 'custom-class',\n                    style: {\n                      marginTop: '10vh',\n                    },\n                  })\n                } else if (error.response.data.message.includes(\"param invalid\")) {\n                  message.error({\n                    content: \"参数错误\",\n                    className: 'custom-class',\n                    style: {\n                      marginTop: '10vh',\n                    },\n                  })\n                } else if (error.response.data.message.includes(\"not owned\")) {\n                  message.error({\n                    content: \"您并不拥有此nft\",\n                    className: 'custom-class',\n                    style: {\n                      marginTop: '10vh',\n                    },\n                  })\n                } else if (error.response.data.message.includes(\"not found\")) {\n                  message.error({\n                    content: \"此nft还未生成\",\n                    className: 'custom-class',\n                    style: {\n                      marginTop: '10vh',\n                    },\n                  })\n                }\n              } else {\n                message.error({\n                  content: \"请求文件加密密钥失败\",\n                  className: 'custom-class',\n                  style: {\n                    marginTop: '10vh',\n                  },\n                })\n              }\n            }\n\n\n          } catch (e) {\n            message.error({\n              content: \"Read file error\",\n              className: 'custom-class',\n              style: {\n                marginTop: '10vh',\n              },\n            })\n            reject()\n          }\n        })\n      },\n      onChange(info) {\n        const { status } = info.file\n        if (status === 'done') {\n          var file_type = info.file.name.split('\\.')\n          var file_suffix = file_type[file_type.length - 1]\n          obj.setState({\n            fileIpfs: info.file.response.IpfsHash,\n            fileType: file_suffix\n          })\n          console.debug(\"encrypted file hash: \", info.file.response.IpfsHash)\n          message.success(`${info.file.name} file uploaded successfully.`)\n        }\n\n      },\n      onDrop(e) {\n        console.log('Dropped files', e.dataTransfer.files)\n      },\n    }\n\n    if (this.state.allowSubmitPDF) {\n\n      return (\n        <Spin spinning={this.state.onLoading} size='large' >\n          <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\n\n            <div className={classes.paper}>\n              <Typography className={classes.titlePub}>\n                <b>上传作品文件</b>\n              </Typography>\n              <form className={classes.form} noValidate>\n                {this.state.jumped ? (\n                  <div>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\n                      <Input\n                        placeholder=\"作品名称\"\n                        allowClear\n                        id=\"pubName\"\n                        onChange={this.handleGetPubName}\n                        value={this.state.name}\n                        className={classes.input}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\n                      <TextArea\n                        rows={4}\n                        id=\"Description\"\n                        onChange={this.handleGetDescription}\n                      />\n                    </Grid>\n                  </div>\n                ) : (\n                  <div></div>\n                )}\n                <label style={{ fontSize: 18, marginTop: 50 }}>封面图片 *</label>\n                <p style={{ fontSize: 12 }}>请在下方区域上传您的封面图片 <br />\n                  封面文件支持这些格式：JPEG/JPG/PNG</p>\n                <Dragger {...prop} style={{ width: '100%', minHeight: 100 }} id=\"Uploader\" accept=\".png, .jpg, .jpeg\" >\n                  <p className=\"ant-upload-drag-icon\">\n                    <InboxOutlined />\n                  </p>\n                  <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n                  <p className=\"ant-upload-hint\">\n                    支持单个文件的上传，支持多种类型文件的上传\n                  </p>\n                </Dragger>\n\n                <label style={{ fontSize: 18, marginTop: 50 }}>作品文件 *</label>\n                <p style={{ fontSize: 12 }}>请在下方区域上传您的作品文件 </p>\n                <Dragger {...propFile} style={{ width: '100%', minHeight: 100 }} id=\"Uploader2\">\n                  <p className=\"ant-upload-drag-icon\">\n                    <InboxOutlined />\n                  </p>\n                  <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n                  <p className=\"ant-upload-hint\">\n                    支持单个文件的上传和多个文件的上传，支持多种类型文件的上传\n                  </p>\n                </Dragger>\n                <div style={{ textAlign: 'center' }}>\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<CloudUploadOutlined />}\n                    className={classes.btnPub}\n                    onClick={this.submitWork}\n                  >\n                    发布作品\n                  </Button>\n                </div>\n              </form>\n            </div>\n          </Container>\n\n        </Spin>\n      )\n\n    } else if (this.state.finished) {\n      return (\n        <Spin spinning={this.state.onLoading} size='large'>\n\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ textAlign: 'center' }}>\n              <Typography className={classes.titleCon}>\n                <b> 🎉 恭喜您发布成功</b>\n              </Typography>\n\n              <Paper className={classes.paperImg}>\n                <img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\n              </Paper>\n              <Typography variant=\"h4\" style={{ marginTop: 20, fontFamily: 'Ubuntu' }}>\n                <b>您获得的NFT是： #{this.state.rootNFTId}</b>\n              </Typography>\n\n              <Button\n                variant=\"contained\"\n                className={classes.button}\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\n                onClick={this.checkDetail}\n              >\n                查看详情\n              </Button>\n            </div>\n          </ThemeProvider>\n        </Spin>\n      )\n    } else {\n      return (\n        <Spin spinning={this.state.onLoading} size='large' >\n\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\n              <div className={classes.paper}>\n                <Typography className={classes.titlePub}>\n                  <b>发布作品信息</b>\n                </Typography>\n                <form className={classes.form} noValidate>\n                  <Grid container spacing={2}>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\n                      <Input\n                        placeholder=\"作品名称\"\n                        allowClear\n                        id=\"pubName\"\n                        onChange={this.handleGetPubName}\n                        value={this.state.name}\n                        className={classes.input}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>收益比例 *</label>\n                      <p style={{ fontSize: 14 }}>当您的作品被他人分享并获利时，您希望从他的分享利润中获得多少比例的收益</p>\n                      <InputNumber\n                        id=\"bonusFee\"\n                        defaultValue={0}\n                        min={0}\n                        max={100}\n                        formatter={value => `${value}%`}\n                        parser={value => value.replace('%', '')}\n                        onChange={this.handleGetBonusFee}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>通行代币 *</label>\n                      <p style={{ fontSize: 14 }}>请选择您支持的支付货币 (输入代币符号或地址)</p>\n                      <Select\n                        showSearch\n                        value={this.state.token_addr}\n                        placeholder={\"请输入代币符号或地址\"}\n                        // className={classes.input}\n                        style={{ width: \"100%\" }}\n                        size=\"large\"\n                        defaultActiveFirstOption={false}\n                        showArrow={false}\n                        filterOption={false}\n                        onSearch={this.handleSearch}\n                        onChange={this.handleSelectChange}\n                        notFoundContent={null}\n                      >\n                        {options}\n                      </Select>\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>售卖价格 ({this.state.token_symbol})*</label>\n                      <InputNumber\n                        id=\"price\"\n                        defaultValue={0}\n                        min={0}\n                        onChange={this.handleGetPrice}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>最高分享次数 (MAX： 65535)*</label>\n                      <p style={{ fontSize: 14 }}>您希望每一个帮助您传播的用户最多能够分享多少次？</p>\n                      <InputNumber\n                        id=\"shareTimes\"\n                        defaultValue={0}\n                        min={0}\n                        max={65535}\n                        onChange={this.handleGetShareTimes}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\n                      <TextArea\n                        rows={4}\n                        id=\"Description\"\n                        onChange={this.handleGetDescription}\n                      />\n                    </Grid>\n                  </Grid>\n                </form>\n                <Grid container alignItems=\"center\" spacing={4} style={{ marginTop: 20, marginBottom: 50 }}>\n                  <Grid item xs style={{ textAlign: 'center' }}>\n                    <Button\n                      variant=\"contained\"\n                      className={classes.button}\n                      startIcon={<CloudUploadOutlined />}\n                      style={{ width: 200, height: 50, marginBottom: 20, marginTop: 20 }}\n                      onClick={this.submit}\n                    >\n                      提交信息\n                    </Button>\n                  </Grid>\n                  <Grid item xs style={{ textAlign: 'center' }}>\n                    <Link onClick={this.handleClickOpen} style={{ fontSize: 10, textDecoration: 'underline' }}>\n                      已经上传过基本信息？\n                    </Link>\n                  </Grid>\n                </Grid>\n                <Dialog\n                  open={this.state.open}\n                  onClose={this.handleClose}\n                  aria-labelledby=\"form-dialog-title\"\n                >\n                  <DialogTitle id=\"form-dialog-title\">填写 NFT ID</DialogTitle>\n                  <DialogContent>\n                    <DialogContentText>\n                      请在下方区域填写您要绑定内容的 NFT ID\n                    </DialogContentText>\n                    <label style={{ fontSize: 14, marginBottom: 10 }}>NFT ID *</label>\n                    <InputNumber\n                      defaultValue={0}\n                      min={0}\n                      onChange={this.handleGetNFTId}\n                    />\n                  </DialogContent>\n                  <DialogActions>\n                    <Button onClick={this.handleClose} color=\"primary\">\n                      取消\n                    </Button>\n                    <Button variant=\"contained\" onClick={this.jump} color=\"primary\" >\n                      去上传作品\n                    </Button>\n                  </DialogActions>\n                </Dialog>\n              </div>\n            </Container>\n          </ThemeProvider>\n        </Spin>\n      )\n    }\n\n\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(EncryptedPublish)","import './App.css';\nimport React, { Component } from 'react';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport TopBar from './TopBar';\n\nconst styles = theme => ({\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  titleFont: {\n    fontFamily: 'Teko',\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  btnMain: {\n    color: '#FFFFFF',\n    borderColor: '#e3f2fd',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  btnSecond: {\n    // marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderColor: '#03A9F4',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n      width: 95\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(7),\n    maxWidth: '150%',\n\n  },\n\n  content: {\n    fontFamily: 'Teko',\n    marginTop: 20,\n    lineHeight: 1.5,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n    },\n  },\n\n  shouldKnow: {\n    fontFamily: 'Teko',\n    textAlign: 'center',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 40,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 40,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 60,\n    },\n  },\n});\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#FDFEFE',\n    },\n    secondary: {\n      main: '#2196f3',\n    }\n  },\n});\n\nclass Buy extends Component {\n  render() {\n    const { classes } = this.props\n    return (\n      <div>\n        <ThemeProvider theme={theme}>\n          <TopBar />\n          <Container component=\"main\" className={classes.container}>\n            <div className={classes.paper}>\n              <Typography color=\"inherit\" noWrap className={classes.shouldKnow}>\n                <b>敬请期待</b>\n              </Typography>\n            </div>\n          </Container>\n        </ThemeProvider>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(Buy);","import React from 'react';\nimport { HashRouter, Route, Switch } from 'react-router-dom';\n\nimport App from './App';\nimport Publish from './Publish';\nimport NFTInfo from './NFTInfo';\nimport SellSingle from './SellSingle';\nimport BuySingle from './BuySingle';\nimport Collections from './Collections';\nimport Spark from './NFTSpark';\nimport IntroPublish from './IntroPublish';\nimport EncryptedPublish from './EncryptedPublish';\nimport Buy from './Buy';\n\nconst BasicRoute = () => (\n  <HashRouter >\n    <Switch>\n      <Route exact path=\"/\" component={App} />\n      <Route exact path=\"/introPublish\" component={IntroPublish} />\n      <Route exact path=\"/buy\" component={Buy} />\n      <Route exact path=\"/publish\" component={Publish} />\n      <Route exact path=\"/encryptedPublish\" component={EncryptedPublish} />\n      <Route exact path=\"/sellSingle/:NFTId\" component={SellSingle} />\n      <Route exact path=\"/buySingle/:NFTId\" component={BuySingle} />\n      <Route exact path=\"/collections\" component={Collections} />\n      <Route exact path=\"/NFT/:id\" component={NFTInfo} />\n      <Route exact path=\"/NFT/spark/:id\" component={Spark} />\n    </Switch>\n  </HashRouter>\n);\n\n\nexport default BasicRoute;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap/dist/css/bootstrap-theme.css';\nimport Router from './Router';\n\nReactDOM.render(\n  <Router />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}