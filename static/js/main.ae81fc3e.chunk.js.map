{"version":3,"sources":["project.secret.js","web3.js","imgs/books.png","TopBar.js","App.js","serviceWorker.js","contract.js","Publish.js","NFTInfo.js","SellSingle.js","BuySingle.js","Collections.js","NFTSpark.js","IntroPublish.js","EncryptedPublish.js","Buy.js","Router.js","index.js"],"names":["module","exports","pinata_api_key","pinata_secret_api_key","web3","Web3","window","ethereum","error","TopBar","createTheme","breakpoints","values","xs","sm","md","lg","xl","palette","primary","main","secondary","state","isConnected","userAddress","accountInfo","sleep","ms","a","Promise","resolve","setTimeout","getAccount","request","method","accounts","account","alert","setState","console","debug","w3","eth","getAccounts","length","this","substring","classes","props","Toolbar","Grid","container","direction","justifyContent","item","className","titleGrid","Typography","component","color","noWrap","title","btnGrid","Button","size","btn","href","target","icon1","btnConnected","onClick","icon2","Component","withStyles","theme","down","fontSize","up","marginTop","marginBottom","marginLeft","textAlign","minWidth","fontFamily","between","borderColor","width","avatar","margin","spacing","backgroundColor","height","withTheme","App","ThemeProvider","page","Container","paper","style","title2","title3","src","books","variant","btnMain","btnSecond","icon","marginRight","titleFont","borderWidth","borderRadius","maxWidth","Boolean","location","hostname","match","Contract","require","FormData","bs58","Option","Select","abi","Publish","name","bonusFee","price","buffer","ipfsHashCover","ipfsMeta","fileIpfs","description","shareTimes","onLoading","rootNFTId","usedAcc","sig","fileType","finished","coverURL","data","token_addr","token_symbol","decimal","handleGetPubName","event","value","handleGetBonusFee","handleGetPrice","handleGetShareTimes","handleGetDescription","e","handleSearch","toLowerCase","tokens_list","tokens","matched_data","reg","RegExp","token","symbol_lower_case","symbol","showed_text","address","info","text","test","includes","push","handleSelectChange","token_decimal","decimals","undefined","token_contract","methods","call","message","submit","obj","img_url","trimmed_des","replace","file_url","JSONBody","axios","post","headers","response","IpfsHash","bytes","decode","bytesToContract","toString","price_with_decimal","ipfsToContract","getGasPrice","gasPrice","new_gas_price","Math","floor","parseInt","contract","publish","send","from","on","receipt","log","returned_values","events","returnValues","root_nft_id","issue_id","issueId","checkDetail","new_url","open","params","chainId","TextArea","Input","options","map","d","prop","action","beforeUpload","file","reject","reader","FileReader","readAsArrayBuffer","onload","b","result","append","onChange","status","success","onDrop","dataTransfer","files","propFile","file_type","split","file_suffix","type","titleCon","Paper","paperImg","button","titlePub","form","noValidate","placeholder","allowClear","id","input","defaultValue","min","max","formatter","parser","inputNum","showSearch","defaultActiveFirstOption","showArrow","filterOption","onSearch","notFoundContent","rows","minHeight","accept","InboxOutlined","startIcon","display","flexDirection","alignItems","blue","fileBtn","padding","background","border","boxShadow","FileSaver","CryptoJS","NFTInfo","gateway","backend","ipfs_node","Name","Description","BonusFee","Cover","childrenNum","spark","dataUrl","Profit","isEncrypt","loadItem","encrypted","tokenAddr","tokenSymbol","percentage","showProgress","showDecryptProgress","decryptPercentage","downloadIPFS","finishDownload","dataSplits","dataHash","cipher_config","url","onDownloadProgress","progress","round","loaded","total","then","ciphertext","signJson","JSON","stringify","signDataAndDecrypt","open_config","responseType","URL","createObjectURL","Blob","link","document","createElement","suffix","fileName","download","body","appendChild","click","removeChild","revokeObjectURL","catch","claim","claimProfit","return","reload","signer","json_str","personal","sign","payload","payload_str","req_key_url","res","key","AES","decrypt","plainText","enc","Utf8","wordArray","Hex","parse","BaText","wordArrayToByteArray","blob","saveAs","error_msg","wordToByteArray","word","lengthBefore","addedLength","hasOwnProperty","sigBytes","words","bytesAdded","current_bytes","i","added_info","percent","Uint8Array","showLoading","getElementById","innerHTML","nft","ownerOf","owner","utils","toChecksumAddress","getTokenAddrByNFTId","getProfitByNFTId","profit","tokenURI","meta","hash","getIssueIdByNFTId","issue","getRoyaltyFeeByIssueId","royalty","file_hash","request_url","timeout","fileAddr","attributes","trait_type","image","leafUrl","get","children_num","children_count","gutterBottom","cbutton","content","Skeleton","animation","imagePapaer","imageStyle","content2","align","paragraph","cbutton2","toUrl","host","share","onCopy","copied","IconButton","sell_info","heroContent","cardGrid","paddingTop","paddingBottom","card","cardMedia","cardContent","flexGrow","dbutton","objectFit","SellSingle","ipfsHashMeta","toAddress","NFTId","onSale","currentAcc","handleClickOpen","handleClose","handleGetAddr","handleClickLink","sell","determinePriceAndApprove","metadata","bonus","name_holder","getTransferPriceByNFTId","showSellBtn","btnSell","disabled","img","imgPaper","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","loader","BuySingle","priceString","approvedAddr","approved","handleBuy","safeTransferFrom","handleApprove","approve","toUpperCase","getApproved","allowance","buyButton","btnDisable","Collections","cards","isLogin","user_address","viewable","onloading","SkeletoNumber","noNFT","getMetadata","metaDatas","ipfs_link","ipfs_hash_arr","ipfs_hash","getNft","balanceId","checksum_address","renderDescription","balanceOf","nft_number","ids","element","reversed_cards","reverse","_chainId","Array","index","Card","CardMedia","CardContent","CardActions","showCard","NFTSpark","Leaf","remainShillTimes","maxShillTimes","shill","acceptShill","loadLoadingState","recommendNFT","bouns","getShillPriceByNFTId","remain_shill_times","max_shill_times","shill_times","suggest_next_nft","showRecommend","Link","textDecoration","IntroPublish","shouldKnow","lineHeight","EncryptedPublish","allowSubmitPDF","jumped","handleGetNFTId","String","jump","submitWork","setURI","SetURI","nft_id","secret_key","lib","WordArray","create","str","cipher_text","encrypt","myblob","btnPub","Buy","BasicRoute","exact","path","Spark","ReactDOM","render","Router","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ae81fc3e.chunk.js","sourcesContent":["const pinata_api_key = '3da01378391b7f0b7be4'\nconst pinata_secret_api_key = 'b9f43c3c12fb3956453db6a8b8594b603af6ef74f8eeac0eb83934a38bea4c03'\n\nmodule.exports = {\n  pinata_api_key,\n  pinata_secret_api_key,\n}","import Web3 from 'web3';\nvar web3;\ntry{\n    web3 = new Web3(window.ethereum);\n    // web3 = new Web3(new Web3.providers.HttpProvider('https://matic-mainnet--jsonrpc.datahub.figment.io/apikey/e84b63fff0e37deb30837101f20eb793/'))\n}catch(error){\n    // web3 = new Web3(new Web3.providers.HttpProvider('https://polygon-mainnet.infura.io/v3/0fa18faacfb1453c9ced01f9eef62915'))\n    web3 = new Web3('ws://localhost:8546');\n}\nexport default web3;","export default __webpack_public_path__ + \"static/media/books.6e483aa8.png\";","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport AccountBalanceWalletIcon from '@material-ui/icons/AccountBalanceWallet';\nimport web3 from './web3';\nimport Web3 from 'web3';\n\n\nconst theme = createTheme({\n  breakpoints: {\n    values: {\n      xs: 0,\n      sm: 600,\n      md: 900,\n      lg: 1200,\n      xl: 1536,\n    },\n  },\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\nconst styles = theme => ({\n  icon1: {\n    [theme.breakpoints.down('xl')]: {\n      fontSize: 19,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 27,\n    },\n  },\n  icon2: {\n    [theme.breakpoints.down('xl')]: {\n      fontSize: 22,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 32,\n    },\n  },\n  titleGrid: {\n    marginTop: 25, \n    marginBottom: 10,\n    marginLeft: '5%',\n    textAlign: 'center' \n  },\n  title: {\n    minWidth: 100,\n    fontSize: 25,\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 45,\n    },\n\n  },\n  btnGrid: {\n    // marginTop: 25,\n    marginBottom: 10,\n    minWidth: 370,\n    // backgroundColor: '#e3f2fd',\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginTop: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginTop: 25,\n      marginLeft: '20%',\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginTop: 25,\n      marginLeft: '50%',\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginTop: 25,\n      marginLeft: '60%',\n    },\n  },\n  btn: {\n    color: '#424949',\n    borderColor: '#e3f2fd',\n    fontSize: 15,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 15,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 15,\n      width: 100\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 15,\n      width: 100\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 25,\n    },\n    // [theme.breakpoints.between('lg', 'xl')]: {\n    //   fontSize: 15,\n    //   width: '10%'\n    // },\n    // [theme.breakpoints.up('xl')]: {\n    //   fontSize: 20,\n    //   width: '10%'\n    // },\n  },\n  btnConnected: {\n    color: '#03A9F4',\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: '#2196f3',\n    width: 10,\n    height: 10\n  },\n\n});\n\nclass TopBar extends Component {\n\n  state = {\n    isConnected: false,\n    userAddress: '',\n    accountInfo: ''\n  };\n\n  async componentWillMount() {\n    let w3 = new Web3(window.ethereum);\n    const accounts = await w3.eth.getAccounts();\n    if (accounts.length == 0) {\n      this.setState({\n        isConnected: false\n      });\n    } else {\n      var account = accounts[0]\n      this.setState({ accountInfo: account.substring(0, 5), });\n      this.setState({\n        isConnected: true\n      });\n    }\n\n  }\n\n  sleep = async (ms) => {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  getAccount = async () => {\n    try {\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n      const account = accounts[0];\n      alert('您已经连接metamask, 当前账户： ' + account)\n      this.setState({ isConnected: true, });\n      this.setState({ userAddress: account, });\n    } catch (error) {\n      console.debug(error)\n      this.setState({ isConnected: false, });\n    }\n  }\n\n  // getConnected = async () => {\n  //   var connect = window.ethereum.isConnected()\n  //   console.debug(\"connected: \", connect)\n  //   this.setState({\n  //     isConnected: connect\n  //   });\n  // }\n\n  render() {\n    const { classes } = this.props\n\n    return (\n      <div>\n        <Toolbar>\n          <Grid container direction=\"row\" justifyContent=\"flex-start\" >\n            <Grid item className={classes.titleGrid}>\n              <Typography component=\"h1\" color=\"inherit\" noWrap className={classes.title}>\n                <b>SparkLink</b>\n              </Typography>\n            </Grid>\n            <Grid item className={classes.btnGrid}>\n              <Button size=\"large\" className={classes.btn} href='/#/' >\n                <b>首页</b>\n              </Button>\n              <Button size=\"large\" className={classes.btn} href='/#/introPublish'>\n                <b>发布</b>\n              </Button>\n\n\n              <Button size=\"large\" className={classes.btn} href='/#/collections'>\n                <b>我的收藏</b>\n              </Button>\n\n              <Button size=\"large\" href='https://github.com/SparkNFT' target=\"_blank\">\n                <GitHubIcon className={classes.icon1}/>\n              </Button>\n              {this.state.isConnected ? (\n                <Button color='primary' className={classes.btnConnected} onClick={this.getAccount}>\n                  <AccountBalanceWalletIcon className={classes.icon2} />\n                </Button>\n              ) : (\n                <Button className={classes.btn} onClick={this.getAccount}>\n                  <AccountBalanceWalletIcon className={classes.icon2} />\n                </Button>\n              )}\n            </Grid>\n          </Grid>\n        </Toolbar>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(TopBar);","import books from './imgs/books.png';\nimport './App.css';\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport TopBar from './TopBar';\n\nconst styles = theme => ({\n  // page: {\n  //   maxWidth: '90%',\n  // },\n  title: {\n    fontFamily: 'Teko',\n    marginTop: '25%',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 100,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 150,\n    },\n  },\n  title2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 15,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 55,\n    },\n  },\n  title3: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 8,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 15,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 45,\n    },\n  },\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  titleFont: {\n    fontFamily: 'Teko',\n  },\n  btnMain: {\n    // marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    borderColor: '#e3f2fd',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  btnSecond: {\n    // marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderColor: '#03A9F4',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(7),\n    textAlign: 'center'\n  },\n  container: {\n    maxWidth: '100%'\n  },\n  books: {\n    width: '90%',\n    height: 'auto'\n  }\n});\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#FDFEFE',\n    },\n    secondary: {\n      main: '#2196f3',\n    }\n  },\n});\n\nclass App extends Component {\n  render() {\n    const { classes } = this.props\n    return(\n      <div>\n\n        <ThemeProvider theme={theme}>\n          <div className={classes.page}>\n            <TopBar />\n            <Container component=\"main\" className={classes.container}>\n              <div className={classes.paper}>\n                <Grid container justifyContent=\"center\" >\n                  <Grid item style={{minWidth: '50%'}}>\n                    <Typography color=\"inherit\" noWrap className={classes.title} >\n                      <b>SparkLink</b>\n                    </Typography>\n                    <Typography color=\"inherit\" noWrap className={classes.title2}>\n                      <b>人人传播，互相支持，仿若星星之火，点亮一片世界。</b>\n                    </Typography>\n                    <Typography color=\"inherit\" noWrap className={classes.title3}>\n                      发布你爱的 & 支持你爱的 & 传播你爱的\n                    </Typography>\n                    \n                  </Grid>\n                  <Grid item xs={5} >\n                    <img src={books} className={classes.books}/>\n                  </Grid>\n                  <Grid container justifyContent=\"center\" spacing={5} >\n                    <Grid item >\n                      <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnMain} href='/#/introPublish'>\n                        <b>去发布</b>\n                      </Button>\n                    </Grid>\n                    <Grid item >\n                      <Button size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} href='/#/buy'>\n                        <b>去购买</b>\n                      </Button>\n                    </Grid>\n                  </Grid>\n                </Grid>\n              </div>\n            </Container>\n          </div>\n        </ThemeProvider>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.0/8 are considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n  );\n  \n  export function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n      // The URL constructor is available in all browsers that support SW.\n      const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n      if (publicUrl.origin !== window.location.origin) {\n        // Our service worker won't work if PUBLIC_URL is on a different origin\n        // from what our page is served on. This might happen if a CDN is used to\n        // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n        return;\n      }\n  \n      window.addEventListener('load', () => {\n        const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n  \n        if (isLocalhost) {\n          // This is running on localhost. Let's check if a service worker still exists or not.\n          checkValidServiceWorker(swUrl, config);\n  \n          // Add some additional logging to localhost, pointing developers to the\n          // service worker/PWA documentation.\n          navigator.serviceWorker.ready.then(() => {\n            console.log(\n              'This web app is being served cache-first by a service ' +\n                'worker. To learn more, visit https://bit.ly/CRA-PWA'\n            );\n          });\n        } else {\n          // Is not localhost. Just register service worker\n          registerValidSW(swUrl, config);\n        }\n      });\n    }\n  }\n  \n  function registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n      .register(swUrl)\n      .then(registration => {\n        registration.onupdatefound = () => {\n          const installingWorker = registration.installing;\n          if (installingWorker == null) {\n            return;\n          }\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the updated precached content has been fetched,\n                // but the previous service worker will still serve the older\n                // content until all client tabs are closed.\n                console.log(\n                  'New content is available and will be used when all ' +\n                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                );\n  \n                // Execute callback\n                if (config && config.onUpdate) {\n                  config.onUpdate(registration);\n                }\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // \"Content is cached for offline use.\" message.\n                console.log('Content is cached for offline use.');\n  \n                // Execute callback\n                if (config && config.onSuccess) {\n                  config.onSuccess(registration);\n                }\n              }\n            }\n          };\n        };\n      })\n      .catch(error => {\n        console.error('Error during service worker registration:', error);\n      });\n  }\n  \n  function checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n      headers: { 'Service-Worker': 'script' }\n    })\n      .then(response => {\n        // Ensure service worker exists, and that we really are getting a JS file.\n        const contentType = response.headers.get('content-type');\n        if (\n          response.status === 404 ||\n          (contentType != null && contentType.indexOf('javascript') === -1)\n        ) {\n          // No service worker found. Probably a different app. Reload the page.\n          navigator.serviceWorker.ready.then(registration => {\n            registration.unregister().then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n          // Service worker found. Proceed as normal.\n          registerValidSW(swUrl, config);\n        }\n      })\n      .catch(() => {\n        console.log(\n          'No internet connection found. App is running in offline mode.'\n        );\n      });\n  }\n  \n  export function unregister() {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.ready.then(registration => {\n        registration.unregister();\n      });\n    }\n  }\n  ","import web3 from './web3';\n\nconst address = '0xb42d4525841008A69E427026DF354067fD6A524f'; // rinkeby 0x7B5B92B0eD1DfeafdbD724b177A7733Bda67497F\nconst abi = [\n  {\n    \"inputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"constructor\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"approved\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Approval\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"operator\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bool\",\n        \"name\": \"approved\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"name\": \"ApprovalForAll\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"receiver\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint128\",\n        \"name\": \"amount\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"name\": \"Claim\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint128\",\n        \"name\": \"transfer_price\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"name\": \"DeterminePrice\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint128\",\n        \"name\": \"transfer_price\",\n        \"type\": \"uint128\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"DeterminePriceAndApprove\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"string\",\n        \"name\": \"content\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"Label\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint32\",\n        \"name\": \"issue_id\",\n        \"type\": \"uint32\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"publisher\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint64\",\n        \"name\": \"rootNFTId\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"address\",\n        \"name\": \"token_addr\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"Publish\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint64\",\n        \"name\": \"NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes32\",\n        \"name\": \"old_URI\",\n        \"type\": \"bytes32\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"bytes32\",\n        \"name\": \"new_URI\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"SetURI\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Transfer\",\n    \"type\": \"event\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"acceptShill\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"approve\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"balanceOf\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"claimProfit\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"_price\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"name\": \"determinePrice\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"_price\",\n        \"type\": \"uint128\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"determinePriceAndApprove\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"getApproved\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getDepthByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getEditionIdByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getFatherByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getIssueIdByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"getLossRatio\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"\",\n        \"type\": \"uint8\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getProfitByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getRemainShillTimesByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint16\",\n        \"name\": \"\",\n        \"type\": \"uint16\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getRootNFTIdByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getRoyaltyFeeByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"\",\n        \"type\": \"uint8\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getShillPriceByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getShillTimesByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint16\",\n        \"name\": \"\",\n        \"type\": \"uint16\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getTokenAddrByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getTokenAddrByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"getTotalAmountByIssueId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"getTransferPriceByNFTId\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"\",\n        \"type\": \"uint128\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"operator\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"isApprovedForAll\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"isEditionExisting\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint32\",\n        \"name\": \"_issue_id\",\n        \"type\": \"uint32\"\n      }\n    ],\n    \"name\": \"isIssueExisting\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      }\n    ],\n    \"name\": \"isRootNFT\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"pure\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"string\",\n        \"name\": \"content\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"label\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"name\",\n    \"outputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"ownerOf\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint128\",\n        \"name\": \"_first_sell_price\",\n        \"type\": \"uint128\"\n      },\n      {\n        \"internalType\": \"uint8\",\n        \"name\": \"_royalty_fee\",\n        \"type\": \"uint8\"\n      },\n      {\n        \"internalType\": \"uint16\",\n        \"name\": \"_shill_times\",\n        \"type\": \"uint16\"\n      },\n      {\n        \"internalType\": \"bytes32\",\n        \"name\": \"_ipfs_hash\",\n        \"type\": \"bytes32\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"_token_addr\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"publish\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"safeTransferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"bytes\",\n        \"name\": \"_data\",\n        \"type\": \"bytes\"\n      }\n    ],\n    \"name\": \"safeTransferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"operator\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"approved\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"name\": \"setApprovalForAll\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint64\",\n        \"name\": \"_NFT_id\",\n        \"type\": \"uint64\"\n      },\n      {\n        \"internalType\": \"bytes32\",\n        \"name\": \"ipfs_hash\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"name\": \"setURI\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"bytes4\",\n        \"name\": \"interfaceId\",\n        \"type\": \"bytes4\"\n      }\n    ],\n    \"name\": \"supportsInterface\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"symbol\",\n    \"outputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"tokenURI\",\n    \"outputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"transferFrom\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  }\n]\n\nexport default new web3.eth.Contract(abi, address);","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport { blue} from '@material-ui/core/colors';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport {message} from 'antd';\nimport { InboxOutlined } from '@ant-design/icons';\nimport Dragger from 'antd/lib/upload/Dragger';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport { Input, InputNumber, Select } from 'antd';\nimport 'antd/dist/antd.css';\nimport TopBar from './TopBar';\nimport axios from 'axios';\nimport contract from './contract';\nimport web3 from './web3';\nimport ReactLoading from 'react-loading';\nimport Paper from '@material-ui/core/Paper';\nimport * as tokens from './tokens_list.json';\n// import { event } from 'jquery';\n\n\n\nconst {\n\tpinata_api_key,\n\tpinata_secret_api_key,\n} = require('./project.secret');\n\nconst FormData = require('form-data');\nconst bs58 = require('bs58');\nconst { Option } = Select;\nconst abi = require('erc-20-abi')\n\n\nconst theme = createTheme({\n  palette: {\n\t\tprimary: {\n\t\t\tmain: '#2196f3',\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: '#FDFEFE',\n\t\t},\n  },\n});\n\n\nconst styles = theme => ({\n  main: {\n\t\t[theme.breakpoints.between('xs', 'sm')]: {\n\t\t\twidth: '60%'\n\t\t},\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\twidth: 500\n\t\t},\n\t},\n\ttitleCon: {\n\t\tmarginTop: 50, \n\t\tfontFamily: 'Ubuntu',\n\t\t[theme.breakpoints.between('xs', 'sm')]: {\n\t\t\tfontSize: 30\n\t\t},\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\tfontSize: 40\n\t\t},\n\t},\n\tpaperImg: {\n\t\tbackgroundColor: '#EFEBE9',\n\t\twidth: 330,\n\t\t[theme.breakpoints.between('xs', 'sm')]: {\n\t\t\tmarginLeft: '5%',\n\t\t\tmarginTop: 30,\n\t\t},\n\t\t[theme.breakpoints.between('sm', 'md')]: {\n\t\t\tmarginLeft: '30%',\n\t\t\tmarginTop: 30,\n\t\t},\n\t\t[theme.breakpoints.between('md', 'lg')]: {\n\t\t\tmarginLeft: '30%',\n\t\t\tmarginTop: 30,\n\t\t},\n\t\t[theme.breakpoints.between('lg', 'xl')]: {\n\t\t\tmarginLeft: '40%',\n\t\t\tmarginTop: 30,\n\t\t},\n\t\t[theme.breakpoints.up('xl')]: {\n\t\t\tmarginLeft: '45%',\n\t\t\tmarginTop: 30,\n\t\t},\n\t},\n\ttitlePub: {\n\t\tmarginTop: \"3%\",\n\t\tfontFamily: 'Ubuntu',\n\t\t[theme.breakpoints.between('xs', 'sm')]: {\n\t\t\tfontSize: 30\n\t\t},\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\tfontSize: 40\n\t\t},\n\t},\n\tbtn: {\n\t\tcolor: '#424949',\n\t\tborderWidth: 2,\n\t\tborderColor: '#e3f2fd',\n\t\tfontSize: 16,\n\t},\n\tpaper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: blue[500],\n\t\twidth: 60,\n\t\theight: 60\n  },\n  form: {\n    width: '150%', \n    marginTop: theme.spacing(7),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n\tfileBtn: {\n\t\tpadding: '10px 30px 10px 30px',\n    background: '#66C1E4',\n    border: 'none',\n    color: '#FFF',\n    boxShadow: '1px 1px 1px #4C6E91',\n\t},\n\tbutton: {\n    margin: theme.spacing(1),\n\t\tfontSize: 20,\n\t\tborderRadius: 25,\n\t\tcolor: '#FFFFFF',\n\t\tbackgroundColor: '#2196f3'\n  },\n\tinput: {\n\t\theight: 40,\n\t\tborderRadius: 3,\n\t\twidth: '100%',\n\t},\n\tinputNum: {\n\t\theight: 40,\n\t\tborderRadius: 3,\n\t\twidth: '100%',\n\t\tfontSize: 20,\n\t}\n});\n\n\nclass Publish extends Component {\n\tstate = {\n    name: '',\n\t\tbonusFee: 0,\n\t\tprice: 0,\n\t\tbuffer: null,\n\t\tipfsHashCover: '',\n\t\tipfsMeta: '',\n\t\tfileIpfs: '',\n\t\tdescription: '',\n\t\tshareTimes: 0,\n\t\tonLoading: false,\n\t\trootNFTId: '',\n\t\tusedAcc: '',\n\t\tsig: '',\n\t\tfileType: '',\n\t\tfinished: false,\n\t\tcoverURL: '',\n\t\tdata: [],\n\t\ttoken_addr: null,\n\t\ttoken_symbol: 'MATIC',\n\t\tdecimal: 0,\n  };\n\n\tasync componentDidMount() {\n\t\tif (!window.ethereum) {\n\t\t\talert(\"请先安装metamask\");\n\t\t\twindow.location.href = '/#/introPublish';\n\t\t\treturn;\n\t\t}\n\t\t// const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n\t\tconst chainId = await window.ethereum.request({ method: 'eth_chainId' });\n\t\tif (chainId !== '0x89') {\n\t\t\talert(\"请切换至Polygon 主网络\");\n\t\t\tawait window.ethereum.request({\n\t\t\t\tmethod: 'wallet_switchEthereumChain',\n\t\t\t\tparams: [{\n\t\t\t\t\tchainId: '0x89'\n\t\t\t\t}]\n\t\t\t})\n\t\t}\n\t}\n\n\thandleGetPubName = (event) => {\n\t\tthis.setState({\n      name : event.target.value,\n    })\n\t}\n\n\thandleGetBonusFee = (value) => {\n\t\tthis.setState({\n\t\t\tbonusFee : value,\n    })\n\t}\n\n\thandleGetPrice = (value) => {\n\t\tthis.setState({\n\t\t\tprice: value,\n\t\t})\n\t}\n\n\thandleGetShareTimes = (value) => {\n\t\tthis.setState({\n\t\t\tshareTimes: value,\n\t\t})\n\t}\n\n\thandleGetDescription = (e) => {\n\t\tthis.setState({\n\t\t\tdescription: e.target.value,\n\t\t})\n\t}\n\n\thandleSearch = async (value) => {\n\t\tif (value) {\n\t\t\tvar value = value.toLowerCase()\n\t\t\tvar tokens_list = tokens.tokens;\n\t\t\tvar matched_data = []\n\t\t\tlet reg = new RegExp(value)\n\t\t\tfor (let token of tokens_list){\n\t\t\t\tvar symbol_lower_case = token.symbol.toLowerCase()\n\t\t\t\tvar showed_text = `\\\"${token.symbol}\\\"` + \"   \" + token.address\n\t\t\t\tvar info = {\n\t\t\t\t\tvalue: token.address,\n\t\t\t\t\ttext: showed_text\n\t\t\t\t}\n\t\t\t\tif (reg.test(symbol_lower_case) && !matched_data.includes(info)){\n\t\t\t\t\tmatched_data.push(info)\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(value.includes('0x') && value.length == 42){\n\t\t\t\tvar info = {\n\t\t\t\t\tvalue: value,\n\t\t\t\t\ttext: value\n\t\t\t\t}\n\t\t\t\tmatched_data = [info]\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tdata: matched_data\n\t\t\t})\n\t\t} else {\n\t\t\tthis.setState({ data: [] });\n\t\t}\n\t};\n\n\thandleSelectChange = async (value) => {\n\t\tvar tokens_list = tokens.tokens;\n\t\tlet address\n\t\tlet token_symbol\n\t\tlet token_decimal\n\t\tfor (let token of tokens_list) {\n\t\t\tif (value === token.address) {\n\t\t\t\taddress = value\n\t\t\t\ttoken_symbol = token.symbol\n\t\t\t\ttoken_decimal = token.decimals\n\t\t\t}\n\t\t}\n\t\tif (token_symbol == undefined) {\n\n\t\t\ttry {\n\t\t\t\tconst token_contract = new web3.eth.Contract(abi, value)\n\t\t\t\ttoken_symbol = await token_contract.methods.symbol().call()\n\t\t\t\ttoken_decimal = await token_contract.methods.decimals().call()\n\t\t\t\taddress = value\n\t\t\t} catch (error) {\n\t\t\t\tmessage.error(\"你提供的地址不是erc20代币，请重新输入\")\n\t\t\t}\n\n\t\t}\n\t\t// console.debug(token_symbol)\n\t\tthis.setState({\n\t\t\ttoken_addr: address,\n\t\t\ttoken_symbol: token_symbol,\n\t\t\tdecimal: token_decimal\n\t\t})\n\t\t\n\t};\n\n\tsubmit = async (event) => {\n\t\t/*TODO: call smart contract publish() and wait for publish success event\n\t\t * then call backend to get a secret key. Then encrypt the pdf file and upload it to IPFS\n\t\t * Finally, form a new metadata json file and send its ipfs hash to backend and publish it\n\t\t*/\n\t\tlet obj = this\n\t\tif (this.state.price === 0 || this.state.bonusFee === 0 || this.state.shareTimes === 0 || this.state.ipfsHashCover === '' || this.state.fileIpfs === '' || this.state.token_addr === null) {\n\t\t\talert(\"你有信息尚未填写\")\n\t\t} else {\n\t\t\t\n\t\t\tthis.setState({\n\t\t\t\tonLoading: true\n\t\t\t})\n\t\t\tvar img_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.ipfsHashCover\n\t\t\tthis.setState({\n\t\t\t\tcoverURL: img_url\n\t\t\t})\n\t\t\tconsole.debug(\"coverURL: \", this.state.coverURL)\n\t\t\tvar trimmed_des = this.state.description.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \" \");\n\t\t\tconst accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n\t\t\tconst account = accounts[0];\n\t\t\tthis.setState({\n\t\t\t\tusedAcc: account\n\t\t\t})\n\t\t\tvar file_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.fileIpfs\n\t\t\tvar JSONBody = {\n\t\t\t\t\"name\": this.state.name,\n\t\t\t\t\"description\": trimmed_des,\n\t\t\t\t\"image\": this.state.coverURL,\n\t\t\t\t\"attributes\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"display_type\": \"boost_percentage\",\n\t\t\t\t\t\t\"trait_type\": \"Bonuse Percentage\",\n\t\t\t\t\t\t\"value\": this.state.bonusFee\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"trait_type\": \"File Address\",\n\t\t\t\t\t\t\"value\": file_url\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"value\": this.state.fileType\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"trait_type\": \"Encrypted\",\n\t\t\t\t\t\t\"value\": \"FALSE\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\n\t\t\tconst url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`\n\n\t\t\ttry{\n\t\t\t\tconst response = await axios.post(url, JSONBody, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tpinata_api_key: pinata_api_key,\n\t\t\t\t\t\tpinata_secret_api_key: pinata_secret_api_key\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\tconsole.debug(\"metadata: \", response.data.IpfsHash)\n\t\t\t\tconst bytes = bs58.decode(response.data.IpfsHash)\n\t\t\t\tconst bytesToContract = bytes.toString('hex').substring(4,);\n\t\t\t\tthis.setState({\n\t\t\t\t\tipfsMeta: bytesToContract\n\t\t\t\t})\n\n\t\t\t\tvar price_with_decimal = this.state.price * (10**this.state.decimal)\n\t\t\t\tprice_with_decimal = price_with_decimal.toString()\n\t\t\t\tconsole.debug(\"price_with_decimal: \", price_with_decimal)\n\t\t\t\tvar ipfsToContract = '0x' + bytesToContract\n\t\t\t\t\n\t\t\t\tvar gasPrice = await web3.eth.getGasPrice()\n\t\t\t\tvar new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n\t\t\t\tcontract.methods.publish(price_with_decimal, this.state.bonusFee, this.state.shareTimes, ipfsToContract, this.state.token_addr).send({\n\t\t\t\t\tfrom: this.state.usedAcc,\n\t\t\t\t\tgasPrice: new_gas_price\n\t\t\t\t})\n\t\t\t\t\t.on('receipt', function(receipt) {\n\t\t\t\t\t\tconsole.log(receipt)\n\t\t\t\t\t\tvar publish_event = receipt.events.Publish\n\t\t\t\t\t\tvar returned_values = publish_event.returnValues\n\t\t\t\t\t\tvar root_nft_id = returned_values.rootNFTId\n\t\t\t\t\t\tvar issue_id = returned_values.issue_id\n\t\t\t\t\t\tobj.setState({\n\t\t\t\t\t\t\tonLoading: false,\n\t\t\t\t\t\t\trootNFTId: root_nft_id,\n\t\t\t\t\t\t\tissueId: issue_id,\n\t\t\t\t\t\t\tfinished: true\n\t\t\t\t\t\t})\n\t\t\t\t\t\talert(\"已经成功发布作品\");\n\t\t\t\t\t})\n\t\t\t\t\t.on('error', function(error){\n\t\t\t\t\t\tobj.setState({\n\t\t\t\t\t\t\tonLoading: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif (error.includes('not mined')){\n\t\t\t\t\t\t\talert('交易已提交，当前交易较拥堵，请稍等后去我的收藏中查看')\n\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\talert(`似乎遇到了些小问题： ${error}`)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t\n\t\t\t} catch(error ) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\talert(`似乎遇到了些小问题： ${error}`);\n\t\t\t}\n\n\t\t}\n\t\t\n\t}\n\n\tcheckDetail = async (event) => {\n\t\tvar new_url = '/#/NFT/' + this.state.rootNFTId\n\t\twindow.open(new_url, '_self')\n\t}\n\n\trender(){\n\t\tconst { classes } = this.props\n\t\tlet obj = this\n\t\tconst { TextArea } = Input;\n\t\tconst options = this.state.data.map(d => <Option key={d.value}>{d.text}</Option>);\n\t\tconst prop = {\n\t\t\tname: 'file',\n\t\t\taction: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n\t\t\theaders: {\n\t\t\t\tpinata_api_key: pinata_api_key,\n\t\t\t\tpinata_secret_api_key: pinata_secret_api_key\n\t\t\t},\n\t\t\tdata: this.state.buffer,\n\t\t\tbeforeUpload: file => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst reader = new FileReader()\n\t\t\t\t\t\treader.readAsArrayBuffer(file)\n\t\t\t\t\t\treader.onload = (e) => {\n\t\t\t\t\t\t\tvar b = e.target.result\n\t\t\t\t\t\t\tlet params = new FormData()\n\t\t\t\t\t\t\tparams.append('file', b)\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tbuffer: params\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tmessage.error('Read file error')\n\t\t\t\t\t\treject()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tasync onChange(info) {\n\t\t\t\tconst { status } = info.file;\n\t\t\t\t// text/plain image/jpeg application/pdf\n\t\t\t\tif (status === 'done') {\n\t\t\t\t\tmessage.success(`${info.file.name} file uploaded successfully.`);\n\t\t\t\t\tobj.setState({\n\t\t\t\t\t\tipfsHashCover: info.file.response.IpfsHash\n\t\t\t\t\t})\n\n\t\t\t\t} else if (status === 'error') {\n\t\t\t\t\tmessage.error(`${info.file.name} file upload failed.`);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDrop(e) {\n\t\t\t\tmessage.error(`Only image file supported`);\n\t\t\t\tconsole.log('Dropped files', e.dataTransfer.files);\n\t\t\t},\n\t\t};\n\n\t\tconst propFile = {\n\t\t\tname: 'file',\n\t\t\taction: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n\t\t\theaders: {\n\t\t\t\tpinata_api_key: pinata_api_key,\n\t\t\t\tpinata_secret_api_key: pinata_secret_api_key\n\t\t\t},\n\t\t\tdata: this.state.buffer,\n\t\t\tbeforeUpload: file => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst reader = new FileReader()\n\t\t\t\t\t\treader.readAsArrayBuffer(file)\n\t\t\t\t\t\treader.onload = (e) => {\n\t\t\t\t\t\t\tvar b = e.target.result\n\t\t\t\t\t\t\tlet params = new FormData()\n\t\t\t\t\t\t\tparams.append('file', b)\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tbuffer: params\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tmessage.error('Read file error')\n\t\t\t\t\t\treject()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tasync onChange(info) {\n\t\t\t\tconst { status } = info.file;\n\t\t\t\t// console.debug(typeof info.file.type)\n\t\t\t\t// text/plain image/jpeg application/pdf\n\t\t\t\tif (status === 'done') {\n\t\t\t\t\tmessage.success(`${info.file.name} file uploaded successfully.`);\n\t\t\t\t\tvar file_type = info.file.name.split('\\.')\n\t\t\t\t\tvar file_suffix = file_type[file_type.length - 1]\n\t\t\t\t\tconsole.debug(file_suffix)\n\t\t\t\t\tconsole.debug(\"file ipfs hash: \", info.file.response.IpfsHash)\n\t\t\t\t\tobj.setState({\n\t\t\t\t\t\tfileIpfs: info.file.response.IpfsHash,\n\t\t\t\t\t\tfileType: file_suffix\n\t\t\t\t\t})\n\n\n\t\t\t\t} else if (status === 'error') {\n\t\t\t\t\tmessage.error(`${info.file.name} file upload failed.`);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDrop(e) {\n\t\t\t\tmessage.error(`Only image file supported`);\n\t\t\t\tconsole.log('Dropped files', e.dataTransfer.files);\n\t\t\t},\n\t\t};\n\n\n\t\tif (this.state.onLoading){\n\t\t\treturn(\n\t\t\t\t<div>\n\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t<TopBar />\n\t\t\t\t\t\t<div style={{marginLeft: '35%', marginTop: '10%'}}>\n\t\t\t\t\t\t\t<ReactLoading type={'bars'} color={'#2196f3'} width={'40%'}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ThemeProvider>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else if (this.state.finished){\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t<TopBar />\n\t\t\t\t\t\t<div style={{ textAlign: 'center'}}>\n\t\t\t\t\t\t\t<Typography className={classes.titleCon}>\n\t\t\t\t\t\t\t\t<b> 🎉 恭喜您发布成功</b>\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Paper className={classes.paperImg}>\n\t\t\t\t\t\t\t\t<img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t\t<Typography variant=\"h4\" style={{ marginTop: 20, fontFamily: 'Ubuntu' }}>\n\t\t\t\t\t\t\t\t<b>您获得的NFT是： #{this.state.rootNFTId}</b>\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\tstyle={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\n\t\t\t\t\t\t\t\tonClick={this.checkDetail}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t查看详情\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ThemeProvider>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}else{\n\t\t\treturn (\n\t\t\t\t<div>\n\n\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t<TopBar />\n\t\t\t\t\t\t<Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\n\t\t\t\t\t\t\t<div className={classes.paper}>\n\t\t\t\t\t\t\t\t{/* {showLoading()} */}\n\t\t\t\t\t\t\t\t<Typography className={classes.titlePub}>\n\t\t\t\t\t\t\t\t\t<b>发布作品信息</b>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<form className={classes.form} noValidate>\n\t\t\t\t\t\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t\t\t\t\t\t<Grid item style={{ width: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"作品名称\"\n\t\t\t\t\t\t\t\t\t\t\t\tallowClear\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"pubName\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleGetPubName}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.name}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item style={{width: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 20 }}>收益比例 *</label>\n\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 14 }}>当您的作品被他人分享并获利时，您希望从他的分享利润中获得多少比例的收益</p>\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"bonusFee\"\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={0}\n\t\t\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\t\t\t\t\t\tformatter={value => `${value}%`}\n\t\t\t\t\t\t\t\t\t\t\t\tparser={value => value.replace('%', '')}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleGetBonusFee}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.inputNum}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item style={{ width: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 20 }}>通行代币 *</label>\n\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 14 }}>请选择您支持的支付货币 (输入代币符号或地址)</p>\n\t\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\t\tshowSearch\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.token_addr}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={\"请输入代币符号或地址\"}\n\t\t\t\t\t\t\t\t\t\t\t\t// className={classes.input}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: \"100%\"}}\n\t\t\t\t\t\t\t\t\t\t\t\tsize = \"large\"\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultActiveFirstOption={false}\n\t\t\t\t\t\t\t\t\t\t\t\tshowArrow={false}\n\t\t\t\t\t\t\t\t\t\t\t\tfilterOption={false}\n\t\t\t\t\t\t\t\t\t\t\t\tonSearch={this.handleSearch}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleSelectChange}\n\t\t\t\t\t\t\t\t\t\t\t\tnotFoundContent={null}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{options}\n\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item style={{width: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 20 }}>售卖价格 ({this.state.token_symbol})*</label>\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"price\"\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={0}\n\t\t\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleGetPrice}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.inputNum}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item style={{ width: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 20 }}>最高分享次数 (MAX： 65535)*</label>\n\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 14 }}>您希望每一个帮助您传播的用户最多能够分享多少次？</p>\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"shareTimes\"\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={0}\n\t\t\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\t\t\tmax={65535}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleGetShareTimes}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.inputNum}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item style={{ width: \"100%\" }} >\n\t\t\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\n\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\n\t\t\t\t\t\t\t\t\t\t\t<TextArea\n\t\t\t\t\t\t\t\t\t\t\t\trows={6}\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"Description\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleGetDescription}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 50 }}>封面图片 *</label>\n\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 14 }}>请在下方区域上传您的封面图片 <br />\n\t\t\t\t\t\t\t\t\t\t封面文件支持这些格式：JPEG/JPG/PNG</p>\n\t\t\t\t\t\t\t\t\t<Dragger {...prop} style={{ width: '100%', minHeight: 200 }} id=\"Uploader\" accept=\".png, .jpg, .jpeg\" >\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-drag-icon\">\n\t\t\t\t\t\t\t\t\t\t\t<InboxOutlined />\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-hint\">\n\t\t\t\t\t\t\t\t\t\t\t支持单个文件的上传，支持多种类型文件的上传\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</Dragger>\n\n\t\t\t\t\t\t\t\t\t<label style={{ fontSize: 18, marginTop: 50 }}>作品文件 *</label>\n\t\t\t\t\t\t\t\t\t<p style={{ fontSize: 14 }}>请在下方区域上传您的作品文件 </p>\n\t\t\t\t\t\t\t\t\t<Dragger {...propFile} style={{ width: '100%', minHeight: 200 }} id=\"Uploader2\" >\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-drag-icon\">\n\t\t\t\t\t\t\t\t\t\t\t<InboxOutlined />\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"ant-upload-hint\">\n\t\t\t\t\t\t\t\t\t\t\t仅支持单个文件的上传，支持多种类型文件的上传\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</Dragger>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\tstartIcon={<CloudUploadIcon />}\n\t\t\t\t\t\t\t\t\tstyle={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\n\t\t\t\t\t\t\t\t\tonClick={this.submit}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t提交信息\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t</ThemeProvider>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\t\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Publish);","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport Typography from '@material-ui/core/Typography';\nimport TopBar from \"./TopBar\";\nimport Paper from '@material-ui/core/Paper';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport WhatshotIcon from '@material-ui/icons/Whatshot';\nimport Web3 from 'web3';\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\nimport AttachMoneyIcon from '@material-ui/icons/AttachMoney';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport {IconButton, Container} from \"@material-ui/core\";\nimport contract from './contract';\nimport { Progress } from 'antd';\nimport axios from 'axios';\nimport web3 from './web3';\nimport LocalAtmIcon from '@material-ui/icons/LocalAtm';\nimport ReactLoading from 'react-loading';\nconst FileSaver = require('file-saver');\nvar CryptoJS = require(\"crypto-js\");\nconst abi = require('erc-20-abi');\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\nconst styles = theme => ({\n  container: {\n    maxWidth: 1500,\n    // backgroundColor: '#2196f3'\n  },\n  button: {\n    margin: theme.spacing(1),\n    fontSize: 20,\n    borderRadius: 25,\n    color: '#FFFFFF',\n    backgroundColor: '#2196f3'\n  },\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1370,\n    // backgroundColor: \"green\"\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  btnMain: {\n    marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 120,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  btnSecond: {\n    marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderWidth: 3,\n    borderColor: '#03A9F4',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 120,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardMedia: {\n    // paddingTop: '56.25%', // 16:9\n    paddingTop: '100%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: 10, maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n  cbutton: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n  },\n\n  cbutton2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent: \"flex-end\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent: \"space-evenly\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent: \"space-evenly\",\n      alignItems: \"flex-start\"\n    },\n  },\n  dbutton: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n  },\n  imageStyle: {\n    objectFit: 'contain',\n    // object- fit: cover;\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: 280,\n      height: 365, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      width: 290, \n      height: 385, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      width: 300, \n      height: 420, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      width: 300, \n      marginTop: 20, \n      marginBottom: 50 \n    },\n    [theme.breakpoints.up('xl')]: {\n      width: 300, \n      marginTop: 20, \n      marginBottom: 50 \n    },\n  },\n  imagePapaer: {\n\n    [theme.breakpoints.between('xs', 'sm')]: {\n      backgroundColor: '#EFEBE9', width: 330, height: 420, marginLeft: 25 \n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      backgroundColor: '#EFEBE9', width: 340, height: 440, marginLeft: 25 \n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      backgroundColor: '#EFEBE9', width: 350, height: 465, marginLeft: 25 \n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10 \n    },\n    [theme.breakpoints.up('xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10 \n    },\n  },\n  share: {\n    fontFamily: 'Teko',\n    marginBottom: '10%',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 14,\n      // width: '5%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 18,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 20,\n    },\n\n  }\n});\n\nclass NFTInfo extends Component{\n\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/';\n  backend = 'https://api.sparklink.io';\n  ipfs_node = \"http://18.162.56.46:5001\"\n  state = {\n    Name: '',\n    Description: '',\n    BonusFee: 0,\n    Cover: '',\n    contract: null,\n    childrenNum: 0,\n    spark: false,\n    dataUrl: null,\n    account: null,\n    Profit: '',\n    issueId: 0,\n    fileType: \"\",\n    isEncrypt: false,\n    onLoading: false,\n    loadItem: true,\n    encrypted: '未知',\n    tokenAddr: '',\n    tokenSymbol: '',\n    percentage: 0,\n    showProgress: false,\n    showDecryptProgress: null,\n    decryptPercentage: 0\n  };\n\n  downloadIPFS = async (event) =>{\n    const Method = 'GET';\n    let obj = this;\n    let url = \"\";\n    let dataHash = this.state.dataUrl\n    this.finishDownload();\n  }\n\n  finishDownload = () => {\n    let obj = this;\n    // Https://gateway.pinata.cloud/ipfs/QmTzKYhngmHXN1NLydV27cWMaTJPbWPFy1nYNjJadvoHmC\n    let dataSplits = this.state.dataUrl.split('/');\n    var dataHash = dataSplits[dataSplits.length - 1]\n    var dataUrl = this.gateway + dataHash\n    this.setState({\n      showProgress: true\n    })\n    if (this.state.isEncrypt) {\n      var cipher_config = {\n        method: 'get',\n        url: dataUrl,\n        onDownloadProgress(progress) {\n          var percentage = Math.round(progress.loaded / progress.total * 100)\n          obj.setState({\n            percentage: percentage\n          })\n        }\n      };\n      axios(cipher_config).then(async (response) => {\n        let ciphertext = response.data\n        let accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n        let account = accounts[0]\n        let signJson = {\n          account: account,\n          root_nft_id: this.props.match.params.id\n        }\n        signJson = JSON.stringify(signJson);\n        obj.setState({ \n          showProgress: false\n        })\n        await this.signDataAndDecrypt(account, ciphertext);\n      });\n    } else {\n      var open_config = {\n        url: dataUrl, //your url\n        method: 'GET',\n        responseType: 'blob', // important\n        onDownloadProgress(progress) {\n          var percentage = Math.round(progress.loaded / progress.total * 100)\n          obj.setState({\n            percentage: percentage\n          })\n        }\n      };\n      axios(open_config).then((response) => {\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.style.display = 'none';\n        // text/plain application/pdf\n        var suffix = '.' + obj.state.fileType;\n        var fileName = this.state.Name + suffix\n        link.download = fileName\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n        obj.setState({ showProgress: false })\n        console.log('set close')\n      }).catch(error => {\n        obj.setState({ showProgress: false })\n        alert(\"下载失败：\" + error);\n      });\n    }\n\n    // this.setState({ onLoading: false })\n  }\n\n  async componentDidMount()  {\n    // super(props);\n    let obj = this\n    if(!window.ethereum) {\n      alert(\"请先安装metamask\");\n      window.location.href = '/#/collections';\n      return;\n    }\n    // const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n    if (chainId !== '0x89') {\n      alert(\"请切换至Polygon 主网络\");\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x89'\n        }]\n      })\n    }\n    \n    let web3 = new Web3(window.ethereum);\n    let nft = contract;\n    this.setState({contract: contract});\n    const owner = await nft.methods.ownerOf(this.props.match.params.id).call()\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n    const account = accounts[0]\n    this.setState({ account: account })\n    if (web3.utils.toChecksumAddress(account) !== owner) {\n      alert(\"这枚nft不属于你\");\n      window.location.href = '/#/';\n    }\n    \n    const token_addr = await nft.methods.getTokenAddrByNFTId(this.props.match.params.id).call()\n    const res = await nft.methods.getProfitByNFTId(this.props.match.params.id).call()\n    if (token_addr == '0x0000000000000000000000000000000000000000'){\n      var price_with_decimal = res / (10 ** 18)\n      var profit = price_with_decimal + \" MATIC\"\n      this.setState({\n        tokenAddr: '0x0000000000000000000000000000000000000000',\n        tokenSymbol: 'MATIC',\n        Profit: profit\n      })\n    }else {\n      const token_contract = new web3.eth.Contract(abi, token_addr)\n      const token_symbol = await token_contract.methods.symbol().call()\n      const decimal = await token_contract.methods.decimals().call()\n      var price_with_decimal = res / (10 ** decimal)\n      var profit = price_with_decimal + ` ${token_symbol}`\n      this.setState({\n        tokenAddr: token_addr,\n        tokenSymbol: token_symbol,\n        Profit: profit\n      })\n    }\n    \n\n    const meta = await nft.methods.tokenURI(this.props.match.params.id).call()\n    let hash = meta.split('/');\n    const issue = await nft.methods.getIssueIdByNFTId(this.props.match.params.id).call()\n    const royalty = await nft.methods.getRoyaltyFeeByIssueId(issue).call()\n    var file_hash = hash[hash.length - 1]\n    // this.setState({ hash: hash[hash.length - 1] });\n    console.debug('meta here: ', file_hash)\n    var request_url = \"https://coldcdn.com/api/cdn/v5ynur/ipfs/\" + file_hash\n\n    try{\n      const res = await axios({\n        method: 'get',\n        url: request_url,\n        timeout: 1000 * 5,\n      })\n      let data = res.data;\n      let bouns = 0;\n      let fileAddr = \"\";\n      let isEncrypt = false;\n      let fileType = data.attributes[2].value\n      let encrypted = '未知';\n\n      for (let i = 0; i < data.attributes.length; i++) {\n        if (data.attributes[i].trait_type === \"Bonuse Percentage\") {\n          bouns = data.attributes[i].value;\n        }\n        if (data.attributes[i].trait_type === \"File Address\") {\n          fileAddr = data.attributes[i].value;\n        }\n        if (data.attributes[i].trait_type === \"Encrypted\") {\n          if (data.attributes[i].value === \"FALSE\") {\n            isEncrypt = false\n            encrypted = '否';\n          } else {\n            isEncrypt = true\n            encrypted = '是';\n          }\n        }\n      }\n\n      this.setState({ \n        Name: data.name,\n        Description: data.description,\n        BonusFee: royalty,\n        Cover: data.image,\n        dataUrl: fileAddr,\n        isEncrypt: isEncrypt,\n        encrypted: encrypted,\n        fileType: fileType,\n        loadItem: false\n      });\n\n    }catch (error) {\n      this.setState({ Name: 'SparkNFT' });\n      this.setState({ Description: '暂时无法获取到该nft的相关描述' });\n      this.setState({ BonusFee: royalty });\n      this.setState({ Cover: 'https://via.placeholder.com/100x140.png?text=SparkNFT' });\n      this.setState({ dataUrl: 'fileAddr_PlaceHolder', loadItem: false, });\n    }\n    \n\n    const leafUrl = this.backend + '/api/v1/nft/info?nft_id=' + this.props.match.params.id\n    axios.get(leafUrl).then(res => {\n      var children_num = res.data.children_count\n      this.setState({\n        childrenNum: children_num\n      })\n    }).catch(error => {\n      if (error.response === undefined) {\n        alert('服务器未响应叶子节点数量请求')\n        return;\n      }\n      if (error.response.status == 400 && error.response.data.message.includes(\"children not found\")) {\n        console.debug(\"no children\")\n      } else {\n        console.debug(leafUrl)\n        alert('获取nft子节点情况页面失败(' + error + ')')\n      }\n    })\n  }\n\n  claim = async () => {\n    this.setState({\n      onLoading: true\n    })\n    var gasPrice = await web3.eth.getGasPrice()\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n    try{\n      await contract.methods.claimProfit(this.props.match.params.id).send({\n        from: this.state.account,\n        gasPrice: new_gas_price\n      });\n    } catch{\n      this.setState({\n        onLoading: false\n      })\n    } finally {\n      this.setState({\n        onLoading: false\n      })\n    } \n  }\n\n  return = async () => {\n    window.location.reload(true);\n  }\n\n  signDataAndDecrypt = async (signer, ciphertext) => {\n    //event.preventDefault();\n    \n    var JSONBody = {\n      \"account\": signer,\n      \"nft_id\": this.props.match.params.id\n    }\n    var json_str = JSON.stringify(JSONBody)\n    let sig\n    await web3.eth.personal.sign(json_str, signer).then((response) => {\n      sig = response\n    })\n    this.setState({\n      showDecryptProgress: true\n    });\n    var payload = {\n      \"account\": signer,\n      \"nft_id\": this.props.match.params.id,\n      \"signature\": sig\n    }\n    var payload_str = JSON.stringify(payload)\n    var req_key_url = this.backend + \"/api/v1/key/claim\"\n\n    try{\n      const res = await axios.post(req_key_url, payload_str, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n      console.log(res);\n      \n      if (res.status == 200) {\n        let key = res.data.key;\n        console.debug(\"key: \", key)\n\n        let data = CryptoJS.AES.decrypt(ciphertext, key);\n        let plainText = data.toString(CryptoJS.enc.Utf8);\n        //console.log(plainText.length)\n\n        const wordArray = CryptoJS.enc.Hex.parse(plainText);\n        let BaText = this.wordArrayToByteArray(wordArray, wordArray.length);\n        // var arrayBufferView = new Uint8Array(BaText);\n        var blob = new Blob([BaText]);\n        let suffix = '.' + this.state.fileType;\n        FileSaver.saveAs(blob, this.state.Name + suffix);\n      } else {\n        var error_msg = res.data.message\n        alert(\"获取密钥失败  \" + error_msg)\n      }\n    }catch (error) {\n      console.log(error);\n      //var error_msg = reason.data.message\n      alert(\"获取密钥失败(\" + error + \")\")\n    } \n\n  }\n    wordToByteArray = (result, word, length) => {\n      const lengthBefore = result.length\n      const xff = 0xFF\n      if (length > 0)\n        result.push(word >>> 24);\n      if (length > 1)\n        result.push((word >>> 16) & xff);\n      if (length > 2)\n        result.push((word >>> 8) & xff);\n      if (length > 3)\n        result.push(word & xff);\n\n      var info = {\n        result: result,\n        addedLength: result.length - lengthBefore\n      }\n      return info\n    }\n    \n  wordArrayToByteArray = (wordArray, length) => {\n    console.debug(\"enter in wordArrayToByte\")\n    if (wordArray.hasOwnProperty(\"sigBytes\") && wordArray.hasOwnProperty(\"words\")) {\n      length = wordArray.sigBytes;\n      wordArray = wordArray.words;\n    }\n  \n    var result = [],\n      bytesAdded,\n      current_bytes = 0,\n      lengthBefore = length,\n      i = 0;\n    while (length > 0) {\n      var added_info = this.wordToByteArray(result, wordArray[i], Math.min(4, length));\n      result = added_info.result\n      bytesAdded = added_info.addedLength  \n      current_bytes = current_bytes + bytesAdded\n      var percent = Math.round(current_bytes / lengthBefore * 100)\n      // console.debug(\"decryptPercentage: \", percent)\n      if (percent !== this.state.decryptPercentage) {\n        this.setState({\n          decryptPercentage: percent\n        });\n      }\n      length -= bytesAdded\n      i++;\n    }\n\n    return new Uint8Array(result);\n      // // console.debug()\n      // return [].concat.apply([], result).flat(Infinity);\n    }\n\n\n  \n  showLoading = () => {\n      if (this.state.onLoading) {\n        return (\n          <div>\n            <ReactLoading type={'bars'} color={'#2196f3'} height={200} width={200} />\n          </div>\n        );\n      }\n    }\n  spark = () => {\n    \n    if(this.state.spark) {\n      document.getElementById('isSpark').innerHTML = '点火—分享';\n    } else {\n      document.getElementById('isSpark').innerHTML = '隐藏';\n    }\n    this.setState({spark: !this.state.spark});\n  }\n  \n\n  render() {\n    const { classes } = this.props\n    const gateway = this.gateway\n    const sell_info = () => {\n      let url = window.location.host;\n      let toUrl = \"https://\" + url + '/#/NFT/Spark/' + this.props.match.params.id;\n      let share = '分享复制链接：' + toUrl;\n      // this.state.onSale\n      if (this.state.spark) {\n        return (\n          <Grid container >\n            <Grid item xs>\n              <Typography color=\"inherit\" align=\"center\" noWrap className={classes.share} >\n                请将下方链接分享给买方，<br /> 买方会进入此链接来购买这个NFT <br />\n                {toUrl}\n                <CopyToClipboard text={toUrl}\n                  onCopy={() => this.setState({ copied: true })}>\n                  <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\n                    <FileCopyOutlinedIcon />\n                  </IconButton>\n                </CopyToClipboard>\n              </Typography>\n            </Grid>\n          </Grid>\n        );\n      }\n    }\n\n\n    if (this.state.onLoading) {\n      return (\n        <div>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ marginLeft: '35%', marginTop: '10%' }}>\n              <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    } else if (this.state.showDecryptProgress) {\n      return (\n        <div>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40 }}>\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\n                <b>正在解密文件</b>\n              </Typography>\n            </div>\n            <div style={{ textAlign: 'center', marginTop: '10%' }}>\n              <Progress type=\"circle\" percent={this.state.decryptPercentage} width={200} />\n            </div>\n            <div style={{ textAlign: 'center' }}>\n              <Button\n                variant=\"contained\"\n                className={classes.button}\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\n                onClick={this.return}\n              >\n                返回信息页面\n              </Button>\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    }else if(this.state.showProgress){\n      return (\n        <div>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40}}>\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\n                <b>正在下载文件</b>\n              </Typography>\n            </div>\n            <div style={{ textAlign: 'center', marginTop: '10%'}}>             \n              <Progress type=\"circle\" percent={this.state.percentage} width={200}/>\n            </div>\n            \n          </ThemeProvider>\n        </div>\n      );\n    } else {\n\n      return (\n\n        <div>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" className={classes.container}>\n              <Button\n                startIcon={<ArrowBackIosOutlinedIcon style={{ fontSize: '2rem' }} />}\n                href='/#/collections'\n                style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\n              >\n                回到我的收藏馆\n              </Button>\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"flex-start\">\n                {/* <Grid xs={9}></Grid> */}\n                <Grid container  direction=\"row\" className={classes.cbutton}>\n                  <Grid item>\n                    <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 14 }}>\n                      <b>目前收益: {this.state.Profit}</b>\n                    </Typography>\n                  </Grid>\n                  <Grid item>\n                    <Button style={{ marginTop: 10,marginRight: 30, marginBottom: 20}} size=\"large\" variant=\"contained\" color=\"primary\"  className={classes.btnMain} startIcon={<LocalAtmIcon />} onClick={this.claim} >\n                      <Typography id=\"isSpark\" variant=\"button\" component=\"h3\" gutterBottom >\n                        <font size=\"3\" color='white'>\n                              领收益\n                        </font>\n                      </Typography>\n                    </Button>\n                  </Grid>\n                  {/* <Grid xs ={1}></Grid> */}\n                  <Grid item>\n                    <Button style={{ marginTop: 10, marginBottom: 20 }} size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} startIcon={<AttachMoneyIcon />} href={'/#/sellSingle/' +  this.props.match.params.id}  >\n                      <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                        <font size=\"3\">\n                          售卖\n                        </font>\n                      </Typography>\n                    </Button>\n                  </Grid>\n                </Grid>\n              </Grid>\n              <div className={classes.paper}>\n                {/* <Grid container direction=\"column\" justifyContent=\"center\" alignItems=\"center\"> */}\n                {this.state.loadItem ? (\n                  <Grid container className={classes.content} spacing={5}>\n                    <Grid item xs={4}>\n                      <Skeleton variant=\"rect\" width={300} height={500} style={{ width: 370, marginLeft: 50, marginBottom: 50 }}/>\n                    </Grid>\n                    <Grid item xs style={{ marginLeft: '5%' }}>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={200} height={30}/>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={400} height={70}/>\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={500} height={300} style={{ marginBottom: 50 }}/>\n\n                    </Grid>\n\n                  </Grid>\n                ) : (\n                <Grid container direction=\"row\" justifyContent=\"space-between\" spacing= {5} className={classes.content}>\n                  <Grid style={{ maxWidth: 200}}>\n                    <Paper className={classes.imagePapaer}>\n                      <img className={classes.imageStyle} src={this.state.Cover}></img>  \n                    </Paper>\n                  </Grid>\n                  {/* <Grid xs={1}></Grid> */}\n                  <Grid item xs={2}></Grid>\n                  <Grid className={classes.content2} >\n                    <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                      #{this.props.match.params.id}\n                    </Typography>\n                    <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34, marginTop: '2%'}}>\n                      <b>{this.state.Name}</b>\n                    </Typography>\n                      <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                      {this.state.Description}\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '100%', fontSize: 24 }}>\n                      分红比例: {this.state.BonusFee} %\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                      当前拥有的子节点数量: {this.state.childrenNum}\n                    </Typography>\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                      NFT作品是否加密: {this.state.encrypted}\n                    </Typography>\n                    <Grid container direction=\"row\" className={classes.cbutton2}>\n                      <Grid>\n                        <Button size=\"small\" variant=\"contained\"  color=\"primary\" target=\"_blank\" className={classes.btnMain} startIcon={<GetAppIcon />} onClick={this.downloadIPFS} >\n                          <font size=\"3\" color='white'>\n                            下载\n                          </font>\n                        </Button>\n                      </Grid>\n                      <Grid>\n                        <Button size=\"small\"  variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<WhatshotIcon />} onClick={this.spark} >                          \n                          <font size=\"3\">\n                            点火分享\n                          </font>\n                        </Button>\n                      </Grid>\n                    </Grid>\n                  </Grid>\n                  \n                  \n                </Grid>)}\n                <br /><br /><br /><br />\n              </div>\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"flex-start\">\n            <Grid item xs={8}>\n              <div style={{marginTop: 0}}>\n                  {sell_info()}\n                  {this.showLoading()}\n              </div>\n            </Grid>\n          </Grid>\n              <br /><br />\n            </Container>\n          </ThemeProvider>\n        </div>\n      );\n    }\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(NFTInfo);","import React, { Component } from 'react';\nimport './App.css';\nimport {Button, Grid } from '@material-ui/core';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport TopBar from './TopBar';\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, IconButton} from \"@material-ui/core\";\nimport { Typography, Paper, Container }from '@material-ui/core';\nimport axios from 'axios';\nimport MonetizationOnOutlinedIcon from '@material-ui/icons/MonetizationOnOutlined';\nimport { Input, InputNumber } from 'antd';\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined';\nimport contract from './contract';\nimport web3 from './web3';\nimport ReactLoading from 'react-loading';\nimport Skeleton from '@material-ui/lab/Skeleton';\n\nconst abi = require('erc-20-abi');\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\nconst styles = theme => ({\n  container: {\n    maxWidth: 1500,\n    // backgroundColor: '#2196f3'\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1500,\n  },\n  btnSell: {\n    margin: theme.spacing(1),\n    fontSize: 16,\n    borderRadius: 10,\n    borderWidth: 2,\n    borderColor: '#2196f3',\n    color: '#2196f3',\n    marginLeft: '10%',\n    width: 100\n  },\n  inputNum: {\n    height: 40,\n    borderRadius: 5,\n    width: 550,\n    fontSize: 20,\n  },\n  input: {\n    height: 40,\n    borderRadius: 5,\n  },\n  loader: {\n    textAlign: 'center'\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n  },\n  img: {\n    width: 300,\n    marginBottom: 50,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '40%'\n    },\n  },\n  imgPaper: {\n    width: 350,\n    marginBottom: 50,\n    backgroundColor: '#EFEBE9', \n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '35%'\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    textAlign: 'center',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n  share: {\n    fontFamily: 'Teko',\n    marginBottom: '10%',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 14,\n      // width: '5%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 18,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 20,\n    },\n    \n  }\n});\n\nclass SellSingle extends Component {\n\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\n  backend = 'https://api.sparklink.io'\n  state = {\n    name: '',\n    bonusFee: 0,\n    coverURL: '',\n    description: '',\n    price: 0,\n    ipfsHashMeta: '',\n    shareTimes: 0,\n    open: false,\n    toAddress: '',\n    NFTId: '',\n    onSale: false,\n    copied: false,\n    onLoading: false,\n    owner: '',\n    currentAcc: '',\n    childrenNum: 0,\n    loadItem: true,\n    tokenAddr: null,\n    tokenSymbol: '',\n    decimal: 0,\n  };\n\n\n  async componentDidMount() {\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n    if (chainId !== '0x89') {\n      alert(\"请切换至Polygon 主网络\");\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x89'\n        }]\n      })\n    }\n\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    let obj = this\n    this.setState({\n      currentAcc: account\n    })\n    this.setState({\n      NFTId: this.props.match.params.NFTId\n    })\n    console.debug(this.state.NFTId)\n    const issueId = await contract.methods.getIssueIdByNFTId(this.state.NFTId).call()\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\n    await contract.methods.tokenURI(this.props.match.params.NFTId).call().then(metadata => {\n      let hash = metadata.split('/')\n      this.setState({ ipfsHashMeta: hash[hash.length - 1] })\n      var url = this.gateway + this.state.ipfsHashMeta\n      axios({\n        method: 'get',\n        url: url,\n        timeout: 1000 * 2,\n      }).then(res => {\n        let content = res.data;\n        let bonus = 0;\n        let encrypted;\n        for (let i = 0; i < content.attributes.length; i++) {\n          if (i === 0) {\n            bonus = content.attributes[i].value;\n            continue\n          }\n          if (i === 3) {\n            encrypted = content.attributes[i].value;\n            continue\n          }\n        }\n        obj.setState({\n          loadItem: false,\n          name: content.name,\n          description: content.description,\n          bonusFee: bonus,\n          coverURL: content.image\n        })\n      }).catch(error => {\n        var name_holder = 'SparkNFT#' + this.props.match.params.NFTId\n        obj.setState({\n          loadItem: false,\n          name: name_holder,\n          description: '暂时无法获取到该nft的相关描述',\n          bonusFee: royalty,\n          coverURL: 'https://via.placeholder.com/100x140.png?text=SparkNFT'\n        })\n        console.debug(error)\n      })\n    })\n\n    await contract.methods.ownerOf(this.props.match.params.NFTId).call().then(owner => {\n      this.setState({\n        owner: owner.toLowerCase()\n      })\n    })\n\n    await contract.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call().then(price => {\n      if (price == '0'){\n        this.setState({\n          onSale: false\n        })\n      }else {\n        this.setState({\n          onSale: true\n        })\n      }\n    })\n\n    const token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.NFTId).call()\n    if (token_addr == \"0x0000000000000000000000000000000000000000\"){\n      this.setState({\n        tokenAddr: token_addr,\n        tokenSymbol: \"MATIC\",\n        decimal: 18\n      })\n    }else{\n      const token_contract = new web3.eth.Contract(abi, token_addr)\n      const token_symbol = await token_contract.methods.symbol().call()\n      const decimal = await token_contract.methods.decimals().call()\n      this.setState({\n        tokenAddr: token_addr,\n        tokenSymbol: token_symbol,\n        decimal: decimal\n      })\n    }\n\n    const url = this.backend + '/api/v1/nft/info?nft_id=' + this.state.NFTId\n    axios.get(url).then(res => {\n      var children_num = res.data.children_count\n      obj.setState({\n        childrenNum: children_num\n      })\n    })\n      .catch(error => {\n        console.debug(error.message)\n        if (error.response === undefined) {\n          alert('服务器未响应,子节点数量获取失败')\n          return;\n        }\n        console.log(error.response);\n        if (error.response.status == 404 && error.response.data.message.includes(\"NFT not found\")) {\n          console.debug(\"并没有找到此nft\")\n        } else {\n          alert('获取nft子节点情况页面失败(' + error + ')')\n        }\n      })\n    \n  }\n\n  handleClickOpen = (e) => {\n    this.setState({\n      open: true,\n    })\n  }\n\n  handleClose = (e) => {\n    this.setState({\n      open: false,\n    })\n  }\n\n  handleGetPrice = (value) => {\n    this.setState({\n      price: value,\n    })\n  }\n\n  handleGetAddr = (e) => {\n    this.setState({\n      toAddress: e.target.value,\n    })\n  }\n\n  handleClickLink = (event) => {\n    var new_url = '/#/NFT/' + this.state.NFTId\n    window.open(new_url, '_self')\n  }\n\n  sell = async (e) => {\n    // TODO: call smart contract to approve nft \n    this.setState({\n      open: false,\n    })\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n\n    // var price_eth = web3.utils.toWei(this.state.price.toString())\n    var price_with_decimal = this.state.price * (10 ** this.state.decimal)\n    price_with_decimal = price_with_decimal.toString()\n    var obj = this\n    this.setState({\n      onLoading: true\n    })\n    var gasPrice = await web3.eth.getGasPrice()\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n    contract.methods.determinePriceAndApprove(this.state.NFTId, price_with_decimal, this.state.toAddress).send({\n      from: account,\n      gasPrice: new_gas_price\n    })\n      .on('receipt', function (receipt) {\n        obj.setState({\n          onSale: true,\n          onLoading: false\n        })\n        alert(\"已经成功授权买方\");\n      })\n      .on('error', function (error) {\n        obj.setState({\n          onLoading: false\n        })\n        alert(`似乎遇到了些小问题： ${error}`)\n      })\n    \n  }\n\n  render() {\n    const { classes } = this.props\n    const sell_info = () => {\n      let url = window.location.host;\n      let toUrl = \"https://\"+url + '/#/buySingle/' + this.state.NFTId\n      if (this.state.onSale) {\n        return (\n          <Grid container >\n            <Grid item xs>\n            <Typography color=\"inherit\" align=\"center\" noWrap className={classes.share} >\n                请将下方链接分享给买方，<br /> 买方会进入此链接来购买这个NFT <br />\n                {toUrl}\n                <CopyToClipboard text={toUrl}\n                  onCopy={() => this.setState({ copied: true })}>\n                  <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\n                    <FileCopyOutlinedIcon />\n                  </IconButton>\n                </CopyToClipboard>\n            </Typography>\n            </Grid>\n          </Grid>\n        );\n      }\n    }\n\n    const showSellBtn = () => {\n      if (this.state.currentAcc == this.state.owner){\n        return(\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            startIcon={<MonetizationOnOutlinedIcon style={{ fontSize: 22 }} />}\n            className={classes.btnSell}\n            onClick={this.handleClickOpen}\n          >\n            售卖\n          </Button>\n        );\n      }else{\n        return (\n          <Button\n            variant=\"outlined\"\n            startIcon={<MonetizationOnOutlinedIcon style={{ fontSize: 22 }} />}\n            className={classes.btnSell}\n            disabled\n          >\n            售卖\n          </Button>\n        );\n      }\n    }\n\n    if (this.state.onLoading) {\n      return (\n        <div>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ marginLeft: '35%', marginTop: '10%' }}>\n              <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    }else {\n      return (\n        <div>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" className={classes.container}>\n              <Button\n                startIcon={<ArrowBackIosOutlinedIcon style={{ fontSize: 22 }} />}\n                onClick={this.handleClickLink}\n                style={{ marginTop: 50, marginBottom: 100, fontSize: 22 }}\n              >\n                返回\n              </Button>\n              <div className={classes.paper}>\n                {this.state.loadItem ? (\n                  <Grid container spacing={5} className={classes.content}>\n                    <Grid item xs={4}>\n                      <Skeleton variant=\"rect\" width={300} height={500} className={classes.img} />\n                    </Grid>\n                    <Grid item xs style={{ marginLeft: '5%', maxWidth: 500, minWidth: 350 }}>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={'70%'} height={30} />\n                      <Skeleton animation=\"wave\" variant=\"text\" width={'100%'} height={70} />\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={'100%'} height={300} style={{ marginBottom: 50 }} />\n                      {showSellBtn()}\n                    </Grid>\n\n                  </Grid>\n                ) : (\n                  <Grid container className={classes.content} spacing={5}>\n                    <Grid item xs={4} style={{ maxWidth: 600 }}>\n                      <Paper className={classes.imgPaper}>\n                        <img style={{ width: 300, marginTop: 20, marginBottom: 50, objectFit: 'contain' }} src={this.state.coverURL}></img>\n                      </Paper>\n                    </Grid>\n                    <Grid item xs className={classes.content2}>\n                      <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                        #{this.state.NFTId}\n                      </Typography>\n                      <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 30, marginTop: '2%' }}>\n                        <b>{this.state.name}</b>\n                      </Typography>\n                      <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                        {this.state.description}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '65%', fontSize: 20 }}>\n                        创作者分红比例: {this.state.bonusFee} %\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                        当前拥有的子节点数量: {this.state.childrenNum}\n                      </Typography>\n                      {showSellBtn()}\n                      <Dialog\n                        open={this.state.open}\n                        onClose={this.handleClose}\n                        aria-labelledby=\"form-dialog-title\"\n                      >\n                        <DialogTitle id=\"form-dialog-title\">填写售卖信息</DialogTitle>\n                        <DialogContent>\n                          <DialogContentText>\n                            请在下方区域填写你希望售卖的价格，以及售卖对象的钱包地址。\n                          </DialogContentText>\n                          <label style={{ fontSize: 14, marginBottom: 10 }}>售卖价格 ({this.state.tokenSymbol})*</label>\n                          <InputNumber\n                            defaultValue={0}\n                            min={0}\n                            onChange={this.handleGetPrice}\n                            className={classes.inputNum}\n                          />\n                          <label style={{ fontSize: 14, marginBottom: 10, marginTop: 10 }}>买方钱包地址 *</label>\n                          <Input\n                            placeholder=\"买方钱包地址\"\n                            allowClear\n                            id=\"pubName\"\n                            onChange={this.handleGetAddr}\n                            className={classes.input}\n                          />\n                        </DialogContent>\n                        <DialogActions>\n                          <Button onClick={this.handleClose} color=\"primary\">\n                            取消\n                          </Button>\n                          <Button variant=\"contained\" onClick={this.sell} color=\"primary\" >\n                            卖出\n                          </Button>\n                        </DialogActions>\n                      </Dialog>\n                    </Grid>\n                  </Grid>\n                )}\n              </div>\n              <div style={{ marginTop: 50 }}>\n                {sell_info()}\n              </div>\n            </Container>\n          </ThemeProvider>\n        </div>\n      );\n    }\n\n    \n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(SellSingle);\n","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport TopBar from './TopBar';\nimport Typography from '@material-ui/core/Typography';\nimport axios from 'axios';\nimport Paper from '@material-ui/core/Paper';\nimport Container from '@material-ui/core/Container';\nimport MonetizationOnOutlinedIcon from '@material-ui/icons/MonetizationOnOutlined';\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\nimport contract from './contract';\nimport web3 from './web3';\nimport ReactLoading from 'react-loading';\nimport Skeleton from '@material-ui/lab/Skeleton';\n\nconst abi = require('erc-20-abi');\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\nconst styles = theme => ({\n  container: {\n    maxWidth: 1500,\n    // backgroundColor: '#2196f3'\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1500,\n  },\n  btnSell: {\n    margin: theme.spacing(1),\n    fontSize: 16,\n    borderRadius: 10,\n    borderWidth: 2,\n    borderColor: '#2196f3',\n    color: '#2196f3',\n    marginLeft: '10%',\n    width: 100\n  },\n  btnDisable: {\n    margin: theme.spacing(1),\n    fontSize: 16,\n    borderRadius: 10,\n    borderWidth: 3,\n    borderColor: '#909497',\n    color: '#909497',\n    marginLeft: '10%',\n    width: 100\n  },\n  inputNum: {\n    height: 40,\n    borderRadius: 5,\n    width: 550,\n    fontSize: 20,\n  },\n  input: {\n    height: 40,\n    borderRadius: 5,\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent: \"flex-start\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent: \"center\",\n      alignItems: \"flex-start\"\n    },\n  },\n  img: {\n    width: 300,\n    marginBottom: 50,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '40%'\n    },\n  },\n  imgPaper: {\n    width: 350,\n    marginBottom: 50,\n    backgroundColor: '#EFEBE9',\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '20%'\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '30%'\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '35%'\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    textAlign: 'center',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n});\n\nclass BuySingle extends Component {\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\n  backend = 'https://api.sparklink.io'\n  state = {\n    name: '',\n    bonusFee: 0,\n    coverURL: '',\n    description: '',\n    price: 0,\n    priceString: '',\n    ipfsHashMeta: '',\n    open: false,\n    address: '',\n    NFTId: '',\n    onSale: false,\n    owner: '',\n    approvedAddr: '',\n    currentAcc: '',\n    onLoading: false,\n    childrenNum: 0,\n    loadItem: true,\n    encrypted: '未知',\n    tokenAddr: null,\n    tokenSymbol: '',\n    decimal: 0,\n    approved: false,\n    spark: '0xb42d4525841008A69E427026DF354067fD6A524f'\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  async componentDidMount() {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    var obj = this\n    this.setState({\n      currentAcc: account\n    })\n    this.setState({\n      NFTId: this.props.match.params.NFTId\n    })\n    const issueId = await contract.methods.getIssueIdByNFTId(this.state.NFTId).call()\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\n    contract.methods.tokenURI(this.props.match.params.NFTId).call().then(metadata => {\n      let hash = metadata.split('/')\n      this.setState({ ipfsHashMeta: hash[hash.length - 1] })\n      var url = this.gateway + this.state.ipfsHashMeta\n      axios({\n        method: 'get',\n        url: url,\n        timeout: 1000 * 3,\n      }).then(res => {\n        let content = res.data;\n        let bonus = 0;\n        let encrypted = '未知';\n\n        for (let i = 0; i < content.attributes.length; i++) {\n          if(i === 0){\n            bonus = content.attributes[i].value;\n            continue\n          }\n          if(i === 3){\n            if (content.attributes[i].value.toUpperCase() === 'TRUE'){\n              encrypted = '是';\n            }else{\n              encrypted = '否';\n            }\n            continue\n          }\n        }\n        obj.setState({\n          loadItem: false,\n          name: content.name,\n          description: content.description,\n          bonusFee: bonus,\n          coverURL: content.image,\n          encrypted: encrypted\n        })\n      }).catch(error => {\n        var name_holder = 'SparkNFT#' + this.props.match.params.NFTId\n        obj.setState({\n          loadItem: false,\n          name: name_holder,\n          description: '暂时无法获取到该nft的相关描述',\n          bonusFee: royalty,\n          coverURL: 'https://via.placeholder.com/100x140.png?text=SparkNFT'\n        })\n      })\n    })\n\n\n    await contract.methods.ownerOf(this.props.match.params.NFTId).call().then(owner => {\n      this.setState({\n        owner: owner\n      })\n    })\n\n    await contract.methods.getApproved(this.props.match.params.NFTId).call().then(approved => {\n      this.setState({\n        approvedAddr: approved.toLowerCase()\n      })\n    })\n\n    const price = await contract.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call()\n    this.setState({\n      price: price\n    })\n    const token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.NFTId).call()\n    if (token_addr == \"0x0000000000000000000000000000000000000000\") {\n      this.setState({\n        tokenAddr: token_addr,\n        tokenSymbol: \"MATIC\",\n        decimal: 18,\n        approved: true\n      })\n    } else {\n      const token_contract = new web3.eth.Contract(abi, token_addr)\n      const token_symbol = await token_contract.methods.symbol().call()\n      const decimal = await token_contract.methods.decimals().call()\n      const approved_amount = await token_contract.methods.allowance(account, this.state.spark).call()\n      if (approved_amount >= price){\n        this.setState({\n          approved: true\n        })\n      } else{\n        this.setState({\n          approved: false\n        })\n      }\n      this.setState({\n        tokenAddr: token_addr,\n        tokenSymbol: token_symbol,\n        decimal: decimal\n      })\n    }\n    var price_with_decimal = price / (10** this.state.decimal)\n    price_with_decimal = price_with_decimal + \" \" + this.state.tokenSymbol\n    this.setState({\n      priceString: price_with_decimal\n    })\n    \n\n    const url = this.backend + '/api/v1/nft/info?nft_id=' + this.state.NFTId\n    axios.get(url).then(res => {\n      var children_num = res.data.children_count\n      obj.setState({\n        childrenNum: children_num\n      })\n    })\n      .catch(error => {\n        console.debug(error.message)\n        if (error.response === undefined) {\n          alert('服务器未响应,子节点数量获取失败')\n          return;\n        }\n        console.log(error.response);\n        if (error.response.status == 400 && error.response.data.message.includes(\"children not found\")) {\n          console.debug(\"no children\")\n        } else {\n          alert('获取nft子节点情况页面失败(' + error + ')')\n        }\n      })\n  }\n\n  handleBuy = async (e) => {\n\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    var gasPrice = await web3.eth.getGasPrice()\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n    let obj = this\n    if (this.state.tokenAddr == '0x0000000000000000000000000000000000000000'){\n      this.setState({\n        onLoading: true\n      })\n      contract.methods.safeTransferFrom(this.state.owner, account, this.state.NFTId).send({\n        from: account,\n        value: this.state.price,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          obj.setState({\n            onLoading: false\n          })\n          alert(\"交易已经上链\")\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false\n          })\n          alert(`似乎遇到了些小问题： ${error}`)\n        })\n    } else {\n      this.setState({\n        onLoading: true\n      })\n      contract.methods.safeTransferFrom(this.state.owner, account, this.state.NFTId).send({\n        from: account,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          obj.setState({\n            onLoading: false\n          })\n          alert(\"交易已经上链\")\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false\n          })\n          alert(`似乎遇到了些小问题： ${error}`)\n        })\n    }\n\n  }\n\n  handleApprove = async (e) => {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n\n    let obj = this\n    this.setState({\n      onLoading: true\n    })\n    const token_contract = new web3.eth.Contract(abi, this.state.tokenAddr)\n    var gasPrice = await web3.eth.getGasPrice()\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n    var price = this.state.price.toString()\n    token_contract.methods.approve(this.state.spark, price).send({\n      from: account,\n      gasPrice: new_gas_price\n    })\n      .on('receipt', function (receipt) {\n        obj.setState({\n          onLoading: false,\n          approved: true\n        })\n        alert(\"已经成功授权合约\")\n      })\n      .on('error', function (error){\n        obj.setState({\n          onLoading: false,\n        })\n        alert(`似乎遇到了些小问题： ${error}`)\n      })\n\n  }\n\n  handleGetPrice = (value) => {\n    this.setState({\n      price: value,\n    })\n  }\n\n  handleGetAddr = (e) => {\n    this.setState({\n      address: e.target.value,\n    })\n  }\n\n\n\n  render() {\n    const { classes } = this.props\n    const buyButton = () => {\n      //this.state.approvedAddr == this.state.currentAcc\n      if (this.state.approvedAddr !== this.state.currentAcc){\n        return (\n          <Button\n            variant=\"outlined\"\n            startIcon={<MonetizationOnOutlinedIcon style={{ fontSize: 22 }} />}\n            className={classes.btnDisable}\n            disabled\n          >\n            购买\n          </Button>\n        );\n      } else if (!this.state.approved) {\n        return (\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            className={classes.btnSell}\n            onClick={this.handleApprove}\n          >\n            授权合约\n          </Button>\n        );\n\n      } else {\n        return (\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            startIcon={<MonetizationOnOutlinedIcon style={{ fontSize: 22 }} />}\n            className={classes.btnSell}\n            onClick={this.handleBuy}\n          >\n            购买\n          </Button>\n        );\n      }\n    }\n\n    if (this.state.onLoading) {\n      return (\n        <div>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ marginLeft: '35%', marginTop: '10%' }}>\n              <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" className={classes.container}>\n              <Button\n                startIcon={<ArrowBackIosOutlinedIcon style={{ fontSize: 22 }} />}\n                href='/'\n                style={{ marginTop: 50, marginBottom: 100, fontSize: 22 }}\n              >\n                回到首页\n              </Button>\n              <div className={classes.paper}>\n                {this.state.loadItem ? (\n                  <Grid container spacing={5} className={classes.content}>\n                    <Grid item xs={4}>\n                      <Skeleton variant=\"rect\" width={300} height={500} className={classes.img} />\n                    </Grid>\n                    <Grid item xs style={{ marginLeft: '5%', maxWidth: 500, minWidth: 350 }}>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={'70%'} height={30} />\n                      <Skeleton animation=\"wave\" variant=\"text\" width={'100%'} height={70} />\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={'100%'} height={300} style={{ marginBottom: 50 }} />\n                      {buyButton()}\n                    </Grid>\n                  </Grid>\n                ) : (\n                    <Grid container className={classes.content} spacing={5}>\n                    <Grid item xs={4} style={{ maxWidth: 600 }}>\n                      <Paper className={classes.imgPaper}>\n                        <img style={{ width: 300, marginTop: 20, marginBottom: 50, objectFit: 'contain' }} src={this.state.coverURL}></img>\n                      </Paper>\n                    </Grid>\n                    <Grid item xs className={classes.content2}>\n                      <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                        #{this.state.NFTId}\n                      </Typography>\n                      <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34 }}>\n                        <b>{this.state.name}</b>\n                      </Typography>\n                      <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                        {this.state.description}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '2%', maxWidth: '65%', fontSize: 20 }}>\n                        创作者分红比例: {this.state.bonusFee} %\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 18 }}>\n                          售价: {this.state.priceString }\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '1%', maxWidth: '65%', fontSize: 12 }}>\n                        当前拥有者: {this.state.owner}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                        当前拥有的子节点数量: {this.state.childrenNum}\n                      </Typography>\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\n                        NFT作品是否加密: {this.state.encrypted}\n                      </Typography>\n                      {buyButton()}\n                    </Grid>\n                  </Grid>\n                )}\n              </div>\n            </Container>\n          </ThemeProvider>\n        </div>\n      );\n    }\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(BuySingle);\n","import React, { Component} from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport contract from './contract';\nimport TopBar from \"./TopBar\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport axios from 'axios';\nimport web3 from './web3';\n\nconst theme = createTheme({\n    palette: {\n      primary: {\n        main: '#FDFEFE',\n      },\n      secondary: {\n        main: '#2196f3',\n      }\n    },\n  });\n  \nconst styles = theme => ({\n\ticon: {\n\t  marginRight: theme.spacing(2),\n\t},\n    titleFont: {\n        fontFamily: 'Teko',\n      },\n\tbtn: {\n\t\tcolor: '#424949',\n\t\tborderWidth: 8,\n\t\tborderColor: '#e3f2fd',\n\t\tfontSize: 16,\n\t},\n\theroContent: {\n\t\tbackgroundColor: theme.palette.background.paper,\n\t\tpadding: theme.spacing(36, 0, 6),\n\t},\n\tcardGrid: {\n\t\tpaddingTop: theme.spacing(8),\n\t\tpaddingBottom: theme.spacing(8),\n\t},\n\tcard: {\n\t\theight: '100%',\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t},\n\tcardMedia: {\n\t\t// paddingTop: '56.25%', // 16:9\n    objectFit: 'contain',\n\t\tpaddingTop: '100%', // 16:9\n\t},\n\tcardContent: {\n\t\tflexGrow: 2,\n\t},\n  paper: {\n      marginTop: theme.spacing(7),\n      textAlign: 'center'\n    },\n    container: {\n      maxWidth: '100%'\n    },\n    btnMain: {\n      marginTop: theme.spacing(3),\n      color: '#FFFFFF',\n      borderWidth: 2,\n      borderColor: '#e3f2fd',\n      fontSize: 16,\n      borderRadius: 25,\n      width: 150\n    },\n    btnSecond: {\n      marginTop: theme.spacing(3),\n      color: '#03A9F4',\n      borderWidth: 3,\n      borderColor: '#03A9F4',\n      fontSize: 16,\n      borderRadius: 25,\n      width: 150\n    },\n    title: {\n      fontFamily: 'Teko',\n      marginTop: '5%',\n      [theme.breakpoints.between('xs', 'sm')]: {\n        fontSize: 35,\n      },\n      [theme.breakpoints.between('sm', 'md')]: {\n        fontSize: 40,\n      },\n      [theme.breakpoints.between('md', 'lg')]: {\n        fontSize: 55,\n      },\n      [theme.breakpoints.between('lg', 'xl')]: {\n        fontSize: 90,\n      },\n      [theme.breakpoints.up('xl')]: {\n        fontSize: 110,\n      },\n    },\n    title2: {\n      fontFamily: 'Teko',\n      [theme.breakpoints.between('xs', 'sm')]: {\n        fontSize: 16,\n      },\n      [theme.breakpoints.between('sm', 'md')]: {\n        fontSize: 25,\n      },\n      [theme.breakpoints.between('md', 'lg')]: {\n        fontSize: 35,\n      },\n      [theme.breakpoints.between('lg', 'xl')]: {\n        fontSize: 45,\n      },\n      [theme.breakpoints.up('xl')]: {\n        fontSize: 55,\n      },\n    },\n});\n\nclass Collections extends Component {\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/';\n  backend = 'https://api.sparklink.io'\n  web3;\n  cards = [];\n  // constructor(props) {\n  //     super(props);\n      \n  //   }\n  state = {\n    isLogin: false,\n    user_address: null,\n    name: '',\n    viewable: false,\n    cards: [],\n    onloading: false,\n    SkeletoNumber: 0,\n    noNFT: ''\n      // loading: true,\n  };\n\n  async componentDidMount () {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    if (accounts.length === 0) {\n      alert(\"请先连接Metamask\")\n    } \n    const account = accounts[0];\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n    if (chainId !== '0x89') {\n      alert(\"请切换至Polygon 主网络\");\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x89'\n        }]\n      })\n    }\n\n    let cards = [];\n    \n    const nft_number = await contract.methods.balanceOf(account).call()\n    console.log('nft_number: ', nft_number)\n    if (nft_number === 0) {\n      alert(\"暂无可展示NFT\");\n      this.setState({\n        noNFT: '暂无可展示NFT'\n      })\n      return;\n    }\n\n    let ids = await this.getNft(contract, account);\n    if (ids.length === 0) {\n      alert(\"暂无可展示NFT\");\n      this.setState({\n        noNFT: '暂无可展示NFT'\n      })\n      return;\n    }\n\n    let data = await this.getMetadata(contract, ids);\n    for (let i = 0; i < ids.length; i++) {\n      let element = {\n        id: ids[i],\n        title: data[i].name,\n        description: data[i].description,\n        bonusFee: data[i].attributes.value,\n        image: data[i].image,\n      }\n      cards.push(element);\n    }\n    var reversed_cards = cards.reverse()\n    this.setState({ viewable: true, });\n    this.setState({ cards: reversed_cards, });\n    this.setState({\n      onloading: false,\n      SkeletoNumber: 0\n    })\n\n  }\n\n  getMetadata = async (nft, id) => {\n    let metaDatas = [];\n    for(let i = 0; i < id.length; i++) {\n      let ipfs_link = await nft.methods.tokenURI(id[i]).call();\n      var ipfs_hash_arr = ipfs_link.split('/')\n      var ipfs_hash = ipfs_hash_arr[ipfs_hash_arr.length -1]\n      var meta = \"https://coldcdn.com/api/cdn/v5ynur/ipfs/\" + ipfs_hash\n      // console.debug(\"meta: \" + id[i] + \" \" + meta)\n      await axios({\n        method: 'get',\n        url: meta,\n        timeout: 1000 * 2,\n      }).then(res => {\n        // console.log(\"meta: \", res.data)\n        metaDatas.push(res.data)\n      }).catch(error => {\n        var name_holder = 'SparkNFT#' + id[i]\n        var placeholder = {\n          \"name\": name_holder,\n          \"description\": '暂时无法获取到该nft的相关描述',\n          \"image\": 'https://testnets.opensea.io/static/images/placeholder.png',\n          \"attributes\": [\n            {\n              \"display_type\": \"boost_percentage\",\n              \"trait_type\": \"Bonuse Percentage\",\n              \"value\": 0\n            },\n            {\n              \"trait_type\": \"File Address\",\n              \"value\": 'file_url'\n            }\n          ]\n        }\n        metaDatas.push(placeholder);\n      })\n    }\n    return metaDatas;\n  }\n\n  getNft = async(nft, account) => {\n    let balanceId = [];\n    //0x9452644E9fdd59bD46A4d9eC24462995ADfD8d01\n    var checksum_address = web3.utils.toChecksumAddress(account);\n    var url = this.backend + '/api/v1/nft/list?owner=' + checksum_address\n    console.debug('owner: ', checksum_address)\n    try{\n      var res = await axios.get(url)\n      balanceId = res.data.nft\n      this.setState({\n        onloading: true,\n        SkeletoNumber: balanceId.length\n      })\n      return balanceId;\n    }catch (error) {\n      // alert('无法获取您当前拥有的nft')\n      return [];\n    }\n  };\n\n    \n  renderDescription = (description) => {\n    if(description.length <= 150) {\n    \n      return (description);\n    } else {\n        let newDescription = description.substring(0,150) + \"..........\";\n        return (newDescription); \n    }\n  }\n   \n    \n\n\trender(){\n        //const cards = [1, 2, 3, 4, 5, 6, 7, 8, 9,10,11];\n        const { classes } = this.props\n        // \n\n        let obj = this;\n        window.ethereum.on('chainChanged', handleChainChanged);\n\n        function handleChainChanged(_chainId) {\n        // We recommend reloading the page, unless you must do otherwise\n            window.location.reload();\n        }\n        \n        function showCard(card, index) {\n            let res = (\n                <Grid item key= {index} xs={12} sm={6} md={4}>\n                  {\n                  card ?(<Card className={classes.card}>\n                    <CardMedia\n                        className={classes.cardMedia}\n                        image={card.image}\n                        title=\"Image title\" \n                      />\n                    <CardContent className={classes.cardContent}>\n                    <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                        <b>{card.title}</b>\n                    </Typography>\n                    <Typography>\n                        {obj.renderDescription(card.description)}\n                    </Typography>\n                    </CardContent>\n                    <CardActions>\n                      <Button size=\"small\" variant=\"contained\" color=\"primary\" href={'/#/NFT/' +  card.id} >\n                            <b>查看 </b>\n                        </Button>\n                        {/* <Grid xs={3}></Grid> */}\n                        <Typography variant=\"body2\" gutterBottom>\n                        <b>NFT id: {card.id} </b>\n                        </Typography>\n                    </CardActions>\n                    </Card>):(\n                      <Card className={classes.card}>\n                        <Skeleton variant=\"rect\" style={{marginLeft:70,}} width={260} height={288} />\n                        <Skeleton width=\"60%\" style={{marginTop:40,}} height={33} />\n                        <Skeleton height={33}/>\n                        <Skeleton height={33}/>\n                        <Skeleton height={33}/>\n                      </Card>\n                    )\n                  }          \n                </Grid>\n            );\n            \n            return res;\n\n        }\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<ThemeProvider theme={theme}>\n          <TopBar />\n          <Container component=\"main\" className={classes.container}>\n            <div className={classes.paper}>\n              <Grid container justifyContent=\"center\">\n                <Grid item xs={10}>\n                  <Typography color=\"inherit\" noWrap className={classes.title}>\n                    <b>我的收藏馆</b>\n                  </Typography>\n                  <Typography color=\"inherit\" noWrap className={classes.title2}>\n                    <b>An ERC721 Token Trying to Solve Existing Publishing Dilemma</b>\n                  </Typography>\n\n                  <Typography color=\"inherit\" noWrap className={classes.title2}>\n                    <b>{this.state.noNFT}</b>\n                  </Typography>\n                </Grid>\n              </Grid>\n            </div>\n          </Container>\n\t\t\t\t</ThemeProvider>\n\t\t\t\t<main>\n\t\t\t\t\t{<Container className={classes.cardGrid} maxWidth=\"md\">\n\t\t\t\t\t\t<Grid container spacing={4}>\n\t\t\t\t\t\t\t{\n                (this.state.onloading?Array.from(new Array(this.state.SkeletoNumber)):this.state.cards).map((card, index) => {\n                      return showCard(card, index);\n                  })\n              }\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Container>}\n\t\t\t\t</main>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Collections);","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport TopBar from \"./TopBar\";\nimport { Paper, Container, Link } from '@material-ui/core';\nimport axios from 'axios';\nimport contract from './contract';\nimport web3 from './web3';\nimport ArrowBackIosOutlinedIcon from '@material-ui/icons/ArrowBackIosOutlined';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport ReactLoading from 'react-loading';\nimport { Progress } from 'antd';\n\nconst abi = require('erc-20-abi');\n\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\nconst styles = theme => ({\n    container: {\n        maxWidth: 1500,\n        // backgroundColor: '#2196f3'\n      },\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  paper: {\n    marginTop: theme.spacing(1),\n    textAlign: 'center',\n    maxWidth: 1400,\n    // backgroundColor: \"green\"\n  },\n  btnMain: {\n    marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    backgroundColor: '#03A9F4',\n    borderWidth: 3,\n    // borderColor: '#03A9F4',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 150,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  btnSecond: {\n    marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderWidth: 3,\n    borderColor: '#03A9F4',\n    fontSize: 16,\n    borderRadius: 25,\n    width: 150,\n    maxWidth: '20rem',\n    minWidth: '10rem',\n  },\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6),\n  },\n  cardGrid: {\n    paddingTop: theme.spacing(8),\n    paddingBottom: theme.spacing(8),\n  },\n  card: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cardMedia: {\n    // paddingTop: '56.25%', // 16:9\n    paddingTop: '100%', // 16:9\n  },\n  cardContent: {\n    flexGrow: 1,\n  },\n  title: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 48,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 60,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 70,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 75,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 80,\n    },\n  },\n  title2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 25,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 35,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 45,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 55,\n    },\n  },\n  content: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent:\"flex-start\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n  },\n  content2: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: 10, maxWidth: 500\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: 90, maxWidth: 500\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: 80, maxWidth: 500\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: 50, maxWidth: 500\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: 60, maxWidth: 500\n    },\n  },\n  cbutton: {\n    fontFamily: 'Teko',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      justifyContent:\"center\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n    [theme.breakpoints.up('xl')]: {\n      justifyContent:\"flex-end\",\n      alignItems:\"flex-start\"\n    },\n  },\n  imageStyle: {\n    objectFit: 'contain',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: 280,\n      height: 365, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      width: 290, \n      height: 385, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      width: 300, \n      height: 420, \n      marginTop: 20, \n      marginBottom: 50\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      width: 300, \n      marginTop: 20, \n      marginBottom: 50 \n    },\n    [theme.breakpoints.up('xl')]: {\n      width: 300, \n      marginTop: 20, \n      marginBottom: 50 \n    },\n  },\n  imagePapaer: {\n\n    [theme.breakpoints.between('xs', 'sm')]: {\n      backgroundColor: '#EFEBE9', width: 330, height: 420, marginLeft: 10 \n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      backgroundColor: '#EFEBE9', width: 340, height: 440, marginLeft: 10 \n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      backgroundColor: '#EFEBE9', width: 350, height: 465, marginLeft: 10\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10 \n    },\n    [theme.breakpoints.up('xl')]: {\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10 \n    },\n  },\n});\n\n\n\nclass NFTSpark extends Component{\n\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/';\n  backend = 'https://api.sparklink.io';\n  state = {\n    Name: '',\n    Description: '',\n    BonusFee: 0,\n    Cover: '',\n    contract: null,\n    price: '',\n    priceString: '',\n    Leaf: 0,\n    onLoading: false,\n    loadItem: true,\n    open: false,\n    approved: false,\n    tokenAddr: '',\n    tokenSymbol: '',\n    isEncrypt: true,\n    percentage: 0,\n    showProgress: false,\n    fileType: '',\n    remainShillTimes: 0,\n    maxShillTimes: 0,\n    spark: '0xb42d4525841008A69E427026DF354067fD6A524f'\n  };\n\n  // constructor(props) {\n  //   super(props);\n  //   // if (!window.ethereum) {\n  //   //   alert(\"请先安装metamask\");\n  //   //   return;\n  //   // }\n  //   // if (!window.ethereum.isConnected()) {\n  //   //   window.ethereum.request({ method: 'eth_requestAccounts' })\n  //   // }\n  //   // const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n   \n    \n  // }\n\n  async componentDidMount() {\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\n    if (chainId !== '0x89') {\n      alert(\"请切换至Polygon 主网络\");\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x89'\n        }]\n      })\n    }\n    let nft = contract;\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n    const account = accounts[0]\n    const meta = await nft.methods.tokenURI(this.props.match.params.id).call()\n    let hash = meta.split('/');\n    this.setState({ hash: hash[hash.length - 1] });\n    let isEncrypt\n    axios.get(meta).then(res => {\n      let data = res.data;\n      console.log(data);\n      let bouns;\n      let fileAddr;\n      let fileType = data.attributes[2].value\n      for (let i = 0; i < data.attributes.length; i++) {\n        if (data.attributes[i].trait_type === 'bonusFee') {\n          bouns = data.attributes[i].value;\n        }\n        if (data.attributes[i].trait_type === \"File Address\") {\n          fileAddr = data.attributes[i].value;\n        }\n        if (data.attributes[i].trait_type === \"Encrypted\") {\n          if (data.attributes[i].value === \"FALSE\") {\n            isEncrypt = false\n          } else {\n            isEncrypt = true\n          }\n        }\n      }\n      this.setState({\n        Name: data.name,\n        Description: data.description,\n        BonusFee: bouns,\n        Cover: data.image,\n        fileType: fileType,\n        dataUrl: fileAddr,\n        isEncrypt: isEncrypt\n      })\n    });\n    const price = await nft.methods.getShillPriceByNFTId(this.props.match.params.id).call()\n    const token_addr = await nft.methods.getTokenAddrByNFTId(this.props.match.params.id).call()\n\n    this.setState({\n      price: price,\n      tokenAddr: token_addr\n    });\n    if (token_addr == '0x0000000000000000000000000000000000000000') {\n      var price_with_decimal = price / (10 ** 18)\n      price_with_decimal = price_with_decimal + \" MATIC\"\n      this.setState({\n        priceString: price_with_decimal,\n        approved: true\n      })\n    } else {\n      const token_contract = new web3.eth.Contract(abi, token_addr)\n      const decimals = await token_contract.methods.decimals().call()\n      const token_symbol = await token_contract.methods.symbol().call()\n      var price_with_decimal = price / (10 ** decimals)\n      price_with_decimal = price_with_decimal + \" \" + token_symbol\n      this.setState({ priceString: price_with_decimal });\n      const approved_amount = await token_contract.methods.allowance(account, this.state.spark).call()\n      if (approved_amount >= price) {\n        this.setState({\n          approved: true\n        })\n      } else {\n        this.setState({\n          approved: false\n        })\n      }\n    }\n\n    const leafUrl = this.backend + '/api/v1/nft/info?nft_id=' + this.props.match.params.id\n    try {\n      const res = await axios.get(leafUrl)\n      var children_num = res.data.children_count\n      var remain_shill_times = res.data.max_shill_times - res.data.shill_times\n      var max_shill_times = res.data.max_shill_times\n      this.setState({\n        remainShillTimes: remain_shill_times,\n        maxShillTimes: max_shill_times\n      })\n      if (res.data.suggest_next_nft === this.props.match.params.id) {\n        this.setState({\n          childrenNum: children_num,\n          recommendNFT: res.data.suggest_next_nft,\n          showRecommend: false,\n        })\n      } else if (res.data.suggest_next_nft === '0') {\n        this.setState({\n          childrenNum: children_num,\n          recommendNFT: res.data.suggest_next_nft,\n          showRecommend: false\n        })\n      } else {\n        this.setState({\n          childrenNum: children_num,\n          recommendNFT: res.data.suggest_next_nft,\n          showRecommend: true\n        })\n      }\n    } catch (error) {\n      if (error.response === undefined) {\n        alert('服务器未响应')\n        return;\n      }\n      console.log(error.response);\n      if (error.response.status === 400 && error.response.data.message.includes(\"children not found\")) {\n        console.debug(\"no children\")\n      } else {\n        alert('获取nft子节点情况页面失败(' + error + ')')\n      }\n    } finally {\n      this.setState({\n        loadItem: false\n      })\n    }\n  \n    \n    \n  }\n\n  // downloadIPFS = async (event) => {\n  //   // const Method = 'GET';\n  //   // let obj = this;\n  //   // let url = \"\";\n  //   // let dataHash = this.state.dataUrl\n  //   this.finishDownload();\n  // }\n\n  downloadIPFS = async (event) => {\n    let obj = this;\n    // Https://gateway.pinata.cloud/ipfs/QmTzKYhngmHXN1NLydV27cWMaTJPbWPFy1nYNjJadvoHmC\n    let dataSplits = this.state.dataUrl.split('/');\n    var dataHash = dataSplits[dataSplits.length - 1]\n    var dataUrl = this.gateway + dataHash\n    this.setState({\n      showProgress: true\n    })\n\n    var open_config = {\n      url: dataUrl, //your url\n      method: 'GET',\n      responseType: 'blob', // important\n      onDownloadProgress(progress) {\n        var percentage = Math.round(progress.loaded / progress.total * 100)\n        obj.setState({\n          percentage: percentage\n        })\n      }\n    };\n    try{\n      const response = await axios(open_config)\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.style.display = 'none';\n      // text/plain application/pdf\n      var suffix = '.' + obj.state.fileType;\n      var fileName = this.state.Name + suffix\n      link.download = fileName\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n      this.setState({ showProgress: false })\n      // console.log('set close')\n    } catch (error) {\n      this.setState({ showProgress: false })\n      alert(\"下载失败：\" + error);\n    }\n    \n\n    // this.setState({ onLoading: false })\n  }\n\n  shill = async(event) => {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    let nft = contract;\n    var gasPrice = await web3.eth.getGasPrice()\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n    let obj = this\n\n    this.setState({ onLoading: true });\n    if (this.state.tokenAddr == '0x0000000000000000000000000000000000000000'){\n      nft.methods.acceptShill(this.props.match.params.id).send({\n        from: account,\n        value: this.state.price,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          alert('交易已上链')\n          obj.setState({\n            onLoading: false,\n            onSale: true\n          });\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false,\n          })\n          alert(`似乎遇到了些小问题： ${error}`)\n        })\n    }else {\n      nft.methods.acceptShill(this.props.match.params.id).send({\n        from: account,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          alert('交易已上链')\n          obj.setState({\n            onLoading: false,\n            onSale: true\n          });\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false,\n          })\n          alert(`似乎遇到了些小问题： ${error}`)\n        })\n    }\n    \n  }\n\n  approve = async (event) => {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    this.setState({ onLoading: true });\n    \n    let obj = this\n    // const price = await contract.methods.getShillPriceByNFTId(this.props.match.params.id).call()\n    // console.debug(price)\n    const price = this.state.price.toString()\n    const token_contract = new web3.eth.Contract(abi, this.state.tokenAddr)\n    var gasPrice = await web3.eth.getGasPrice()\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n    token_contract.methods.approve(this.state.spark, price).send({\n      from: account,\n      gasPrice: new_gas_price\n    })\n      .on('receipt', function (receipt) {\n        alert('交易已上链')\n        obj.setState({\n          onLoading: false,\n          approved: true\n        });\n      })\n      .on('error', function (error) {\n        obj.setState({\n          onLoading: false,\n        })\n        alert(`似乎遇到了些小问题： ${error}`)\n      })\n    \n  }\n  \n  loadLoadingState = () => {\n    this.setState({onloading: true});\n    \n  }\n\n  handleClickLink = (event) => {\n    var new_url = '/#/NFT/Spark/' + this.state.recommendNFT\n    window.open(new_url)\n  }\n\n  render() {\n    const { classes } = this.props\n    const showBtn = () => {\n      if(this.state.showRecommend){\n        return(\n          <div>\n            {this.state.isEncrypt ? (\n              <Grid container justifyContent=\"space-around\" >\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" className={classes.btnMain} disabled>\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                    <font size=\"4\"> 下 载 </font>\n                  </Typography>\n                </Button>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '2rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} disabled>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\">🔥   </font >&nbsp;  <font size=\"3\">铸造  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            ) : (\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" className={classes.btnMain} onClick={this.downloadIPFS}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                      <font size=\"4\"> 下 载 </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '2rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} disabled>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\">🔥   </font >&nbsp;  <font size=\"3\">铸造  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            )}\n          </div>\n        );\n      } else if (!this.state.approved){\n        return (\n          <div>\n            {this.state.isEncrypt ? (\n              <Grid container justifyContent=\"space-around\" >\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} disabled>\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                    <font size=\"4\"> 下 载 </font>\n                  </Typography>\n                </Button>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} onClick={this.approve}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\"></font>&nbsp;  <font size=\"3\">授权合约  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            ) : (\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} onClick={this.downloadIPFS}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                      <font size=\"4\"> 下载 </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} onClick={this.approve}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\"></font>&nbsp;  <font size=\"3\">授权合约  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            )}\n          </div>\n        );\n      } else {\n        return (\n          <div>\n            {this.state.isEncrypt ? (\n              <Grid container justifyContent=\"space-around\" >\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} disabled>\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                    <font size=\"4\"> 下 载 </font>\n                  </Typography>\n                </Button>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} onClick={this.shill}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\">🔥   </font>&nbsp;  <font size=\"3\">铸造  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            ) : (\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} onClick={this.downloadIPFS}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\n                      <font size=\"4\"> 下 载 </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n                <Grid item>\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} onClick={this.shill}>\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\n                      <font size=\"4\">🔥   </font>&nbsp;  <font size=\"3\">铸造  </font>\n                    </Typography>\n                  </Button>\n                </Grid>\n              </Grid>\n            )}\n          </div>\n        );\n      }\n    }\n\n    if (this.state.onLoading) {\n      return (\n        <div>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ marginLeft: '35%', marginTop: '10%' }}>\n              <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    } else if (this.state.showProgress) {\n      return (\n        <div>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40 }}>\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\n                <b>正在下载文件</b>\n              </Typography>\n            </div>\n            <div style={{ textAlign: 'center', marginTop: '10%' }}>\n              <Progress type=\"circle\" percent={this.state.percentage} width={200} />\n            </div>\n\n          </ThemeProvider>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n          </ThemeProvider>\n          <main>\n\n            <Container component=\"main\" className={classes.container}>\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"flex-start\">\n                <Grid>\n                  <Button\n                    startIcon={<ArrowBackIosOutlinedIcon style={{ fontSize: '2rem' }} />}\n                    href='/#/collections'\n                    style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\n                  >\n                    回到我的收藏馆\n                  </Button>\n                </Grid>\n                <Grid xs={9}></Grid>\n              </Grid>\n\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"center\" xs={12}>\n                <Typography color=\"inherit\" noWrap className={classes.title}>\n                  🔥 NFT 🔥\n                </Typography>\n              </Grid>\n\n              <div className={classes.paper}>\n                {this.state.loadItem ? (\n                  <Grid container spacing= {5} className={classes.content}>\n                    <Grid item>\n                      <Skeleton variant=\"rect\" width={300} height={500} style={{ width: 370,marginLeft: 50, marginBottom: 50 }} />\n                    </Grid>\n                    <Grid item style={{ marginLeft: '5%' }}>\n                      <Skeleton animation=\"wave\" variant=\"text\" width={200} height={30} />\n                      <Skeleton animation=\"wave\" variant=\"text\" width={400} height={70} />\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={500} height={300} style={{ marginBottom: 50 }} />\n                    </Grid>\n                  </Grid>\n                ) : (\n                    <Grid container direction=\"row\" justifyContent=\"space-between\" className={classes.content}>\n                      {/* <Grid xs={2}></Grid> */}\n                      <Grid item style={{ maxWidth: 200}}>\n                        <Paper className={classes.imagePapaer}>\n                          <img className={classes.imageStyle} src={this.state.Cover}></img>\n                        </Paper>\n                      </Grid>\n                      <Grid xs={2}></Grid>\n                      {/* <Grid xs={1}></Grid> */}\n                      <Grid item xs className={classes.content2} >\n                        <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\n                          #{this.props.match.params.id}\n                        </Typography>\n                        <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34, marginTop: '2%' }}>\n                          <b>{this.state.Name}</b>\n                        </Typography>\n                        <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\n                          {this.state.Description}\n                        </Typography>\n                        <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '100%', fontSize: 24 }}>\n                          点火价格: {this.state.priceString}\n                        </Typography>\n                        <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 18 }}>\n                          最大分享次数: {this.state.maxShillTimes} 次\n                        </Typography>\n                        <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 18 }}>\n                          剩余分享次数: {this.state.remainShillTimes} 次\n                        </Typography>\n                        {this.state.isEncrypt?\n                        (\n                          <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 16 }}>\n                            加密作品\n                          </Typography>\n                        ):(\n                          <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 16 }}>\n                            开源作品\n                          </Typography>\n                        )}\n                        {showBtn()}\n                      </Grid>\n\n                    </Grid>\n                ) }\n                {/* <Grid container direction=\"column\" justifyContent=\"center\" alignItems=\"center\"> */}\n                \n                <br /><br /><br /><br />\n                {this.state.showRecommend ? (\n                  <Grid>\n                    <Typography variant=\"h4\" gutterBottom >\n                      此NFT的子节点已经售完，我们给您推荐了其他还能购买的节点：\n                    </Typography>\n                    <Link onClick={this.handleClickLink} style={{ fontSize: 20, textDecoration: 'underline' }}>\n                      {window.location.host + '/#/NFT/Spark/' + this.state.recommendNFT}\n                    </Link>\n                  </Grid>\n                ) : (\n                  <div></div>\n                )}\n              </div>\n\n              <br /><br />\n            </Container>\n          </main>\n        </div>\n      );\n    }\n    }\n  \n}\n\nexport default withStyles(styles, { withTheme: true })(NFTSpark);","import './App.css';\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport TopBar from './TopBar';\n\nconst styles = theme => ({\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  titleFont: {\n    fontFamily: 'Teko',\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  btnMain: {\n    // marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    borderColor: '#e3f2fd',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  btnSecond: {\n    // marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderColor: '#03A9F4',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n      width: 95\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(7),\n    maxWidth: '150%',\n    \n  },\n\n  content: {\n    fontFamily: 'Teko',\n    marginTop: 20,\n    lineHeight: 1.5,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n    },\n  },\n\n  shouldKnow: {\n    fontFamily: 'Teko', \n    textAlign: 'center',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 40,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 40,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 60,\n    },\n  },\n  // container: {\n  //   maxWidth: 1000\n  // }\n});\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#FDFEFE',\n    },\n    secondary: {\n      main: '#2196f3',\n    }\n  },\n});\n\nclass IntroPublish extends Component {\n  render() {\n    const { classes } = this.props\n    return (\n      <div>\n\n        <ThemeProvider theme={theme}>\n          <TopBar />\n          <Container component=\"main\" className={classes.container}>\n            <div className={classes.paper}>\n              <Typography color=\"inherit\" noWrap className={classes.shouldKnow}>\n                <b>发布须知</b>\n              </Typography>\n              <Typography variant=\"h4\" paragraph className={classes.content}>\n                在去发布您的作品之前，您需要了解以下信息，它们将有助于您了解完整的发布流程：\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>1.</b> 您的作品将被存储在IPFS（InterPlanetary File System）中，而存储地址将被记录在以太坊上，与您的NFT绑定在一起\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>2.</b> 您可以选择是将您的作品开源得保存在IPFS上，或者加密保存在IPFS上。针对加密的作品，只有持有您发行的NFT的读者才能访问。 <br />\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>3.</b> 如果您选择加密保存在IPFS上，您需要在将作品基本信息上传到链上后，再设置作品的地址。这个过程我们会引导您完成，请勿担心。 <br />\n              </Typography>\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\n                <b>4.</b> 当您将作品发布在我们平台时，我们默认您会支持二次创作，处于您宣传网络中的读者有权将他们持有的NFT对应的地址替换为他们自己的二次创作作品。 <br />\n              </Typography>\n              <Grid container justifyContent=\"center\" style={{ fontFamily: 'Teko', marginTop: 70 }}>\n                <Grid item xs={4} >\n                  <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnMain} href='/#/encryptedPublish'>\n                    <b>加密发布</b>\n                  </Button>\n                </Grid>\n                <Grid item xs={3} >\n                  <Button size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} href='/#/publish'>\n                    <b>开源发布</b>\n                  </Button>\n                </Grid>\n              </Grid>\n            </div>\n          </Container>\n        </ThemeProvider>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(IntroPublish);","import React, { Component } from 'react';\nimport './App.css';\nimport Button from '@material-ui/core/Button';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport { blue } from '@material-ui/core/colors';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport { Alert, message } from 'antd';\nimport { InboxOutlined } from '@ant-design/icons';\nimport Dragger from 'antd/lib/upload/Dragger';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport { Input, InputNumber, Select } from 'antd';\nimport 'antd/dist/antd.css';\nimport TopBar from './TopBar';\nimport axios from 'axios';\nimport contract from './contract';\nimport web3 from './web3';\nimport ReactLoading from 'react-loading';\nimport Paper from '@material-ui/core/Paper';\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Link } from \"@material-ui/core\";\nimport * as tokens from './tokens_list.json';\n\nconst {\n  pinata_api_key,\n  pinata_secret_api_key,\n} = require('./project.secret');\nconst FormData = require('form-data');\nconst bs58 = require('bs58');\nvar CryptoJS = require(\"crypto-js\");\nconst { Option } = Select;\nconst abi = require('erc-20-abi')\n\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#FDFEFE',\n    },\n  },\n});\n\n\nconst styles = theme => ({\n  main: {\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: '60%'\n    },\n    [theme.breakpoints.up('sm')]: {\n      width: 500\n    },\n  },\n  titleCon: {\n    marginTop: 50,\n    fontFamily: 'Ubuntu',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 30\n    },\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 40\n    },\n  },\n  titlePub: {\n    marginTop: \"3%\",\n    fontFamily: 'Ubuntu',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 30\n    },\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 40\n    },\n  },\n  paperImg: {\n\n    backgroundColor: '#EFEBE9',\n    width: 330,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      marginLeft: '5%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      marginLeft: '30%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      marginLeft: '30%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      marginLeft: '40%',\n      marginTop: 30,\n    },\n    [theme.breakpoints.up('xl')]: {\n      marginLeft: '45%',\n      marginTop: 30,\n    },\n  },\n  btnPub: {\n    margin: theme.spacing(1),\n    borderRadius: 25,\n    color: '#FFFFFF',\n    backgroundColor: '#2196f3',\n    marginBottom: 20,\n    marginTop: 40,\n    height: 45,\n    minWidth: 200,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      width: '50%',\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 16,\n      width: '30%',\n    },\n    [theme.breakpoints.up('md')]: {\n      fontSize: 16,\n      width: '30%',\n    },\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: blue[500],\n    width: 60,\n    height: 60\n  },\n  form: {\n    width: '150%',\n    marginTop: theme.spacing(7),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  fileBtn: {\n    padding: '10px 30px 10px 30px',\n    background: '#66C1E4',\n    border: 'none',\n    color: '#FFF',\n    boxShadow: '1px 1px 1px #4C6E91',\n  },\n  button: {\n    margin: theme.spacing(1),\n    fontSize: 20,\n    borderRadius: 25,\n    color: '#FFFFFF',\n    backgroundColor: '#2196f3'\n  },\n  input: {\n    height: 40,\n    borderRadius: 5,\n  },\n  inputNum: {\n    height: 40,\n    borderRadius: 5,\n    width: '100%',\n    fontSize: 20,\n  }\n});\n\n\nclass EncryptedPublish extends Component {\n  backend = 'https://api.sparklink.io' //http://192.168.0.64:3000\n  state = {\n    name: '',\n    bonusFee: 0,\n    price: 0,\n    buffer: null,\n    file: null,\n    ipfsHashCover: '',\n    ipfsMeta: '',\n    fileType: '',\n    fileIpfs: '',\n    description: '',\n    shareTimes: 0,\n    onLoading: false,\n    rootNFTId: '',\n    issueId: '',\n    allowSubmitPDF: false,\n    usedAcc: '',\n    sig: '',\n    finished: false,\n    open: false,\n    coverURL: '',\n    jumped: false,\n    data: [],\n    token_addr: null,\n    token_symbol: 'MATIC',\n    decimal: 0,\n  };\n\n  async componentDidMount() {\n    if (!window.ethereum) {\n      alert(\"请先安装metamask\");\n      window.location.href = '/#/introPublish';\n      return;\n    }\n\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n    if (chainId !== '0x89') {\n      alert(\"请切换至Polygon 主网络\");\n      await window.ethereum.request({\n        method: 'wallet_switchEthereumChain',\n        params: [{\n          chainId: '0x89'\n        }]\n      })\n    }\n  }\n\n  handleGetPubName = (event) => {\n    this.setState({\n      name: event.target.value,\n    })\n  }\n\n  handleGetBonusFee = (value) => {\n    this.setState({\n      bonusFee: value,\n    })\n  }\n\n  handleGetPrice = (value) => {\n    this.setState({\n      price: value,\n    })\n  }\n\n  handleGetShareTimes = (value) => {\n    this.setState({\n      shareTimes: value,\n    })\n  }\n\n  handleGetDescription = (e) => {\n    this.setState({\n      description: e.target.value,\n    })\n  }\n\n  handleGetNFTId = (value) => {\n    this.setState({\n      rootNFTId: String(value),\n    })\n  }\n\n  handleClose = (e) => {\n    this.setState({\n      open: false,\n    })\n  }\n\n  handleClickOpen = (e) => {\n    this.setState({\n      open: true,\n    })\n  }\n\n  handleSearch = async (value) => {\n    if (value) {\n      var value = value.toLowerCase()\n      var tokens_list = tokens.tokens;\n      var matched_data = []\n      let reg = new RegExp(value)\n      for (let token of tokens_list) {\n        var symbol_lower_case = token.symbol.toLowerCase()\n        var showed_text = `\\\"${token.symbol}\\\"` + \"   \" + token.address\n        var info = {\n          value: token.address,\n          text: showed_text\n        }\n        if (reg.test(symbol_lower_case) && !matched_data.includes(info)) {\n          matched_data.push(info)\n        }\n      }\n      if (value.includes('0x') && value.length == 42) {\n        var info = {\n          value: value,\n          text: value\n        }\n        matched_data = [info]\n      }\n      this.setState({\n        data: matched_data\n      })\n    } else {\n      this.setState({ data: [] });\n    }\n  };\n\n  handleSelectChange = async (value) => {\n    var tokens_list = tokens.tokens;\n    let address\n    let token_symbol\n    let token_decimal\n    for (let token of tokens_list) {\n      if (value === token.address) {\n        address = value\n        token_symbol = token.symbol\n        token_decimal = token.decimals\n      }\n    }\n    if (token_symbol == undefined) {\n      \n      try{\n        const token_contract = new web3.eth.Contract(abi, value)\n        token_symbol = await token_contract.methods.symbol().call()\n        token_decimal = await token_contract.methods.decimals().call()\n        address = value\n      } catch(error){\n        message.error(\"你提供的地址不是erc20代币，请重新输入\")\n      }\n      \n    }\n    // console.debug(token_symbol)\n    this.setState({\n      token_addr: address,\n      token_symbol: token_symbol,\n      decimal: token_decimal\n    })\n  };\n\n  jump = async (event) => {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    this.setState({\n      usedAcc: account\n    })\n    \n    const owner = await contract.methods.ownerOf(this.state.rootNFTId).call()\n    var issueId = await contract.methods.getIssueIdByNFTId(this.state.rootNFTId).call()\n    \n    var bonus = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\n    \n    if (account == owner.toLowerCase()) {\n      this.setState({\n        onLoading: false,\n        allowSubmitPDF: true,\n        jumped: true,\n        bonusFee: bonus\n      })\n    } else {\n      alert('您并不是此NFT的持有者')\n    }\n  }\n\n  submit = async (event) => {\n    /*TODO: call smart contract publish() and wait for publish success event\n     * then call backend to get a secret key. Then encrypt the pdf file and upload it to IPFS\n     * Finally, form a new metadata json file and send its ipfs hash to backend and publish it\n    */\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    this.setState({\n      usedAcc: account\n    })\n    let obj = this\n    if (this.state.price === 0 || this.state.bonusFee === 0 || this.state.shareTimes === 0 || this.state.token_addr === null ) {\n      alert(\"你有信息尚未填写\")\n    } else {\n\n      this.setState({\n        onLoading: true\n      })\n      var price_with_decimal = this.state.price * (10 ** this.state.decimal)\n      price_with_decimal = price_with_decimal.toString()\n      var ipfsToContract = '0x0000000000000000000000000000000000000000000000000000000000000000'\n      console.debug('price_with_decimal: ', price_with_decimal)\n      var gasPrice = await web3.eth.getGasPrice()\n      var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n      contract.methods.publish(price_with_decimal, this.state.bonusFee, this.state.shareTimes, ipfsToContract, this.state.token_addr).send({\n        from: this.state.usedAcc,\n        gasPrice: new_gas_price\n      })\n        .on('receipt', function (receipt) {\n          console.log(receipt)\n          var publish_event = receipt.events.Publish\n          var returned_values = publish_event.returnValues\n          var root_nft_id = String(returned_values.rootNFTId)\n          console.debug(typeof root_nft_id)\n          var issue_id = returned_values.issue_id\n          obj.setState({\n            onLoading: false,\n            rootNFTId: root_nft_id,\n            issueId: issue_id,\n            allowSubmitPDF: true\n          })\n          alert(\"作品基本信息已提交成功\");\n        })\n        .on('error', function (error) {\n          obj.setState({\n            onLoading: false,\n          })\n          if (error.includes('not mined')) {\n            alert('交易已提交，当前交易较拥堵，请稍等后去我的收藏中查看')\n          }else{\n            alert(`似乎遇到了些小问题： ${error}`)\n          }\n          \n        })\n\n    }\n    \n  }\n\n  checkDetail = async (event) => {\n    var new_url = '/#/NFT/' + this.state.rootNFTId\n    window.open(new_url, '_self')\n  }\n\n  submitWork = async () => {\n    if (this.state.ipfsHashCover === '' || this.state.fileIpfs === '' ) {\n      alert(\"你有文件尚未填写\")\n    } else {\n      \n      var img_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.ipfsHashCover\n      this.setState({\n        coverURL: img_url\n      })\n      console.debug(\"coverURL: \", this.state.coverURL)\n      var trimmed_des = this.state.description.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \" \");\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n      const account = accounts[0];\n      if (account !== this.state.usedAcc){\n        alert('账户发生变化，请切换回原账户')\n        return\n      }\n      var file_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.fileIpfs\n      var JSONBody = {\n        \"name\": this.state.name,\n        \"description\": trimmed_des,\n        \"image\": this.state.coverURL,\n        \"attributes\": [\n          {\n            \"display_type\": \"boost_percentage\",\n            \"trait_type\": \"Bonuse Percentage\",\n            \"value\": this.state.bonusFee\n          },\n          {\n            \"trait_type\": \"File Address\",\n            \"value\": file_url\n          },\n          {\n            \"value\": this.state.fileType\n          },\n          {\n            \"trait_type\": \"Encrypted\",\n            \"value\": \"TRUE\"\n          }\n        ]\n      }\n      console.debug(JSONBody)\n      const url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`\n      let obj = this\n      this.setState({\n        onLoading: true\n      })\n\n      try{\n        const response = await axios.post(url, JSONBody, {\n          headers: {\n            pinata_api_key: pinata_api_key,\n            pinata_secret_api_key: pinata_secret_api_key\n          },\n        })\n        console.debug(\"metadata: \", response.data.IpfsHash)\n        const bytes = bs58.decode(response.data.IpfsHash)\n        const bytesToContract = bytes.toString('hex').substring(4,);\n        console.log(bytesToContract)\n        console.log(response.data.IpfsHash)\n        this.setState({\n          ipfsMeta: bytesToContract\n        })\n\n        var ipfsToContract = '0x' + bytesToContract\n\n        var gasPrice = await web3.eth.getGasPrice()\n        var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\n\n        contract.methods.setURI(obj.state.rootNFTId, ipfsToContract).send({\n          from: obj.state.usedAcc,\n          gasPrice: new_gas_price\n        })\n          .on('receipt', function (receipt){\n            console.debug(receipt.events.SetURI)\n            alert(\"已经成功发布作品\");\n            obj.setState({\n              allowSubmitPDF: false,\n              finished: true,\n              onLoading: false\n            })\n          })\n          .on('error', function (error) {\n            obj.setState({\n              onLoading: false\n            })\n            alert(`似乎遇到了些小问题： ${error}`);\n          })\n        \n      } catch (error) {\n        alert(`似乎遇到了些小问题： ${error}`);\n      }\n      \n    }\n  }\n\n  render() {\n    const { classes } = this.props\n    let obj = this\n    const { TextArea } = Input;\n    const options = this.state.data.map(d => <Option key={d.value}>{d.text}</Option>);\n    const prop = {\n      name: 'file',\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n      headers: {\n        pinata_api_key: pinata_api_key,\n        pinata_secret_api_key: pinata_secret_api_key\n      },\n      data: this.state.buffer,\n      beforeUpload: file => {\n        return new Promise((resolve, reject) => {\n          try {\n            const reader = new FileReader()\n            reader.readAsArrayBuffer(file)\n            reader.onload = (e) => {\n              var b = e.target.result\n              let params = new FormData()\n              params.append('file', b)\n              this.setState({\n                buffer: params\n              })\n            }\n            resolve()\n          } catch (e) {\n            message.error('Read file error')\n            reject()\n          }\n        })\n      },\n      async onChange(info) {\n        const { status } = info.file;\n        // text/plain image/jpeg application/pdf\n        if (status === 'done') {\n          message.success(`${info.file.name} file uploaded successfully.`);\n          obj.setState({\n            ipfsHashCover: info.file.response.IpfsHash\n          })\n\n        } else if (status === 'error') {\n          message.error(`${info.file.name} file upload failed.`);\n        }\n      },\n      onDrop(e) {\n        message.error(`Only image file supported`);\n        console.log('Dropped files', e.dataTransfer.files);\n      },\n    };\n\n    const propFile = {\n      name: 'file',\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\n      headers: {\n        pinata_api_key: pinata_api_key,\n        pinata_secret_api_key: pinata_secret_api_key\n      },\n      beforeUpload: file => {\n        return new Promise(async (resolve, reject) => {\n          try {\n            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n            const signer = accounts[0];\n            var message = {\n              account: signer,\n              nft_id: obj.state.rootNFTId\n            };\n            const sig = await web3.eth.personal.sign(JSON.stringify(message), signer)\n            console.debug(sig)\n            var payload = {\n              \"nft_id\": obj.state.rootNFTId,\n              \"account\": signer,\n              \"signature\": sig\n            }\n            var payload_str = JSON.stringify(payload)\n            console.log(payload_str);\n            var req_key_url = this.backend + '/api/v1/key/claim'\n            try {\n              const res = await axios.post(req_key_url, payload_str, {\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              })\n              var secret_key = res.data.key//res.data.key\n              console.debug(secret_key)\n              // if (file.type === 'text/plain') {\n              const reader = new FileReader()\n              reader.readAsArrayBuffer(file)\n              reader.onload = (e) => {\n                var b = e.target.result\n                var wordArray = CryptoJS.lib.WordArray.create(b);\n                const str = CryptoJS.enc.Hex.stringify(wordArray);\n                var cipher_text = CryptoJS.AES.encrypt(str, secret_key).toString();\n                var myblob = new Blob([cipher_text]);\n                resolve(myblob)\n              }\n              \n            } catch (error) {\n              if (error.response.status == 400) {\n                if (error.response.data.message.includes(\"signature invalid\")) {\n                  alert(\"您的签名有误，请查看签名账号是否正确\")\n                } else if (error.response.data.message.includes(\"param invalid\")) {\n                  alert(\"参数错误\")\n                } else if (error.response.data.message.includes(\"not owned\")) {\n                  alert(\"您并不拥有此nft\")\n                } else if (error.response.data.message.includes(\"not found\")) {\n                  alert(\"此nft还未生成\")\n                } \n              } else {\n                alert('请求文件加密密钥失败')\n              }\n            }\n\n\n          } catch (e) {\n            console.log(e)\n            alert('Read file error')\n            reject()\n          }\n        })\n      },\n      onChange(info) {\n        const { status } = info.file;\n        if (status === 'done') {\n          var file_type = info.file.name.split('\\.')\n          var file_suffix = file_type[file_type.length - 1]\n          obj.setState({\n            fileIpfs: info.file.response.IpfsHash,\n            fileType: file_suffix\n          })\n          console.debug(\"encrypted file hash: \", info.file.response.IpfsHash)\n          message.success(`${info.file.name} file uploaded successfully.`);\n        }\n\n      },\n      onDrop(e) {\n        console.log('Dropped files', e.dataTransfer.files);\n      },\n    };\n\n    if (this.state.onLoading) {\n      return (\n        <div>\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ marginLeft: '35%', marginTop: '10%' }}>\n              <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    } else if (this.state.allowSubmitPDF) {\n      \n      return (\n        <div>\n          <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\n           \n            <div className={classes.paper}>\n              <Typography className={classes.titlePub}>\n                <b>上传作品文件</b>\n              </Typography>\n              <form className={classes.form} noValidate>\n                {this.state.jumped ? (\n                  <div>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\n                      <Input\n                        placeholder=\"作品名称\"\n                        allowClear\n                        id=\"pubName\"\n                        onChange={this.handleGetPubName}\n                        value={this.state.name}\n                        className={classes.input}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\n                      <TextArea\n                        rows={4}\n                        id=\"Description\"\n                        onChange={this.handleGetDescription}\n                      />\n                    </Grid>\n                  </div>\n                ) : (\n                  <div>\n\n                  </div>\n                )}\n                <label style={{ fontSize: 18, marginTop: 50 }}>封面图片 *</label>\n                <p style={{ fontSize: 12 }}>请在下方区域上传您的封面图片 <br />\n                  封面文件支持这些格式：JPEG/JPG/PNG</p>\n                <Dragger {...prop} style={{ width: '100%', minHeight: 100 }} id=\"Uploader\" accept=\".png, .jpg, .jpeg\" >\n                  <p className=\"ant-upload-drag-icon\">\n                    <InboxOutlined />\n                  </p>\n                  <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n                  <p className=\"ant-upload-hint\">\n                    支持单个文件的上传，支持多种类型文件的上传\n                  </p>\n                </Dragger>\n\n                <label style={{ fontSize: 18, marginTop: 50 }}>作品文件 *</label>\n                <p style={{ fontSize: 12 }}>请在下方区域上传您的作品文件 </p>\n                <Dragger {...propFile} style={{ width: '100%', minHeight: 100 }} id=\"Uploader2\">\n                  <p className=\"ant-upload-drag-icon\">\n                    <InboxOutlined />\n                  </p>\n                  <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\n                  <p className=\"ant-upload-hint\">\n                    支持单个文件的上传和多个文件的上传，支持多种类型文件的上传\n                  </p>\n                </Dragger>\n                <div style={{textAlign: 'center'}}>\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<CloudUploadIcon />}\n                    className={classes.btnPub}\n                    onClick={this.submitWork}\n                  >\n                    发布作品\n                  </Button>\n                </div>\n              </form>\n            </div>\n          </Container>\n          \n        </div>\n      );\n\n    } else if (this.state.finished) {\n      return (\n        <div>\n\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <div style={{ textAlign: 'center' }}>\n              <Typography className={classes.titleCon}>\n                <b> 🎉 恭喜您发布成功</b>\n              </Typography>\n\n              <Paper className={classes.paperImg}>\n                <img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\n              </Paper>\n              <Typography variant=\"h4\" style={{ marginTop: 20, fontFamily: 'Ubuntu' }}>\n                <b>您获得的NFT是： #{this.state.rootNFTId}</b>\n              </Typography>\n\n              <Button\n                variant=\"contained\"\n                className={classes.button}\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\n                onClick={this.checkDetail}\n              >\n                查看详情\n              </Button>\n            </div>\n          </ThemeProvider>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n\n          <ThemeProvider theme={theme}>\n            <TopBar />\n            <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\n              <div className={classes.paper}>\n                <Typography className={classes.titlePub}>\n                  <b>发布作品信息</b>\n                </Typography>\n                <form className={classes.form} noValidate>\n                  <Grid container spacing={2}>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\n                      <Input\n                        placeholder=\"作品名称\"\n                        allowClear\n                        id=\"pubName\"\n                        onChange={this.handleGetPubName}\n                        value={this.state.name}\n                        className={classes.input}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>收益比例 *</label>\n                      <p style={{ fontSize: 14 }}>当您的作品被他人分享并获利时，您希望从他的分享利润中获得多少比例的收益</p>\n                      <InputNumber\n                        id=\"bonusFee\"\n                        defaultValue={0}\n                        min={0}\n                        max={100}\n                        formatter={value => `${value}%`}\n                        parser={value => value.replace('%', '')}\n                        onChange={this.handleGetBonusFee}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>通行代币 *</label>\n                      <p style={{ fontSize: 14 }}>请选择您支持的支付货币 (输入代币符号或地址)</p>\n                      <Select\n                        showSearch\n                        value={this.state.token_addr}\n                        placeholder={\"请输入代币符号或地址\"}\n                        // className={classes.input}\n                        style={{ width: \"100%\" }}\n                        size=\"large\"\n                        defaultActiveFirstOption={false}\n                        showArrow={false}\n                        filterOption={false}\n                        onSearch={this.handleSearch}\n                        onChange={this.handleSelectChange}\n                        notFoundContent={null}\n                      >\n                        {options}\n                      </Select>\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>售卖价格 ({this.state.token_symbol})*</label>\n                      <InputNumber\n                        id=\"price\"\n                        defaultValue={0}\n                        min={0}\n                        onChange={this.handleGetPrice}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>最高分享次数 (MAX： 65535)*</label>\n                      <p style={{ fontSize: 14 }}>您希望每一个帮助您传播的用户最多能够分享多少次？</p>\n                      <InputNumber\n                        id=\"shareTimes\"\n                        defaultValue={0}\n                        min={0}\n                        max={65535}\n                        onChange={this.handleGetShareTimes}\n                        className={classes.inputNum}\n                      />\n                    </Grid>\n                    <Grid item style={{ width: \"100%\" }}>\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\n                      <TextArea\n                        rows={4}\n                        id=\"Description\"\n                        onChange={this.handleGetDescription}\n                      />\n                    </Grid>\n                  </Grid>\n                </form>\n                <Grid container alignItems=\"center\" spacing={4} style={{ marginTop: 20, marginBottom: 50}}>\n                  <Grid item xs style={{ textAlign: 'center' }}>\n                    <Button\n                      variant=\"contained\"\n                      className={classes.button}\n                      startIcon={<CloudUploadIcon />}\n                      style={{ width: 200, height: 50, marginBottom: 20, marginTop: 20 }}\n                      onClick={this.submit}\n                    >\n                      提交信息\n                    </Button>\n                  </Grid>\n                  <Grid item xs style={{textAlign: 'center'}}>\n                    <Link onClick={this.handleClickOpen} style={{ fontSize: 10, textDecoration: 'underline'}}>\n                      已经上传过基本信息？\n                    </Link>\n                  </Grid>\n                </Grid>\n                <Dialog\n                  open={this.state.open}\n                  onClose={this.handleClose}\n                  aria-labelledby=\"form-dialog-title\"\n                >\n                  <DialogTitle id=\"form-dialog-title\">填写 NFT ID</DialogTitle>\n                  <DialogContent>\n                    <DialogContentText>\n                      请在下方区域填写您要绑定内容的 NFT ID\n                    </DialogContentText>\n                    <label style={{ fontSize: 14, marginBottom: 10 }}>NFT ID *</label>\n                    <InputNumber\n                      defaultValue={0}\n                      min={0}\n                      onChange={this.handleGetNFTId}\n                    />\n                  </DialogContent>\n                  <DialogActions>\n                    <Button onClick={this.handleClose} color=\"primary\">\n                      取消\n                    </Button>\n                    <Button variant=\"contained\" onClick={this.jump} color=\"primary\" >\n                      去上传作品\n                    </Button>\n                  </DialogActions>\n                </Dialog>\n              </div>\n            </Container>\n          </ThemeProvider>\n        </div>\n      );\n    }\n\n\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(EncryptedPublish);","import './App.css';\nimport React, { Component } from 'react';\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport TopBar from './TopBar';\n\nconst styles = theme => ({\n  icon: {\n    marginRight: theme.spacing(2),\n  },\n  titleFont: {\n    fontFamily: 'Teko',\n  },\n  btn: {\n    color: '#424949',\n    borderWidth: 2,\n    borderColor: '#e3f2fd',\n    fontSize: 16,\n  },\n  btnMain: {\n    // marginTop: theme.spacing(3),\n    color: '#FFFFFF',\n    borderColor: '#e3f2fd',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  btnSecond: {\n    // marginTop: theme.spacing(3),\n    color: '#03A9F4',\n    borderColor: '#03A9F4',\n    borderWidth: 2,\n    borderRadius: 25,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 5,\n      width: 95\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 10,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 16,\n      width: 150\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n      width: 300,\n      height: 70\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(7),\n    maxWidth: '150%',\n\n  },\n\n  content: {\n    fontFamily: 'Teko',\n    marginTop: 20,\n    lineHeight: 1.5,\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 30,\n    },\n  },\n\n  shouldKnow: {\n    fontFamily: 'Teko',\n    textAlign: 'center',\n    [theme.breakpoints.between('xs', 'sm')]: {\n      fontSize: 16,\n    },\n    [theme.breakpoints.between('sm', 'md')]: {\n      fontSize: 20,\n    },\n    [theme.breakpoints.between('md', 'lg')]: {\n      fontSize: 40,\n    },\n    [theme.breakpoints.between('lg', 'xl')]: {\n      fontSize: 40,\n    },\n    [theme.breakpoints.up('xl')]: {\n      fontSize: 60,\n    },\n  },\n  // container: {\n  //   maxWidth: 1000\n  // }\n});\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#FDFEFE',\n    },\n    secondary: {\n      main: '#2196f3',\n    }\n  },\n});\n\nclass Buy extends Component {\n  render() {\n    const { classes } = this.props\n    return (\n      <div>\n\n        <ThemeProvider theme={theme}>\n          <TopBar />\n          <Container component=\"main\" className={classes.container}>\n            <div className={classes.paper}>\n              <Typography color=\"inherit\" noWrap className={classes.shouldKnow}>\n                <b>敬请期待</b>\n              </Typography>\n            </div>\n          </Container>\n        </ThemeProvider>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(Buy);","import React from 'react';\nimport {HashRouter, Route, Switch} from 'react-router-dom';\n\nimport App from './App';\nimport Publish from './Publish';\nimport NFTInfo from './NFTInfo';\nimport SellSingle from './SellSingle';\nimport BuySingle from './BuySingle';\nimport Collections from './Collections';\nimport Spark from './NFTSpark';\nimport IntroPublish from './IntroPublish';\nimport EncryptedPublish from './EncryptedPublish';\nimport Buy from './Buy';\n\nconst BasicRoute = () => (\n    <HashRouter >\n        <Switch>\n            <Route exact path=\"/\" component={App}/>\n            <Route exact path=\"/introPublish\" component={IntroPublish} />\n            <Route exact path=\"/buy\" component={Buy} />\n            <Route exact path=\"/publish\" component={Publish}/>\n            <Route exact path=\"/encryptedPublish\" component={EncryptedPublish} />\n            <Route exact path=\"/sellSingle/:NFTId\" component={SellSingle} />\n            <Route exact path=\"/buySingle/:NFTId\" component={BuySingle} />\n            <Route exact path=\"/collections\" component={Collections}/>\n            <Route exact path=\"/NFT/:id\" component={NFTInfo} />\n            <Route exact path=\"/NFT/spark/:id\" component={Spark} />\n        </Switch>\n    </HashRouter>\n);\n\n\nexport default BasicRoute;","// import React from 'react';\n// import ReactDOM from 'react-dom';\n// import './index.css';\n// import App from './App';\n// import reportWebVitals from './reportWebVitals';\n\n// ReactDOM.render(\n//   <React.StrictMode>\n//     <App />\n//   </React.StrictMode>,\n//   document.getElementById('root')\n// );\n\n// // If you want to start measuring performance in your app, pass a function\n// // to log results (for example: reportWebVitals(console.log))\n// // or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap/dist/css/bootstrap-theme.css';\nimport Router from './Router';\n\nReactDOM.render(\n  <Router/>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}