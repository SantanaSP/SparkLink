{"version":3,"sources":["project.secret","imgs/books.png","imgs/sparkLink.png","TopBar.js","App.js","serviceWorker.js","web3.js","contract.js","Publish.js","NFTInfo.js","SellSingle.js","BuySingle.js","Collections.js","NFTSpark.js","IntroPublish.js","EncryptedPublish.js","Buy.js","Router.js","index.js"],"names":["TopBar","createTheme","breakpoints","values","xs","sm","md","lg","xl","palette","primary","main","secondary","state","isConnected","userAddress","accountInfo","sleep","ms","a","Promise","resolve","setTimeout","getAccount","window","ethereum","request","method","accounts","account","alert","setState","console","debug","w3","Web3","eth","getAccounts","length","this","substring","classes","props","Toolbar","Grid","container","direction","justifyContent","item","className","titleGrid","Typography","component","color","noWrap","title","src","logo","btnGrid","Button","size","btn","href","target","GithubOutlined","icon","onClick","WalletTwoTone","WalletFilled","Component","withStyles","theme","down","fontSize","up","marginTop","marginBottom","textAlign","minWidth","fontFamily","between","marginLeft","borderColor","width","objectFit","withTheme","App","ThemeProvider","page","Container","paper","style","title2","title3","books","spacing","variant","btnMain","btnSecond","marginRight","titleFont","borderWidth","borderRadius","height","maxWidth","Boolean","location","hostname","match","web3","error","Contract","require","pinata_api_key","pinata_secret_api_key","FormData","bs58","Option","Select","abi","Publish","name","bonusFee","price","buffer","ipfsHashCover","ipfsMeta","fileIpfs","description","shareTimes","onLoading","rootNFTId","usedAcc","sig","fileType","finished","coverURL","data","token_addr","token_symbol","decimal","handleGetPubName","event","value","handleGetBonusFee","handleGetPrice","handleGetShareTimes","handleGetDescription","e","handleSearch","toLowerCase","tokens_list","tokens","matched_data","reg","RegExp","token","symbol_lower_case","symbol","showed_text","address","info","text","test","includes","push","handleSelectChange","token_decimal","decimals","undefined","token_contract","methods","call","message","submit","obj","content","img_url","trimmed_des","replace","file_url","JSONBody","axios","post","headers","response","IpfsHash","bytes","decode","bytesToContract","toString","price_with_decimal","ipfsToContract","getGasPrice","gasPrice","new_gas_price","Math","floor","parseInt","contract","publish","send","from","on","receipt","log","returned_values","events","returnValues","root_nft_id","issue_id","issueId","success","warning","checkDetail","new_url","open","params","chainId","TextArea","Input","options","map","d","prop","action","beforeUpload","file","reject","reader","FileReader","readAsArrayBuffer","onload","b","result","append","onChange","status","onDrop","dataTransfer","files","propFile","file_type","split","file_suffix","spinning","titleCon","Paper","paperImg","button","titlePub","form","noValidate","placeholder","allowClear","id","input","defaultValue","min","max","formatter","parser","inputNum","showSearch","defaultActiveFirstOption","showArrow","filterOption","onSearch","notFoundContent","rows","minHeight","accept","InboxOutlined","startIcon","CloudUploadOutlined","backgroundColor","display","flexDirection","alignItems","avatar","margin","blue","fileBtn","padding","background","border","boxShadow","FileSaver","CryptoJS","NFTInfo","gateway","backend","loading","showDecryptProgress","decryptPercentage","showProgress","percentage","Profit","loadItem","Cover","Name","Description","BonusFee","childrenNum","encrypted","dataUrl","isEncrypt","spark","tokenAddr","tokenSymbol","return","reload","claim","claimProfit","downloadIPFS","dataSplits","dataHash","cipher_config","url","onDownloadProgress","progress","round","loaded","total","ciphertext","signJSON","JSON","stringify","signDataAndDecrypt","open_config","responseType","URL","createObjectURL","Blob","link","document","createElement","suffix","fileName","download","body","appendChild","click","removeChild","revokeObjectURL","signer","json_str","personal","sign","payload","payload_str","req_key_url","res","key","AES","decrypt","plainText","enc","Utf8","wordArray","Hex","parse","BaText","wordArrayToByteArray","blob","saveAs","error_msg","wordToByteArray","word","lengthBefore","addedLength","hasOwnProperty","sigBytes","words","bytesAdded","current_bytes","i","added_info","percent","Uint8Array","ownerOf","owner","utils","toChecksumAddress","getTokenAddrByNFTId","getProfitByNFTId","profit","tokenURI","meta","hash","getIssueIdByNFTId","issue","getRoyaltyFeeByIssueId","royalty","file_hash","request_url","timeout","fileAddr","attributes","trait_type","image","leafUrl","get","then","children_num","children_count","catch","gutterBottom","type","ArrowLeftOutlined","alignContent","cbutton","MoneyCollectOutlined","DollarCircleOutlined","Skeleton","animation","imagePapaer","imageStyle","content2","align","paragraph","cbutton2","DownloadOutlined","FireOutlined","toUrl","host","share","onCopy","copied","IconButton","CopyOutlined","sell_info","SellSingle","ipfsHashMeta","toAddress","NFTId","onSale","currentAcc","handleClickOpen","handleClose","handleGetAddr","handleClickLink","sell","determinePriceAndApprove","metadata","bonus","name_holder","getTransferPriceByNFTId","child_url","showSellBtn","btnSell","disabled","img","imgPaper","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","BuySingle","sparkAddr","priceString","approvedAddr","approved","handleBuy","safeTransferFrom","handleApprove","approve","toUpperCase","getApproved","allowance","buyButton","btnDisable","Collections","cards","isLogin","user_address","viewable","onloading","SkeletoNumber","noNFT","getMetadata","nft","metaDatas","ipfs_link","ipfs_hash_arr","ipfs_hash","getNft","balanceId","checksum_address","renderDescription","balanceOf","nft_number","ids","element","reversed_cards","reverse","_chainId","cardGrid","Array","card","index","Card","CardMedia","cardMedia","CardContent","cardContent","CardActions","showCard","heroContent","paddingTop","paddingBottom","flexGrow","NFTSpark","remainShillTimes","maxShillTimes","recommendNFT","shill","acceptShill","bouns","getShillPriceByNFTId","remain_shill_times","max_shill_times","shill_times","suggest_next_nft","showRecommend","imagePaper","Link","textDecoration","IntroPublish","shouldKnow","lineHeight","EncryptedPublish","allowSubmitPDF","jumped","handleGetNFTId","String","jump","submitWork","setURI","SetURI","nft_id","secret_key","lib","WordArray","create","str","cipher_text","encrypt","myblob","btnPub","Buy","BasicRoute","exact","path","Spark","ReactDOM","render","Router","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.da7c8294.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/project.549d7c78.secret\";","export default __webpack_public_path__ + \"static/media/books.6e483aa8.png\";","export default __webpack_public_path__ + \"static/media/sparkLink.250e0a02.png\";","import React, { Component } from 'react';\r\nimport logo from './imgs/sparkLink.png';\r\nimport './App.css';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { createTheme, withStyles } from '@material-ui/core/styles';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { GithubOutlined, WalletOutlined, WalletTwoTone, WalletFilled} from '@ant-design/icons';\r\nimport Web3 from 'web3';\r\n\r\nconst theme = createTheme({\r\n  breakpoints: {\r\n    values: {\r\n      xs: 0,\r\n      sm: 600,\r\n      md: 900,\r\n      lg: 1200,\r\n      xl: 1536,\r\n    },\r\n  },\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n});\r\n\r\nconst styles = theme => ({\r\n  icon: {\r\n    [theme.breakpoints.down('xl')]: {\r\n      fontSize: 19,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 27,\r\n    },\r\n  },\r\n  titleGrid: {\r\n    marginTop: 25,\r\n    marginBottom: 10,\r\n    textAlign: 'center',\r\n  },\r\n  title: {\r\n    minWidth: 100,\r\n    fontSize: 25,\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 45,\r\n    },\r\n\r\n  },\r\n  btnGrid: {\r\n    // marginTop: 25,\r\n    marginBottom: 10,\r\n    minWidth: 370,\r\n    // backgroundColor: '#e3f2fd',\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginTop: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginTop: 25,\r\n      marginLeft: '20%',\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginTop: 25,\r\n      marginLeft: '50%',\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginTop: 25,\r\n      marginLeft: '60%',\r\n    },\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 15,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 15,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 15,\r\n      width: 100\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 15,\r\n      width: 100\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 25,\r\n    },\r\n  },\r\n  logo: {\r\n    objectFit: 'contain',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: '20%'\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      width: '18%'\r\n    },\r\n    [theme.breakpoints.up('md')]: {\r\n      width: '13%'\r\n    },\r\n  }\r\n\r\n});\r\n\r\nclass TopBar extends Component {\r\n\r\n  state = {\r\n    isConnected: false,\r\n    userAddress: '',\r\n    accountInfo: ''\r\n  };\r\n\r\n  async componentWillMount() {\r\n    let w3 = new Web3(window.ethereum);\r\n    const accounts = await w3.eth.getAccounts();\r\n    if (accounts.length == 0) {\r\n      this.setState({\r\n        isConnected: false\r\n      });\r\n    } else {\r\n      var account = accounts[0]\r\n      this.setState({ accountInfo: account.substring(0, 5), });\r\n      this.setState({\r\n        isConnected: true\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  sleep = async (ms) => {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n\r\n  getAccount = async () => {\r\n    try {\r\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n      const account = accounts[0];\r\n      alert('您已经连接metamask, 当前账户： ' + account)\r\n      this.setState({ isConnected: true, });\r\n      this.setState({ userAddress: account, });\r\n    } catch (error) {\r\n      console.debug(error)\r\n      this.setState({ isConnected: false, });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props\r\n\r\n    return (\r\n      <div>\r\n        <Toolbar>\r\n          <Grid container direction=\"row\" justifyContent=\"flex-start\" >\r\n            <Grid item className={classes.titleGrid } xs ={2}>\r\n              <Typography component=\"h1\" color=\"inherit\" noWrap className={classes.title}>\r\n                <img src={logo} className={classes.logo} />\r\n                <b>SparkLink</b>\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item className={classes.btnGrid}>\r\n              <Button size=\"large\" className={classes.btn} href='/#/' >\r\n                <b>首页</b>\r\n              </Button>\r\n              <Button size=\"large\" className={classes.btn} href='/#/introPublish'>\r\n                <b>发布</b>\r\n              </Button>\r\n\r\n\r\n              <Button size=\"large\" className={classes.btn} href='/#/collections'>\r\n                <b>我的收藏</b>\r\n              </Button>\r\n\r\n              <Button size=\"large\" href='https://github.com/SparkNFT' target=\"_blank\">\r\n                <GithubOutlined className={classes.icon} />\r\n              </Button>\r\n              {this.state.isConnected ? (\r\n                <Button onClick={this.getAccount}>\r\n                  <WalletTwoTone className={classes.icon} />\r\n                </Button>\r\n              ) : (\r\n                <Button onClick={this.getAccount}>\r\n                  <WalletFilled className={classes.icon} />\r\n                </Button>\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        </Toolbar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(TopBar);","import books from './imgs/books.png';\r\nimport './App.css';\r\nimport React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport TopBar from './TopBar';\r\n\r\nconst styles = theme => ({\r\n  title: {\r\n    fontFamily: 'Teko',\r\n    marginTop: '25%',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 100,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 150,\r\n    },\r\n  },\r\n  title2: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 15,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 55,\r\n    },\r\n  },\r\n  title3: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 8,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 15,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 45,\r\n    },\r\n  },\r\n  icon: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  titleFont: {\r\n    fontFamily: 'Teko',\r\n  },\r\n  btnMain: {\r\n    // marginTop: theme.spacing(3),\r\n    color: '#FFFFFF',\r\n    borderColor: '#e3f2fd',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  btnSecond: {\r\n    // marginTop: theme.spacing(3),\r\n    color: '#03A9F4',\r\n    borderColor: '#03A9F4',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(7),\r\n    textAlign: 'center'\r\n  },\r\n  container: {\r\n    maxWidth: '100%'\r\n  },\r\n  books: {\r\n    width: '90%',\r\n    height: 'auto'\r\n  }\r\n});\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#FDFEFE',\r\n    },\r\n    secondary: {\r\n      main: '#2196f3',\r\n    }\r\n  },\r\n});\r\n\r\nclass App extends Component {\r\n  render() {\r\n    const { classes } = this.props\r\n    return (\r\n      <div>\r\n\r\n        <ThemeProvider theme={theme}>\r\n          <div className={classes.page}>\r\n            <TopBar />\r\n            <Container component=\"main\" className={classes.container}>\r\n              <div className={classes.paper}>\r\n                <Grid container justifyContent=\"center\" >\r\n                  <Grid item style={{ minWidth: '50%' }}>\r\n                    <Typography color=\"inherit\" noWrap className={classes.title} >\r\n                      <b>SparkLink</b>\r\n                    </Typography>\r\n                    <Typography color=\"inherit\" noWrap className={classes.title2}>\r\n                      <b>人人传播，互相支持，仿若星星之火，点亮一片世界。</b>\r\n                    </Typography>\r\n                    <Typography color=\"inherit\" noWrap className={classes.title3}>\r\n                      发布你爱的 & 支持你爱的 & 传播你爱的\r\n                    </Typography>\r\n\r\n                  </Grid>\r\n                  <Grid item xs={5} >\r\n                    <img src={books} className={classes.books} />\r\n                  </Grid>\r\n                  <Grid container justifyContent=\"center\" spacing={5} >\r\n                    <Grid item >\r\n                      <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnMain} href='/#/introPublish'>\r\n                        <b>去发布</b>\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item >\r\n                      <Button size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} href='/#/buy'>\r\n                        <b>去购买</b>\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n            </Container>\r\n          </div>\r\n        </ThemeProvider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(App);","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.0/8 are considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n  )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import Web3 from 'web3';\r\nvar web3;\r\ntry {\r\n  web3 = new Web3(window.ethereum);\r\n  // web3 = new Web3(new Web3.providers.HttpProvider('https://matic-mainnet--jsonrpc.datahub.figment.io/apikey/e84b63fff0e37deb30837101f20eb793/'))\r\n} catch (error) {\r\n  web3 = new Web3('ws://localhost:8546');\r\n}\r\nexport default web3;","import web3 from './web3';\r\n\r\nconst address = '0xb42d4525841008A69E427026DF354067fD6A524f'; // rinkeby 0x7B5B92B0eD1DfeafdbD724b177A7733Bda67497F\r\nconst abi = [\r\n  {\r\n    \"inputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"constructor\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"approved\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"Approval\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"operator\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"approved\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"name\": \"ApprovalForAll\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"receiver\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"amount\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"name\": \"Claim\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"transfer_price\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"name\": \"DeterminePrice\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"transfer_price\",\r\n        \"type\": \"uint128\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"DeterminePriceAndApprove\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"string\",\r\n        \"name\": \"content\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"name\": \"Label\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"issue_id\",\r\n        \"type\": \"uint32\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"publisher\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"rootNFTId\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"token_addr\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"Publish\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"bytes32\",\r\n        \"name\": \"old_URI\",\r\n        \"type\": \"bytes32\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"bytes32\",\r\n        \"name\": \"new_URI\",\r\n        \"type\": \"bytes32\"\r\n      }\r\n    ],\r\n    \"name\": \"SetURI\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"from\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"Transfer\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"acceptShill\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"payable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"approve\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"balanceOf\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"claimProfit\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"_price\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"name\": \"determinePrice\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"_price\",\r\n        \"type\": \"uint128\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"_to\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"determinePriceAndApprove\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"getApproved\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getDepthByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getEditionIdByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"pure\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getFatherByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getIssueIdByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"pure\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"getLossRatio\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint8\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint8\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"pure\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getProfitByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getRemainShillTimesByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint16\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint16\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"getRootNFTIdByIssueId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"pure\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"getRoyaltyFeeByIssueId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint8\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint8\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getShillPriceByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"getShillTimesByIssueId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint16\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint16\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"getTokenAddrByIssueId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getTokenAddrByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"getTotalAmountByIssueId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getTransferPriceByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"operator\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"isApprovedForAll\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"isEditionExisting\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"isIssueExisting\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"isRootNFT\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"pure\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"content\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"name\": \"label\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"name\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"ownerOf\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"_first_sell_price\",\r\n        \"type\": \"uint128\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint8\",\r\n        \"name\": \"_royalty_fee\",\r\n        \"type\": \"uint8\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint16\",\r\n        \"name\": \"_shill_times\",\r\n        \"type\": \"uint16\"\r\n      },\r\n      {\r\n        \"internalType\": \"bytes32\",\r\n        \"name\": \"_ipfs_hash\",\r\n        \"type\": \"bytes32\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"_token_addr\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"publish\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"from\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"safeTransferFrom\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"payable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"from\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      },\r\n      {\r\n        \"internalType\": \"bytes\",\r\n        \"name\": \"_data\",\r\n        \"type\": \"bytes\"\r\n      }\r\n    ],\r\n    \"name\": \"safeTransferFrom\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"payable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"operator\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"approved\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"name\": \"setApprovalForAll\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"internalType\": \"bytes32\",\r\n        \"name\": \"ipfs_hash\",\r\n        \"type\": \"bytes32\"\r\n      }\r\n    ],\r\n    \"name\": \"setURI\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"bytes4\",\r\n        \"name\": \"interfaceId\",\r\n        \"type\": \"bytes4\"\r\n      }\r\n    ],\r\n    \"name\": \"supportsInterface\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"symbol\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"tokenURI\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"from\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"transferFrom\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"payable\",\r\n    \"type\": \"function\"\r\n  }\r\n]\r\n\r\nexport default new web3.eth.Contract(abi, address);","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport { blue } from '@material-ui/core/colors'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Container from '@material-ui/core/Container'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { message } from 'antd'\r\nimport { InboxOutlined } from '@ant-design/icons'\r\nimport Dragger from 'antd/lib/upload/Dragger'\r\nimport { CloudUploadOutlined } from '@ant-design/icons'\r\n// import CloudUploadIcon from '@material-ui/icons/CloudUpload'\r\nimport { Input, InputNumber, Select, Spin } from 'antd'\r\nimport 'antd/dist/antd.css'\r\nimport TopBar from './TopBar'\r\nimport axios from 'axios'\r\nimport contract from './contract'\r\nimport web3 from './web3'\r\nimport ReactLoading from 'react-loading'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport * as tokens from './tokens_list.json'\r\n\r\n\r\n\r\nconst {\r\n  pinata_api_key,\r\n  pinata_secret_api_key,\r\n} = require('./project.secret')\r\n\r\nconst FormData = require('form-data')\r\nconst bs58 = require('bs58')\r\nconst { Option } = Select\r\nconst abi = require('erc-20-abi')\r\n\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\n\r\nconst styles = theme => ({\r\n  main: {\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: '60%'\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: 500\r\n    },\r\n  },\r\n  titleCon: {\r\n    marginTop: 50,\r\n    fontFamily: 'Ubuntu',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 30\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      fontSize: 40\r\n    },\r\n  },\r\n  paperImg: {\r\n    backgroundColor: '#EFEBE9',\r\n    width: 330,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: '5%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '30%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '30%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '40%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '45%',\r\n      marginTop: 30,\r\n    },\r\n  },\r\n  titlePub: {\r\n    marginTop: \"3%\",\r\n    fontFamily: 'Ubuntu',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 30\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      fontSize: 40\r\n    },\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: blue[500],\r\n    width: 60,\r\n    height: 60\r\n  },\r\n  form: {\r\n    width: '150%',\r\n    marginTop: theme.spacing(7),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  fileBtn: {\r\n    padding: '10px 30px 10px 30px',\r\n    background: '#66C1E4',\r\n    border: 'none',\r\n    color: '#FFF',\r\n    boxShadow: '1px 1px 1px #4C6E91',\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n    fontSize: 20,\r\n    borderRadius: 25,\r\n    color: '#FFFFFF',\r\n    backgroundColor: '#2196f3'\r\n  },\r\n  input: {\r\n    height: 40,\r\n    borderRadius: 3,\r\n    width: '100%',\r\n  },\r\n  inputNum: {\r\n    height: 40,\r\n    borderRadius: 3,\r\n    width: '100%',\r\n    fontSize: 20,\r\n  }\r\n})\r\n\r\n\r\nclass Publish extends Component {\r\n  state = {\r\n    name: '',\r\n    bonusFee: 0,\r\n    price: 0,\r\n    buffer: null,\r\n    ipfsHashCover: '',\r\n    ipfsMeta: '',\r\n    fileIpfs: '',\r\n    description: '',\r\n    shareTimes: 0,\r\n    onLoading: false,\r\n    rootNFTId: '',\r\n    usedAcc: '',\r\n    sig: '',\r\n    fileType: '',\r\n    finished: false,\r\n    coverURL: '',\r\n    data: [],\r\n    token_addr: null,\r\n    token_symbol: 'MATIC',\r\n    decimal: 0,\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (!window.ethereum) {\r\n      alert(\"请先安装metamask\")\r\n      window.location.href = '/#/introPublish'\r\n      return\r\n    }\r\n    // const chainId = await window.ethereum.request({ method: 'eth_chainId' })\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\")\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n  }\r\n\r\n  handleGetPubName = (event) => {\r\n    this.setState({\r\n      name: event.target.value,\r\n    })\r\n  }\r\n\r\n  handleGetBonusFee = (value) => {\r\n    this.setState({\r\n      bonusFee: value,\r\n    })\r\n  }\r\n\r\n  handleGetPrice = (value) => {\r\n    this.setState({\r\n      price: value,\r\n    })\r\n  }\r\n\r\n  handleGetShareTimes = (value) => {\r\n    this.setState({\r\n      shareTimes: value,\r\n    })\r\n  }\r\n\r\n  handleGetDescription = (e) => {\r\n    this.setState({\r\n      description: e.target.value,\r\n    })\r\n  }\r\n\r\n  handleSearch = async (value) => {\r\n    if (value) {\r\n      var value = value.toLowerCase()\r\n      var tokens_list = tokens.tokens\r\n      var matched_data = []\r\n      let reg = new RegExp(value)\r\n      for (let token of tokens_list) {\r\n        var symbol_lower_case = token.symbol.toLowerCase()\r\n        var showed_text = `\\\"${token.symbol}\\\"` + \"   \" + token.address\r\n        var info = {\r\n          value: token.address,\r\n          text: showed_text\r\n        }\r\n        if (reg.test(symbol_lower_case) && !matched_data.includes(info)) {\r\n          matched_data.push(info)\r\n        }\r\n      }\r\n      if (value.includes('0x') && value.length == 42) {\r\n        var info = {\r\n          value: value,\r\n          text: value\r\n        }\r\n        matched_data = [info]\r\n      }\r\n      this.setState({\r\n        data: matched_data\r\n      })\r\n    } else {\r\n      this.setState({ data: [] })\r\n    }\r\n  }\r\n\r\n  handleSelectChange = async (value) => {\r\n    var tokens_list = tokens.tokens\r\n    let address\r\n    let token_symbol\r\n    let token_decimal\r\n    for (let token of tokens_list) {\r\n      if (value === token.address) {\r\n        address = value\r\n        token_symbol = token.symbol\r\n        token_decimal = token.decimals\r\n      }\r\n    }\r\n    if (token_symbol == undefined) {\r\n\r\n      try {\r\n        const token_contract = new web3.eth.Contract(abi, value)\r\n        token_symbol = await token_contract.methods.symbol().call()\r\n        token_decimal = await token_contract.methods.decimals().call()\r\n        address = value\r\n      } catch (error) {\r\n        message.error(\"你提供的地址不是erc20代币，请重新输入\")\r\n      }\r\n\r\n    }\r\n    // console.debug(token_symbol)\r\n    this.setState({\r\n      token_addr: address,\r\n      token_symbol: token_symbol,\r\n      decimal: token_decimal\r\n    })\r\n\r\n  }\r\n\r\n  submit = async (event) => {\r\n    /*TODO: call smart contract publish() and wait for publish success event\r\n     * then call backend to get a secret key. Then encrypt the pdf file and upload it to IPFS\r\n     * Finally, form a new metadata json file and send its ipfs hash to backend and publish it\r\n    */\r\n    let obj = this\r\n    if (this.state.price === 0 || this.state.bonusFee === 0 || this.state.shareTimes === 0 || this.state.ipfsHashCover === '' || this.state.fileIpfs === '' || this.state.token_addr === null) {\r\n      message.error({\r\n        content: \"你有信息尚未填写\",\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    } else {\r\n\r\n      this.setState({\r\n        onLoading: true\r\n      })\r\n      var img_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.ipfsHashCover\r\n      this.setState({\r\n        coverURL: img_url\r\n      })\r\n      console.debug(\"coverURL: \", this.state.coverURL)\r\n      var trimmed_des = this.state.description.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \" \")\r\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n      const account = accounts[0]\r\n      this.setState({\r\n        usedAcc: account\r\n      })\r\n      var file_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.fileIpfs\r\n      var JSONBody = {\r\n        \"name\": this.state.name,\r\n        \"description\": trimmed_des,\r\n        \"image\": this.state.coverURL,\r\n        \"attributes\": [\r\n          {\r\n            \"display_type\": \"boost_percentage\",\r\n            \"trait_type\": \"Bonuse Percentage\",\r\n            \"value\": this.state.bonusFee\r\n          },\r\n          {\r\n            \"trait_type\": \"File Address\",\r\n            \"value\": file_url\r\n          },\r\n          {\r\n            \"value\": this.state.fileType\r\n          },\r\n          {\r\n            \"trait_type\": \"Encrypted\",\r\n            \"value\": \"FALSE\"\r\n          }\r\n        ]\r\n      }\r\n\r\n      const url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`\r\n\r\n      try {\r\n        const response = await axios.post(url, JSONBody, {\r\n          headers: {\r\n            pinata_api_key: pinata_api_key,\r\n            pinata_secret_api_key: pinata_secret_api_key\r\n          },\r\n        })\r\n        console.debug(\"metadata: \", response.data.IpfsHash)\r\n        const bytes = bs58.decode(response.data.IpfsHash)\r\n        const bytesToContract = bytes.toString('hex').substring(4,)\r\n        this.setState({\r\n          ipfsMeta: bytesToContract\r\n        })\r\n\r\n        var price_with_decimal = this.state.price * (10 ** this.state.decimal)\r\n        price_with_decimal = price_with_decimal.toString()\r\n        console.debug(\"price_with_decimal: \", price_with_decimal)\r\n        var ipfsToContract = '0x' + bytesToContract\r\n\r\n        var gasPrice = await web3.eth.getGasPrice()\r\n        var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n        contract.methods.publish(price_with_decimal, this.state.bonusFee, this.state.shareTimes, ipfsToContract, this.state.token_addr).send({\r\n          from: this.state.usedAcc,\r\n          gasPrice: new_gas_price\r\n        })\r\n          .on('receipt', function (receipt) {\r\n            console.log(receipt)\r\n            var publish_event = receipt.events.Publish\r\n            var returned_values = publish_event.returnValues\r\n            var root_nft_id = returned_values.rootNFTId\r\n            var issue_id = returned_values.issue_id\r\n            obj.setState({\r\n              onLoading: false,\r\n              rootNFTId: root_nft_id,\r\n              issueId: issue_id,\r\n              finished: true\r\n            })\r\n            message.success({\r\n              content: \"已经成功发布作品\",\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n          })\r\n          .on('error', function (error) {\r\n            obj.setState({\r\n              onLoading: false,\r\n            })\r\n            if (error.message.includes('not mined')) {\r\n              message.warning({\r\n                content: \"交易已提交，当前网络较拥堵，请稍等后去我的收藏中查看\",\r\n                className: 'custom-class',\r\n                style: {\r\n                  marginTop: '10vh',\r\n                },\r\n              })\r\n            } else {\r\n              console.debug(error.message)\r\n              message.error({\r\n                content: `Error: ${error.message}`,\r\n                className: 'custom-class',\r\n                style: {\r\n                  marginTop: '10vh',\r\n                },\r\n              })\r\n            }\r\n          })\r\n\r\n\r\n      } catch (error) {\r\n        console.debug(error)\r\n        message.error({\r\n          content: `似乎遇到了些小问题： ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  checkDetail = async (event) => {\r\n    var new_url = '/#/NFT/' + this.state.rootNFTId\r\n    window.open(new_url, '_self')\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props\r\n    let obj = this\r\n    const { TextArea } = Input\r\n    const options = this.state.data.map(d => <Option key={d.value}>{d.text}</Option>)\r\n    const prop = {\r\n      name: 'file',\r\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\r\n      headers: {\r\n        pinata_api_key: pinata_api_key,\r\n        pinata_secret_api_key: pinata_secret_api_key\r\n      },\r\n      data: this.state.buffer,\r\n      beforeUpload: file => {\r\n        return new Promise((resolve, reject) => {\r\n          try {\r\n            const reader = new FileReader()\r\n            reader.readAsArrayBuffer(file)\r\n            reader.onload = (e) => {\r\n              var b = e.target.result\r\n              let params = new FormData()\r\n              params.append('file', b)\r\n              this.setState({\r\n                buffer: params\r\n              })\r\n            }\r\n            resolve()\r\n          } catch (e) {\r\n            message.error('Read file error')\r\n            reject()\r\n          }\r\n        })\r\n      },\r\n      async onChange(info) {\r\n        const { status } = info.file\r\n        // text/plain image/jpeg application/pdf\r\n        if (status === 'done') {\r\n          message.success(`${info.file.name} file uploaded successfully.`)\r\n          obj.setState({\r\n            ipfsHashCover: info.file.response.IpfsHash\r\n          })\r\n\r\n        } else if (status === 'error') {\r\n          message.error(`${info.file.name} file upload failed.`)\r\n        }\r\n      },\r\n      onDrop(e) {\r\n        message.error(`Only image file supported`)\r\n        console.log('Dropped files', e.dataTransfer.files)\r\n      },\r\n    }\r\n\r\n    const propFile = {\r\n      name: 'file',\r\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\r\n      headers: {\r\n        pinata_api_key: pinata_api_key,\r\n        pinata_secret_api_key: pinata_secret_api_key\r\n      },\r\n      data: this.state.buffer,\r\n      beforeUpload: file => {\r\n        return new Promise((resolve, reject) => {\r\n          try {\r\n            const reader = new FileReader()\r\n            reader.readAsArrayBuffer(file)\r\n            reader.onload = (e) => {\r\n              var b = e.target.result\r\n              let params = new FormData()\r\n              params.append('file', b)\r\n              this.setState({\r\n                buffer: params\r\n              })\r\n            }\r\n            resolve()\r\n          } catch (e) {\r\n            message.error('Read file error')\r\n            reject()\r\n          }\r\n        })\r\n      },\r\n      async onChange(info) {\r\n        const { status } = info.file\r\n        // console.debug(typeof info.file.type)\r\n        // text/plain image/jpeg application/pdf\r\n        if (status === 'done') {\r\n          message.success(`${info.file.name} file uploaded successfully.`)\r\n          var file_type = info.file.name.split('\\.')\r\n          var file_suffix = file_type[file_type.length - 1]\r\n          console.debug(file_suffix)\r\n          console.debug(\"file ipfs hash: \", info.file.response.IpfsHash)\r\n          obj.setState({\r\n            fileIpfs: info.file.response.IpfsHash,\r\n            fileType: file_suffix\r\n          })\r\n\r\n\r\n        } else if (status === 'error') {\r\n          message.error(`${info.file.name} file upload failed.`)\r\n        }\r\n      },\r\n      onDrop(e) {\r\n        message.error(`Only image file supported`)\r\n        console.log('Dropped files', e.dataTransfer.files)\r\n      },\r\n    }\r\n\r\n\r\n    // if (this.state.onLoading) {\r\n    //   return (\r\n    //     <div>\r\n    //       <ThemeProvider theme={theme}>\r\n    //         <TopBar />\r\n    //         <div style={{ marginLeft: '35%', marginTop: '10%' }}>\r\n    //           <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\r\n    //         </div>\r\n    //       </ThemeProvider>\r\n    //     </div>\r\n    //   )\r\n    // } else \r\n    if (this.state.finished) {\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <div style={{ textAlign: 'center' }}>\r\n              <Typography className={classes.titleCon}>\r\n                <b> 🎉 恭喜您发布成功</b>\r\n              </Typography>\r\n\r\n              <Paper className={classes.paperImg}>\r\n                <img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\r\n              </Paper>\r\n              <Typography variant=\"h4\" style={{ marginTop: 20, fontFamily: 'Ubuntu' }}>\r\n                <b>您获得的NFT是： #{this.state.rootNFTId}</b>\r\n              </Typography>\r\n\r\n              <Button\r\n                variant=\"contained\"\r\n                className={classes.button}\r\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\r\n                onClick={this.checkDetail}\r\n              >\r\n                查看详情\r\n              </Button>\r\n            </div>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    } else {\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large' style={{marginTop: 1000}}>\r\n\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\r\n              <div className={classes.paper}>\r\n                {/* {showLoading()} */}\r\n                <Typography className={classes.titlePub}>\r\n                  <b>发布作品信息</b>\r\n                </Typography>\r\n                <form className={classes.form} noValidate>\r\n                  <Grid container spacing={2}>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\r\n                      <Input\r\n                        placeholder=\"作品名称\"\r\n                        allowClear\r\n                        id=\"pubName\"\r\n                        onChange={this.handleGetPubName}\r\n                        value={this.state.name}\r\n                        className={classes.input}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>收益比例 *</label>\r\n                      <p style={{ fontSize: 14 }}>当您的作品被他人分享并获利时，您希望从他的分享利润中获得多少比例的收益</p>\r\n                      <InputNumber\r\n                        id=\"bonusFee\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        max={100}\r\n                        formatter={value => `${value}%`}\r\n                        parser={value => value.replace('%', '')}\r\n                        onChange={this.handleGetBonusFee}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>通行代币 *</label>\r\n                      <p style={{ fontSize: 14 }}>请选择您支持的支付货币 (输入代币符号或地址)</p>\r\n                      <Select\r\n                        showSearch\r\n                        value={this.state.token_addr}\r\n                        placeholder={\"请输入代币符号或地址\"}\r\n                        // className={classes.input}\r\n                        style={{ width: \"100%\" }}\r\n                        size=\"large\"\r\n                        defaultActiveFirstOption={false}\r\n                        showArrow={false}\r\n                        filterOption={false}\r\n                        onSearch={this.handleSearch}\r\n                        onChange={this.handleSelectChange}\r\n                        notFoundContent={null}\r\n                      >\r\n                        {options}\r\n                      </Select>\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>售卖价格 ({this.state.token_symbol})*</label>\r\n                      <InputNumber\r\n                        id=\"price\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        onChange={this.handleGetPrice}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>最高分享次数 (MAX： 65535)*</label>\r\n                      <p style={{ fontSize: 14 }}>您希望每一个帮助您传播的用户最多能够分享多少次？</p>\r\n                      <InputNumber\r\n                        id=\"shareTimes\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        max={65535}\r\n                        onChange={this.handleGetShareTimes}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }} >\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\r\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\r\n                      <TextArea\r\n                        rows={6}\r\n                        id=\"Description\"\r\n                        onChange={this.handleGetDescription}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                  <label style={{ fontSize: 18, marginTop: 50 }}>封面图片 *</label>\r\n                  <p style={{ fontSize: 14 }}>请在下方区域上传您的封面图片 <br />\r\n                    封面文件支持这些格式：JPEG/JPG/PNG</p>\r\n                  <Dragger {...prop} style={{ width: '100%', minHeight: 200 }} id=\"Uploader\" accept=\".png, .jpg, .jpeg\" >\r\n                    <p className=\"ant-upload-drag-icon\">\r\n                      <InboxOutlined />\r\n                    </p>\r\n                    <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\r\n                    <p className=\"ant-upload-hint\">\r\n                      支持单个文件的上传，支持多种类型文件的上传\r\n                    </p>\r\n                  </Dragger>\r\n\r\n                  <label style={{ fontSize: 18, marginTop: 50 }}>作品文件 *</label>\r\n                  <p style={{ fontSize: 14 }}>请在下方区域上传您的作品文件 </p>\r\n                  <Dragger {...propFile} style={{ width: '100%', minHeight: 200 }} id=\"Uploader2\" >\r\n                    <p className=\"ant-upload-drag-icon\">\r\n                      <InboxOutlined />\r\n                    </p>\r\n                    <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\r\n                    <p className=\"ant-upload-hint\">\r\n                      仅支持单个文件的上传，支持多种类型文件的上传\r\n                    </p>\r\n                  </Dragger>\r\n                </form>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  className={classes.button}\r\n                  startIcon={<CloudUploadOutlined />}\r\n                  style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\r\n                  onClick={this.submit}\r\n                >\r\n                  提交信息\r\n                </Button>\r\n              </div>\r\n            </Container>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    }\r\n\r\n\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Publish)","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport TopBar from \"./TopBar\"\r\nimport Paper from '@material-ui/core/Paper'\r\nimport { DownloadOutlined, FireOutlined, ArrowLeftOutlined, MoneyCollectOutlined, CopyOutlined, DollarCircleOutlined } from '@ant-design/icons'\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\r\nimport { IconButton, Container } from \"@material-ui/core\"\r\nimport contract from './contract'\r\nimport { Progress, Spin, message } from 'antd'\r\nimport axios from 'axios'\r\nimport web3 from './web3'\r\n\r\nconst FileSaver = require('file-saver')\r\nvar CryptoJS = require(\"crypto-js\")\r\nconst abi = require('erc-20-abi')\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    maxWidth: 1500,\r\n  },\r\n  cbutton: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-end\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"flex-end\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"flex-end\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  btnMain: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#FFFFFF',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 120,\r\n    maxWidth: '20rem',\r\n    minWidth: '10rem',\r\n  },\r\n  btnSecond: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#03A9F4',\r\n    borderWidth: 3,\r\n    borderColor: '#03A9F4',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 120,\r\n    maxWidth: '20rem',\r\n    minWidth: '10rem',\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(1),\r\n    textAlign: 'center',\r\n    maxWidth: 1370,\r\n    // backgroundColor: \"green\"\r\n  },\r\n  imagePapaer: {\r\n\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      backgroundColor: '#EFEBE9', width: 330, marginLeft: 25\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      backgroundColor: '#EFEBE9', width: 340, marginLeft: 25\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 25\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\r\n    },\r\n  },\r\n  imageStyle: {\r\n    objectFit: 'contain',\r\n    // object- fit: cover\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: 280,\r\n      height: 365,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      width: 290,\r\n      height: 385,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      width: 300,\r\n      height: 420,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      width: 300,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      width: 300,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n  },\r\n  content2: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: 10, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: 90, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: 80, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: 50, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: 60, maxWidth: 500\r\n    },\r\n  },\r\n  cbutton2: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-end\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"space-evenly\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"space-evenly\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  share: {\r\n    fontFamily: 'Teko',\r\n    marginBottom: '10%',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 14,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 18,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 20,\r\n    },\r\n\r\n  }\r\n\r\n\r\n})\r\n\r\n\r\nclass NFTInfo extends Component {\r\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\r\n  backend = 'https://api.sparklink.io'\r\n  state = {\r\n    loading: false,\r\n    showDecryptProgress: null,\r\n    decryptPercentage: 0,\r\n    showProgress: false,\r\n    percentage: 0,\r\n    Profit: '',\r\n    account: null,\r\n    loadItem: true,\r\n    Cover: '',\r\n    Name: '',\r\n    Description: '',\r\n    BonusFee: 0,\r\n    childrenNum: 0,\r\n    encrypted: '未知',\r\n    dataUrl: null,\r\n    isEncrypt: false,\r\n    fileType: '',\r\n    spark: false,\r\n    tokenAddr: '',\r\n    tokenSymbol: '',\r\n  }\r\n  async componentDidMount() {\r\n    if (!window.ethereum) {\r\n      alert(\"请先安装metamask\");\r\n      window.location.href = '/#/collections';\r\n      return;\r\n    }\r\n\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' });\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\");\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n\r\n    const owner = await contract.methods.ownerOf(this.props.match.params.id).call()\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    if (web3.utils.toChecksumAddress(account) !== owner) {\r\n      // alert(\"这枚nft不属于你\");\r\n      message.warning({\r\n        content: \"这枚nft不属于你\",\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n      window.location.href = '/#/';\r\n    }\r\n\r\n    const token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.id).call()\r\n    const res = await contract.methods.getProfitByNFTId(this.props.match.params.id).call()  \r\n    if (token_addr == '0x0000000000000000000000000000000000000000') {\r\n      var price_with_decimal = res / (10 ** 18)\r\n      var profit = price_with_decimal + \" MATIC\"\r\n      this.setState({\r\n        tokenAddr: '0x0000000000000000000000000000000000000000',\r\n        tokenSymbol: 'MATIC',\r\n        Profit: profit\r\n      })\r\n    } else {\r\n      const token_contract = new web3.eth.Contract(abi, token_addr)\r\n      const token_symbol = await token_contract.methods.symbol().call()\r\n      const decimal = await token_contract.methods.decimals().call()\r\n      var price_with_decimal = res / (10 ** decimal)\r\n      var profit = price_with_decimal + ` ${token_symbol}`\r\n      this.setState({\r\n        tokenAddr: token_addr,\r\n        tokenSymbol: token_symbol,\r\n        Profit: profit\r\n      })\r\n    }\r\n    const meta = await contract.methods.tokenURI(this.props.match.params.id).call()\r\n    let hash = meta.split('/');\r\n    const issue = await contract.methods.getIssueIdByNFTId(this.props.match.params.id).call()\r\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issue).call()\r\n    var file_hash = hash[hash.length - 1]\r\n    var request_url = \"https://coldcdn.com/api/cdn/v5ynur/ipfs/\" + file_hash\r\n    \r\n    try {\r\n      const res = await axios({\r\n        method: 'get',\r\n        url: request_url,\r\n        timeout: 1000 * 5,\r\n      })\r\n      let data = res.data;\r\n      let bouns = 0;\r\n      let fileAddr = \"\";\r\n      let isEncrypt = false;\r\n      let fileType = data.attributes[2].value\r\n      let encrypted = '未知';\r\n\r\n      for (let i = 0; i < data.attributes.length; i++) {\r\n        if (data.attributes[i].trait_type === \"Bonuse Percentage\") {\r\n          bouns = data.attributes[i].value;\r\n        }\r\n        if (data.attributes[i].trait_type === \"File Address\") {\r\n          fileAddr = data.attributes[i].value;\r\n        }\r\n        if (data.attributes[i].trait_type === \"Encrypted\") {\r\n          if (data.attributes[i].value === \"FALSE\") {\r\n            isEncrypt = false\r\n            encrypted = '否';\r\n          } else {\r\n            isEncrypt = true\r\n            encrypted = '是';\r\n          }\r\n        }\r\n      }\r\n\r\n      this.setState({\r\n        Name: data.name,\r\n        Description: data.description,\r\n        BonusFee: royalty,\r\n        Cover: data.image,\r\n        dataUrl: fileAddr,\r\n        isEncrypt: isEncrypt,\r\n        encrypted: encrypted,\r\n        fileType: fileType,\r\n        loadItem: false\r\n      });\r\n\r\n    } catch (error) {\r\n      this.setState({ Name: 'SparkNFT' });\r\n      this.setState({ Description: '暂时无法获取到该nft的相关描述' });\r\n      this.setState({ BonusFee: royalty });\r\n      this.setState({ Cover: 'https://via.placeholder.com/100x140.png?text=SparkNFT' });\r\n      this.setState({ dataUrl: 'fileAddr_PlaceHolder', loadItem: false, });\r\n    }\r\n\r\n    const leafUrl = this.backend + '/api/v1/nft/info?nft_id=' + this.props.match.params.id\r\n    axios.get(leafUrl).then(res => {\r\n      var children_num = res.data.children_count\r\n      this.setState({\r\n        childrenNum: children_num\r\n      })\r\n    }).catch(error => {\r\n      if (error.response === undefined) {\r\n        message.error({\r\n          content: \"错误：服务器未响应\",\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n        return;\r\n      }\r\n      if (error.response.status === 400 && error.response.data.message.includes(\"children not found\")) {\r\n        console.debug(\"no children\")\r\n      } else {\r\n        message.error({\r\n          content: `获取nft子节点情况页面失败： ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  return = async () => {\r\n    window.location.reload(true)\r\n  }\r\n\r\n  claim = async () => {\r\n    this.setState({\r\n      loading: true\r\n    })\r\n    var gasPrice = await web3.eth.getGasPrice()\r\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n    try{\r\n      await contract.methods.claimProfit(this.props.match.params.id).send({\r\n        from: this.state.account,\r\n        gasPrice: new_gas_price\r\n      })\r\n    } catch (error){\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    } finally {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  downloadIPFS = async () => {\r\n    let obj = this\r\n    let dataSplits = this.state.dataUrl.split('/')\r\n    var dataHash = dataSplits[dataSplits.length - 1]\r\n    var dataUrl = this.gateway + dataHash\r\n    this.setState({\r\n      showProgress: true\r\n    })\r\n    if(this.state.isEncrypt){\r\n      var cipher_config = {\r\n        method: 'get',\r\n        url: dataUrl,\r\n        onDownloadProgress(progress) {\r\n          var percentage = Math.round(progress.loaded / progress.total * 100)\r\n          obj.setState({\r\n            percentage: percentage\r\n          })\r\n        }\r\n      }\r\n\r\n      const response = await axios(cipher_config)\r\n      let ciphertext = response.data\r\n      let accounts = await await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n      let account = accounts[0]\r\n      let signJSON = {\r\n        account: account,\r\n        root_nft_id: this.props.match.params.id\r\n      }\r\n      signJSON = JSON.stringify(signJSON)\r\n      this.setState({\r\n        showProgress: false\r\n      })\r\n      await this.signDataAndDecrypt(account, ciphertext)\r\n    } else {\r\n      var open_config = {\r\n        url: dataUrl, //your url\r\n        method: 'GET',\r\n        responseType: 'blob', // important\r\n        onDownloadProgress(progress) {\r\n          var percentage = Math.round(progress.loaded / progress.total * 100)\r\n          obj.setState({\r\n            percentage: percentage\r\n          })\r\n        }\r\n      }\r\n      try{\r\n        const response = await axios(open_config)\r\n        const url = window.URL.createObjectURL(new Blob([response.data]))\r\n        const link = document.createElement('a')\r\n        link.href = url\r\n        link.style.display = 'none'\r\n        var suffix = '.' + obj.state.fileType\r\n        var fileName = this.state.Name + suffix\r\n        link.download = fileName\r\n        document.body.appendChild(link)\r\n        link.click()\r\n        document.body.removeChild(link)\r\n        URL.revokeObjectURL(url)\r\n      } catch(error){\r\n        message.error({\r\n          content: `Error: ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      } finally {\r\n        this.setState({ showProgress: false })\r\n      }\r\n    }\r\n  }\r\n\r\n  signDataAndDecrypt = async (signer, ciphertext) => {\r\n    var JSONBody = {\r\n      \"account\": signer,\r\n      \"nft_id\": this.props.match.params.id\r\n    }\r\n    var json_str = JSON.stringify(JSONBody)\r\n    const sig = await web3.eth.personal.sign(json_str, signer)\r\n\r\n    this.setState({\r\n      showDecryptProgress: true\r\n    })\r\n\r\n    var payload = {\r\n      \"account\": signer,\r\n      \"nft_id\": this.props.match.params.id,\r\n      \"signature\": sig\r\n    }\r\n    var payload_str = JSON.stringify(payload)\r\n    var req_key_url = this.backend + \"/api/v1/key/claim\"\r\n    try{\r\n      const res = await axios.post(req_key_url, payload_str, {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n\r\n      if (res.status == 200) {\r\n        let key = res.data.key\r\n        let data = CryptoJS.AES.decrypt(ciphertext, key)\r\n        let plainText = data.toString(CryptoJS.enc.Utf8)\r\n        const wordArray = CryptoJS.enc.Hex.parse(plainText)\r\n        let BaText = this.wordArrayToByteArray(wordArray, wordArray.length)\r\n        var blob = new Blob([BaText])\r\n        let suffix = '.' + this.state.fileType\r\n        FileSaver.saveAs(blob, this.state.Name + suffix)\r\n\r\n      } else {\r\n        var error_msg = res.data.message\r\n        message.error({\r\n          content: `Error: ${error_msg}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    } catch (error) {\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  wordToByteArray = (result, word, length) => {\r\n    const lengthBefore = result.length\r\n    const xff = 0xFF\r\n    if (length > 0)\r\n      result.push(word >>> 24)\r\n    if (length > 1)\r\n      result.push((word >>> 16) & xff)\r\n    if (length > 2)\r\n      result.push((word >>> 8) & xff)\r\n    if (length > 3)\r\n      result.push(word & xff)\r\n\r\n    var info = {\r\n      result: result,\r\n      addedLength: result.length - lengthBefore\r\n    }\r\n    return info\r\n  }\r\n\r\n  wordArrayToByteArray = (wordArray, length) => {\r\n    console.debug(\"enter in wordArrayToByte\")\r\n    if (wordArray.hasOwnProperty(\"sigBytes\") && wordArray.hasOwnProperty(\"words\")) {\r\n      length = wordArray.sigBytes\r\n      wordArray = wordArray.words\r\n    }\r\n\r\n    var result = [],\r\n      bytesAdded,\r\n      current_bytes = 0,\r\n      lengthBefore = length,\r\n      i = 0\r\n    while (length > 0) {\r\n      var added_info = this.wordToByteArray(result, wordArray[i], Math.min(4, length))\r\n      result = added_info.result\r\n      bytesAdded = added_info.addedLength\r\n      current_bytes = current_bytes + bytesAdded\r\n      var percent = Math.round(current_bytes / lengthBefore * 100)\r\n      if (percent !== this.state.decryptPercentage) {\r\n        this.setState({\r\n          decryptPercentage: percent\r\n        })\r\n      }\r\n      length -= bytesAdded\r\n      i++\r\n    }\r\n\r\n    return new Uint8Array(result)\r\n  }\r\n\r\n  spark = () => {\r\n    this.setState({ spark: true });\r\n  }\r\n\r\n\r\n  render(){\r\n    const {classes} = this.props\r\n    const sell_info = () => {\r\n      let url = window.location.host;\r\n      let toUrl = \"https://\" + url + '/#/NFT/Spark/' + this.props.match.params.id;\r\n      let share = '分享复制链接：' + toUrl;\r\n      // this.state.onSale\r\n      if (this.state.spark) {\r\n        return (\r\n          <Grid container >\r\n            <Grid item xs>\r\n              <Typography color=\"inherit\" align=\"center\" noWrap className={classes.share} >\r\n                请将下方链接分享给买方，<br /> 买方会进入此链接来购买这个NFT <br />\r\n                {toUrl}\r\n                <CopyToClipboard text={toUrl}\r\n                  onCopy={() => this.setState({ copied: true })}>\r\n                  <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\r\n                    <CopyOutlined />\r\n                  </IconButton>\r\n                </CopyToClipboard>\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n        );\r\n      }\r\n    }\r\n\r\n    if (this.state.showDecryptProgress){\r\n      return(\r\n        <Spin spinning={this.state.loading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40 }}>\r\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\r\n                <b>正在解密文件</b>\r\n              </Typography>\r\n            </div>\r\n            <div style={{ textAlign: 'center', marginTop: '10%' }}>\r\n              <Progress type=\"circle\" percent={this.state.decryptPercentage} width={200} />\r\n            </div>\r\n            <div style={{ textAlign: 'center' }}>\r\n              <Button\r\n                variant=\"contained\"\r\n                className={classes.button}\r\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\r\n                onClick={this.return}\r\n              >\r\n                返回信息页面\r\n              </Button>\r\n            </div>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    } else if(this.state.showProgress){\r\n      return(\r\n        <Spin spinning={this.state.loading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40 }}>\r\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\r\n                <b>正在下载文件</b>\r\n              </Typography>\r\n            </div>\r\n            <div style={{ textAlign: 'center', marginTop: '10%' }}>\r\n              <Progress type=\"circle\" percent={this.state.percentage} width={200} />\r\n            </div>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    } else {\r\n      return(\r\n        <Spin spinning={this.state.loading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <Container component=\"main\" className={classes.container}>\r\n              <Button\r\n                startIcon={<ArrowLeftOutlined style={{ fontSize: '2rem' }} />}\r\n                href='/#/collections'\r\n                style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\r\n              >\r\n                回到我的收藏馆\r\n              </Button>\r\n              <Grid container direction=\"row\" justifyContent=\"center\" alignContent=\"flex-start\">\r\n                <Grid container direction=\"row\" className={classes.cbutton}> \r\n\r\n                  <Grid item>\r\n                    <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 14 }}>\r\n                      <b>目前收益: {this.state.Profit}</b>\r\n                    </Typography>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <Button style={{ marginTop: 10, marginRight: 30, marginBottom: 20 }} size=\"large\" variant=\"contained\" color=\"primary\" className={classes.btnMain} startIcon={<MoneyCollectOutlined />} onClick={this.claim} >\r\n                      <Typography id=\"isSpark\" variant=\"button\" component=\"h3\" gutterBottom >\r\n                        <font size=\"3\" color='white'>\r\n                          领收益\r\n                        </font>\r\n                      </Typography>\r\n                    </Button>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <Button style={{ marginTop: 10, marginBottom: 20 }} size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} startIcon={<DollarCircleOutlined />} href={'/#/sellSingle/' + this.props.match.params.id}  >\r\n                      <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                        <font size=\"3\">\r\n                          售卖\r\n                        </font>\r\n                      </Typography>\r\n                    </Button>\r\n                  </Grid>\r\n\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <div className={classes.paper}>\r\n                {this.state.loadItem ? (\r\n                  <Grid container className={classes.content} spacing = {5}>\r\n\r\n                    <Grid item xs = {4}>\r\n                      <Skeleton variant=\"rect\" width={300} height={500} style={{ width: 370, marginLeft: 50, marginBottom: 50 }} />\r\n                    </Grid>\r\n\r\n                    <Grid item xs style={{ marginLeft: '5%' }}>\r\n                      <Skeleton animation=\"wave\" variant=\"text\" width={200} height={30} />\r\n                      <Skeleton animation=\"wave\" variant=\"text\" width={400} height={70} />\r\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={500} height={300} style={{ marginBottom: 50 }} />\r\n                    </Grid>\r\n\r\n                  </Grid>\r\n                ):(\r\n                  <Grid container direction=\"row\" justifyContent=\"space-between\" spacing={5} className={classes.content}>\r\n\r\n                    <Grid style={{ maxWidth: 200 }}>\r\n                      <Paper className={classes.imagePapaer}>\r\n                        <img className={classes.imageStyle} src={this.state.Cover}></img>\r\n                      </Paper>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={2}></Grid>\r\n\r\n                    <Grid item className={classes.content2} >\r\n                      <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\r\n                        #{this.props.match.params.id}\r\n                      </Typography>\r\n                      <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34, marginTop: '2%' }}>\r\n                        <b>{this.state.Name}</b>\r\n                      </Typography>\r\n                      <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\r\n                        {this.state.Description}\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '100%', fontSize: 24 }}>\r\n                        分红比例: {this.state.BonusFee} %\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\r\n                        当前拥有的子节点数量: {this.state.childrenNum}\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\r\n                        NFT作品是否加密: {this.state.encrypted}\r\n                      </Typography>\r\n\r\n                      <Grid container direction=\"row\" className={classes.cbutton2}>\r\n                        <Grid item>\r\n                          <Button size=\"small\" variant=\"contained\" color=\"primary\" target=\"_blank\" className={classes.btnMain} startIcon={<DownloadOutlined />} onClick={this.downloadIPFS} >\r\n                            <font size=\"3\" color='white'>\r\n                              下载\r\n                            </font>\r\n                          </Button>\r\n                        </Grid>\r\n\r\n                        <Grid>\r\n                          <Button size=\"small\" variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} onClick={this.spark} >\r\n                            <font size=\"3\">\r\n                              点火分享\r\n                            </font>\r\n                          </Button>\r\n                        </Grid>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n\r\n                )}\r\n              </div>\r\n\r\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"flex-start\">\r\n                <Grid item xs={8}>\r\n                  <div style={{ marginTop: 30 }}>\r\n                    {sell_info()}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n            </Container>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    }\r\n  }\r\n\r\n}\r\nexport default withStyles(styles, { withTheme: true })(NFTInfo)","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport { Button, Grid } from '@material-ui/core'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport TopBar from './TopBar'\r\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, IconButton } from \"@material-ui/core\"\r\nimport { Typography, Paper, Container } from '@material-ui/core'\r\nimport axios from 'axios'\r\nimport { DollarCircleOutlined, ArrowLeftOutlined, CopyOutlined } from '@ant-design/icons'\r\nimport { Spin, message } from 'antd'\r\nimport { Input, InputNumber } from 'antd'\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\r\nimport contract from './contract'\r\nimport web3 from './web3'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\n\r\nconst abi = require('erc-20-abi')\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    maxWidth: 1500,\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(1),\r\n    textAlign: 'center',\r\n    maxWidth: 1500,\r\n  },\r\n  btnSell: {\r\n    margin: theme.spacing(1),\r\n    fontSize: 16,\r\n    borderRadius: 10,\r\n    borderWidth: 2,\r\n    borderColor: '#2196f3',\r\n    color: '#2196f3',\r\n    marginLeft: '10%',\r\n    width: 100\r\n  },\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  img: {\r\n    width: 300,\r\n    marginBottom: 50,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '30%'\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '40%'\r\n    },\r\n  },\r\n  content2: {\r\n    fontFamily: 'Teko',\r\n    textAlign: 'center',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: 90, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: 80, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: 50, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: 60, maxWidth: 500\r\n    },\r\n  },\r\n  share: {\r\n    fontFamily: 'Teko',\r\n    marginBottom: '10%',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 14,\r\n      // width: '5%'\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 18,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 20,\r\n    },\r\n  },\r\n  imgPaper: {\r\n    width: 350,\r\n    marginBottom: 50,\r\n    backgroundColor: '#EFEBE9',\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '30%'\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '35%'\r\n    },\r\n  },\r\n  inputNum: {\r\n    height: 40,\r\n    borderRadius: 5,\r\n    width: 550,\r\n    fontSize: 20,\r\n  },\r\n  input: {\r\n    height: 40,\r\n    borderRadius: 5,\r\n  },\r\n})\r\n\r\nclass SellSingle extends Component {\r\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\r\n  backend = 'https://api.sparklink.io'\r\n  state = {\r\n    name: '',\r\n    bonusFee: 0,\r\n    coverURL: '',\r\n    description: '',\r\n    price: 0,\r\n    ipfsHashMeta: '',\r\n    open: false,\r\n    toAddress: '',\r\n    NFTId: '',\r\n    onSale: false,\r\n    copied: false,\r\n    onLoading: false,\r\n    owner: '',\r\n    currentAcc: '',\r\n    childrenNum: 0,\r\n    loadItem: true,\r\n    tokenAddr: null,\r\n    tokenSymbol: '',\r\n    decimal: 0,\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\")\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    let obj = this \r\n    this.setState({\r\n      currentAcc: account,\r\n      NFTId: this.props.match.params.NFTId\r\n    })\r\n    const issueId = await contract.methods.getIssueIdByNFTId(this.state.NFTId).call()\r\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\r\n    const metadata = await contract.methods.tokenURI(this.props.match.params.NFTId).call()\r\n    let hash = metadata.split('/')\r\n    this.setState({ ipfsHashMeta: hash[hash.length - 1] })\r\n    var url = this.gateway + this.state.ipfsHashMeta\r\n    try {\r\n      const res = await axios({method: 'get', url: url, timeout: 1000*2})\r\n      let content = res.data\r\n      let bonus = content.attributes[0].value\r\n      let encrypted = content.attributes[3].value\r\n      this.setState({\r\n        loadItem: false,\r\n        name: content.name,\r\n        description: content.description,\r\n        bonusFee: bonus,\r\n        coverURL: content.image\r\n      })\r\n    } catch (error) {\r\n      var name_holder = 'SparkNFT#' + this.props.match.params.NFTId\r\n      obj.setState({\r\n        loadItem: false,\r\n        name: name_holder,\r\n        description: '暂时无法获取到该nft的相关描述',\r\n        bonusFee: royalty,\r\n        coverURL: 'https://via.placeholder.com/100x140.png?text=SparkNFT'\r\n      })\r\n      console.debug(error)\r\n    }\r\n\r\n    var owner = await contract.methods.ownerOf(this.props.match.params.NFTId).call()\r\n    var price = await contract.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call()\r\n    var token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.NFTId).call()\r\n    if(price = '0'){\r\n      this.setState({\r\n        owner: owner.toLowerCase(),\r\n        onSale: false\r\n      })\r\n    } else {\r\n      this.setState({\r\n        owner: owner.toLowerCase(),\r\n        onSale: true\r\n      })\r\n    }\r\n\r\n    if (token_addr == \"0x0000000000000000000000000000000000000000\") {\r\n      this.setState({\r\n        tokenAddr: token_addr,\r\n        tokenSymbol: \"MATIC\",\r\n        decimal: 18\r\n      })\r\n    } else {\r\n      try{\r\n        const token_contract = new web3.eth.Contract(abi, token_addr)\r\n        const token_symbol = await token_contract.methods.symbol().call()\r\n        const decimal = await token_contract.methods.decimals().call()\r\n        this.setState({\r\n          tokenAddr: token_addr,\r\n          tokenSymbol: token_symbol,\r\n          decimal: decimal\r\n        })\r\n      } catch (error){\r\n        message.error({\r\n          content: `Error: ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    }\r\n\r\n    const child_url = this.backend + '/api/v1/nft/info?nft_id=' + this.state.NFTId\r\n    try{\r\n      const res = await axios.get(child_url)\r\n      var children_num = res.data.children_count\r\n      this.setState({\r\n        childrenNum: children_num\r\n      })\r\n    } catch (error) {\r\n      if (error.response === undefined) {\r\n        message.error({\r\n          content: \"错误：服务器未响应\",\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n        return\r\n      }\r\n      if (error.response.status === 400 && error.response.data.message.includes(\"children not found\")) {\r\n        console.debug(\"no children\")\r\n      } else {\r\n        message.error({\r\n          content: `获取nft子节点情况页面失败： ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  handleClickOpen = (e) => {\r\n    this.setState({\r\n      open: true,\r\n    })\r\n  }\r\n\r\n  handleClose = (e) => {\r\n    this.setState({\r\n      open: false,\r\n    })\r\n  }\r\n\r\n  handleGetPrice = (value) => {\r\n    this.setState({\r\n      price: value,\r\n    })\r\n  }\r\n\r\n  handleGetAddr = (e) => {\r\n    this.setState({\r\n      toAddress: e.target.value,\r\n    })\r\n  }\r\n\r\n  handleClickLink = (event) => {\r\n    var new_url = '/#/NFT/' + this.state.NFTId\r\n    window.open(new_url, '_self')\r\n  }\r\n\r\n  sell = async (e) => {\r\n    this.setState({\r\n      open: false,\r\n    })\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n    const account = accounts[0];\r\n\r\n    var price_with_decimal = this.state.price * (10 ** this.state.decimal)\r\n    price_with_decimal = price_with_decimal.toString()\r\n    var obj = this\r\n    this.setState({\r\n      onLoading: true\r\n    })\r\n    var gasPrice = await web3.eth.getGasPrice()\r\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n    contract.methods.determinePriceAndApprove(this.state.NFTId, price_with_decimal, this.state.toAddress).send({\r\n      from: account,\r\n      gasPrice: new_gas_price\r\n    })\r\n      .on('receipt', function (receipt) {\r\n        obj.setState({\r\n          onSale: true,\r\n          onLoading: false\r\n        })\r\n        message.success({\r\n          content: \"已经成功授权买方\",\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      })\r\n      .on('error', function (error) {\r\n        obj.setState({\r\n          onLoading: false\r\n        })\r\n        message.error({\r\n          content: `Error: ${error.message}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props\r\n    const sell_info = () => {\r\n      let host = window.location.host\r\n      let toUrl = \"https://\" + host + '/#/buySingle/' + this.state.NFTId\r\n      if (this.state.onSale) {\r\n        return (\r\n          <Grid container >\r\n            <Grid item xs>\r\n              <Typography color=\"inherit\" align=\"center\" noWrap className={classes.share} >\r\n                请将下方链接分享给买方，<br /> 买方会进入此链接来购买这个NFT <br />\r\n                {toUrl}\r\n                <CopyToClipboard text={toUrl}\r\n                  onCopy={() => this.setState({ copied: true })}>\r\n                  <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\r\n                    <CopyOutlined />\r\n                  </IconButton>\r\n                </CopyToClipboard>\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n        )\r\n      }\r\n    }\r\n\r\n    const showSellBtn = () => {\r\n      if (this.state.currentAcc == this.state.owner) {\r\n        return (\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            startIcon={< DollarCircleOutlined style={{ fontSize: 22 }} />}\r\n            className={classes.btnSell}\r\n            onClick={this.handleClickOpen}\r\n          >\r\n            售卖\r\n          </Button>\r\n        )\r\n      } else {\r\n        return (\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<DollarCircleOutlined style={{ fontSize: 22 }} />}\r\n            className={classes.btnSell}\r\n            disabled\r\n          >\r\n            售卖\r\n          </Button>\r\n        )\r\n      }\r\n    }\r\n\r\n    return(\r\n      <Spin spinning={this.state.onLoading} size='large'>\r\n        <ThemeProvider theme={theme}>\r\n          <TopBar />\r\n          <Container component=\"main\" className={classes.container}>\r\n            <Button\r\n              startIcon={<ArrowLeftOutlined style={{ fontSize: 22 }} />}\r\n              onClick={this.handleClickLink}\r\n              style={{ marginTop: 50, marginBottom: 100, fontSize: 22 }}\r\n            >\r\n              返回\r\n            </Button>\r\n            <div className={classes.paper}>\r\n              {this.state.loadItem?(\r\n                <Grid container spacing={5} className={classes.content}>\r\n                  <Grid item xs={4}>\r\n                    <Skeleton variant=\"rect\" width={300} height={500} className={classes.img} />\r\n                  </Grid>\r\n                  <Grid item xs style={{ marginLeft: '5%', maxWidth: 500, minWidth: 350 }}>\r\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'70%'} height={30} />\r\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'100%'} height={70} />\r\n                    <Skeleton animation=\"wave\" variant=\"rect\" width={'100%'} height={300} style={{ marginBottom: 50 }} />\r\n                    {showSellBtn()}\r\n                  </Grid>\r\n                </Grid>\r\n              ):(\r\n                <Grid container className={classes.content} spacing={5}>\r\n                  <Grid item xs={4} style={{ maxWidth: 600 }}>\r\n                    <Paper className={classes.imgPaper}>\r\n                      <img style={{ width: 300, marginTop: 20, marginBottom: 50, objectFit: 'contain' }} src={this.state.coverURL}></img>\r\n                    </Paper>\r\n                  </Grid>\r\n\r\n                  <Grid item xs className={classes.content2}>\r\n                    <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\r\n                      #{this.state.NFTId}\r\n                    </Typography>\r\n                    <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 30, marginTop: '2%' }}>\r\n                      <b>{this.state.name}</b>\r\n                    </Typography>\r\n                    <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\r\n                      {this.state.description}\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '65%', fontSize: 20 }}>\r\n                      创作者分红比例: {this.state.bonusFee} %\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\r\n                      当前拥有的子节点数量: {this.state.childrenNum}\r\n                    </Typography>\r\n                    {showSellBtn()}\r\n                    <Dialog\r\n                      open={this.state.open}\r\n                      onClose={this.handleClose}\r\n                      aria-labelledby=\"form-dialog-title\"\r\n                    >\r\n                      <DialogTitle id=\"form-dialog-title\">填写售卖信息</DialogTitle>\r\n                      <DialogContent>\r\n                        <DialogContentText>\r\n                          请在下方区域填写你希望售卖的价格，以及售卖对象的钱包地址。\r\n                        </DialogContentText>\r\n                        <label style={{ fontSize: 14, marginBottom: 10 }}>售卖价格 ({this.state.tokenSymbol})*</label>\r\n                        <InputNumber\r\n                          defaultValue={0}\r\n                          min={0}\r\n                          onChange={this.handleGetPrice}\r\n                          className={classes.inputNum}\r\n                        />\r\n                        <label style={{ fontSize: 14, marginBottom: 10, marginTop: 10 }}>买方钱包地址 *</label>\r\n                        <Input\r\n                          placeholder=\"买方钱包地址\"\r\n                          allowClear\r\n                          id=\"pubName\"\r\n                          onChange={this.handleGetAddr}\r\n                          className={classes.input}\r\n                        />\r\n                      </DialogContent>\r\n                      <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"primary\">\r\n                          取消\r\n                        </Button>\r\n                        <Button variant=\"contained\" onClick={this.sell} color=\"primary\" >\r\n                          卖出\r\n                        </Button>\r\n                      </DialogActions>\r\n                    </Dialog>\r\n                    \r\n                  </Grid>\r\n                </Grid>\r\n              )}\r\n            </div>\r\n            <div style={{ marginTop: 50 }}>\r\n              {sell_info()}\r\n            </div>\r\n          </Container>\r\n        </ThemeProvider>\r\n      </Spin>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default withStyles(styles, {withTheme: true}) (SellSingle)","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport TopBar from './TopBar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport axios from 'axios'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Container from '@material-ui/core/Container'\r\nimport { DollarCircleOutlined, ArrowLeftOutlined } from '@ant-design/icons'\r\nimport { Spin, message } from 'antd'\r\nimport contract from './contract'\r\nimport web3 from './web3'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\n\r\nconst abi = require('erc-20-abi')\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    maxWidth: 1500,\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(1),\r\n    textAlign: 'center',\r\n    maxWidth: 1500,\r\n  },\r\n  btnDisable: {\r\n    margin: theme.spacing(1),\r\n    fontSize: 16,\r\n    borderRadius: 10,\r\n    borderWidth: 3,\r\n    borderColor: '#909497',\r\n    color: '#909497',\r\n    marginLeft: '10%',\r\n    width: 100\r\n  },\r\n  btnSell: {\r\n    margin: theme.spacing(1),\r\n    fontSize: 16,\r\n    borderRadius: 10,\r\n    borderWidth: 2,\r\n    borderColor: '#2196f3',\r\n    color: '#2196f3',\r\n    marginLeft: '10%',\r\n    width: 100\r\n  },\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  img: {\r\n    width: 300,\r\n    marginBottom: 50,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '30%'\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '40%'\r\n    },\r\n  },\r\n  imgPaper: {\r\n    width: 350,\r\n    marginBottom: 50,\r\n    backgroundColor: '#EFEBE9',\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '30%'\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '35%'\r\n    },\r\n  },\r\n  content2: {\r\n    fontFamily: 'Teko',\r\n    textAlign: 'center',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: 90, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: 80, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: 50, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: 60, maxWidth: 500\r\n    },\r\n  },\r\n\r\n})\r\n\r\n\r\nclass BuySingle extends Component {\r\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\r\n  backend = 'https://api.sparklink.io'\r\n  sparkAddr = '0xb42d4525841008A69E427026DF354067fD6A524f'\r\n  state = {\r\n    name: '',\r\n    bonusFee: 0,\r\n    coverURL: '',\r\n    description: '',\r\n    price: 0,\r\n    priceString: '',\r\n    ipfsHashMeta: '',\r\n    open: false,\r\n    address: '',\r\n    NFTId: '',\r\n    onSale: false,\r\n    owner: '',\r\n    approvedAddr: '',\r\n    currentAcc: '',\r\n    onLoading: false,\r\n    childrenNum: 0,\r\n    loadItem: true,\r\n    encrypted: '未知',\r\n    tokenAddr: null,\r\n    tokenSymbol: '',\r\n    decimal: 0,\r\n    approved: false,\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  async componentDidMount () {\r\n    const accounts = await window.ethereum.request({method: 'eth_requestAccounts'})\r\n    const account = accounts[0]\r\n    this.setState({\r\n      currentAcc: account,\r\n      NFTId: this.props.match.params.NFTId\r\n    })\r\n    const issueId = await contract.methods.getIssueIdByNFTId(this.state.NFTId).call()\r\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\r\n    const metadata = await contract.methods.tokenURI(this.props.match.params.NFTId).call()\r\n    let hash = metadata.split('/')\r\n    this.setState({\r\n      ipfsHashMeta: hash[hash.length-1]\r\n    })\r\n    var url = this.gateway + this.state.ipfsHashMeta\r\n    try {\r\n      const res = await axios({method: 'get', url: url, timeout: 1000*3})\r\n      let content = res.data\r\n      let bonus = content.attributes[0].value\r\n      let encrypted\r\n      if (content.attributes[3].value.toUpperCase() === 'TRUE'){\r\n        encrypted = '是'\r\n      } else {\r\n        encrypted = '否'\r\n      }\r\n\r\n      this.setState({\r\n        loadItem: false,\r\n        name: content.name,\r\n        description: content.description,\r\n        bonusFee: bonus,\r\n        coverURL: content.image,\r\n        encrypted: encrypted\r\n      })\r\n    } catch (error) {\r\n      var name_holder = 'SparkNFT#' + this.props.match.params.NFTId\r\n      this.setState({\r\n        loadItem: false,\r\n        name: name_holder,\r\n        description: '暂时无法获取到该nft的相关描述',\r\n        bonusFee: royalty,\r\n        coverURL: 'https://via.placeholder.com/100x140.png?text=SparkNFT'\r\n      })\r\n    }\r\n\r\n    var owner = await contract.methods.ownerOf(this.props.match.params.NFTId).call()\r\n    var approved = await contract.methods.getApproved(this.props.match.params.NFTId).call()\r\n    var price = await contract.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call()\r\n    var token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.NFTId).call()\r\n    this.setState({\r\n      owner: owner,\r\n      approvedAddr: approved,\r\n      price: price\r\n    })\r\n    if (token_addr == '0x0000000000000000000000000000000000000000') {\r\n      this.setState({\r\n        tokenAddr: token_addr,\r\n        tokenSymbol: \"MATIC\",\r\n        decimal: 18,\r\n        approved: true\r\n      })\r\n    } else {\r\n      try{\r\n        const token_contract = new web3.eth.Contract(abi, token_addr)\r\n        const token_symbol = await token_contract.methods.symbol().call()\r\n        const decimal = await token_contract.methods.decimals().call()\r\n        const approved_amount = await token_contract.methods.allowance(account, this.sparkAddr).call()\r\n        if(approved_amount >= price){\r\n          this.setState({\r\n            approved: true\r\n          })\r\n        } else {\r\n          this.setState({\r\n            approved: false\r\n          })\r\n        }\r\n        this.setState({\r\n          tokenAddr: token_addr,\r\n          tokenSymbol: token_symbol,\r\n          decimal: decimal\r\n        })\r\n      } catch (error) {\r\n        message.error({\r\n          content: `Error: ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    }\r\n\r\n    var price_with_decimal = price / (10 ** this.state.decimal)\r\n    price_with_decimal = price_with_decimal + \" \" + this.state.tokenSymbol\r\n    this.setState({\r\n      priceString: price_with_decimal\r\n    })\r\n\r\n    const child_url = this.backend + '/api/v1/nft/info?nft_id=' + this.state.NFTId\r\n    try{\r\n      const response = await axios.get(child_url)\r\n      var children_num = response.data.children_count\r\n      this.setState({\r\n        childrenNum: children_num\r\n      })\r\n    } catch (error) {\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n    \r\n  }\r\n\r\n  handleBuy = async (e) => {\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    \r\n    var gasPrice = await web3.eth.getGasPrice()\r\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n    let obj = this\r\n    if (this.state.tokenAddr == '0x0000000000000000000000000000000000000000') {\r\n      this.setState({\r\n        onLoading: true\r\n      })\r\n      contract.methods.safeTransferFrom(this.state.owner, account, this.state.NFTId).send({\r\n        from: account,\r\n        value: this.state.price,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          obj.setState({\r\n            onLoading: false\r\n          })\r\n          message.success({\r\n            content: \"交易已经上链\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    } else {\r\n      this.setState({\r\n        onLoading: true\r\n      })\r\n      contract.methods.safeTransferFrom(this.state.owner, account, this.state.NFTId).send({\r\n        from: account,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          obj.setState({\r\n            onLoading: false\r\n          })\r\n          message.success({\r\n            content: \"交易已经上链\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    }\r\n  }\r\n\r\n  handleApprove = async (e) => {\r\n    const accounts = await window.ethereum.request({method: 'eth_requestAccounts'})\r\n    const account = accounts[0]\r\n\r\n    this.setState({\r\n      onLoading: true\r\n    })\r\n    let obj = this\r\n    try{\r\n      const token_contract = new web3.eth.Contract(abi, this.state.tokenAddr)\r\n      var gasPrice = await web3.eth.getGasPrice()\r\n      var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n      var price = this.state.price.toString()\r\n\r\n      token_contract.methods.approve(this.sparkAddr, price).send({\r\n        from: account,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          obj.setState({\r\n            onLoading: false,\r\n            approved: true\r\n          })\r\n          message.success({\r\n            content: \"已经成功授权合约\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false,\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    } catch (error) {\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  handleGetPrice = (value) => {\r\n    this.setState({\r\n      price: value,\r\n    })\r\n  }\r\n\r\n  handleGetAddr = (e) => {\r\n    this.setState({\r\n      address: e.target.value,\r\n    })\r\n  }\r\n\r\n  render () {\r\n    const {classes} = this.props\r\n    \r\n    const buyButton = ()=> {\r\n      if(this.state.approvedAddr.toLowerCase() !== this.state.currentAcc.toLowerCase()){\r\n        return (\r\n          <Button\r\n            variant = 'outlined'\r\n            startIcon={<DollarCircleOutlined style={{ fontSize: 22 }}/>}\r\n            className={classes.btnDisable}\r\n            disabled\r\n          >\r\n            购买\r\n          </Button>\r\n        )\r\n      } else if (! this.state.approved) {\r\n        return(\r\n          <Button\r\n            variant = 'outlined'\r\n            color = 'primary'\r\n            className = { classes.btnSell }\r\n            onClick={this.handleApprove}\r\n          >\r\n            授权合约\r\n          </Button>\r\n        )\r\n      } else {\r\n        return(\r\n          <Button\r\n            variant='outlined'\r\n            startIcon={<DollarCircleOutlined style={{ fontSize: 22 }} />}\r\n            className={classes.btnSell}\r\n            onClick={this.handleBuy}\r\n          >\r\n            购买\r\n          </Button>\r\n        )\r\n      }\r\n    }\r\n\r\n    return(\r\n      <Spin spinning={this.state.onLoading} size='large'>\r\n        <ThemeProvider theme={theme}>\r\n          <TopBar />\r\n          <Container component=\"main\" className={classes.container}>\r\n            <Button\r\n              startIcon={<ArrowLeftOutlined style={{ fontSize: '2rem' }} />}\r\n              href='/'\r\n              style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\r\n            >\r\n              回到首页\r\n            </Button>\r\n            <div className={classes.paper}>\r\n              {this.state.loadItem ? (\r\n                <Grid container spacing={5} className={classes.content}>\r\n                  <Grid item xs={4}>\r\n                    <Skeleton variant=\"rect\" width={300} height={500} className={classes.img} />\r\n                  </Grid>\r\n\r\n                  <Grid item xs style={{ marginLeft: '5%', maxWidth: 500, minWidth: 350 }}>\r\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'70%'} height={30} />\r\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'100%'} height={70} />\r\n                    <Skeleton animation=\"wave\" variant=\"rect\" width={'100%'} height={300} style={{ marginBottom: 50 }} />\r\n                    {buyButton()}\r\n                  </Grid>\r\n                </Grid>\r\n              ):(\r\n                <Grid container className={classes.content} spacing={5}>\r\n                  <Grid item xs={4} style={{ maxWidth: 600 }}>\r\n                    <Paper className={classes.imgPaper}>\r\n                      <img style={{ width: 300, marginTop: 20, marginBottom: 50, objectFit: 'contain' }} src={this.state.coverURL}></img>\r\n                    </Paper>\r\n                  </Grid>\r\n\r\n                  <Grid item xs className={classes.content2}>\r\n                    <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\r\n                      #{this.state.NFTId}\r\n                    </Typography>\r\n                    <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34 }}>\r\n                      <b>{this.state.name}</b>\r\n                    </Typography>\r\n                    <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\r\n                      {this.state.description}\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '2%', maxWidth: '65%', fontSize: 20 }}>\r\n                      创作者分红比例: {this.state.bonusFee} %\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 18 }}>\r\n                      售价: {this.state.priceString}\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '1%', maxWidth: '65%', fontSize: 12 }}>\r\n                      当前拥有者: {this.state.owner}\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\r\n                      当前拥有的子节点数量: {this.state.childrenNum}\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\r\n                      NFT作品是否加密: {this.state.encrypted}\r\n                    </Typography>\r\n                    {buyButton()}\r\n                  </Grid>\r\n                </Grid>\r\n              )}\r\n            </div>\r\n          </Container>\r\n        </ThemeProvider>\r\n      </Spin>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true})(BuySingle)","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport contract from './contract';\r\nimport TopBar from \"./TopBar\";\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { Empty } from 'antd';\r\nimport axios from 'axios';\r\nimport web3 from './web3';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#FDFEFE',\r\n    },\r\n    secondary: {\r\n      main: '#2196f3',\r\n    }\r\n  },\r\n});\r\n\r\nconst styles = theme => ({\r\n  icon: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  titleFont: {\r\n    fontFamily: 'Teko',\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderWidth: 8,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n  },\r\n  heroContent: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: theme.spacing(36, 0, 6),\r\n  },\r\n  cardGrid: {\r\n    paddingTop: theme.spacing(8),\r\n    paddingBottom: theme.spacing(8),\r\n  },\r\n  card: {\r\n    height: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  cardMedia: {\r\n    // paddingTop: '56.25%', // 16:9\r\n    objectFit: 'contain',\r\n    paddingTop: '100%', // 16:9\r\n  },\r\n  cardContent: {\r\n    flexGrow: 2,\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(7),\r\n    textAlign: 'center'\r\n  },\r\n  container: {\r\n    maxWidth: '100%'\r\n  },\r\n  btnMain: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#FFFFFF',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 150\r\n  },\r\n  btnSecond: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#03A9F4',\r\n    borderWidth: 3,\r\n    borderColor: '#03A9F4',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 150\r\n  },\r\n  title: {\r\n    fontFamily: 'Teko',\r\n    marginTop: '5%',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 40,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 55,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 90,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 110,\r\n    },\r\n  },\r\n  title2: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 45,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 55,\r\n    },\r\n  },\r\n});\r\n\r\nclass Collections extends Component {\r\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/';\r\n  backend = 'https://api.sparklink.io'\r\n  web3;\r\n  cards = [];\r\n  state = {\r\n    isLogin: false,\r\n    user_address: null,\r\n    name: '',\r\n    viewable: false,\r\n    cards: [],\r\n    onloading: false,\r\n    SkeletoNumber: 0,\r\n    noNFT: true,\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n    if (accounts.length === 0) {\r\n      alert(\"请先连接Metamask\")\r\n    }\r\n    const account = accounts[0];\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' });\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\");\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n\r\n    let cards = [];\r\n\r\n    const nft_number = await contract.methods.balanceOf(account).call()\r\n    console.log('nft_number: ', nft_number)\r\n    if (nft_number === 0) {\r\n      return;\r\n    }\r\n\r\n    let ids = await this.getNft(contract, account);\r\n    if (ids.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      noNFT: false\r\n    })\r\n    let data = await this.getMetadata(contract, ids);\r\n    for (let i = 0; i < ids.length; i++) {\r\n      let element = {\r\n        id: ids[i],\r\n        title: data[i].name,\r\n        description: data[i].description,\r\n        bonusFee: data[i].attributes.value,\r\n        image: data[i].image,\r\n      }\r\n      cards.push(element);\r\n    }\r\n    var reversed_cards = cards.reverse()\r\n    this.setState({ viewable: true, });\r\n    this.setState({ cards: reversed_cards, });\r\n    this.setState({\r\n      onloading: false,\r\n      SkeletoNumber: 0\r\n    })\r\n\r\n  }\r\n\r\n  getMetadata = async (nft, id) => {\r\n    let metaDatas = [];\r\n    for (let i = 0; i < id.length; i++) {\r\n      let ipfs_link = await nft.methods.tokenURI(id[i]).call();\r\n      var ipfs_hash_arr = ipfs_link.split('/')\r\n      var ipfs_hash = ipfs_hash_arr[ipfs_hash_arr.length - 1]\r\n      var meta = \"https://coldcdn.com/api/cdn/v5ynur/ipfs/\" + ipfs_hash\r\n      // console.debug(\"meta: \" + id[i] + \" \" + meta)\r\n      await axios({\r\n        method: 'get',\r\n        url: meta,\r\n        timeout: 1000 * 2,\r\n      }).then(res => {\r\n        // console.log(\"meta: \", res.data)\r\n        metaDatas.push(res.data)\r\n      }).catch(error => {\r\n        var name_holder = 'SparkNFT#' + id[i]\r\n        var placeholder = {\r\n          \"name\": name_holder,\r\n          \"description\": '暂时无法获取到该nft的相关描述',\r\n          \"image\": 'https://testnets.opensea.io/static/images/placeholder.png',\r\n          \"attributes\": [\r\n            {\r\n              \"display_type\": \"boost_percentage\",\r\n              \"trait_type\": \"Bonuse Percentage\",\r\n              \"value\": 0\r\n            },\r\n            {\r\n              \"trait_type\": \"File Address\",\r\n              \"value\": 'file_url'\r\n            }\r\n          ]\r\n        }\r\n        metaDatas.push(placeholder);\r\n      })\r\n    }\r\n    return metaDatas;\r\n  }\r\n\r\n  getNft = async (nft, account) => {\r\n    let balanceId = [];\r\n    //0x9452644E9fdd59bD46A4d9eC24462995ADfD8d01\r\n    var checksum_address = web3.utils.toChecksumAddress(account);\r\n    var url = this.backend + '/api/v1/nft/list?owner=' + checksum_address\r\n    console.debug('owner: ', checksum_address)\r\n    try {\r\n      var res = await axios.get(url)\r\n      balanceId = res.data.nft\r\n      this.setState({\r\n        onloading: true,\r\n        SkeletoNumber: balanceId.length\r\n      })\r\n      return balanceId;\r\n    } catch (error) {\r\n      // alert('无法获取您当前拥有的nft')\r\n      return [];\r\n    }\r\n  };\r\n\r\n\r\n  renderDescription = (description) => {\r\n    if (description.length <= 150) {\r\n\r\n      return (description);\r\n    } else {\r\n      let newDescription = description.substring(0, 150) + \"..........\";\r\n      return (newDescription);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    const { classes } = this.props\r\n    let obj = this;\r\n    window.ethereum.on('chainChanged', handleChainChanged);\r\n\r\n    function handleChainChanged(_chainId) {\r\n      window.location.reload();\r\n    }\r\n\r\n    function showCard(card, index) {\r\n      let res = (\r\n        <Grid item key={index} xs={12} sm={6} md={4}>\r\n          {\r\n            card ? (<Card className={classes.card}>\r\n              <CardMedia\r\n                className={classes.cardMedia}\r\n                image={card.image}\r\n                title=\"Image title\"\r\n              />\r\n              <CardContent className={classes.cardContent}>\r\n                <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                  <b>{card.title}</b>\r\n                </Typography>\r\n                <Typography>\r\n                  {obj.renderDescription(card.description)}\r\n                </Typography>\r\n              </CardContent>\r\n              <CardActions>\r\n                <Button size=\"small\" variant=\"contained\" color=\"primary\" href={'/#/NFT/' + card.id} >\r\n                  <b>查看 </b>\r\n                </Button>\r\n                <Typography variant=\"body2\" gutterBottom>\r\n                  <b>NFT id: {card.id} </b>\r\n                </Typography>\r\n              </CardActions>\r\n            </Card>) : (\r\n              <Card className={classes.card}>\r\n                <Skeleton variant=\"rect\" style={{ marginLeft: 70, }} width={260} height={288} />\r\n                <Skeleton width=\"60%\" style={{ marginTop: 40, }} height={33} />\r\n                <Skeleton height={33} />\r\n                <Skeleton height={33} />\r\n                <Skeleton height={33} />\r\n              </Card>\r\n            )\r\n          }\r\n        </Grid>\r\n      );\r\n\r\n      return res;\r\n\r\n    }\r\n    return (\r\n      <div>\r\n        <ThemeProvider theme={theme}>\r\n          <TopBar />\r\n          <Container component=\"main\" className={classes.container}>\r\n            <div className={classes.paper}>\r\n              <Grid container justifyContent=\"center\">\r\n                <Grid item xs={10}>\r\n                  <Typography color=\"inherit\" noWrap className={classes.title}>\r\n                    <b>我的收藏馆</b>\r\n                  </Typography>\r\n                  <Typography color=\"inherit\" noWrap className={classes.title2}>\r\n                    <b>An ERC721 Token Trying to Solve Existing Publishing Dilemma</b>\r\n                  </Typography>\r\n                </Grid>\r\n              </Grid>\r\n            </div>\r\n          </Container>\r\n        </ThemeProvider>\r\n        {this.state.noNFT ? (\r\n          <Empty \r\n            description={\r\n              <span style={{ fontFamily: 'Teko' }}>\r\n                <b>暂无可展示NFT</b>\r\n              </span>\r\n            }\r\n            style={{marginTop: 100}}\r\n            />\r\n        ):(\r\n          <main>\r\n            { <Container className = {classes.cardGrid} maxWidth=\"md\">\r\n              <Grid container spacing={4}>\r\n                {\r\n                  (this.state.onloading ? Array.from(new Array(this.state.SkeletoNumber)) : this.state.cards).map((card, index) => {\r\n                    return showCard(card, index);\r\n                  })\r\n                }\r\n              </Grid>\r\n            </Container>}\r\n          </main>\r\n        )}\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Collections);","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport TopBar from \"./TopBar\"\r\nimport { Paper, Container, Link } from '@material-ui/core'\r\nimport axios from 'axios'\r\nimport contract from './contract'\r\nimport web3 from './web3'\r\nimport { ArrowLeftOutlined, FireOutlined } from '@ant-design/icons'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\nimport { Progress, message, Spin } from 'antd'\r\n\r\nconst abi = require('erc-20-abi')\r\n\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\nconst styles = theme => ({ \r\n  container: {\r\n    maxWidth: 1500,\r\n    // backgroundColor: '#2196f3'\r\n  },\r\n  btnMain: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#FFFFFF',\r\n    backgroundColor: '#03A9F4',\r\n    borderWidth: 3,\r\n    // borderColor: '#03A9F4',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 150,\r\n    maxWidth: '20rem',\r\n    minWidth: '10rem',\r\n  },\r\n  btnSecond: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#03A9F4',\r\n    borderWidth: 3,\r\n    borderColor: '#03A9F4',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 150,\r\n    maxWidth: '20rem',\r\n    minWidth: '10rem',\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(1),\r\n    textAlign: 'center',\r\n    maxWidth: 1400,\r\n  },\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  imagePaper: {\r\n\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      backgroundColor: '#EFEBE9', width: 330, height: 420, marginLeft: 10\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      backgroundColor: '#EFEBE9', width: 340, height: 440, marginLeft: 10\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, height: 465, marginLeft: 10\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\r\n    },\r\n  },\r\n  imageStyle: {\r\n    objectFit: 'contain',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: 280,\r\n      height: 365,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      width: 290,\r\n      height: 385,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      width: 300,\r\n      height: 420,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      width: 300,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      width: 300,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n  },\r\n  content2: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: 10, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: 90, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: 80, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: 50, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: 60, maxWidth: 500\r\n    },\r\n  },\r\n  title: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 48,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 60,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 70,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 75,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 80,\r\n    },\r\n  },\r\n\r\n})\r\n\r\nclass NFTSpark extends Component {\r\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\r\n  backend = 'https://api.sparklink.io'\r\n  sparkAddr = '0xb42d4525841008A69E427026DF354067fD6A524f'\r\n  state = {\r\n    Name: '',\r\n    Description: '',\r\n    BonusFee: 0,\r\n    Cover: '',\r\n    price: '',\r\n    priceString: '',\r\n    onLoading: false,\r\n    loadItem: true,\r\n    open: false,\r\n    approved: false,\r\n    tokenAddr: '',\r\n    tokenSymbol: '',\r\n    isEncrypt: true,\r\n    percentage: 0,\r\n    showProgress: false,\r\n    fileType: '',\r\n    remainShillTimes: 0,\r\n    maxShillTimes: 0,\r\n  }\r\n\r\n  async componentDidMount (){\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\")\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n\r\n    const meta = await contract.methods.tokenURI(this.props.match.params.id).call()\r\n    let hash = meta.split('/')\r\n    this.setState({ hash: hash[hash.length - 1] })\r\n    let isEncrypt\r\n    try {\r\n      var url = this.gateway + this.state.hash\r\n      const res = await axios.get(url)\r\n      let data = res.data\r\n      let bouns = data.attributes[0].value\r\n      let fileAddr = data.attributes[1].value\r\n      let fileType = data.attributes[2].value\r\n      if (data.attributes[3].value === \"FALSE\") {\r\n        isEncrypt = false\r\n      } else {\r\n        isEncrypt = true\r\n      }\r\n      this.setState({\r\n        Name: data.name,\r\n        Description: data.description,\r\n        BonusFee: bouns,\r\n        Cover: data.image,\r\n        fileType: fileType,\r\n        dataUrl: fileAddr,\r\n        isEncrypt: isEncrypt\r\n      })\r\n    } catch (error){\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n\r\n    const price = await contract.methods.getShillPriceByNFTId(this.props.match.params.id).call()\r\n    const token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.id).call()\r\n\r\n    this.setState({\r\n      price: price,\r\n      tokenAddr: token_addr\r\n    })\r\n\r\n    if (token_addr == '0x0000000000000000000000000000000000000000') {\r\n      var price_with_decimal = price / (10 ** 18)\r\n      price_with_decimal = price_with_decimal + \" MATIC\"\r\n      this.setState({\r\n        priceString: price_with_decimal,\r\n        approved: true\r\n      })\r\n    } else {\r\n      try {\r\n        const token_contract = new web3.eth.Contract(abi, token_addr)\r\n        const decimals = await token_contract.methods.decimals().call()\r\n        const token_symbol = await token_contract.methods.symbol().call()\r\n        var price_with_decimal = price / (10 ** decimals)\r\n        price_with_decimal = price_with_decimal + \" \" + token_symbol\r\n        this.setState({ priceString: price_with_decimal })\r\n        const approved_amount = await token_contract.methods.allowance(account, this.sparkAddr).call()\r\n        if (approved_amount >= price) {\r\n          this.setState({\r\n            approved: true\r\n          })\r\n        } else {\r\n          this.setState({\r\n            approved: false\r\n          })\r\n        }\r\n      } catch (error) {\r\n        message.error({\r\n          content: `Error: ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    }\r\n\r\n    const leafUrl = this.backend + '/api/v1/nft/info?nft_id=' + this.props.match.params.id\r\n    try{\r\n      const res = await axios.get(leafUrl)\r\n      var children_num = res.data.children_count\r\n      var remain_shill_times = res.data.max_shill_times - res.data.shill_times\r\n      var max_shill_times = res.data.max_shill_times\r\n      this.setState({\r\n        remainShillTimes: remain_shill_times,\r\n        maxShillTimes: max_shill_times\r\n      })\r\n      if (res.data.suggest_next_nft === this.props.match.params.id) {\r\n        this.setState({\r\n          childrenNum: children_num,\r\n          recommendNFT: res.data.suggest_next_nft,\r\n          showRecommend: false,\r\n        })\r\n      } else if (res.data.suggest_next_nft === '0') {\r\n        this.setState({\r\n          childrenNum: children_num,\r\n          recommendNFT: res.data.suggest_next_nft,\r\n          showRecommend: false\r\n        })\r\n      } else {\r\n        this.setState({\r\n          childrenNum: children_num,\r\n          recommendNFT: res.data.suggest_next_nft,\r\n          showRecommend: true\r\n        })\r\n      }\r\n    } catch (error) {\r\n      if (error.response === undefined) {\r\n        message.error({\r\n          content: \"错误：服务器未响应\",\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n        return\r\n      }\r\n      if (error.response.status === 400 && error.response.data.message.includes(\"children not found\")) {\r\n        console.debug(\"no children\")\r\n      } else {\r\n        message.error({\r\n          content: `获取nft子节点情况页面失败： ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    } finally {\r\n      this.setState({\r\n        loadItem: false\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  handleClickLink = (event) => {\r\n    var new_url = '/#/NFT/Spark/' + this.state.recommendNFT\r\n    window.open(new_url)\r\n  }\r\n\r\n  downloadIPFS = async (event) => {\r\n    let obj = this\r\n    let dataSplits = this.state.dataUrl.split('/')\r\n    var dataHash = dataSplits[dataSplits.length - 1]\r\n    var dataUrl = this.gateway + dataHash\r\n    this.setState({\r\n      showProgress: true\r\n    })\r\n    var open_config = {\r\n      url: dataUrl, //your url\r\n      method: 'GET',\r\n      responseType: 'blob', // important\r\n      onDownloadProgress(progress) {\r\n        var percentage = Math.round(progress.loaded / progress.total * 100)\r\n        obj.setState({\r\n          percentage: percentage\r\n        })\r\n      }\r\n    }\r\n\r\n    try {\r\n      const response = await axios(open_config)\r\n      const url = window.URL.createObjectURL(new Blob([response.data]))\r\n      const link = document.createElement('a')\r\n      link.href = url\r\n      link.style.display = 'none'\r\n      var suffix = '.' + this.state.fileType\r\n      var fileName = this.state.Name + suffix\r\n      link.download = fileName\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n      URL.revokeObjectURL(url)\r\n    } catch (error) {\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    } finally {\r\n      this.setState({ showProgress: false })\r\n    }\r\n  }\r\n\r\n  approve = async (event) => {\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    this.setState({ onLoading: true })\r\n\r\n    let obj = this\r\n    try{\r\n      const price = this.state.price.toString()\r\n      const token_contract = new web3.eth.Contract(abi, this.state.tokenAddr)\r\n      var gasPrice = await web3.eth.getGasPrice()\r\n      var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n      token_contract.methods.approve(this.sparkAddr, price).send({\r\n        from: account,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          message.success({\r\n            content: \"已经成功授权合约\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n          obj.setState({\r\n            onLoading: false,\r\n            approved: true\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false,\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    } catch (error){\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  shill = async (event) => {\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    var gasPrice = await web3.eth.getGasPrice()\r\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n    let obj = this\r\n\r\n    this.setState({ onLoading: true });\r\n    if (this.state.tokenAddr == '0x0000000000000000000000000000000000000000') {\r\n      contract.methods.acceptShill(this.props.match.params.id).send({\r\n        from: account,\r\n        value: this.state.price,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          message.success({\r\n            content: \"交易已经上链\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n          obj.setState({\r\n            onLoading: false,\r\n            onSale: true\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false,\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    } else {\r\n      contract.methods.acceptShill(this.props.match.params.id).send({\r\n        from: account,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          message.success({\r\n            content: \"交易已经上链\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n          obj.setState({\r\n            onLoading: false,\r\n            onSale: true\r\n          });\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false,\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n    const {classes} = this.props\r\n    const showBtn = () => {\r\n      if (this.state.showRecommend) {\r\n        return (\r\n          <div>\r\n            {this.state.isEncrypt ? (\r\n              <Grid container justifyContent=\"space-around\" >\r\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" className={classes.btnMain} disabled>\r\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                    <font size=\"4\"> 下 载 </font>\r\n                  </Typography>\r\n                </Button>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '2rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} disabled>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 铸造  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            ) : (\r\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" className={classes.btnMain} onClick={this.downloadIPFS}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                      <font size=\"4\"> 下 载 </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '2rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />}disabled>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 铸造  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            )}\r\n          </div>\r\n        )\r\n      } else if (!this.state.approved) {\r\n        return (\r\n          <div>\r\n            {this.state.isEncrypt ? (\r\n              <Grid container justifyContent=\"space-around\" >\r\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} disabled>\r\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                    <font size=\"4\"> 下 载 </font>\r\n                  </Typography>\r\n                </Button>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} onClick={this.approve}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 授权合约  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            ) : (\r\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} onClick={this.downloadIPFS}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                      <font size=\"4\"> 下载 </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} onClick={this.approve}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 授权合约  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            )}\r\n          </div>\r\n        )\r\n      } else {\r\n        return (\r\n          <div>\r\n            {this.state.isEncrypt ? (\r\n              <Grid container justifyContent=\"space-around\" >\r\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} disabled>\r\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                    <font size=\"4\"> 下 载 </font>\r\n                  </Typography>\r\n                </Button>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} onClick={this.shill}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 铸造  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            ) : (\r\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} onClick={this.downloadIPFS}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                      <font size=\"4\"> 下 载 </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} onClick={this.shill}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 铸造  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            )}\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n\r\n    if(this.state.showProgress){\r\n      return(\r\n        <Spin spinning={this.state.onLoading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40 }}>\r\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\r\n                <b>正在下载文件</b>\r\n              </Typography>\r\n            </div>\r\n            <div style={{ textAlign: 'center', marginTop: '10%' }}>\r\n              <Progress type=\"circle\" percent={this.state.percentage} width={200} />\r\n            </div>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    } else {\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <Container component=\"main\" className={classes.container}>\r\n              <Button\r\n                startIcon={<ArrowLeftOutlined style={{ fontSize: '2rem' }} />}\r\n                href='/#/collections'\r\n                style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\r\n              >\r\n                回到我的收藏馆\r\n              </Button>\r\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"center\" xs={12}>\r\n                <Typography color=\"inherit\" noWrap className={classes.title}>\r\n                  🔥 NFT 🔥\r\n                </Typography>\r\n              </Grid>\r\n\r\n              <div className={classes.paper}>\r\n                {this.state.loadItem ? (\r\n                  <Grid container spacing={5} className={classes.content}>\r\n                    <Grid item>\r\n                      <Skeleton variant=\"rect\" width={300} height={500} style={{ width: 370, marginLeft: 50, marginBottom: 50 }} />\r\n                    </Grid>\r\n                    <Grid item style={{ marginLeft: '5%' }}>\r\n                      <Skeleton animation=\"wave\" variant=\"text\" width={200} height={30} />\r\n                      <Skeleton animation=\"wave\" variant=\"text\" width={400} height={70} />\r\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={500} height={300} style={{ marginBottom: 50 }} />\r\n                    </Grid>\r\n                  </Grid>\r\n                ):(\r\n                  <Grid container direction=\"row\" justifyContent=\"space-between\" className={classes.content}>\r\n                    <Grid item style={{ maxWidth: 200 }}>\r\n                      <Paper className={classes.imagePaper}>\r\n                        <img className={classes.imageStyle} src={this.state.Cover}></img>\r\n                      </Paper>\r\n                    </Grid>\r\n\r\n                    <Grid xs={2}></Grid>\r\n\r\n                    <Grid item xs className={classes.content2} >\r\n                      <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\r\n                        #{this.props.match.params.id}\r\n                      </Typography>\r\n                      <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34, marginTop: '2%' }}>\r\n                        <b>{this.state.Name}</b>\r\n                      </Typography>\r\n                      <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\r\n                        {this.state.Description}\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '100%', fontSize: 24 }}>\r\n                        点火价格: {this.state.priceString}\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 18 }}>\r\n                        最大分享次数: {this.state.maxShillTimes} 次\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 18 }}>\r\n                        剩余分享次数: {this.state.remainShillTimes} 次\r\n                      </Typography>\r\n                      {this.state.isEncrypt ?\r\n                        (\r\n                          <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 16 }}>\r\n                            加密作品\r\n                          </Typography>\r\n                        ) : (\r\n                          <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 16 }}>\r\n                            开源作品\r\n                          </Typography>\r\n                        )}\r\n                      {showBtn()}\r\n                    </Grid>\r\n                  </Grid>\r\n                  \r\n                )}\r\n\r\n                {this.state.showRecommend ? (\r\n                  <Grid style={{marginTop: 50}}>\r\n                    <Typography variant=\"h4\" gutterBottom >\r\n                      此NFT的子节点已经售完，我们给您推荐了其他还能购买的节点：\r\n                    </Typography>\r\n                    <Link onClick={this.handleClickLink} style={{ fontSize: 20, textDecoration: 'underline' }}>\r\n                      {window.location.host + '/#/NFT/Spark/' + this.state.recommendNFT}\r\n                    </Link>\r\n                  </Grid>\r\n                ) : (\r\n                  <div></div>\r\n                )}\r\n              </div>\r\n            </Container>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, {withTheme: true})(NFTSpark)","import './App.css';\r\nimport React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport TopBar from './TopBar';\r\n\r\nconst styles = theme => ({\r\n  icon: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  titleFont: {\r\n    fontFamily: 'Teko',\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n  },\r\n  btnMain: {\r\n    color: '#FFFFFF',\r\n    borderColor: '#e3f2fd',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    '&:hover':{\r\n      color: '#FFFFFF',\r\n    },\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  btnSecond: {\r\n    // marginTop: theme.spacing(3),\r\n    color: '#FFFFFF',\r\n    borderColor: '#e3f2fd',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    '&:hover':{\r\n      color: '#FFFFFF',\r\n    },\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n      width: 95\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(7),\r\n    maxWidth: '150%',\r\n\r\n  },\r\n\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    marginTop: 20,\r\n    lineHeight: 1.5,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n    },\r\n  },\r\n\r\n  shouldKnow: {\r\n    fontFamily: 'Teko',\r\n    textAlign: 'center',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 40,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 40,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 60,\r\n    },\r\n  },\r\n});\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#FDFEFE',\r\n    },\r\n    secondary: {\r\n      main: '#2196f3',\r\n    }\r\n  },\r\n});\r\n\r\nclass IntroPublish extends Component {\r\n  render() {\r\n    const { classes } = this.props\r\n    return (\r\n      <div>\r\n\r\n        <ThemeProvider theme={theme}>\r\n          <TopBar />\r\n          <Container component=\"main\" className={classes.container}>\r\n            <div className={classes.paper}>\r\n              <Typography color=\"inherit\" noWrap className={classes.shouldKnow}>\r\n                <b>发布须知</b>\r\n              </Typography>\r\n              <Typography variant=\"h4\" paragraph className={classes.content}>\r\n                在去发布您的作品之前，您需要了解以下信息，它们将有助于您了解完整的发布流程：\r\n              </Typography>\r\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\r\n                <b>1.</b> 您的作品将被存储在IPFS（InterPlanetary File System）中，而存储地址将被记录在以太坊上，与您的NFT绑定在一起\r\n              </Typography>\r\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\r\n                <b>2.</b> 您可以选择是将您的作品开源得保存在IPFS上，或者加密保存在IPFS上。针对加密的作品，只有持有您发行的NFT的读者才能访问。 <br />\r\n              </Typography>\r\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\r\n                <b>3.</b> 如果您选择加密保存在IPFS上，您需要在将作品基本信息上传到链上后，再设置作品的地址。这个过程我们会引导您完成，请勿担心。 <br />\r\n              </Typography>\r\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\r\n                <b>4.</b> 当您将作品发布在我们平台时，我们默认您会支持二次创作，处于您宣传网络中的读者有权将他们持有的NFT对应的地址替换为他们自己的二次创作作品。 <br />\r\n              </Typography>\r\n              <Grid container justifyContent=\"center\" style={{ fontFamily: 'Teko', marginTop: 70 }}>\r\n                <Grid item xs={4} >\r\n                  <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnMain} href='/#/encryptedPublish'>\r\n                    <b>加密发布</b>\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item xs={3} >\r\n                  <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnSecond} href='/#/publish'>\r\n                    <b>开源发布</b>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </div>\r\n          </Container>\r\n        </ThemeProvider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(IntroPublish);","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport { blue } from '@material-ui/core/colors'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Container from '@material-ui/core/Container'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { message } from 'antd'\r\nimport { InboxOutlined } from '@ant-design/icons'\r\nimport Dragger from 'antd/lib/upload/Dragger'\r\nimport { CloudUploadOutlined } from '@ant-design/icons'\r\nimport { Input, InputNumber, Select, Spin } from 'antd'\r\nimport 'antd/dist/antd.css'\r\nimport TopBar from './TopBar'\r\nimport axios from 'axios'\r\nimport contract from './contract'\r\nimport web3 from './web3'\r\nimport ReactLoading from 'react-loading'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Link } from \"@material-ui/core\"\r\nimport * as tokens from './tokens_list.json'\r\n\r\nconst {\r\n  pinata_api_key,\r\n  pinata_secret_api_key,\r\n} = require('./project.secret')\r\nconst FormData = require('form-data')\r\nconst bs58 = require('bs58')\r\nvar CryptoJS = require(\"crypto-js\")\r\nconst { Option } = Select\r\nconst abi = require('erc-20-abi')\r\n\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\n\r\nconst styles = theme => ({\r\n  main: {\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: '60%'\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: 500\r\n    },\r\n  },\r\n  titleCon: {\r\n    marginTop: 50,\r\n    fontFamily: 'Ubuntu',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 30\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      fontSize: 40\r\n    },\r\n  },\r\n  titlePub: {\r\n    marginTop: \"3%\",\r\n    fontFamily: 'Ubuntu',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 30\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      fontSize: 40\r\n    },\r\n  },\r\n  paperImg: {\r\n\r\n    backgroundColor: '#EFEBE9',\r\n    width: 330,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: '5%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '30%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '30%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '40%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '45%',\r\n      marginTop: 30,\r\n    },\r\n  },\r\n  btnPub: {\r\n    margin: theme.spacing(1),\r\n    borderRadius: 25,\r\n    color: '#FFFFFF',\r\n    backgroundColor: '#2196f3',\r\n    marginBottom: 20,\r\n    marginTop: 40,\r\n    height: 45,\r\n    minWidth: 200,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: '50%',\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 16,\r\n      width: '30%',\r\n    },\r\n    [theme.breakpoints.up('md')]: {\r\n      fontSize: 16,\r\n      width: '30%',\r\n    },\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: blue[500],\r\n    width: 60,\r\n    height: 60\r\n  },\r\n  form: {\r\n    width: '150%',\r\n    marginTop: theme.spacing(7),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  fileBtn: {\r\n    padding: '10px 30px 10px 30px',\r\n    background: '#66C1E4',\r\n    border: 'none',\r\n    color: '#FFF',\r\n    boxShadow: '1px 1px 1px #4C6E91',\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n    fontSize: 20,\r\n    borderRadius: 25,\r\n    color: '#FFFFFF',\r\n    backgroundColor: '#2196f3'\r\n  },\r\n  input: {\r\n    height: 40,\r\n    borderRadius: 5,\r\n  },\r\n  inputNum: {\r\n    height: 40,\r\n    borderRadius: 5,\r\n    width: '100%',\r\n    fontSize: 20,\r\n  }\r\n})\r\n\r\n\r\nclass EncryptedPublish extends Component {\r\n  backend = 'https://api.sparklink.io' //http://192.168.0.64:3000\r\n  state = {\r\n    name: '',\r\n    bonusFee: 0,\r\n    price: 0,\r\n    buffer: null,\r\n    file: null,\r\n    ipfsHashCover: '',\r\n    ipfsMeta: '',\r\n    fileType: '',\r\n    fileIpfs: '',\r\n    description: '',\r\n    shareTimes: 0,\r\n    onLoading: false,\r\n    rootNFTId: '',\r\n    issueId: '',\r\n    allowSubmitPDF: false,\r\n    usedAcc: '',\r\n    sig: '',\r\n    finished: false,\r\n    open: false,\r\n    coverURL: '',\r\n    jumped: false,\r\n    data: [],\r\n    token_addr: null,\r\n    token_symbol: 'MATIC',\r\n    decimal: 0,\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (!window.ethereum) {\r\n      alert(\"请先安装metamask\")\r\n      window.location.href = '/#/introPublish'\r\n      return\r\n    }\r\n\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\")\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n  }\r\n\r\n  handleGetPubName = (event) => {\r\n    this.setState({\r\n      name: event.target.value,\r\n    })\r\n  }\r\n\r\n  handleGetBonusFee = (value) => {\r\n    this.setState({\r\n      bonusFee: value,\r\n    })\r\n  }\r\n\r\n  handleGetPrice = (value) => {\r\n    this.setState({\r\n      price: value,\r\n    })\r\n  }\r\n\r\n  handleGetShareTimes = (value) => {\r\n    this.setState({\r\n      shareTimes: value,\r\n    })\r\n  }\r\n\r\n  handleGetDescription = (e) => {\r\n    this.setState({\r\n      description: e.target.value,\r\n    })\r\n  }\r\n\r\n  handleGetNFTId = (value) => {\r\n    this.setState({\r\n      rootNFTId: String(value),\r\n    })\r\n  }\r\n\r\n  handleClose = (e) => {\r\n    this.setState({\r\n      open: false,\r\n    })\r\n  }\r\n\r\n  handleClickOpen = (e) => {\r\n    this.setState({\r\n      open: true,\r\n    })\r\n  }\r\n\r\n  handleSearch = async (value) => {\r\n    if (value) {\r\n      value = value.toLowerCase()\r\n      var tokens_list = tokens.tokens\r\n      var matched_data = []\r\n      let reg = new RegExp(value)\r\n      for (let token of tokens_list) {\r\n        var symbol_lower_case = token.symbol.toLowerCase()\r\n        var showed_text = `\\\"${token.symbol}\\\"` + \"   \" + token.address\r\n        var info = {\r\n          value: token.address,\r\n          text: showed_text\r\n        }\r\n        if (reg.test(symbol_lower_case) && !matched_data.includes(info)) {\r\n          matched_data.push(info)\r\n        }\r\n      }\r\n      if (value.includes('0x') && value.length == 42) {\r\n        var info = {\r\n          value: value,\r\n          text: value\r\n        }\r\n        matched_data = [info]\r\n      }\r\n      this.setState({\r\n        data: matched_data\r\n      })\r\n    } else {\r\n      this.setState({ data: [] })\r\n    }\r\n  }\r\n\r\n  handleSelectChange = async (value) => {\r\n    var tokens_list = tokens.tokens\r\n    let address\r\n    let token_symbol\r\n    let token_decimal\r\n    for (let token of tokens_list) {\r\n      if (value === token.address) {\r\n        address = value\r\n        token_symbol = token.symbol\r\n        token_decimal = token.decimals\r\n      }\r\n    }\r\n    if (token_symbol == undefined) {\r\n\r\n      try {\r\n        const token_contract = new web3.eth.Contract(abi, value)\r\n        token_symbol = await token_contract.methods.symbol().call()\r\n        token_decimal = await token_contract.methods.decimals().call()\r\n        address = value\r\n      } catch (error) {\r\n        message.error(\"你提供的地址不是erc20代币，请重新输入\")\r\n      }\r\n\r\n    }\r\n    // console.debug(token_symbol)\r\n    this.setState({\r\n      token_addr: address,\r\n      token_symbol: token_symbol,\r\n      decimal: token_decimal\r\n    })\r\n  }\r\n\r\n  jump = async (event) => {\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    this.setState({\r\n      usedAcc: account\r\n    })\r\n\r\n    const owner = await contract.methods.ownerOf(this.state.rootNFTId).call()\r\n    var issueId = await contract.methods.getIssueIdByNFTId(this.state.rootNFTId).call()\r\n\r\n    var bonus = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\r\n\r\n    if (account == owner.toLowerCase()) {\r\n      this.setState({\r\n        onLoading: false,\r\n        allowSubmitPDF: true,\r\n        jumped: true,\r\n        bonusFee: bonus\r\n      })\r\n    } else {\r\n      message.warning({\r\n        content: \"您并不是此NFT的持有者\",\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  submit = async (event) => {\r\n    /*TODO: call smart contract publish() and wait for publish success event\r\n     * then call backend to get a secret key. Then encrypt the pdf file and upload it to IPFS\r\n     * Finally, form a new metadata json file and send its ipfs hash to backend and publish it\r\n    */\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    this.setState({\r\n      usedAcc: account\r\n    })\r\n    let obj = this\r\n    if (this.state.price === 0 || this.state.bonusFee === 0 || this.state.shareTimes === 0 || this.state.token_addr === null) {\r\n      message.error({\r\n        content: \"你有信息尚未填写\",\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    } else {\r\n\r\n      this.setState({\r\n        onLoading: true\r\n      })\r\n      var price_with_decimal = this.state.price * (10 ** this.state.decimal)\r\n      price_with_decimal = price_with_decimal.toString()\r\n      var ipfsToContract = '0x0000000000000000000000000000000000000000000000000000000000000000'\r\n      console.debug('price_with_decimal: ', price_with_decimal)\r\n      var gasPrice = await web3.eth.getGasPrice()\r\n      var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n      contract.methods.publish(price_with_decimal, this.state.bonusFee, this.state.shareTimes, ipfsToContract, this.state.token_addr).send({\r\n        from: this.state.usedAcc,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          console.log(receipt)\r\n          var publish_event = receipt.events.Publish\r\n          var returned_values = publish_event.returnValues\r\n          var root_nft_id = String(returned_values.rootNFTId)\r\n          console.debug(typeof root_nft_id)\r\n          var issue_id = returned_values.issue_id\r\n          obj.setState({\r\n            onLoading: false,\r\n            rootNFTId: root_nft_id,\r\n            issueId: issue_id,\r\n            allowSubmitPDF: true\r\n          })\r\n          message.success({\r\n            content: \"作品基本信息已提交成功\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false,\r\n          })\r\n          if (error.message.includes('not mined')) {\r\n            message.warning({\r\n              content: \"交易已提交，当前网络较拥堵，请稍等后去我的收藏中查看\",\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n          } else {\r\n            console.debug(error.message)\r\n            message.error({\r\n              content: `Error: ${error.message}`,\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n          }\r\n        })\r\n\r\n    }\r\n\r\n  }\r\n\r\n  checkDetail = async (event) => {\r\n    var new_url = '/#/NFT/' + this.state.rootNFTId\r\n    window.open(new_url, '_self')\r\n  }\r\n\r\n  submitWork = async () => {\r\n    if (this.state.ipfsHashCover === '' || this.state.fileIpfs === '') {\r\n      message.error({\r\n        content: \"你有信息尚未填写\",\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    } else {\r\n\r\n      var img_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.ipfsHashCover\r\n      this.setState({\r\n        coverURL: img_url\r\n      })\r\n      console.debug(\"coverURL: \", this.state.coverURL)\r\n      var trimmed_des = this.state.description.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \" \")\r\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n      const account = accounts[0]\r\n      if (account !== this.state.usedAcc) {\r\n        message.warning({\r\n          content: \"账户发生变化，请切换回原账户\",\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n        return\r\n      }\r\n      var file_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.fileIpfs\r\n      var JSONBody = {\r\n        \"name\": this.state.name,\r\n        \"description\": trimmed_des,\r\n        \"image\": this.state.coverURL,\r\n        \"attributes\": [\r\n          {\r\n            \"display_type\": \"boost_percentage\",\r\n            \"trait_type\": \"Bonuse Percentage\",\r\n            \"value\": this.state.bonusFee\r\n          },\r\n          {\r\n            \"trait_type\": \"File Address\",\r\n            \"value\": file_url\r\n          },\r\n          {\r\n            \"value\": this.state.fileType\r\n          },\r\n          {\r\n            \"trait_type\": \"Encrypted\",\r\n            \"value\": \"TRUE\"\r\n          }\r\n        ]\r\n      }\r\n      console.debug(JSONBody)\r\n      const url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`\r\n      let obj = this\r\n      this.setState({\r\n        onLoading: true\r\n      })\r\n\r\n      try {\r\n        const response = await axios.post(url, JSONBody, {\r\n          headers: {\r\n            pinata_api_key: pinata_api_key,\r\n            pinata_secret_api_key: pinata_secret_api_key\r\n          },\r\n        })\r\n        console.debug(\"metadata: \", response.data.IpfsHash)\r\n        const bytes = bs58.decode(response.data.IpfsHash)\r\n        const bytesToContract = bytes.toString('hex').substring(4,)\r\n        console.log(bytesToContract)\r\n        console.log(response.data.IpfsHash)\r\n        this.setState({\r\n          ipfsMeta: bytesToContract\r\n        })\r\n\r\n        var ipfsToContract = '0x' + bytesToContract\r\n\r\n        var gasPrice = await web3.eth.getGasPrice()\r\n        var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n\r\n        contract.methods.setURI(obj.state.rootNFTId, ipfsToContract).send({\r\n          from: obj.state.usedAcc,\r\n          gasPrice: new_gas_price\r\n        })\r\n          .on('receipt', function (receipt) {\r\n            console.debug(receipt.events.SetURI)\r\n            message.success({\r\n              content: \"作品基本信息已提交成功\",\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n            obj.setState({\r\n              allowSubmitPDF: false,\r\n              finished: true,\r\n              onLoading: false\r\n            })\r\n          })\r\n          .on('error', function (error) {\r\n            obj.setState({\r\n              onLoading: false\r\n            })\r\n            message.error({\r\n              content: `Error: ${error.message}`,\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n          })\r\n\r\n      } catch (error) {\r\n        message.error({\r\n          content: `Error: ${error.message}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props\r\n    let obj = this\r\n    const { TextArea } = Input\r\n    const options = this.state.data.map(d => <Option key={d.value}>{d.text}</Option>)\r\n    const prop = {\r\n      name: 'file',\r\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\r\n      headers: {\r\n        pinata_api_key: pinata_api_key,\r\n        pinata_secret_api_key: pinata_secret_api_key\r\n      },\r\n      data: this.state.buffer,\r\n      beforeUpload: file => {\r\n        return new Promise((resolve, reject) => {\r\n          try {\r\n            const reader = new FileReader()\r\n            reader.readAsArrayBuffer(file)\r\n            reader.onload = (e) => {\r\n              var b = e.target.result\r\n              let params = new FormData()\r\n              params.append('file', b)\r\n              this.setState({\r\n                buffer: params\r\n              })\r\n            }\r\n            resolve()\r\n          } catch (e) {\r\n            message.error('Read file error')\r\n            reject()\r\n          }\r\n        })\r\n      },\r\n      async onChange(info) {\r\n        const { status } = info.file\r\n        // text/plain image/jpeg application/pdf\r\n        if (status === 'done') {\r\n          message.success(`${info.file.name} file uploaded successfully.`)\r\n          obj.setState({\r\n            ipfsHashCover: info.file.response.IpfsHash\r\n          })\r\n\r\n        } else if (status === 'error') {\r\n          message.error(`${info.file.name} file upload failed.`)\r\n        }\r\n      },\r\n      onDrop(e) {\r\n        message.error(`Only image file supported`)\r\n        console.log('Dropped files', e.dataTransfer.files)\r\n      },\r\n    }\r\n\r\n    const propFile = {\r\n      name: 'file',\r\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\r\n      headers: {\r\n        pinata_api_key: pinata_api_key,\r\n        pinata_secret_api_key: pinata_secret_api_key\r\n      },\r\n      beforeUpload: file => {\r\n        return new Promise(async (resolve, reject) => {\r\n          try {\r\n            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n            const signer = accounts[0]\r\n            var message = {\r\n              account: signer,\r\n              nft_id: obj.state.rootNFTId\r\n            }\r\n            const sig = await web3.eth.personal.sign(JSON.stringify(message), signer)\r\n            console.debug(sig)\r\n            var payload = {\r\n              \"nft_id\": obj.state.rootNFTId,\r\n              \"account\": signer,\r\n              \"signature\": sig\r\n            }\r\n            var payload_str = JSON.stringify(payload)\r\n            console.log(payload_str)\r\n            var req_key_url = this.backend + '/api/v1/key/claim'\r\n            try {\r\n              const res = await axios.post(req_key_url, payload_str, {\r\n                headers: {\r\n                  'Content-Type': 'application/json'\r\n                }\r\n              })\r\n              var secret_key = res.data.key//res.data.key\r\n              console.debug(secret_key)\r\n              // if (file.type === 'text/plain') {\r\n              const reader = new FileReader()\r\n              reader.readAsArrayBuffer(file)\r\n              reader.onload = (e) => {\r\n                var b = e.target.result\r\n                var wordArray = CryptoJS.lib.WordArray.create(b)\r\n                const str = CryptoJS.enc.Hex.stringify(wordArray)\r\n                var cipher_text = CryptoJS.AES.encrypt(str, secret_key).toString()\r\n                var myblob = new Blob([cipher_text])\r\n                resolve(myblob)\r\n              }\r\n\r\n            } catch (error) {\r\n              if (error.response.status == 400) {\r\n                if (error.response.data.message.includes(\"signature invalid\")) {\r\n                  message.error({\r\n                    content: \"您的签名有误，请查看签名账号是否正确\",\r\n                    className: 'custom-class',\r\n                    style: {\r\n                      marginTop: '10vh',\r\n                    },\r\n                  })\r\n                } else if (error.response.data.message.includes(\"param invalid\")) {\r\n                  message.error({\r\n                    content: \"参数错误\",\r\n                    className: 'custom-class',\r\n                    style: {\r\n                      marginTop: '10vh',\r\n                    },\r\n                  })\r\n                } else if (error.response.data.message.includes(\"not owned\")) {\r\n                  message.error({\r\n                    content: \"您并不拥有此nft\",\r\n                    className: 'custom-class',\r\n                    style: {\r\n                      marginTop: '10vh',\r\n                    },\r\n                  })\r\n                } else if (error.response.data.message.includes(\"not found\")) {\r\n                  message.error({\r\n                    content: \"此nft还未生成\",\r\n                    className: 'custom-class',\r\n                    style: {\r\n                      marginTop: '10vh',\r\n                    },\r\n                  })\r\n                }\r\n              } else {\r\n                message.error({\r\n                  content: \"请求文件加密密钥失败\",\r\n                  className: 'custom-class',\r\n                  style: {\r\n                    marginTop: '10vh',\r\n                  },\r\n                })\r\n              }\r\n            }\r\n\r\n\r\n          } catch (e) {\r\n            message.error({\r\n              content: \"Read file error\",\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n            reject()\r\n          }\r\n        })\r\n      },\r\n      onChange(info) {\r\n        const { status } = info.file\r\n        if (status === 'done') {\r\n          var file_type = info.file.name.split('\\.')\r\n          var file_suffix = file_type[file_type.length - 1]\r\n          obj.setState({\r\n            fileIpfs: info.file.response.IpfsHash,\r\n            fileType: file_suffix\r\n          })\r\n          console.debug(\"encrypted file hash: \", info.file.response.IpfsHash)\r\n          message.success(`${info.file.name} file uploaded successfully.`)\r\n        }\r\n\r\n      },\r\n      onDrop(e) {\r\n        console.log('Dropped files', e.dataTransfer.files)\r\n      },\r\n    }\r\n\r\n    if (this.state.allowSubmitPDF) {\r\n\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large' >\r\n          <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\r\n\r\n            <div className={classes.paper}>\r\n              <Typography className={classes.titlePub}>\r\n                <b>上传作品文件</b>\r\n              </Typography>\r\n              <form className={classes.form} noValidate>\r\n                {this.state.jumped ? (\r\n                  <div>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\r\n                      <Input\r\n                        placeholder=\"作品名称\"\r\n                        allowClear\r\n                        id=\"pubName\"\r\n                        onChange={this.handleGetPubName}\r\n                        value={this.state.name}\r\n                        className={classes.input}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\r\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\r\n                      <TextArea\r\n                        rows={4}\r\n                        id=\"Description\"\r\n                        onChange={this.handleGetDescription}\r\n                      />\r\n                    </Grid>\r\n                  </div>\r\n                ) : (\r\n                  <div></div>\r\n                )}\r\n                <label style={{ fontSize: 18, marginTop: 50 }}>封面图片 *</label>\r\n                <p style={{ fontSize: 12 }}>请在下方区域上传您的封面图片 <br />\r\n                  封面文件支持这些格式：JPEG/JPG/PNG</p>\r\n                <Dragger {...prop} style={{ width: '100%', minHeight: 100 }} id=\"Uploader\" accept=\".png, .jpg, .jpeg\" >\r\n                  <p className=\"ant-upload-drag-icon\">\r\n                    <InboxOutlined />\r\n                  </p>\r\n                  <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\r\n                  <p className=\"ant-upload-hint\">\r\n                    支持单个文件的上传，支持多种类型文件的上传\r\n                  </p>\r\n                </Dragger>\r\n\r\n                <label style={{ fontSize: 18, marginTop: 50 }}>作品文件 *</label>\r\n                <p style={{ fontSize: 12 }}>请在下方区域上传您的作品文件 </p>\r\n                <Dragger {...propFile} style={{ width: '100%', minHeight: 100 }} id=\"Uploader2\">\r\n                  <p className=\"ant-upload-drag-icon\">\r\n                    <InboxOutlined />\r\n                  </p>\r\n                  <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\r\n                  <p className=\"ant-upload-hint\">\r\n                    支持单个文件的上传和多个文件的上传，支持多种类型文件的上传\r\n                  </p>\r\n                </Dragger>\r\n                <div style={{ textAlign: 'center' }}>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    startIcon={<CloudUploadOutlined />}\r\n                    className={classes.btnPub}\r\n                    onClick={this.submitWork}\r\n                  >\r\n                    发布作品\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </Container>\r\n\r\n        </Spin>\r\n      )\r\n\r\n    } else if (this.state.finished) {\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large'>\r\n\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <div style={{ textAlign: 'center' }}>\r\n              <Typography className={classes.titleCon}>\r\n                <b> 🎉 恭喜您发布成功</b>\r\n              </Typography>\r\n\r\n              <Paper className={classes.paperImg}>\r\n                <img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\r\n              </Paper>\r\n              <Typography variant=\"h4\" style={{ marginTop: 20, fontFamily: 'Ubuntu' }}>\r\n                <b>您获得的NFT是： #{this.state.rootNFTId}</b>\r\n              </Typography>\r\n\r\n              <Button\r\n                variant=\"contained\"\r\n                className={classes.button}\r\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\r\n                onClick={this.checkDetail}\r\n              >\r\n                查看详情\r\n              </Button>\r\n            </div>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    } else {\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large' >\r\n\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\r\n              <div className={classes.paper}>\r\n                <Typography className={classes.titlePub}>\r\n                  <b>发布作品信息</b>\r\n                </Typography>\r\n                <form className={classes.form} noValidate>\r\n                  <Grid container spacing={2}>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\r\n                      <Input\r\n                        placeholder=\"作品名称\"\r\n                        allowClear\r\n                        id=\"pubName\"\r\n                        onChange={this.handleGetPubName}\r\n                        value={this.state.name}\r\n                        className={classes.input}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>收益比例 *</label>\r\n                      <p style={{ fontSize: 14 }}>当您的作品被他人分享并获利时，您希望从他的分享利润中获得多少比例的收益</p>\r\n                      <InputNumber\r\n                        id=\"bonusFee\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        max={100}\r\n                        formatter={value => `${value}%`}\r\n                        parser={value => value.replace('%', '')}\r\n                        onChange={this.handleGetBonusFee}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>通行代币 *</label>\r\n                      <p style={{ fontSize: 14 }}>请选择您支持的支付货币 (输入代币符号或地址)</p>\r\n                      <Select\r\n                        showSearch\r\n                        value={this.state.token_addr}\r\n                        placeholder={\"请输入代币符号或地址\"}\r\n                        // className={classes.input}\r\n                        style={{ width: \"100%\" }}\r\n                        size=\"large\"\r\n                        defaultActiveFirstOption={false}\r\n                        showArrow={false}\r\n                        filterOption={false}\r\n                        onSearch={this.handleSearch}\r\n                        onChange={this.handleSelectChange}\r\n                        notFoundContent={null}\r\n                      >\r\n                        {options}\r\n                      </Select>\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>售卖价格 ({this.state.token_symbol})*</label>\r\n                      <InputNumber\r\n                        id=\"price\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        onChange={this.handleGetPrice}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>最高分享次数 (MAX： 65535)*</label>\r\n                      <p style={{ fontSize: 14 }}>您希望每一个帮助您传播的用户最多能够分享多少次？</p>\r\n                      <InputNumber\r\n                        id=\"shareTimes\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        max={65535}\r\n                        onChange={this.handleGetShareTimes}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\r\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\r\n                      <TextArea\r\n                        rows={4}\r\n                        id=\"Description\"\r\n                        onChange={this.handleGetDescription}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                </form>\r\n                <Grid container alignItems=\"center\" spacing={4} style={{ marginTop: 20, marginBottom: 50 }}>\r\n                  <Grid item xs style={{ textAlign: 'center' }}>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      className={classes.button}\r\n                      startIcon={<CloudUploadOutlined />}\r\n                      style={{ width: 200, height: 50, marginBottom: 20, marginTop: 20 }}\r\n                      onClick={this.submit}\r\n                    >\r\n                      提交信息\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs style={{ textAlign: 'center' }}>\r\n                    <Link onClick={this.handleClickOpen} style={{ fontSize: 10, textDecoration: 'underline' }}>\r\n                      已经上传过基本信息？\r\n                    </Link>\r\n                  </Grid>\r\n                </Grid>\r\n                <Dialog\r\n                  open={this.state.open}\r\n                  onClose={this.handleClose}\r\n                  aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                  <DialogTitle id=\"form-dialog-title\">填写 NFT ID</DialogTitle>\r\n                  <DialogContent>\r\n                    <DialogContentText>\r\n                      请在下方区域填写您要绑定内容的 NFT ID\r\n                    </DialogContentText>\r\n                    <label style={{ fontSize: 14, marginBottom: 10 }}>NFT ID *</label>\r\n                    <InputNumber\r\n                      defaultValue={0}\r\n                      min={0}\r\n                      onChange={this.handleGetNFTId}\r\n                    />\r\n                  </DialogContent>\r\n                  <DialogActions>\r\n                    <Button onClick={this.handleClose} color=\"primary\">\r\n                      取消\r\n                    </Button>\r\n                    <Button variant=\"contained\" onClick={this.jump} color=\"primary\" >\r\n                      去上传作品\r\n                    </Button>\r\n                  </DialogActions>\r\n                </Dialog>\r\n              </div>\r\n            </Container>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    }\r\n\r\n\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(EncryptedPublish)","import './App.css';\r\nimport React, { Component } from 'react';\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport TopBar from './TopBar';\r\n\r\nconst styles = theme => ({\r\n  icon: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  titleFont: {\r\n    fontFamily: 'Teko',\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n  },\r\n  btnMain: {\r\n    color: '#FFFFFF',\r\n    borderColor: '#e3f2fd',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  btnSecond: {\r\n    // marginTop: theme.spacing(3),\r\n    color: '#03A9F4',\r\n    borderColor: '#03A9F4',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n      width: 95\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(7),\r\n    maxWidth: '150%',\r\n\r\n  },\r\n\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    marginTop: 20,\r\n    lineHeight: 1.5,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n    },\r\n  },\r\n\r\n  shouldKnow: {\r\n    fontFamily: 'Teko',\r\n    textAlign: 'center',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 40,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 40,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 60,\r\n    },\r\n  },\r\n});\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#FDFEFE',\r\n    },\r\n    secondary: {\r\n      main: '#2196f3',\r\n    }\r\n  },\r\n});\r\n\r\nclass Buy extends Component {\r\n  render() {\r\n    const { classes } = this.props\r\n    return (\r\n      <div>\r\n        <ThemeProvider theme={theme}>\r\n          <TopBar />\r\n          <Container component=\"main\" className={classes.container}>\r\n            <div className={classes.paper}>\r\n              <Typography color=\"inherit\" noWrap className={classes.shouldKnow}>\r\n                <b>敬请期待</b>\r\n              </Typography>\r\n            </div>\r\n          </Container>\r\n        </ThemeProvider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Buy);","import React from 'react';\r\nimport { HashRouter, Route, Switch } from 'react-router-dom';\r\n\r\nimport App from './App';\r\nimport Publish from './Publish';\r\nimport NFTInfo from './NFTInfo';\r\nimport SellSingle from './SellSingle';\r\nimport BuySingle from './BuySingle';\r\nimport Collections from './Collections';\r\nimport Spark from './NFTSpark';\r\nimport IntroPublish from './IntroPublish';\r\nimport EncryptedPublish from './EncryptedPublish';\r\nimport Buy from './Buy';\r\n\r\nconst BasicRoute = () => (\r\n  <HashRouter >\r\n    <Switch>\r\n      <Route exact path=\"/\" component={App} />\r\n      <Route exact path=\"/introPublish\" component={IntroPublish} />\r\n      <Route exact path=\"/buy\" component={Buy} />\r\n      <Route exact path=\"/publish\" component={Publish} />\r\n      <Route exact path=\"/encryptedPublish\" component={EncryptedPublish} />\r\n      <Route exact path=\"/sellSingle/:NFTId\" component={SellSingle} />\r\n      <Route exact path=\"/buySingle/:NFTId\" component={BuySingle} />\r\n      <Route exact path=\"/collections\" component={Collections} />\r\n      <Route exact path=\"/NFT/:id\" component={NFTInfo} />\r\n      <Route exact path=\"/NFT/spark/:id\" component={Spark} />\r\n    </Switch>\r\n  </HashRouter>\r\n);\r\n\r\n\r\nexport default BasicRoute;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport 'bootstrap/dist/css/bootstrap-theme.css';\r\nimport Router from './Router';\r\n\r\nReactDOM.render(\r\n  <Router />,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\n"],"sourceRoot":""}