{"version":3,"sources":["project.secret.js","imgs/books.png","TopBar.js","imgs/sparkLink.jpg","App.js","serviceWorker.js","web3.js","contract.js","Publish.js","NFTInfo.js","SellSingle.js","BuySingle.js","Collections.js","NFTSpark.js","IntroPublish.js","EncryptedPublish.js","Buy.js","Router.js","index.js"],"names":["module","exports","pinata_api_key","pinata_secret_api_key","TopBar","createTheme","breakpoints","values","xs","sm","md","lg","xl","palette","primary","main","secondary","state","isConnected","userAddress","accountInfo","sleep","ms","a","Promise","resolve","setTimeout","getAccount","window","ethereum","request","method","accounts","account","alert","setState","console","debug","w3","Web3","eth","getAccounts","length","this","substring","classes","props","Toolbar","Grid","container","direction","justifyContent","item","className","titleGrid","Typography","component","color","noWrap","title","href","alt","src","logo","btnGrid","Button","size","btn","target","GithubOutlined","icon","onClick","WalletTwoTone","WalletFilled","Component","withStyles","theme","down","fontSize","up","marginTop","marginBottom","textAlign","minWidth","fontFamily","between","marginLeft","borderColor","width","objectFit","position","left","top","withTheme","App","ThemeProvider","page","Container","paper","style","title2","title3","books","spacing","variant","btnMain","btnSecond","marginRight","titleFont","borderWidth","borderRadius","height","maxWidth","Boolean","location","hostname","match","web3","error","Contract","require","FormData","bs58","Option","Select","abi","Publish","name","bonusFee","price","buffer","ipfsHashCover","ipfsMeta","fileIpfs","description","shareTimes","onLoading","rootNFTId","usedAcc","sig","fileType","finished","coverURL","data","token_addr","token_symbol","decimal","handleGetPubName","event","value","handleGetBonusFee","handleGetPrice","handleGetShareTimes","handleGetDescription","e","handleSearch","toLowerCase","tokens_list","tokens","matched_data","reg","RegExp","token","symbol_lower_case","symbol","showed_text","address","info","text","test","includes","push","handleSelectChange","token_decimal","decimals","undefined","token_contract","methods","call","message","submit","obj","content","img_url","trimmed_des","replace","file_url","JSONBody","axios","post","headers","response","IpfsHash","bytes","decode","bytesToContract","toString","price_with_decimal","ipfsToContract","getGasPrice","gasPrice","new_gas_price","Math","floor","parseInt","contract","publish","send","from","on","receipt","log","returned_values","events","returnValues","root_nft_id","issue_id","issueId","success","warning","checkDetail","new_url","open","params","chainId","TextArea","Input","options","map","d","prop","action","beforeUpload","file","reject","reader","FileReader","readAsArrayBuffer","onload","b","result","append","onChange","status","onDrop","dataTransfer","files","propFile","file_type","split","file_suffix","spinning","titleCon","Paper","paperImg","button","titlePub","form","noValidate","placeholder","allowClear","id","input","defaultValue","min","max","formatter","parser","inputNum","showSearch","defaultActiveFirstOption","showArrow","filterOption","onSearch","notFoundContent","rows","minHeight","accept","InboxOutlined","startIcon","CloudUploadOutlined","backgroundColor","display","flexDirection","alignItems","avatar","margin","blue","fileBtn","padding","background","border","boxShadow","FileSaver","CryptoJS","NFTInfo","gateway","backend","loading","showDecryptProgress","decryptPercentage","showProgress","percentage","Profit","loadItem","Cover","Name","Description","BonusFee","childrenNum","encrypted","dataUrl","isEncrypt","spark","tokenAddr","tokenSymbol","return","reload","claim","claimProfit","downloadIPFS","dataSplits","dataHash","cipher_config","url","onDownloadProgress","progress","round","loaded","total","ciphertext","signJSON","JSON","stringify","signDataAndDecrypt","open_config","responseType","URL","createObjectURL","Blob","link","document","createElement","suffix","fileName","download","body","appendChild","click","removeChild","revokeObjectURL","signer","json_str","personal","sign","payload","payload_str","req_key_url","res","key","AES","decrypt","plainText","enc","Utf8","wordArray","Hex","parse","BaText","wordArrayToByteArray","blob","saveAs","error_msg","wordToByteArray","word","lengthBefore","addedLength","hasOwnProperty","sigBytes","words","bytesAdded","current_bytes","i","added_info","percent","Uint8Array","ownerOf","owner","utils","toChecksumAddress","getTokenAddrByNFTId","getProfitByNFTId","profit","tokenURI","meta","hash","getIssueIdByNFTId","issue","getRoyaltyFeeByIssueId","royalty","file_hash","request_url","timeout","fileAddr","attributes","trait_type","image","leafUrl","get","then","children_num","children_count","catch","gutterBottom","type","ArrowLeftOutlined","alignContent","cbutton","MoneyCollectOutlined","DollarCircleOutlined","Skeleton","animation","imagePapaer","imageStyle","content2","align","paragraph","cbutton2","DownloadOutlined","FireOutlined","toUrl","host","share","onCopy","copied","IconButton","CopyOutlined","sell_info","SellSingle","ipfsHashMeta","toAddress","NFTId","onSale","currentAcc","handleClickOpen","handleClose","handleGetAddr","handleClickLink","sell","determinePriceAndApprove","metadata","bonus","name_holder","getTransferPriceByNFTId","child_url","showSellBtn","btnSell","disabled","img","imgPaper","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","BuySingle","sparkAddr","priceString","approvedAddr","approved","handleBuy","safeTransferFrom","handleApprove","approve","toUpperCase","getApproved","allowance","buyButton","btnDisable","Collections","cards","isLogin","user_address","viewable","onloading","SkeletoNumber","noNFT","getMetadata","nft","metaDatas","ipfs_link","ipfs_hash_arr","ipfs_hash","getNft","balanceId","checksum_address","renderDescription","balanceOf","nft_number","ids","element","reversed_cards","reverse","_chainId","cardGrid","Array","card","index","Card","CardMedia","cardMedia","CardContent","cardContent","CardActions","showCard","heroContent","paddingTop","paddingBottom","flexGrow","NFTSpark","remainShillTimes","maxShillTimes","recommendNFT","shill","acceptShill","bouns","getShillPriceByNFTId","remain_shill_times","max_shill_times","shill_times","suggest_next_nft","showRecommend","imagePaper","Link","textDecoration","IntroPublish","shouldKnow","lineHeight","EncryptedPublish","allowSubmitPDF","jumped","handleGetNFTId","String","jump","submitWork","setURI","SetURI","nft_id","secret_key","lib","WordArray","create","str","cipher_text","encrypt","myblob","btnPub","Buy","BasicRoute","exact","path","Spark","ReactDOM","render","Router","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.60646662.chunk.js","sourcesContent":["module.exports.pinata_api_key = 'e991ae84dcfbb8989294'\r\nmodule.exports.pinata_secret_api_key = 'c0bacda4094b3e5edc720e15a07ffc7cb853c383cbff0fcc14eda8024e7223de'\r\n","export default __webpack_public_path__ + \"static/media/books.6e483aa8.png\";","import React, { Component } from 'react';\r\nimport logo from './imgs/sparkLink.jpg';\r\nimport './App.css';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { createTheme, withStyles } from '@material-ui/core/styles';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { GithubOutlined, WalletOutlined, WalletTwoTone, WalletFilled} from '@ant-design/icons';\r\nimport Web3 from 'web3';\r\n\r\nconst theme = createTheme({\r\n  breakpoints: {\r\n    values: {\r\n      xs: 0,\r\n      sm: 600,\r\n      md: 900,\r\n      lg: 1200,\r\n      xl: 1536,\r\n    },\r\n  },\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n});\r\n\r\nconst styles = theme => ({\r\n  icon: {\r\n    [theme.breakpoints.down('xl')]: {\r\n      fontSize: 19,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 27,\r\n    },\r\n  },\r\n  titleGrid: {\r\n    marginTop: 25,\r\n    marginBottom: 10,\r\n    textAlign: 'center',\r\n  },\r\n  title: {\r\n    minWidth: 100,\r\n    fontSize: 25,\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 45,\r\n    },\r\n\r\n  },\r\n  btnGrid: {\r\n    // marginTop: 25,\r\n    marginBottom: 10,\r\n    minWidth: 370,\r\n    marginTop: 30,\r\n    // backgroundColor: '#e3f2fd',\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '12vw'\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '33vw'\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '40vw'\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginTop: 40,\r\n      marginLeft: '60vw',\r\n    },\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 15,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 15,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 18,\r\n      width: 100\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 18,\r\n      width: 100\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 25,\r\n    },\r\n  },\r\n  logo: {\r\n    objectFit: 'contain',\r\n    position: 'fixed',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: '30%'\r\n    },\r\n    [theme.breakpoints.between('sm', 'lg')]: {\r\n      width: 200, \r\n      left: 60,\r\n      top: 0\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      width: 200,\r\n      left: 150,\r\n      top: 0\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      width: 350,\r\n      left: 160, \r\n      top: -15\r\n    },\r\n  }\r\n\r\n});\r\n\r\nclass TopBar extends Component {\r\n\r\n  state = {\r\n    isConnected: false,\r\n    userAddress: '',\r\n    accountInfo: ''\r\n  };\r\n\r\n  async componentWillMount() {\r\n    let w3 = new Web3(window.ethereum);\r\n    const accounts = await w3.eth.getAccounts();\r\n    if (accounts.length == 0) {\r\n      this.setState({\r\n        isConnected: false\r\n      });\r\n    } else {\r\n      var account = accounts[0]\r\n      this.setState({ accountInfo: account.substring(0, 5), });\r\n      this.setState({\r\n        isConnected: true\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  sleep = async (ms) => {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n\r\n  getAccount = async () => {\r\n    try {\r\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n      const account = accounts[0];\r\n      alert('您已经连接metamask, 当前账户： ' + account)\r\n      this.setState({ isConnected: true, });\r\n      this.setState({ userAddress: account, });\r\n    } catch (error) {\r\n      console.debug(error)\r\n      this.setState({ isConnected: false, });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props\r\n\r\n    return (\r\n      <div>\r\n        <Toolbar>\r\n          <Grid container direction=\"row\" justifyContent=\"flex-start\" >\r\n            <Grid item className={classes.titleGrid } xs ={2}>\r\n              <Typography component=\"h1\" color=\"inherit\" noWrap className={classes.title} >\r\n                <a href='/#/' >\r\n                <img alt=\"logo\" src={logo} className={classes.logo} />\r\n                </a>\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item className={classes.btnGrid}>\r\n              <Button size=\"large\" className={classes.btn} href='/#/' >\r\n                <b>首页</b>\r\n              </Button>\r\n              <Button size=\"large\" className={classes.btn} href='/#/introPublish'>\r\n                <b>发布</b>\r\n              </Button>\r\n\r\n\r\n              <Button size=\"large\" className={classes.btn} href='/#/collections'>\r\n                <b>我的收藏</b>\r\n              </Button>\r\n\r\n              <Button size=\"large\" href='https://github.com/SparkNFT' target=\"_blank\">\r\n                <GithubOutlined className={classes.icon} />\r\n              </Button>\r\n              {this.state.isConnected ? (\r\n                <Button onClick={this.getAccount}>\r\n                  <WalletTwoTone className={classes.icon} />\r\n                </Button>\r\n              ) : (\r\n                <Button onClick={this.getAccount}>\r\n                  <WalletFilled className={classes.icon} />\r\n                </Button>\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        </Toolbar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(TopBar);","export default \"data:image/jpeg;base64,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\"","import books from './imgs/books.png';\r\nimport './App.css';\r\nimport React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport TopBar from './TopBar';\r\n\r\nconst styles = theme => ({\r\n  title: {\r\n    fontFamily: 'Teko',\r\n    marginTop: '25%',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 100,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 150,\r\n    },\r\n  },\r\n  title2: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 15,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 55,\r\n    },\r\n  },\r\n  title3: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 8,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 15,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 45,\r\n    },\r\n  },\r\n  icon: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  titleFont: {\r\n    fontFamily: 'Teko',\r\n  },\r\n  btnMain: {\r\n    // marginTop: theme.spacing(3),\r\n    color: '#FFFFFF',\r\n    borderColor: '#e3f2fd',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  btnSecond: {\r\n    // marginTop: theme.spacing(3),\r\n    color: '#03A9F4',\r\n    borderColor: '#03A9F4',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(7),\r\n    textAlign: 'center'\r\n  },\r\n  container: {\r\n    maxWidth: '100%'\r\n  },\r\n  books: {\r\n    width: '90%',\r\n    height: 'auto'\r\n  }\r\n});\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#FDFEFE',\r\n    },\r\n    secondary: {\r\n      main: '#2196f3',\r\n    }\r\n  },\r\n});\r\n\r\nclass App extends Component {\r\n  render() {\r\n    const { classes } = this.props\r\n    return (\r\n      <div>\r\n\r\n        <ThemeProvider theme={theme}>\r\n          <div className={classes.page}>\r\n            <TopBar />\r\n            <Container component=\"main\" className={classes.container}>\r\n              <div className={classes.paper}>\r\n                <Grid container justifyContent=\"center\" >\r\n                  <Grid item style={{ minWidth: '50%' }}>\r\n                    <Typography color=\"inherit\" noWrap className={classes.title} >\r\n                      <b>SparkLink</b>\r\n                    </Typography>\r\n                    <Typography color=\"inherit\" noWrap className={classes.title2}>\r\n                      <b>人人传播，互相支持，仿若星星之火，点亮一片世界。</b>\r\n                    </Typography>\r\n                    <Typography color=\"inherit\" noWrap className={classes.title3}>\r\n                      发布你爱的 & 支持你爱的 & 传播你爱的\r\n                    </Typography>\r\n\r\n                  </Grid>\r\n                  <Grid item xs={5} >\r\n                    <img src={books} className={classes.books} />\r\n                  </Grid>\r\n                  <Grid container justifyContent=\"center\" spacing={5} >\r\n                    <Grid item >\r\n                      <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnMain} href='/#/introPublish'>\r\n                        <b>去发布</b>\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item >\r\n                      <Button size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} href='/#/buy'>\r\n                        <b>去购买</b>\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n            </Container>\r\n          </div>\r\n        </ThemeProvider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(App);","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.0/8 are considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n  )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import Web3 from 'web3';\r\nvar web3;\r\ntry {\r\n  web3 = new Web3(window.ethereum);\r\n  // web3 = new Web3(new Web3.providers.HttpProvider('https://matic-mainnet--jsonrpc.datahub.figment.io/apikey/e84b63fff0e37deb30837101f20eb793/'))\r\n} catch (error) {\r\n  web3 = new Web3('ws://localhost:8546');\r\n}\r\nexport default web3;","import web3 from './web3';\r\n\r\nconst address = '0xb42d4525841008A69E427026DF354067fD6A524f'; // rinkeby 0x7B5B92B0eD1DfeafdbD724b177A7733Bda67497F\r\nconst abi = [\r\n  {\r\n    \"inputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"constructor\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"approved\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"Approval\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"operator\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"approved\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"name\": \"ApprovalForAll\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"receiver\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"amount\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"name\": \"Claim\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"transfer_price\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"name\": \"DeterminePrice\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"transfer_price\",\r\n        \"type\": \"uint128\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"DeterminePriceAndApprove\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"string\",\r\n        \"name\": \"content\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"name\": \"Label\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"issue_id\",\r\n        \"type\": \"uint32\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"publisher\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"rootNFTId\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"token_addr\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"Publish\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"bytes32\",\r\n        \"name\": \"old_URI\",\r\n        \"type\": \"bytes32\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"bytes32\",\r\n        \"name\": \"new_URI\",\r\n        \"type\": \"bytes32\"\r\n      }\r\n    ],\r\n    \"name\": \"SetURI\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"from\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"Transfer\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"acceptShill\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"payable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"approve\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"balanceOf\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"claimProfit\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"_price\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"name\": \"determinePrice\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"_price\",\r\n        \"type\": \"uint128\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"_to\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"determinePriceAndApprove\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"getApproved\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getDepthByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getEditionIdByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"pure\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getFatherByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getIssueIdByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"pure\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"getLossRatio\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint8\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint8\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"pure\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getProfitByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getRemainShillTimesByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint16\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint16\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"getRootNFTIdByIssueId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"pure\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"getRoyaltyFeeByIssueId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint8\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint8\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getShillPriceByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"getShillTimesByIssueId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint16\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint16\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"getTokenAddrByIssueId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getTokenAddrByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"getTotalAmountByIssueId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"getTransferPriceByNFTId\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint128\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"operator\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"isApprovedForAll\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"isEditionExisting\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint32\",\r\n        \"name\": \"_issue_id\",\r\n        \"type\": \"uint32\"\r\n      }\r\n    ],\r\n    \"name\": \"isIssueExisting\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      }\r\n    ],\r\n    \"name\": \"isRootNFT\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"pure\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"content\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"name\": \"label\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"name\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"ownerOf\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint128\",\r\n        \"name\": \"_first_sell_price\",\r\n        \"type\": \"uint128\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint8\",\r\n        \"name\": \"_royalty_fee\",\r\n        \"type\": \"uint8\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint16\",\r\n        \"name\": \"_shill_times\",\r\n        \"type\": \"uint16\"\r\n      },\r\n      {\r\n        \"internalType\": \"bytes32\",\r\n        \"name\": \"_ipfs_hash\",\r\n        \"type\": \"bytes32\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"_token_addr\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"publish\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"from\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"safeTransferFrom\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"payable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"from\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      },\r\n      {\r\n        \"internalType\": \"bytes\",\r\n        \"name\": \"_data\",\r\n        \"type\": \"bytes\"\r\n      }\r\n    ],\r\n    \"name\": \"safeTransferFrom\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"payable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"operator\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"approved\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"name\": \"setApprovalForAll\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint64\",\r\n        \"name\": \"_NFT_id\",\r\n        \"type\": \"uint64\"\r\n      },\r\n      {\r\n        \"internalType\": \"bytes32\",\r\n        \"name\": \"ipfs_hash\",\r\n        \"type\": \"bytes32\"\r\n      }\r\n    ],\r\n    \"name\": \"setURI\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"bytes4\",\r\n        \"name\": \"interfaceId\",\r\n        \"type\": \"bytes4\"\r\n      }\r\n    ],\r\n    \"name\": \"supportsInterface\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"symbol\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"tokenURI\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"from\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"tokenId\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"transferFrom\",\r\n    \"outputs\": [],\r\n    \"stateMutability\": \"payable\",\r\n    \"type\": \"function\"\r\n  }\r\n]\r\n\r\nexport default new web3.eth.Contract(abi, address);","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport { blue } from '@material-ui/core/colors'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Container from '@material-ui/core/Container'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { message } from 'antd'\r\nimport { InboxOutlined } from '@ant-design/icons'\r\nimport Dragger from 'antd/lib/upload/Dragger'\r\nimport { CloudUploadOutlined } from '@ant-design/icons'\r\n// import CloudUploadIcon from '@material-ui/icons/CloudUpload'\r\nimport { Input, InputNumber, Select, Spin } from 'antd'\r\nimport 'antd/dist/antd.css'\r\nimport TopBar from './TopBar'\r\nimport axios from 'axios'\r\nimport contract from './contract'\r\nimport web3 from './web3'\r\nimport ReactLoading from 'react-loading'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport * as tokens from './tokens_list.json'\r\n\r\n\r\n\r\nconst {\r\n  pinata_api_key,\r\n  pinata_secret_api_key,\r\n} = require('./project.secret')\r\n\r\nconst FormData = require('form-data')\r\nconst bs58 = require('bs58')\r\nconst { Option } = Select\r\nconst abi = require('erc-20-abi')\r\n\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\n\r\nconst styles = theme => ({\r\n  main: {\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: '60%'\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: 500\r\n    },\r\n  },\r\n  titleCon: {\r\n    marginTop: 50,\r\n    fontFamily: 'Ubuntu',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 30\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      fontSize: 40\r\n    },\r\n  },\r\n  paperImg: {\r\n    backgroundColor: '#EFEBE9',\r\n    width: 330,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: '5%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '30%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '30%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '40%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '45%',\r\n      marginTop: 30,\r\n    },\r\n  },\r\n  titlePub: {\r\n    marginTop: \"3%\",\r\n    fontFamily: 'Ubuntu',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 30\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      fontSize: 40\r\n    },\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: blue[500],\r\n    width: 60,\r\n    height: 60\r\n  },\r\n  form: {\r\n    width: '150%',\r\n    marginTop: theme.spacing(7),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  fileBtn: {\r\n    padding: '10px 30px 10px 30px',\r\n    background: '#66C1E4',\r\n    border: 'none',\r\n    color: '#FFF',\r\n    boxShadow: '1px 1px 1px #4C6E91',\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n    fontSize: 20,\r\n    borderRadius: 25,\r\n    color: '#FFFFFF',\r\n    backgroundColor: '#2196f3'\r\n  },\r\n  input: {\r\n    height: 40,\r\n    borderRadius: 3,\r\n    width: '100%',\r\n  },\r\n  inputNum: {\r\n    height: 40,\r\n    borderRadius: 3,\r\n    width: '100%',\r\n    fontSize: 20,\r\n  }\r\n})\r\n\r\n\r\nclass Publish extends Component {\r\n  state = {\r\n    name: '',\r\n    bonusFee: 0,\r\n    price: 0,\r\n    buffer: null,\r\n    ipfsHashCover: '',\r\n    ipfsMeta: '',\r\n    fileIpfs: '',\r\n    description: '',\r\n    shareTimes: 0,\r\n    onLoading: false,\r\n    rootNFTId: '',\r\n    usedAcc: '',\r\n    sig: '',\r\n    fileType: '',\r\n    finished: false,\r\n    coverURL: '',\r\n    data: [],\r\n    token_addr: null,\r\n    token_symbol: 'MATIC',\r\n    decimal: 0,\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (!window.ethereum) {\r\n      alert(\"请先安装metamask\")\r\n      window.location.href = '/#/introPublish'\r\n      return\r\n    }\r\n    // const chainId = await window.ethereum.request({ method: 'eth_chainId' })\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\")\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n  }\r\n\r\n  handleGetPubName = (event) => {\r\n    this.setState({\r\n      name: event.target.value,\r\n    })\r\n  }\r\n\r\n  handleGetBonusFee = (value) => {\r\n    this.setState({\r\n      bonusFee: value,\r\n    })\r\n  }\r\n\r\n  handleGetPrice = (value) => {\r\n    this.setState({\r\n      price: value,\r\n    })\r\n  }\r\n\r\n  handleGetShareTimes = (value) => {\r\n    this.setState({\r\n      shareTimes: value,\r\n    })\r\n  }\r\n\r\n  handleGetDescription = (e) => {\r\n    this.setState({\r\n      description: e.target.value,\r\n    })\r\n  }\r\n\r\n  handleSearch = async (value) => {\r\n    if (value) {\r\n      var value = value.toLowerCase()\r\n      var tokens_list = tokens.tokens\r\n      var matched_data = []\r\n      let reg = new RegExp(value)\r\n      for (let token of tokens_list) {\r\n        var symbol_lower_case = token.symbol.toLowerCase()\r\n        var showed_text = `\\\"${token.symbol}\\\"` + \"   \" + token.address\r\n        var info = {\r\n          value: token.address,\r\n          text: showed_text\r\n        }\r\n        if (reg.test(symbol_lower_case) && !matched_data.includes(info)) {\r\n          matched_data.push(info)\r\n        }\r\n      }\r\n      if (value.includes('0x') && value.length == 42) {\r\n        var info = {\r\n          value: value,\r\n          text: value\r\n        }\r\n        matched_data = [info]\r\n      }\r\n      this.setState({\r\n        data: matched_data\r\n      })\r\n    } else {\r\n      this.setState({ data: [] })\r\n    }\r\n  }\r\n\r\n  handleSelectChange = async (value) => {\r\n    var tokens_list = tokens.tokens\r\n    let address\r\n    let token_symbol\r\n    let token_decimal\r\n    for (let token of tokens_list) {\r\n      if (value === token.address) {\r\n        address = value\r\n        token_symbol = token.symbol\r\n        token_decimal = token.decimals\r\n      }\r\n    }\r\n    if (token_symbol == undefined) {\r\n\r\n      try {\r\n        const token_contract = new web3.eth.Contract(abi, value)\r\n        token_symbol = await token_contract.methods.symbol().call()\r\n        token_decimal = await token_contract.methods.decimals().call()\r\n        address = value\r\n      } catch (error) {\r\n        message.error(\"你提供的地址不是erc20代币，请重新输入\")\r\n      }\r\n\r\n    }\r\n    // console.debug(token_symbol)\r\n    this.setState({\r\n      token_addr: address,\r\n      token_symbol: token_symbol,\r\n      decimal: token_decimal\r\n    })\r\n\r\n  }\r\n\r\n  submit = async (event) => {\r\n    /*TODO: call smart contract publish() and wait for publish success event\r\n     * then call backend to get a secret key. Then encrypt the pdf file and upload it to IPFS\r\n     * Finally, form a new metadata json file and send its ipfs hash to backend and publish it\r\n    */\r\n    let obj = this\r\n    if (this.state.price === 0 || this.state.bonusFee === 0 || this.state.shareTimes === 0 || this.state.ipfsHashCover === '' || this.state.fileIpfs === '' || this.state.token_addr === null) {\r\n      message.error({\r\n        content: \"你有信息尚未填写\",\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    } else {\r\n\r\n      this.setState({\r\n        onLoading: true\r\n      })\r\n      var img_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.ipfsHashCover\r\n      this.setState({\r\n        coverURL: img_url\r\n      })\r\n      console.debug(\"coverURL: \", this.state.coverURL)\r\n      var trimmed_des = this.state.description.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \" \")\r\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n      const account = accounts[0]\r\n      this.setState({\r\n        usedAcc: account\r\n      })\r\n      var file_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.fileIpfs\r\n      var JSONBody = {\r\n        \"name\": this.state.name,\r\n        \"description\": trimmed_des,\r\n        \"image\": this.state.coverURL,\r\n        \"attributes\": [\r\n          {\r\n            \"display_type\": \"boost_percentage\",\r\n            \"trait_type\": \"Bonuse Percentage\",\r\n            \"value\": this.state.bonusFee\r\n          },\r\n          {\r\n            \"trait_type\": \"File Address\",\r\n            \"value\": file_url\r\n          },\r\n          {\r\n            \"value\": this.state.fileType\r\n          },\r\n          {\r\n            \"trait_type\": \"Encrypted\",\r\n            \"value\": \"FALSE\"\r\n          }\r\n        ]\r\n      }\r\n\r\n      const url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`\r\n\r\n      try {\r\n        const response = await axios.post(url, JSONBody, {\r\n          headers: {\r\n            pinata_api_key: pinata_api_key,\r\n            pinata_secret_api_key: pinata_secret_api_key\r\n          },\r\n        })\r\n        console.debug(\"metadata: \", response.data.IpfsHash)\r\n        const bytes = bs58.decode(response.data.IpfsHash)\r\n        const bytesToContract = bytes.toString('hex').substring(4,)\r\n        this.setState({\r\n          ipfsMeta: bytesToContract\r\n        })\r\n\r\n        var price_with_decimal = this.state.price * (10 ** this.state.decimal)\r\n        price_with_decimal = price_with_decimal.toString()\r\n        console.debug(\"price_with_decimal: \", price_with_decimal)\r\n        var ipfsToContract = '0x' + bytesToContract\r\n\r\n        var gasPrice = await web3.eth.getGasPrice()\r\n        var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n        contract.methods.publish(price_with_decimal, this.state.bonusFee, this.state.shareTimes, ipfsToContract, this.state.token_addr).send({\r\n          from: this.state.usedAcc,\r\n          gasPrice: new_gas_price\r\n        })\r\n          .on('receipt', function (receipt) {\r\n            console.log(receipt)\r\n            var publish_event = receipt.events.Publish\r\n            var returned_values = publish_event.returnValues\r\n            var root_nft_id = returned_values.rootNFTId\r\n            var issue_id = returned_values.issue_id\r\n            obj.setState({\r\n              onLoading: false,\r\n              rootNFTId: root_nft_id,\r\n              issueId: issue_id,\r\n              finished: true\r\n            })\r\n            message.success({\r\n              content: \"已经成功发布作品\",\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n          })\r\n          .on('error', function (error) {\r\n            obj.setState({\r\n              onLoading: false,\r\n            })\r\n            if (error.message.includes('not mined')) {\r\n              message.warning({\r\n                content: \"交易已提交，当前网络较拥堵，请稍等后去我的收藏中查看\",\r\n                className: 'custom-class',\r\n                style: {\r\n                  marginTop: '10vh',\r\n                },\r\n              })\r\n            } else {\r\n              console.debug(error.message)\r\n              message.error({\r\n                content: `Error: ${error.message}`,\r\n                className: 'custom-class',\r\n                style: {\r\n                  marginTop: '10vh',\r\n                },\r\n              })\r\n            }\r\n          })\r\n\r\n\r\n      } catch (error) {\r\n        console.debug(error)\r\n        message.error({\r\n          content: `似乎遇到了些小问题： ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  checkDetail = async (event) => {\r\n    var new_url = '/#/NFT/' + this.state.rootNFTId\r\n    window.open(new_url, '_self')\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props\r\n    let obj = this\r\n    const { TextArea } = Input\r\n    const options = this.state.data.map(d => <Option key={d.value}>{d.text}</Option>)\r\n    const prop = {\r\n      name: 'file',\r\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\r\n      headers: {\r\n        pinata_api_key: pinata_api_key,\r\n        pinata_secret_api_key: pinata_secret_api_key\r\n      },\r\n      data: this.state.buffer,\r\n      beforeUpload: file => {\r\n        return new Promise((resolve, reject) => {\r\n          try {\r\n            const reader = new FileReader()\r\n            reader.readAsArrayBuffer(file)\r\n            reader.onload = (e) => {\r\n              var b = e.target.result\r\n              let params = new FormData()\r\n              params.append('file', b)\r\n              this.setState({\r\n                buffer: params\r\n              })\r\n            }\r\n            resolve()\r\n          } catch (e) {\r\n            message.error('Read file error')\r\n            reject()\r\n          }\r\n        })\r\n      },\r\n      async onChange(info) {\r\n        const { status } = info.file\r\n        // text/plain image/jpeg application/pdf\r\n        if (status === 'done') {\r\n          message.success(`${info.file.name} file uploaded successfully.`)\r\n          obj.setState({\r\n            ipfsHashCover: info.file.response.IpfsHash\r\n          })\r\n\r\n        } else if (status === 'error') {\r\n          message.error(`${info.file.name} file upload failed.`)\r\n        }\r\n      },\r\n      onDrop(e) {\r\n        message.error(`Only image file supported`)\r\n        console.log('Dropped files', e.dataTransfer.files)\r\n      },\r\n    }\r\n\r\n    const propFile = {\r\n      name: 'file',\r\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\r\n      headers: {\r\n        pinata_api_key: pinata_api_key,\r\n        pinata_secret_api_key: pinata_secret_api_key\r\n      },\r\n      data: this.state.buffer,\r\n      beforeUpload: file => {\r\n        return new Promise((resolve, reject) => {\r\n          try {\r\n            const reader = new FileReader()\r\n            reader.readAsArrayBuffer(file)\r\n            reader.onload = (e) => {\r\n              var b = e.target.result\r\n              let params = new FormData()\r\n              params.append('file', b)\r\n              this.setState({\r\n                buffer: params\r\n              })\r\n            }\r\n            resolve()\r\n          } catch (e) {\r\n            message.error('Read file error')\r\n            reject()\r\n          }\r\n        })\r\n      },\r\n      async onChange(info) {\r\n        const { status } = info.file\r\n        // console.debug(typeof info.file.type)\r\n        // text/plain image/jpeg application/pdf\r\n        if (status === 'done') {\r\n          message.success(`${info.file.name} file uploaded successfully.`)\r\n          var file_type = info.file.name.split('\\.')\r\n          var file_suffix = file_type[file_type.length - 1]\r\n          console.debug(file_suffix)\r\n          console.debug(\"file ipfs hash: \", info.file.response.IpfsHash)\r\n          obj.setState({\r\n            fileIpfs: info.file.response.IpfsHash,\r\n            fileType: file_suffix\r\n          })\r\n\r\n\r\n        } else if (status === 'error') {\r\n          message.error(`${info.file.name} file upload failed.`)\r\n        }\r\n      },\r\n      onDrop(e) {\r\n        message.error(`Only image file supported`)\r\n        console.log('Dropped files', e.dataTransfer.files)\r\n      },\r\n    }\r\n\r\n\r\n    // if (this.state.onLoading) {\r\n    //   return (\r\n    //     <div>\r\n    //       <ThemeProvider theme={theme}>\r\n    //         <TopBar />\r\n    //         <div style={{ marginLeft: '35%', marginTop: '10%' }}>\r\n    //           <ReactLoading type={'bars'} color={'#2196f3'} width={'40%'} />\r\n    //         </div>\r\n    //       </ThemeProvider>\r\n    //     </div>\r\n    //   )\r\n    // } else \r\n    if (this.state.finished) {\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <div style={{ textAlign: 'center' }}>\r\n              <Typography className={classes.titleCon}>\r\n                <b> 🎉 恭喜您发布成功</b>\r\n              </Typography>\r\n\r\n              <Paper className={classes.paperImg}>\r\n                <img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\r\n              </Paper>\r\n              <Typography variant=\"h4\" style={{ marginTop: 20, fontFamily: 'Ubuntu' }}>\r\n                <b>您获得的NFT是： #{this.state.rootNFTId}</b>\r\n              </Typography>\r\n\r\n              <Button\r\n                variant=\"contained\"\r\n                className={classes.button}\r\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\r\n                onClick={this.checkDetail}\r\n              >\r\n                查看详情\r\n              </Button>\r\n            </div>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    } else {\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large' style={{marginTop: 1000}}>\r\n\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\r\n              <div className={classes.paper}>\r\n                {/* {showLoading()} */}\r\n                <Typography className={classes.titlePub}>\r\n                  <b>发布作品信息</b>\r\n                </Typography>\r\n                <form className={classes.form} noValidate>\r\n                  <Grid container spacing={2}>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 <span style={{ color: \"red\"}}>*</span></label>\r\n                      <Input\r\n                        placeholder=\"作品名称\"\r\n                        allowClear\r\n                        id=\"pubName\"\r\n                        onChange={this.handleGetPubName}\r\n                        value={this.state.name}\r\n                        className={classes.input}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>收益比例 <span style={{ color: \"red\"}}>*</span></label>\r\n                      <p style={{ fontSize: 14 }}>当您的作品被他人分享并获利时，您希望从他的分享利润中获得多少比例的收益</p>\r\n                      <InputNumber\r\n                        id=\"bonusFee\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        max={100}\r\n                        formatter={value => `${value}%`}\r\n                        parser={value => value.replace('%', '')}\r\n                        onChange={this.handleGetBonusFee}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>通行代币 <span style={{ color: \"red\"}}>*</span></label>\r\n                      <p style={{ fontSize: 14 }}>请选择您支持的支付货币 (输入代币符号或地址)</p>\r\n                      <Select\r\n                        showSearch\r\n                        value={this.state.token_addr}\r\n                        placeholder={\"请输入代币符号或地址\"}\r\n                        // className={classes.input}\r\n                        style={{ width: \"100%\" }}\r\n                        size=\"large\"\r\n                        defaultActiveFirstOption={false}\r\n                        showArrow={false}\r\n                        filterOption={false}\r\n                        onSearch={this.handleSearch}\r\n                        onChange={this.handleSelectChange}\r\n                        notFoundContent={null}\r\n                      >\r\n                        {options}\r\n                      </Select>\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>售卖价格 ({this.state.token_symbol})<span style={{ color: \"red\"}}>*</span></label>\r\n                      <InputNumber\r\n                        id=\"price\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        onChange={this.handleGetPrice}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>最高分享次数 (MAX： 65535)<span style={{ color: \"red\"}}>*</span></label>\r\n                      <p style={{ fontSize: 14 }}>您希望每一个帮助您传播的用户最多能够分享多少次？</p>\r\n                      <InputNumber\r\n                        id=\"shareTimes\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        max={65535}\r\n                        onChange={this.handleGetShareTimes}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }} >\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 <span style={{ color: \"red\"}}>*</span></label>\r\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\r\n                      <TextArea\r\n                        rows={6}\r\n                        id=\"Description\"\r\n                        onChange={this.handleGetDescription}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                  <label style={{ fontSize: 18, marginTop: 50 }}>封面图片 <span style={{ color: \"red\"}}>*</span></label>\r\n                  <p style={{ fontSize: 14 }}>请在下方区域上传您的封面图片 <br />\r\n                    封面文件支持这些格式：JPEG/JPG/PNG</p>\r\n                  <Dragger {...prop} style={{ width: '100%', minHeight: 200 }} id=\"Uploader\" accept=\".png, .jpg, .jpeg\" >\r\n                    <p className=\"ant-upload-drag-icon\">\r\n                      <InboxOutlined />\r\n                    </p>\r\n                    <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\r\n                    <p className=\"ant-upload-hint\">\r\n                      支持单个文件的上传，支持多种类型文件的上传\r\n                    </p>\r\n                  </Dragger>\r\n\r\n                  <label style={{ fontSize: 18, marginTop: 50 }}>作品文件 <span style={{ color: \"red\"}}>*</span></label>\r\n                  <p style={{ fontSize: 14 }}>请在下方区域上传您的作品文件 </p>\r\n                  <Dragger {...propFile} style={{ width: '100%', minHeight: 200 }} id=\"Uploader2\" >\r\n                    <p className=\"ant-upload-drag-icon\">\r\n                      <InboxOutlined />\r\n                    </p>\r\n                    <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\r\n                    <p className=\"ant-upload-hint\">\r\n                      仅支持单个文件的上传，支持多种类型文件的上传\r\n                    </p>\r\n                  </Dragger>\r\n                </form>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  className={classes.button}\r\n                  startIcon={<CloudUploadOutlined />}\r\n                  style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\r\n                  onClick={this.submit}\r\n                >\r\n                  提交信息\r\n                </Button>\r\n              </div>\r\n            </Container>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    }\r\n\r\n\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Publish)","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport TopBar from \"./TopBar\"\r\nimport Paper from '@material-ui/core/Paper'\r\nimport { DownloadOutlined, FireOutlined, ArrowLeftOutlined, MoneyCollectOutlined, CopyOutlined, DollarCircleOutlined } from '@ant-design/icons'\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\r\nimport { IconButton, Container } from \"@material-ui/core\"\r\nimport contract from './contract'\r\nimport { Progress, Spin, message } from 'antd'\r\nimport axios from 'axios'\r\nimport web3 from './web3'\r\n\r\nconst FileSaver = require('file-saver')\r\nvar CryptoJS = require(\"crypto-js\")\r\nconst abi = require('erc-20-abi')\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    maxWidth: 1500,\r\n  },\r\n  cbutton: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-end\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"flex-end\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"flex-end\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  btnMain: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#FFFFFF',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 120,\r\n    maxWidth: '20rem',\r\n    minWidth: '10rem',\r\n  },\r\n  btnSecond: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#03A9F4',\r\n    borderWidth: 3,\r\n    borderColor: '#03A9F4',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 120,\r\n    maxWidth: '20rem',\r\n    minWidth: '10rem',\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(1),\r\n    textAlign: 'center',\r\n    maxWidth: 1370,\r\n    // backgroundColor: \"green\"\r\n  },\r\n  imagePapaer: {\r\n\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      backgroundColor: '#EFEBE9', width: 330, marginLeft: 25\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      backgroundColor: '#EFEBE9', width: 340, marginLeft: 25\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 25\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\r\n    },\r\n  },\r\n  imageStyle: {\r\n    objectFit: 'contain',\r\n    // object- fit: cover\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: 280,\r\n      height: 365,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      width: 290,\r\n      height: 385,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      width: 300,\r\n      height: 420,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      width: 300,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      width: 300,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n  },\r\n  content2: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: 10, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: 90, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: 80, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: 50, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: 60, maxWidth: 500\r\n    },\r\n  },\r\n  cbutton2: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-end\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"space-evenly\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"space-evenly\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  share: {\r\n    fontFamily: 'Teko',\r\n    marginBottom: '10%',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 14,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 18,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 20,\r\n    },\r\n\r\n  }\r\n\r\n\r\n})\r\n\r\n\r\nclass NFTInfo extends Component {\r\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\r\n  backend = 'https://api.sparklink.io'\r\n  state = {\r\n    loading: false,\r\n    showDecryptProgress: null,\r\n    decryptPercentage: 0,\r\n    showProgress: false,\r\n    percentage: 0,\r\n    Profit: '',\r\n    account: null,\r\n    loadItem: true,\r\n    Cover: '',\r\n    Name: '',\r\n    Description: '',\r\n    BonusFee: 0,\r\n    childrenNum: 0,\r\n    encrypted: '未知',\r\n    dataUrl: null,\r\n    isEncrypt: false,\r\n    fileType: '',\r\n    spark: false,\r\n    tokenAddr: '',\r\n    tokenSymbol: '',\r\n  }\r\n  async componentDidMount() {\r\n    if (!window.ethereum) {\r\n      alert(\"请先安装metamask\");\r\n      window.location.href = '/#/collections';\r\n      return;\r\n    }\r\n\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' });\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\");\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n\r\n    const owner = await contract.methods.ownerOf(this.props.match.params.id).call()\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    if (web3.utils.toChecksumAddress(account) !== owner) {\r\n      // alert(\"这枚nft不属于你\");\r\n      message.warning({\r\n        content: \"这枚nft不属于你\",\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n      window.location.href = '/#/';\r\n    }\r\n\r\n    const token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.id).call()\r\n    const res = await contract.methods.getProfitByNFTId(this.props.match.params.id).call()  \r\n    if (token_addr == '0x0000000000000000000000000000000000000000') {\r\n      var price_with_decimal = res / (10 ** 18)\r\n      var profit = price_with_decimal + \" MATIC\"\r\n      this.setState({\r\n        tokenAddr: '0x0000000000000000000000000000000000000000',\r\n        tokenSymbol: 'MATIC',\r\n        Profit: profit\r\n      })\r\n    } else {\r\n      const token_contract = new web3.eth.Contract(abi, token_addr)\r\n      const token_symbol = await token_contract.methods.symbol().call()\r\n      const decimal = await token_contract.methods.decimals().call()\r\n      var price_with_decimal = res / (10 ** decimal)\r\n      var profit = price_with_decimal + ` ${token_symbol}`\r\n      this.setState({\r\n        tokenAddr: token_addr,\r\n        tokenSymbol: token_symbol,\r\n        Profit: profit\r\n      })\r\n    }\r\n    const meta = await contract.methods.tokenURI(this.props.match.params.id).call()\r\n    let hash = meta.split('/');\r\n    const issue = await contract.methods.getIssueIdByNFTId(this.props.match.params.id).call()\r\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issue).call()\r\n    var file_hash = hash[hash.length - 1]\r\n    var request_url = \"https://coldcdn.com/api/cdn/v5ynur/ipfs/\" + file_hash\r\n    \r\n    try {\r\n      const res = await axios({\r\n        method: 'get',\r\n        url: request_url,\r\n        timeout: 1000 * 5,\r\n      })\r\n      let data = res.data;\r\n      let bouns = 0;\r\n      let fileAddr = \"\";\r\n      let isEncrypt = false;\r\n      let fileType = data.attributes[2].value\r\n      let encrypted = '未知';\r\n\r\n      for (let i = 0; i < data.attributes.length; i++) {\r\n        if (data.attributes[i].trait_type === \"Bonuse Percentage\") {\r\n          bouns = data.attributes[i].value;\r\n        }\r\n        if (data.attributes[i].trait_type === \"File Address\") {\r\n          fileAddr = data.attributes[i].value;\r\n        }\r\n        if (data.attributes[i].trait_type === \"Encrypted\") {\r\n          if (data.attributes[i].value === \"FALSE\") {\r\n            isEncrypt = false\r\n            encrypted = '否';\r\n          } else {\r\n            isEncrypt = true\r\n            encrypted = '是';\r\n          }\r\n        }\r\n      }\r\n\r\n      this.setState({\r\n        Name: data.name,\r\n        Description: data.description,\r\n        BonusFee: royalty,\r\n        Cover: data.image,\r\n        dataUrl: fileAddr,\r\n        isEncrypt: isEncrypt,\r\n        encrypted: encrypted,\r\n        fileType: fileType,\r\n        loadItem: false\r\n      });\r\n\r\n    } catch (error) {\r\n      this.setState({ Name: 'SparkNFT' });\r\n      this.setState({ Description: '暂时无法获取到该nft的相关描述' });\r\n      this.setState({ BonusFee: royalty });\r\n      this.setState({ Cover: 'https://via.placeholder.com/100x140.png?text=SparkNFT' });\r\n      this.setState({ dataUrl: 'fileAddr_PlaceHolder', loadItem: false, });\r\n    }\r\n\r\n    const leafUrl = this.backend + '/api/v1/nft/info?nft_id=' + this.props.match.params.id\r\n    axios.get(leafUrl).then(res => {\r\n      var children_num = res.data.children_count\r\n      this.setState({\r\n        childrenNum: children_num\r\n      })\r\n    }).catch(error => {\r\n      if (error.response === undefined) {\r\n        message.error({\r\n          content: \"错误：服务器未响应\",\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n        return;\r\n      }\r\n      if (error.response.status === 400 && error.response.data.message.includes(\"children not found\")) {\r\n        console.debug(\"no children\")\r\n      } else {\r\n        message.error({\r\n          content: `获取nft子节点情况页面失败： ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  return = async () => {\r\n    window.location.reload(true)\r\n  }\r\n\r\n  claim = async () => {\r\n    this.setState({\r\n      loading: true\r\n    })\r\n    var gasPrice = await web3.eth.getGasPrice()\r\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n    try{\r\n      await contract.methods.claimProfit(this.props.match.params.id).send({\r\n        from: this.state.account,\r\n        gasPrice: new_gas_price\r\n      })\r\n    } catch (error){\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    } finally {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  downloadIPFS = async () => {\r\n    let obj = this\r\n    let dataSplits = this.state.dataUrl.split('/')\r\n    var dataHash = dataSplits[dataSplits.length - 1]\r\n    var dataUrl = this.gateway + dataHash\r\n    this.setState({\r\n      showProgress: true\r\n    })\r\n    if(this.state.isEncrypt){\r\n      var cipher_config = {\r\n        method: 'get',\r\n        url: dataUrl,\r\n        onDownloadProgress(progress) {\r\n          var percentage = Math.round(progress.loaded / progress.total * 100)\r\n          obj.setState({\r\n            percentage: percentage\r\n          })\r\n        }\r\n      }\r\n\r\n      const response = await axios(cipher_config)\r\n      let ciphertext = response.data\r\n      let accounts = await await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n      let account = accounts[0]\r\n      let signJSON = {\r\n        account: account,\r\n        root_nft_id: this.props.match.params.id\r\n      }\r\n      signJSON = JSON.stringify(signJSON)\r\n      this.setState({\r\n        showProgress: false\r\n      })\r\n      await this.signDataAndDecrypt(account, ciphertext)\r\n    } else {\r\n      var open_config = {\r\n        url: dataUrl, //your url\r\n        method: 'GET',\r\n        responseType: 'blob', // important\r\n        onDownloadProgress(progress) {\r\n          var percentage = Math.round(progress.loaded / progress.total * 100)\r\n          obj.setState({\r\n            percentage: percentage\r\n          })\r\n        }\r\n      }\r\n      try{\r\n        const response = await axios(open_config)\r\n        const url = window.URL.createObjectURL(new Blob([response.data]))\r\n        const link = document.createElement('a')\r\n        link.href = url\r\n        link.style.display = 'none'\r\n        var suffix = '.' + obj.state.fileType\r\n        var fileName = this.state.Name + suffix\r\n        link.download = fileName\r\n        document.body.appendChild(link)\r\n        link.click()\r\n        document.body.removeChild(link)\r\n        URL.revokeObjectURL(url)\r\n      } catch(error){\r\n        message.error({\r\n          content: `Error: ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      } finally {\r\n        this.setState({ showProgress: false })\r\n      }\r\n    }\r\n  }\r\n\r\n  signDataAndDecrypt = async (signer, ciphertext) => {\r\n    var JSONBody = {\r\n      \"account\": signer,\r\n      \"nft_id\": this.props.match.params.id\r\n    }\r\n    var json_str = JSON.stringify(JSONBody)\r\n    const sig = await web3.eth.personal.sign(json_str, signer)\r\n\r\n    this.setState({\r\n      showDecryptProgress: true\r\n    })\r\n\r\n    var payload = {\r\n      \"account\": signer,\r\n      \"nft_id\": this.props.match.params.id,\r\n      \"signature\": sig\r\n    }\r\n    var payload_str = JSON.stringify(payload)\r\n    var req_key_url = this.backend + \"/api/v1/key/claim\"\r\n    try{\r\n      const res = await axios.post(req_key_url, payload_str, {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n\r\n      if (res.status == 200) {\r\n        let key = res.data.key\r\n        let data = CryptoJS.AES.decrypt(ciphertext, key)\r\n        let plainText = data.toString(CryptoJS.enc.Utf8)\r\n        const wordArray = CryptoJS.enc.Hex.parse(plainText)\r\n        let BaText = this.wordArrayToByteArray(wordArray, wordArray.length)\r\n        var blob = new Blob([BaText])\r\n        let suffix = '.' + this.state.fileType\r\n        FileSaver.saveAs(blob, this.state.Name + suffix)\r\n\r\n      } else {\r\n        var error_msg = res.data.message\r\n        message.error({\r\n          content: `Error: ${error_msg}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    } catch (error) {\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  wordToByteArray = (result, word, length) => {\r\n    const lengthBefore = result.length\r\n    const xff = 0xFF\r\n    if (length > 0)\r\n      result.push(word >>> 24)\r\n    if (length > 1)\r\n      result.push((word >>> 16) & xff)\r\n    if (length > 2)\r\n      result.push((word >>> 8) & xff)\r\n    if (length > 3)\r\n      result.push(word & xff)\r\n\r\n    var info = {\r\n      result: result,\r\n      addedLength: result.length - lengthBefore\r\n    }\r\n    return info\r\n  }\r\n\r\n  wordArrayToByteArray = (wordArray, length) => {\r\n    console.debug(\"enter in wordArrayToByte\")\r\n    if (wordArray.hasOwnProperty(\"sigBytes\") && wordArray.hasOwnProperty(\"words\")) {\r\n      length = wordArray.sigBytes\r\n      wordArray = wordArray.words\r\n    }\r\n\r\n    var result = [],\r\n      bytesAdded,\r\n      current_bytes = 0,\r\n      lengthBefore = length,\r\n      i = 0\r\n    while (length > 0) {\r\n      var added_info = this.wordToByteArray(result, wordArray[i], Math.min(4, length))\r\n      result = added_info.result\r\n      bytesAdded = added_info.addedLength\r\n      current_bytes = current_bytes + bytesAdded\r\n      var percent = Math.round(current_bytes / lengthBefore * 100)\r\n      if (percent !== this.state.decryptPercentage) {\r\n        this.setState({\r\n          decryptPercentage: percent\r\n        })\r\n      }\r\n      length -= bytesAdded\r\n      i++\r\n    }\r\n\r\n    return new Uint8Array(result)\r\n  }\r\n\r\n  spark = () => {\r\n    this.setState({ spark: true });\r\n  }\r\n\r\n\r\n  render(){\r\n    const {classes} = this.props\r\n    const sell_info = () => {\r\n      let url = window.location.host;\r\n      let toUrl = \"https://\" + url + '/#/NFT/Spark/' + this.props.match.params.id;\r\n      let share = '分享复制链接：' + toUrl;\r\n      // this.state.onSale\r\n      if (this.state.spark) {\r\n        return (\r\n          <Grid container >\r\n            <Grid item xs>\r\n              <Typography color=\"inherit\" align=\"center\" noWrap className={classes.share} >\r\n                请将下方链接分享给买方，<br /> 买方会进入此链接来购买这个NFT <br />\r\n                {toUrl}\r\n                <CopyToClipboard text={toUrl}\r\n                  onCopy={() => this.setState({ copied: true })}>\r\n                  <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\r\n                    <CopyOutlined />\r\n                  </IconButton>\r\n                </CopyToClipboard>\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n        );\r\n      }\r\n    }\r\n\r\n    if (this.state.showDecryptProgress){\r\n      return(\r\n        <Spin spinning={this.state.loading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40 }}>\r\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\r\n                <b>正在解密文件</b>\r\n              </Typography>\r\n            </div>\r\n            <div style={{ textAlign: 'center', marginTop: '10%' }}>\r\n              <Progress type=\"circle\" percent={this.state.decryptPercentage} width={200} />\r\n            </div>\r\n            <div style={{ textAlign: 'center' }}>\r\n              <Button\r\n                variant=\"contained\"\r\n                className={classes.button}\r\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\r\n                onClick={this.return}\r\n              >\r\n                返回信息页面\r\n              </Button>\r\n            </div>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    } else if(this.state.showProgress){\r\n      return(\r\n        <Spin spinning={this.state.loading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40 }}>\r\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\r\n                <b>正在下载文件</b>\r\n              </Typography>\r\n            </div>\r\n            <div style={{ textAlign: 'center', marginTop: '10%' }}>\r\n              <Progress type=\"circle\" percent={this.state.percentage} width={200} />\r\n            </div>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    } else {\r\n      return(\r\n        <Spin spinning={this.state.loading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <Container component=\"main\" className={classes.container}>\r\n              <Button\r\n                startIcon={<ArrowLeftOutlined style={{ fontSize: '2rem' }} />}\r\n                href='/#/collections'\r\n                style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\r\n              >\r\n                回到我的收藏馆\r\n              </Button>\r\n              <Grid container direction=\"row\" justifyContent=\"center\" alignContent=\"flex-start\">\r\n                <Grid container direction=\"row\" className={classes.cbutton}> \r\n\r\n                  <Grid item>\r\n                    <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 14 }}>\r\n                      <b>目前收益: {this.state.Profit}</b>\r\n                    </Typography>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <Button style={{ marginTop: 10, marginRight: 30, marginBottom: 20 }} size=\"large\" variant=\"contained\" color=\"primary\" className={classes.btnMain} startIcon={<MoneyCollectOutlined />} onClick={this.claim} >\r\n                      <Typography id=\"isSpark\" variant=\"button\" component=\"h3\" gutterBottom >\r\n                        <font size=\"3\" color='white'>\r\n                          领收益\r\n                        </font>\r\n                      </Typography>\r\n                    </Button>\r\n                  </Grid>\r\n\r\n                  <Grid item>\r\n                    <Button style={{ marginTop: 10, marginBottom: 20 }} size=\"large\" variant=\"outlined\" color=\"secondary\" className={classes.btnSecond} startIcon={<DollarCircleOutlined />} href={'/#/sellSingle/' + this.props.match.params.id}  >\r\n                      <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                        <font size=\"3\">\r\n                          售卖\r\n                        </font>\r\n                      </Typography>\r\n                    </Button>\r\n                  </Grid>\r\n\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <div className={classes.paper}>\r\n                {this.state.loadItem ? (\r\n                  <Grid container className={classes.content} spacing = {5}>\r\n\r\n                    <Grid item xs = {4}>\r\n                      <Skeleton variant=\"rect\" width={300} height={500} style={{ width: 370, marginLeft: 50, marginBottom: 50 }} />\r\n                    </Grid>\r\n\r\n                    <Grid item xs style={{ marginLeft: '5%' }}>\r\n                      <Skeleton animation=\"wave\" variant=\"text\" width={200} height={30} />\r\n                      <Skeleton animation=\"wave\" variant=\"text\" width={400} height={70} />\r\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={500} height={300} style={{ marginBottom: 50 }} />\r\n                    </Grid>\r\n\r\n                  </Grid>\r\n                ):(\r\n                  <Grid container direction=\"row\" justifyContent=\"space-between\" spacing={5} className={classes.content}>\r\n\r\n                    <Grid style={{ maxWidth: 200 }}>\r\n                      <Paper className={classes.imagePapaer}>\r\n                        <img className={classes.imageStyle} src={this.state.Cover}></img>\r\n                      </Paper>\r\n                    </Grid>\r\n\r\n                    <Grid item xs={2}></Grid>\r\n\r\n                    <Grid item className={classes.content2} >\r\n                      <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\r\n                        #{this.props.match.params.id}\r\n                      </Typography>\r\n                      <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34, marginTop: '2%' }}>\r\n                        <b>{this.state.Name}</b>\r\n                      </Typography>\r\n                      <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\r\n                        {this.state.Description}\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '100%', fontSize: 24 }}>\r\n                        分红比例: {this.state.BonusFee} %\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\r\n                        当前拥有的子节点数量: {this.state.childrenNum}\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\r\n                        NFT作品是否加密: {this.state.encrypted}\r\n                      </Typography>\r\n\r\n                      <Grid container direction=\"row\" className={classes.cbutton2}>\r\n                        <Grid item>\r\n                          <Button size=\"small\" variant=\"contained\" color=\"primary\" target=\"_blank\" className={classes.btnMain} startIcon={<DownloadOutlined />} onClick={this.downloadIPFS} >\r\n                            <font size=\"3\" color='white'>\r\n                              下载\r\n                            </font>\r\n                          </Button>\r\n                        </Grid>\r\n\r\n                        <Grid>\r\n                          <Button size=\"small\" variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} onClick={this.spark} >\r\n                            <font size=\"3\">\r\n                              点火分享\r\n                            </font>\r\n                          </Button>\r\n                        </Grid>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n\r\n                )}\r\n              </div>\r\n\r\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"flex-start\">\r\n                <Grid item xs={8}>\r\n                  <div style={{ marginTop: 30 }}>\r\n                    {sell_info()}\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n            </Container>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    }\r\n  }\r\n\r\n}\r\nexport default withStyles(styles, { withTheme: true })(NFTInfo)","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport { Button, Grid } from '@material-ui/core'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport TopBar from './TopBar'\r\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, IconButton } from \"@material-ui/core\"\r\nimport { Typography, Paper, Container } from '@material-ui/core'\r\nimport axios from 'axios'\r\nimport { DollarCircleOutlined, ArrowLeftOutlined, CopyOutlined } from '@ant-design/icons'\r\nimport { Spin, message } from 'antd'\r\nimport { Input, InputNumber } from 'antd'\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\r\nimport contract from './contract'\r\nimport web3 from './web3'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\n\r\nconst abi = require('erc-20-abi')\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    maxWidth: 1500,\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(1),\r\n    textAlign: 'center',\r\n    maxWidth: 1500,\r\n  },\r\n  btnSell: {\r\n    margin: theme.spacing(1),\r\n    fontSize: 16,\r\n    borderRadius: 10,\r\n    borderWidth: 2,\r\n    borderColor: '#2196f3',\r\n    color: '#2196f3',\r\n    marginLeft: '10%',\r\n    width: 100\r\n  },\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  img: {\r\n    width: 300,\r\n    marginBottom: 50,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '30%'\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '40%'\r\n    },\r\n  },\r\n  content2: {\r\n    fontFamily: 'Teko',\r\n    textAlign: 'center',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: 90, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: 80, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: 50, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: 60, maxWidth: 500\r\n    },\r\n  },\r\n  share: {\r\n    fontFamily: 'Teko',\r\n    marginBottom: '10%',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 14,\r\n      // width: '5%'\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 18,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 20,\r\n    },\r\n  },\r\n  imgPaper: {\r\n    width: 350,\r\n    marginBottom: 50,\r\n    backgroundColor: '#EFEBE9',\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '30%'\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '35%'\r\n    },\r\n  },\r\n  inputNum: {\r\n    height: 40,\r\n    borderRadius: 5,\r\n    width: 550,\r\n    fontSize: 20,\r\n  },\r\n  input: {\r\n    height: 40,\r\n    borderRadius: 5,\r\n  },\r\n})\r\n\r\nclass SellSingle extends Component {\r\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\r\n  backend = 'https://api.sparklink.io'\r\n  state = {\r\n    name: '',\r\n    bonusFee: 0,\r\n    coverURL: '',\r\n    description: '',\r\n    price: 0,\r\n    ipfsHashMeta: '',\r\n    open: false,\r\n    toAddress: '',\r\n    NFTId: '',\r\n    onSale: false,\r\n    copied: false,\r\n    onLoading: false,\r\n    owner: '',\r\n    currentAcc: '',\r\n    childrenNum: 0,\r\n    loadItem: true,\r\n    tokenAddr: null,\r\n    tokenSymbol: '',\r\n    decimal: 0,\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\")\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    let obj = this \r\n    this.setState({\r\n      currentAcc: account,\r\n      NFTId: this.props.match.params.NFTId\r\n    })\r\n    const issueId = await contract.methods.getIssueIdByNFTId(this.state.NFTId).call()\r\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\r\n    const metadata = await contract.methods.tokenURI(this.props.match.params.NFTId).call()\r\n    let hash = metadata.split('/')\r\n    this.setState({ ipfsHashMeta: hash[hash.length - 1] })\r\n    var url = this.gateway + this.state.ipfsHashMeta\r\n    try {\r\n      const res = await axios({method: 'get', url: url, timeout: 1000*2})\r\n      let content = res.data\r\n      let bonus = content.attributes[0].value\r\n      let encrypted = content.attributes[3].value\r\n      this.setState({\r\n        loadItem: false,\r\n        name: content.name,\r\n        description: content.description,\r\n        bonusFee: bonus,\r\n        coverURL: content.image\r\n      })\r\n    } catch (error) {\r\n      var name_holder = 'SparkNFT#' + this.props.match.params.NFTId\r\n      obj.setState({\r\n        loadItem: false,\r\n        name: name_holder,\r\n        description: '暂时无法获取到该nft的相关描述',\r\n        bonusFee: royalty,\r\n        coverURL: 'https://via.placeholder.com/100x140.png?text=SparkNFT'\r\n      })\r\n      console.debug(error)\r\n    }\r\n\r\n    var owner = await contract.methods.ownerOf(this.props.match.params.NFTId).call()\r\n    var price = await contract.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call()\r\n    var token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.NFTId).call()\r\n    if(price = '0'){\r\n      this.setState({\r\n        owner: owner.toLowerCase(),\r\n        onSale: false\r\n      })\r\n    } else {\r\n      this.setState({\r\n        owner: owner.toLowerCase(),\r\n        onSale: true\r\n      })\r\n    }\r\n\r\n    if (token_addr == \"0x0000000000000000000000000000000000000000\") {\r\n      this.setState({\r\n        tokenAddr: token_addr,\r\n        tokenSymbol: \"MATIC\",\r\n        decimal: 18\r\n      })\r\n    } else {\r\n      try{\r\n        const token_contract = new web3.eth.Contract(abi, token_addr)\r\n        const token_symbol = await token_contract.methods.symbol().call()\r\n        const decimal = await token_contract.methods.decimals().call()\r\n        this.setState({\r\n          tokenAddr: token_addr,\r\n          tokenSymbol: token_symbol,\r\n          decimal: decimal\r\n        })\r\n      } catch (error){\r\n        message.error({\r\n          content: `Error: ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    }\r\n\r\n    const child_url = this.backend + '/api/v1/nft/info?nft_id=' + this.state.NFTId\r\n    try{\r\n      const res = await axios.get(child_url)\r\n      var children_num = res.data.children_count\r\n      this.setState({\r\n        childrenNum: children_num\r\n      })\r\n    } catch (error) {\r\n      if (error.response === undefined) {\r\n        message.error({\r\n          content: \"错误：服务器未响应\",\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n        return\r\n      }\r\n      if (error.response.status === 400 && error.response.data.message.includes(\"children not found\")) {\r\n        console.debug(\"no children\")\r\n      } else {\r\n        message.error({\r\n          content: `获取nft子节点情况页面失败： ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  handleClickOpen = (e) => {\r\n    this.setState({\r\n      open: true,\r\n    })\r\n  }\r\n\r\n  handleClose = (e) => {\r\n    this.setState({\r\n      open: false,\r\n    })\r\n  }\r\n\r\n  handleGetPrice = (value) => {\r\n    this.setState({\r\n      price: value,\r\n    })\r\n  }\r\n\r\n  handleGetAddr = (e) => {\r\n    this.setState({\r\n      toAddress: e.target.value,\r\n    })\r\n  }\r\n\r\n  handleClickLink = (event) => {\r\n    var new_url = '/#/NFT/' + this.state.NFTId\r\n    window.open(new_url, '_self')\r\n  }\r\n\r\n  sell = async (e) => {\r\n    this.setState({\r\n      open: false,\r\n    })\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n    const account = accounts[0];\r\n\r\n    var price_with_decimal = this.state.price * (10 ** this.state.decimal)\r\n    price_with_decimal = price_with_decimal.toString()\r\n    var obj = this\r\n    this.setState({\r\n      onLoading: true\r\n    })\r\n    var gasPrice = await web3.eth.getGasPrice()\r\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n    contract.methods.determinePriceAndApprove(this.state.NFTId, price_with_decimal, this.state.toAddress).send({\r\n      from: account,\r\n      gasPrice: new_gas_price\r\n    })\r\n      .on('receipt', function (receipt) {\r\n        obj.setState({\r\n          onSale: true,\r\n          onLoading: false\r\n        })\r\n        message.success({\r\n          content: \"已经成功授权买方\",\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      })\r\n      .on('error', function (error) {\r\n        obj.setState({\r\n          onLoading: false\r\n        })\r\n        message.error({\r\n          content: `Error: ${error.message}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props\r\n    const sell_info = () => {\r\n      let host = window.location.host\r\n      let toUrl = \"https://\" + host + '/#/buySingle/' + this.state.NFTId\r\n      if (this.state.onSale) {\r\n        return (\r\n          <Grid container >\r\n            <Grid item xs>\r\n              <Typography color=\"inherit\" align=\"center\" noWrap className={classes.share} >\r\n                请将下方链接分享给买方，<br /> 买方会进入此链接来购买这个NFT <br />\r\n                {toUrl}\r\n                <CopyToClipboard text={toUrl}\r\n                  onCopy={() => this.setState({ copied: true })}>\r\n                  <IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\r\n                    <CopyOutlined />\r\n                  </IconButton>\r\n                </CopyToClipboard>\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n        )\r\n      }\r\n    }\r\n\r\n    const showSellBtn = () => {\r\n      if (this.state.currentAcc == this.state.owner) {\r\n        return (\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            startIcon={< DollarCircleOutlined style={{ fontSize: 22 }} />}\r\n            className={classes.btnSell}\r\n            onClick={this.handleClickOpen}\r\n          >\r\n            售卖\r\n          </Button>\r\n        )\r\n      } else {\r\n        return (\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<DollarCircleOutlined style={{ fontSize: 22 }} />}\r\n            className={classes.btnSell}\r\n            disabled\r\n          >\r\n            售卖\r\n          </Button>\r\n        )\r\n      }\r\n    }\r\n\r\n    return(\r\n      <Spin spinning={this.state.onLoading} size='large'>\r\n        <ThemeProvider theme={theme}>\r\n          <TopBar />\r\n          <Container component=\"main\" className={classes.container}>\r\n            <Button\r\n              startIcon={<ArrowLeftOutlined style={{ fontSize: 22 }} />}\r\n              onClick={this.handleClickLink}\r\n              style={{ marginTop: 50, marginBottom: 100, fontSize: 22 }}\r\n            >\r\n              返回\r\n            </Button>\r\n            <div className={classes.paper}>\r\n              {this.state.loadItem?(\r\n                <Grid container spacing={5} className={classes.content}>\r\n                  <Grid item xs={4}>\r\n                    <Skeleton variant=\"rect\" width={300} height={500} className={classes.img} />\r\n                  </Grid>\r\n                  <Grid item xs style={{ marginLeft: '5%', maxWidth: 500, minWidth: 350 }}>\r\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'70%'} height={30} />\r\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'100%'} height={70} />\r\n                    <Skeleton animation=\"wave\" variant=\"rect\" width={'100%'} height={300} style={{ marginBottom: 50 }} />\r\n                    {showSellBtn()}\r\n                  </Grid>\r\n                </Grid>\r\n              ):(\r\n                <Grid container className={classes.content} spacing={5}>\r\n                  <Grid item xs={4} style={{ maxWidth: 600 }}>\r\n                    <Paper className={classes.imgPaper}>\r\n                      <img style={{ width: 300, marginTop: 20, marginBottom: 50, objectFit: 'contain' }} src={this.state.coverURL}></img>\r\n                    </Paper>\r\n                  </Grid>\r\n\r\n                  <Grid item xs className={classes.content2}>\r\n                    <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\r\n                      #{this.state.NFTId}\r\n                    </Typography>\r\n                    <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 30, marginTop: '2%' }}>\r\n                      <b>{this.state.name}</b>\r\n                    </Typography>\r\n                    <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\r\n                      {this.state.description}\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '65%', fontSize: 20 }}>\r\n                      创作者分红比例: {this.state.bonusFee} %\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\r\n                      当前拥有的子节点数量: {this.state.childrenNum}\r\n                    </Typography>\r\n                    {showSellBtn()}\r\n                    <Dialog\r\n                      open={this.state.open}\r\n                      onClose={this.handleClose}\r\n                      aria-labelledby=\"form-dialog-title\"\r\n                    >\r\n                      <DialogTitle id=\"form-dialog-title\">填写售卖信息</DialogTitle>\r\n                      <DialogContent>\r\n                        <DialogContentText>\r\n                          请在下方区域填写你希望售卖的价格，以及售卖对象的钱包地址。\r\n                        </DialogContentText>\r\n                        <label style={{ fontSize: 14, marginBottom: 10 }}>售卖价格 ({this.state.tokenSymbol})*</label>\r\n                        <InputNumber\r\n                          defaultValue={0}\r\n                          min={0}\r\n                          onChange={this.handleGetPrice}\r\n                          className={classes.inputNum}\r\n                        />\r\n                        <label style={{ fontSize: 14, marginBottom: 10, marginTop: 10 }}>买方钱包地址 *</label>\r\n                        <Input\r\n                          placeholder=\"买方钱包地址\"\r\n                          allowClear\r\n                          id=\"pubName\"\r\n                          onChange={this.handleGetAddr}\r\n                          className={classes.input}\r\n                        />\r\n                      </DialogContent>\r\n                      <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"primary\">\r\n                          取消\r\n                        </Button>\r\n                        <Button variant=\"contained\" onClick={this.sell} color=\"primary\" >\r\n                          卖出\r\n                        </Button>\r\n                      </DialogActions>\r\n                    </Dialog>\r\n                    \r\n                  </Grid>\r\n                </Grid>\r\n              )}\r\n            </div>\r\n            <div style={{ marginTop: 50 }}>\r\n              {sell_info()}\r\n            </div>\r\n          </Container>\r\n        </ThemeProvider>\r\n      </Spin>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default withStyles(styles, {withTheme: true}) (SellSingle)","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport TopBar from './TopBar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport axios from 'axios'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Container from '@material-ui/core/Container'\r\nimport { DollarCircleOutlined, ArrowLeftOutlined } from '@ant-design/icons'\r\nimport { Spin, message } from 'antd'\r\nimport contract from './contract'\r\nimport web3 from './web3'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\n\r\nconst abi = require('erc-20-abi')\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    maxWidth: 1500,\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(1),\r\n    textAlign: 'center',\r\n    maxWidth: 1500,\r\n  },\r\n  btnDisable: {\r\n    margin: theme.spacing(1),\r\n    fontSize: 16,\r\n    borderRadius: 10,\r\n    borderWidth: 3,\r\n    borderColor: '#909497',\r\n    color: '#909497',\r\n    marginLeft: '10%',\r\n    width: 100\r\n  },\r\n  btnSell: {\r\n    margin: theme.spacing(1),\r\n    fontSize: 16,\r\n    borderRadius: 10,\r\n    borderWidth: 2,\r\n    borderColor: '#2196f3',\r\n    color: '#2196f3',\r\n    marginLeft: '10%',\r\n    width: 100\r\n  },\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  img: {\r\n    width: 300,\r\n    marginBottom: 50,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '30%'\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '40%'\r\n    },\r\n  },\r\n  imgPaper: {\r\n    width: 350,\r\n    marginBottom: 50,\r\n    backgroundColor: '#EFEBE9',\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '20%'\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '30%'\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '35%'\r\n    },\r\n  },\r\n  content2: {\r\n    fontFamily: 'Teko',\r\n    textAlign: 'center',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: 90, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: 80, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: 50, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: 60, maxWidth: 500\r\n    },\r\n  },\r\n\r\n})\r\n\r\n\r\nclass BuySingle extends Component {\r\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\r\n  backend = 'https://api.sparklink.io'\r\n  sparkAddr = '0xb42d4525841008A69E427026DF354067fD6A524f'\r\n  state = {\r\n    name: '',\r\n    bonusFee: 0,\r\n    coverURL: '',\r\n    description: '',\r\n    price: 0,\r\n    priceString: '',\r\n    ipfsHashMeta: '',\r\n    open: false,\r\n    address: '',\r\n    NFTId: '',\r\n    onSale: false,\r\n    owner: '',\r\n    approvedAddr: '',\r\n    currentAcc: '',\r\n    onLoading: false,\r\n    childrenNum: 0,\r\n    loadItem: true,\r\n    encrypted: '未知',\r\n    tokenAddr: null,\r\n    tokenSymbol: '',\r\n    decimal: 0,\r\n    approved: false,\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  async componentDidMount () {\r\n    const accounts = await window.ethereum.request({method: 'eth_requestAccounts'})\r\n    const account = accounts[0]\r\n    this.setState({\r\n      currentAcc: account,\r\n      NFTId: this.props.match.params.NFTId\r\n    })\r\n    const issueId = await contract.methods.getIssueIdByNFTId(this.state.NFTId).call()\r\n    const royalty = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\r\n    const metadata = await contract.methods.tokenURI(this.props.match.params.NFTId).call()\r\n    let hash = metadata.split('/')\r\n    this.setState({\r\n      ipfsHashMeta: hash[hash.length-1]\r\n    })\r\n    var url = this.gateway + this.state.ipfsHashMeta\r\n    try {\r\n      const res = await axios({method: 'get', url: url, timeout: 1000*3})\r\n      let content = res.data\r\n      let bonus = content.attributes[0].value\r\n      let encrypted\r\n      if (content.attributes[3].value.toUpperCase() === 'TRUE'){\r\n        encrypted = '是'\r\n      } else {\r\n        encrypted = '否'\r\n      }\r\n\r\n      this.setState({\r\n        loadItem: false,\r\n        name: content.name,\r\n        description: content.description,\r\n        bonusFee: bonus,\r\n        coverURL: content.image,\r\n        encrypted: encrypted\r\n      })\r\n    } catch (error) {\r\n      var name_holder = 'SparkNFT#' + this.props.match.params.NFTId\r\n      this.setState({\r\n        loadItem: false,\r\n        name: name_holder,\r\n        description: '暂时无法获取到该nft的相关描述',\r\n        bonusFee: royalty,\r\n        coverURL: 'https://via.placeholder.com/100x140.png?text=SparkNFT'\r\n      })\r\n    }\r\n\r\n    var owner = await contract.methods.ownerOf(this.props.match.params.NFTId).call()\r\n    var approved = await contract.methods.getApproved(this.props.match.params.NFTId).call()\r\n    var price = await contract.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call()\r\n    var token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.NFTId).call()\r\n    this.setState({\r\n      owner: owner,\r\n      approvedAddr: approved,\r\n      price: price\r\n    })\r\n    if (token_addr == '0x0000000000000000000000000000000000000000') {\r\n      this.setState({\r\n        tokenAddr: token_addr,\r\n        tokenSymbol: \"MATIC\",\r\n        decimal: 18,\r\n        approved: true\r\n      })\r\n    } else {\r\n      try{\r\n        const token_contract = new web3.eth.Contract(abi, token_addr)\r\n        const token_symbol = await token_contract.methods.symbol().call()\r\n        const decimal = await token_contract.methods.decimals().call()\r\n        const approved_amount = await token_contract.methods.allowance(account, this.sparkAddr).call()\r\n        if(approved_amount >= price){\r\n          this.setState({\r\n            approved: true\r\n          })\r\n        } else {\r\n          this.setState({\r\n            approved: false\r\n          })\r\n        }\r\n        this.setState({\r\n          tokenAddr: token_addr,\r\n          tokenSymbol: token_symbol,\r\n          decimal: decimal\r\n        })\r\n      } catch (error) {\r\n        message.error({\r\n          content: `Error: ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    }\r\n\r\n    var price_with_decimal = price / (10 ** this.state.decimal)\r\n    price_with_decimal = price_with_decimal + \" \" + this.state.tokenSymbol\r\n    this.setState({\r\n      priceString: price_with_decimal\r\n    })\r\n\r\n    const child_url = this.backend + '/api/v1/nft/info?nft_id=' + this.state.NFTId\r\n    try{\r\n      const response = await axios.get(child_url)\r\n      var children_num = response.data.children_count\r\n      this.setState({\r\n        childrenNum: children_num\r\n      })\r\n    } catch (error) {\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n    \r\n  }\r\n\r\n  handleBuy = async (e) => {\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    \r\n    var gasPrice = await web3.eth.getGasPrice()\r\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n    let obj = this\r\n    if (this.state.tokenAddr == '0x0000000000000000000000000000000000000000') {\r\n      this.setState({\r\n        onLoading: true\r\n      })\r\n      contract.methods.safeTransferFrom(this.state.owner, account, this.state.NFTId).send({\r\n        from: account,\r\n        value: this.state.price,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          obj.setState({\r\n            onLoading: false\r\n          })\r\n          message.success({\r\n            content: \"交易已经上链\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    } else {\r\n      this.setState({\r\n        onLoading: true\r\n      })\r\n      contract.methods.safeTransferFrom(this.state.owner, account, this.state.NFTId).send({\r\n        from: account,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          obj.setState({\r\n            onLoading: false\r\n          })\r\n          message.success({\r\n            content: \"交易已经上链\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    }\r\n  }\r\n\r\n  handleApprove = async (e) => {\r\n    const accounts = await window.ethereum.request({method: 'eth_requestAccounts'})\r\n    const account = accounts[0]\r\n\r\n    this.setState({\r\n      onLoading: true\r\n    })\r\n    let obj = this\r\n    try{\r\n      const token_contract = new web3.eth.Contract(abi, this.state.tokenAddr)\r\n      var gasPrice = await web3.eth.getGasPrice()\r\n      var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n      var price = this.state.price.toString()\r\n\r\n      token_contract.methods.approve(this.sparkAddr, price).send({\r\n        from: account,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          obj.setState({\r\n            onLoading: false,\r\n            approved: true\r\n          })\r\n          message.success({\r\n            content: \"已经成功授权合约\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false,\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    } catch (error) {\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  handleGetPrice = (value) => {\r\n    this.setState({\r\n      price: value,\r\n    })\r\n  }\r\n\r\n  handleGetAddr = (e) => {\r\n    this.setState({\r\n      address: e.target.value,\r\n    })\r\n  }\r\n\r\n  render () {\r\n    const {classes} = this.props\r\n    \r\n    const buyButton = ()=> {\r\n      if(this.state.approvedAddr.toLowerCase() !== this.state.currentAcc.toLowerCase()){\r\n        return (\r\n          <Button\r\n            variant = 'outlined'\r\n            startIcon={<DollarCircleOutlined style={{ fontSize: 22 }}/>}\r\n            className={classes.btnDisable}\r\n            disabled\r\n          >\r\n            购买\r\n          </Button>\r\n        )\r\n      } else if (! this.state.approved) {\r\n        return(\r\n          <Button\r\n            variant = 'outlined'\r\n            color = 'primary'\r\n            className = { classes.btnSell }\r\n            onClick={this.handleApprove}\r\n          >\r\n            授权合约\r\n          </Button>\r\n        )\r\n      } else {\r\n        return(\r\n          <Button\r\n            variant='outlined'\r\n            startIcon={<DollarCircleOutlined style={{ fontSize: 22 }} />}\r\n            className={classes.btnSell}\r\n            onClick={this.handleBuy}\r\n          >\r\n            购买\r\n          </Button>\r\n        )\r\n      }\r\n    }\r\n\r\n    return(\r\n      <Spin spinning={this.state.onLoading} size='large'>\r\n        <ThemeProvider theme={theme}>\r\n          <TopBar />\r\n          <Container component=\"main\" className={classes.container}>\r\n            <Button\r\n              startIcon={<ArrowLeftOutlined style={{ fontSize: '2rem' }} />}\r\n              href='/'\r\n              style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\r\n            >\r\n              回到首页\r\n            </Button>\r\n            <div className={classes.paper}>\r\n              {this.state.loadItem ? (\r\n                <Grid container spacing={5} className={classes.content}>\r\n                  <Grid item xs={4}>\r\n                    <Skeleton variant=\"rect\" width={300} height={500} className={classes.img} />\r\n                  </Grid>\r\n\r\n                  <Grid item xs style={{ marginLeft: '5%', maxWidth: 500, minWidth: 350 }}>\r\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'70%'} height={30} />\r\n                    <Skeleton animation=\"wave\" variant=\"text\" width={'100%'} height={70} />\r\n                    <Skeleton animation=\"wave\" variant=\"rect\" width={'100%'} height={300} style={{ marginBottom: 50 }} />\r\n                    {buyButton()}\r\n                  </Grid>\r\n                </Grid>\r\n              ):(\r\n                <Grid container className={classes.content} spacing={5}>\r\n                  <Grid item xs={4} style={{ maxWidth: 600 }}>\r\n                    <Paper className={classes.imgPaper}>\r\n                      <img style={{ width: 300, marginTop: 20, marginBottom: 50, objectFit: 'contain' }} src={this.state.coverURL}></img>\r\n                    </Paper>\r\n                  </Grid>\r\n\r\n                  <Grid item xs className={classes.content2}>\r\n                    <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\r\n                      #{this.state.NFTId}\r\n                    </Typography>\r\n                    <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34 }}>\r\n                      <b>{this.state.name}</b>\r\n                    </Typography>\r\n                    <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\r\n                      {this.state.description}\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '2%', maxWidth: '65%', fontSize: 20 }}>\r\n                      创作者分红比例: {this.state.bonusFee} %\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 18 }}>\r\n                      售价: {this.state.priceString}\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '1%', maxWidth: '65%', fontSize: 12 }}>\r\n                      当前拥有者: {this.state.owner}\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\r\n                      当前拥有的子节点数量: {this.state.childrenNum}\r\n                    </Typography>\r\n                    <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '65%', fontSize: 12 }}>\r\n                      NFT作品是否加密: {this.state.encrypted}\r\n                    </Typography>\r\n                    {buyButton()}\r\n                  </Grid>\r\n                </Grid>\r\n              )}\r\n            </div>\r\n          </Container>\r\n        </ThemeProvider>\r\n      </Spin>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true})(BuySingle)","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport contract from './contract';\r\nimport TopBar from \"./TopBar\";\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { Empty } from 'antd';\r\nimport axios from 'axios';\r\nimport web3 from './web3';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#FDFEFE',\r\n    },\r\n    secondary: {\r\n      main: '#2196f3',\r\n    }\r\n  },\r\n});\r\n\r\nconst styles = theme => ({\r\n  icon: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  titleFont: {\r\n    fontFamily: 'Teko',\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderWidth: 8,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n  },\r\n  heroContent: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: theme.spacing(36, 0, 6),\r\n  },\r\n  cardGrid: {\r\n    paddingTop: theme.spacing(8),\r\n    paddingBottom: theme.spacing(8),\r\n  },\r\n  card: {\r\n    height: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  cardMedia: {\r\n    // paddingTop: '56.25%', // 16:9\r\n    objectFit: 'contain',\r\n    paddingTop: '100%', // 16:9\r\n  },\r\n  cardContent: {\r\n    flexGrow: 2,\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(7),\r\n    textAlign: 'center'\r\n  },\r\n  container: {\r\n    maxWidth: '100%'\r\n  },\r\n  btnMain: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#FFFFFF',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 150\r\n  },\r\n  btnSecond: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#03A9F4',\r\n    borderWidth: 3,\r\n    borderColor: '#03A9F4',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 150\r\n  },\r\n  title: {\r\n    fontFamily: 'Teko',\r\n    marginTop: '5%',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 40,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 55,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 90,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 110,\r\n    },\r\n  },\r\n  title2: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 25,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 35,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 45,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 55,\r\n    },\r\n  },\r\n});\r\n\r\nclass Collections extends Component {\r\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/';\r\n  backend = 'https://api.sparklink.io'\r\n  web3;\r\n  cards = [];\r\n  state = {\r\n    isLogin: false,\r\n    user_address: null,\r\n    name: '',\r\n    viewable: false,\r\n    cards: [],\r\n    onloading: false,\r\n    SkeletoNumber: 0,\r\n    noNFT: true,\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n    if (accounts.length === 0) {\r\n      alert(\"请先连接Metamask\")\r\n    }\r\n    const account = accounts[0];\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' });\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\");\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n\r\n    let cards = [];\r\n\r\n    const nft_number = await contract.methods.balanceOf(account).call()\r\n    console.log('nft_number: ', nft_number)\r\n    if (nft_number === 0) {\r\n      return;\r\n    }\r\n\r\n    let ids = await this.getNft(contract, account);\r\n    if (ids.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      noNFT: false\r\n    })\r\n    let data = await this.getMetadata(contract, ids);\r\n    for (let i = 0; i < ids.length; i++) {\r\n      let element = {\r\n        id: ids[i],\r\n        title: data[i].name,\r\n        description: data[i].description,\r\n        bonusFee: data[i].attributes.value,\r\n        image: data[i].image,\r\n      }\r\n      cards.push(element);\r\n    }\r\n    var reversed_cards = cards.reverse()\r\n    this.setState({ viewable: true, });\r\n    this.setState({ cards: reversed_cards, });\r\n    this.setState({\r\n      onloading: false,\r\n      SkeletoNumber: 0\r\n    })\r\n\r\n  }\r\n\r\n  getMetadata = async (nft, id) => {\r\n    let metaDatas = [];\r\n    for (let i = 0; i < id.length; i++) {\r\n      let ipfs_link = await nft.methods.tokenURI(id[i]).call();\r\n      var ipfs_hash_arr = ipfs_link.split('/')\r\n      var ipfs_hash = ipfs_hash_arr[ipfs_hash_arr.length - 1]\r\n      var meta = \"https://coldcdn.com/api/cdn/v5ynur/ipfs/\" + ipfs_hash\r\n      // console.debug(\"meta: \" + id[i] + \" \" + meta)\r\n      await axios({\r\n        method: 'get',\r\n        url: meta,\r\n        timeout: 1000 * 2,\r\n      }).then(res => {\r\n        // console.log(\"meta: \", res.data)\r\n        metaDatas.push(res.data)\r\n      }).catch(error => {\r\n        var name_holder = 'SparkNFT#' + id[i]\r\n        var placeholder = {\r\n          \"name\": name_holder,\r\n          \"description\": '暂时无法获取到该nft的相关描述',\r\n          \"image\": 'https://testnets.opensea.io/static/images/placeholder.png',\r\n          \"attributes\": [\r\n            {\r\n              \"display_type\": \"boost_percentage\",\r\n              \"trait_type\": \"Bonuse Percentage\",\r\n              \"value\": 0\r\n            },\r\n            {\r\n              \"trait_type\": \"File Address\",\r\n              \"value\": 'file_url'\r\n            }\r\n          ]\r\n        }\r\n        metaDatas.push(placeholder);\r\n      })\r\n    }\r\n    return metaDatas;\r\n  }\r\n\r\n  getNft = async (nft, account) => {\r\n    let balanceId = [];\r\n    //0x9452644E9fdd59bD46A4d9eC24462995ADfD8d01\r\n    var checksum_address = web3.utils.toChecksumAddress(account);\r\n    var url = this.backend + '/api/v1/nft/list?owner=' + checksum_address\r\n    console.debug('owner: ', checksum_address)\r\n    try {\r\n      var res = await axios.get(url)\r\n      balanceId = res.data.nft\r\n      this.setState({\r\n        onloading: true,\r\n        SkeletoNumber: balanceId.length\r\n      })\r\n      return balanceId;\r\n    } catch (error) {\r\n      // alert('无法获取您当前拥有的nft')\r\n      return [];\r\n    }\r\n  };\r\n\r\n\r\n  renderDescription = (description) => {\r\n    if (description.length <= 150) {\r\n\r\n      return (description);\r\n    } else {\r\n      let newDescription = description.substring(0, 150) + \"..........\";\r\n      return (newDescription);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    const { classes } = this.props\r\n    let obj = this;\r\n    window.ethereum.on('chainChanged', handleChainChanged);\r\n\r\n    function handleChainChanged(_chainId) {\r\n      window.location.reload();\r\n    }\r\n\r\n    function showCard(card, index) {\r\n      let res = (\r\n        <Grid item key={index} xs={12} sm={6} md={4}>\r\n          {\r\n            card ? (<Card className={classes.card}>\r\n              <CardMedia\r\n                className={classes.cardMedia}\r\n                image={card.image}\r\n                title=\"Image title\"\r\n              />\r\n              <CardContent className={classes.cardContent}>\r\n                <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                  <b>{card.title}</b>\r\n                </Typography>\r\n                <Typography>\r\n                  {obj.renderDescription(card.description)}\r\n                </Typography>\r\n              </CardContent>\r\n              <CardActions>\r\n                <Button size=\"small\" variant=\"contained\" color=\"primary\" href={'/#/NFT/' + card.id} >\r\n                  <b>查看 </b>\r\n                </Button>\r\n                <Typography variant=\"body2\" gutterBottom>\r\n                  <b>NFT id: {card.id} </b>\r\n                </Typography>\r\n              </CardActions>\r\n            </Card>) : (\r\n              <Card className={classes.card}>\r\n                <Skeleton variant=\"rect\" style={{ marginLeft: 70, }} width={260} height={288} />\r\n                <Skeleton width=\"60%\" style={{ marginTop: 40, }} height={33} />\r\n                <Skeleton height={33} />\r\n                <Skeleton height={33} />\r\n                <Skeleton height={33} />\r\n              </Card>\r\n            )\r\n          }\r\n        </Grid>\r\n      );\r\n\r\n      return res;\r\n\r\n    }\r\n    return (\r\n      <div>\r\n        <ThemeProvider theme={theme}>\r\n          <TopBar />\r\n          <Container component=\"main\" className={classes.container}>\r\n            <div className={classes.paper}>\r\n              <Grid container justifyContent=\"center\">\r\n                <Grid item xs={10}>\r\n                  <Typography color=\"inherit\" noWrap className={classes.title}>\r\n                    <b>我的收藏馆</b>\r\n                  </Typography>\r\n                  <Typography color=\"inherit\" noWrap className={classes.title2}>\r\n                    <b>An ERC721 Token Trying to Solve Existing Publishing Dilemma</b>\r\n                  </Typography>\r\n                </Grid>\r\n              </Grid>\r\n            </div>\r\n          </Container>\r\n        </ThemeProvider>\r\n        {this.state.noNFT ? (\r\n          <Empty \r\n            description={\r\n              <span style={{ fontFamily: 'Teko' }}>\r\n                <b>暂无可展示NFT</b>\r\n              </span>\r\n            }\r\n            style={{marginTop: 100}}\r\n            />\r\n        ):(\r\n          <main>\r\n            { <Container className = {classes.cardGrid} maxWidth=\"md\">\r\n              <Grid container spacing={4}>\r\n                {\r\n                  (this.state.onloading ? Array.from(new Array(this.state.SkeletoNumber)) : this.state.cards).map((card, index) => {\r\n                    return showCard(card, index);\r\n                  })\r\n                }\r\n              </Grid>\r\n            </Container>}\r\n          </main>\r\n        )}\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Collections);","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport TopBar from \"./TopBar\"\r\nimport { Paper, Container, Link } from '@material-ui/core'\r\nimport axios from 'axios'\r\nimport contract from './contract'\r\nimport web3 from './web3'\r\nimport { ArrowLeftOutlined, FireOutlined } from '@ant-design/icons'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\nimport { Progress, message, Spin } from 'antd'\r\n\r\nconst abi = require('erc-20-abi')\r\n\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\nconst styles = theme => ({ \r\n  container: {\r\n    maxWidth: 1500,\r\n    // backgroundColor: '#2196f3'\r\n  },\r\n  btnMain: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#FFFFFF',\r\n    backgroundColor: '#03A9F4',\r\n    borderWidth: 3,\r\n    // borderColor: '#03A9F4',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 150,\r\n    maxWidth: '20rem',\r\n    minWidth: '10rem',\r\n  },\r\n  btnSecond: {\r\n    marginTop: theme.spacing(3),\r\n    color: '#03A9F4',\r\n    borderWidth: 3,\r\n    borderColor: '#03A9F4',\r\n    fontSize: 16,\r\n    borderRadius: 25,\r\n    width: 150,\r\n    maxWidth: '20rem',\r\n    minWidth: '10rem',\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(1),\r\n    textAlign: 'center',\r\n    maxWidth: 1400,\r\n  },\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      justifyContent: \"flex-start\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      justifyContent: \"center\",\r\n      alignItems: \"flex-start\"\r\n    },\r\n  },\r\n  imagePaper: {\r\n\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      backgroundColor: '#EFEBE9', width: 330, height: 420, marginLeft: 10\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      backgroundColor: '#EFEBE9', width: 340, height: 440, marginLeft: 10\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, height: 465, marginLeft: 10\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      backgroundColor: '#EFEBE9', width: 350, marginLeft: 10\r\n    },\r\n  },\r\n  imageStyle: {\r\n    objectFit: 'contain',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: 280,\r\n      height: 365,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      width: 290,\r\n      height: 385,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      width: 300,\r\n      height: 420,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      width: 300,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      width: 300,\r\n      marginTop: 20,\r\n      marginBottom: 50\r\n    },\r\n  },\r\n  content2: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: 10, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: 90, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: 80, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: 50, maxWidth: 500\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: 60, maxWidth: 500\r\n    },\r\n  },\r\n  title: {\r\n    fontFamily: 'Teko',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 48,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 60,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 70,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 75,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 80,\r\n    },\r\n  },\r\n\r\n})\r\n\r\nclass NFTSpark extends Component {\r\n  gateway = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/'\r\n  backend = 'https://api.sparklink.io'\r\n  sparkAddr = '0xb42d4525841008A69E427026DF354067fD6A524f'\r\n  state = {\r\n    Name: '',\r\n    Description: '',\r\n    BonusFee: 0,\r\n    Cover: '',\r\n    price: '',\r\n    priceString: '',\r\n    onLoading: false,\r\n    loadItem: true,\r\n    open: false,\r\n    approved: false,\r\n    tokenAddr: '',\r\n    tokenSymbol: '',\r\n    isEncrypt: true,\r\n    percentage: 0,\r\n    showProgress: false,\r\n    fileType: '',\r\n    remainShillTimes: 0,\r\n    maxShillTimes: 0,\r\n  }\r\n\r\n  async componentDidMount (){\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\")\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n\r\n    const meta = await contract.methods.tokenURI(this.props.match.params.id).call()\r\n    let hash = meta.split('/')\r\n    this.setState({ hash: hash[hash.length - 1] })\r\n    let isEncrypt\r\n    try {\r\n      var url = this.gateway + this.state.hash\r\n      const res = await axios.get(url)\r\n      let data = res.data\r\n      let bouns = data.attributes[0].value\r\n      let fileAddr = data.attributes[1].value\r\n      let fileType = data.attributes[2].value\r\n      if (data.attributes[3].value === \"FALSE\") {\r\n        isEncrypt = false\r\n      } else {\r\n        isEncrypt = true\r\n      }\r\n      this.setState({\r\n        Name: data.name,\r\n        Description: data.description,\r\n        BonusFee: bouns,\r\n        Cover: data.image,\r\n        fileType: fileType,\r\n        dataUrl: fileAddr,\r\n        isEncrypt: isEncrypt\r\n      })\r\n    } catch (error){\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n\r\n    const price = await contract.methods.getShillPriceByNFTId(this.props.match.params.id).call()\r\n    const token_addr = await contract.methods.getTokenAddrByNFTId(this.props.match.params.id).call()\r\n\r\n    this.setState({\r\n      price: price,\r\n      tokenAddr: token_addr\r\n    })\r\n\r\n    if (token_addr == '0x0000000000000000000000000000000000000000') {\r\n      var price_with_decimal = price / (10 ** 18)\r\n      price_with_decimal = price_with_decimal + \" MATIC\"\r\n      this.setState({\r\n        priceString: price_with_decimal,\r\n        approved: true\r\n      })\r\n    } else {\r\n      try {\r\n        const token_contract = new web3.eth.Contract(abi, token_addr)\r\n        const decimals = await token_contract.methods.decimals().call()\r\n        const token_symbol = await token_contract.methods.symbol().call()\r\n        var price_with_decimal = price / (10 ** decimals)\r\n        price_with_decimal = price_with_decimal + \" \" + token_symbol\r\n        this.setState({ priceString: price_with_decimal })\r\n        const approved_amount = await token_contract.methods.allowance(account, this.sparkAddr).call()\r\n        if (approved_amount >= price) {\r\n          this.setState({\r\n            approved: true\r\n          })\r\n        } else {\r\n          this.setState({\r\n            approved: false\r\n          })\r\n        }\r\n      } catch (error) {\r\n        message.error({\r\n          content: `Error: ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    }\r\n\r\n    const leafUrl = this.backend + '/api/v1/nft/info?nft_id=' + this.props.match.params.id\r\n    try{\r\n      const res = await axios.get(leafUrl)\r\n      var children_num = res.data.children_count\r\n      var remain_shill_times = res.data.max_shill_times - res.data.shill_times\r\n      var max_shill_times = res.data.max_shill_times\r\n      this.setState({\r\n        remainShillTimes: remain_shill_times,\r\n        maxShillTimes: max_shill_times\r\n      })\r\n      if (res.data.suggest_next_nft === this.props.match.params.id) {\r\n        this.setState({\r\n          childrenNum: children_num,\r\n          recommendNFT: res.data.suggest_next_nft,\r\n          showRecommend: false,\r\n        })\r\n      } else if (res.data.suggest_next_nft === '0') {\r\n        this.setState({\r\n          childrenNum: children_num,\r\n          recommendNFT: res.data.suggest_next_nft,\r\n          showRecommend: false\r\n        })\r\n      } else {\r\n        this.setState({\r\n          childrenNum: children_num,\r\n          recommendNFT: res.data.suggest_next_nft,\r\n          showRecommend: true\r\n        })\r\n      }\r\n    } catch (error) {\r\n      if (error.response === undefined) {\r\n        message.error({\r\n          content: \"错误：服务器未响应\",\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n        return\r\n      }\r\n      if (error.response.status === 400 && error.response.data.message.includes(\"children not found\")) {\r\n        console.debug(\"no children\")\r\n      } else {\r\n        message.error({\r\n          content: `获取nft子节点情况页面失败： ${error}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n    } finally {\r\n      this.setState({\r\n        loadItem: false\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  handleClickLink = (event) => {\r\n    var new_url = '/#/NFT/Spark/' + this.state.recommendNFT\r\n    window.open(new_url)\r\n  }\r\n\r\n  downloadIPFS = async (event) => {\r\n    let obj = this\r\n    let dataSplits = this.state.dataUrl.split('/')\r\n    var dataHash = dataSplits[dataSplits.length - 1]\r\n    var dataUrl = this.gateway + dataHash\r\n    this.setState({\r\n      showProgress: true\r\n    })\r\n    var open_config = {\r\n      url: dataUrl, //your url\r\n      method: 'GET',\r\n      responseType: 'blob', // important\r\n      onDownloadProgress(progress) {\r\n        var percentage = Math.round(progress.loaded / progress.total * 100)\r\n        obj.setState({\r\n          percentage: percentage\r\n        })\r\n      }\r\n    }\r\n\r\n    try {\r\n      const response = await axios(open_config)\r\n      const url = window.URL.createObjectURL(new Blob([response.data]))\r\n      const link = document.createElement('a')\r\n      link.href = url\r\n      link.style.display = 'none'\r\n      var suffix = '.' + this.state.fileType\r\n      var fileName = this.state.Name + suffix\r\n      link.download = fileName\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n      URL.revokeObjectURL(url)\r\n    } catch (error) {\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    } finally {\r\n      this.setState({ showProgress: false })\r\n    }\r\n  }\r\n\r\n  approve = async (event) => {\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    this.setState({ onLoading: true })\r\n\r\n    let obj = this\r\n    try{\r\n      const price = this.state.price.toString()\r\n      const token_contract = new web3.eth.Contract(abi, this.state.tokenAddr)\r\n      var gasPrice = await web3.eth.getGasPrice()\r\n      var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n      token_contract.methods.approve(this.sparkAddr, price).send({\r\n        from: account,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          message.success({\r\n            content: \"已经成功授权合约\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n          obj.setState({\r\n            onLoading: false,\r\n            approved: true\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false,\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    } catch (error){\r\n      message.error({\r\n        content: `Error: ${error}`,\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  shill = async (event) => {\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    var gasPrice = await web3.eth.getGasPrice()\r\n    var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n    let obj = this\r\n\r\n    this.setState({ onLoading: true });\r\n    if (this.state.tokenAddr == '0x0000000000000000000000000000000000000000') {\r\n      contract.methods.acceptShill(this.props.match.params.id).send({\r\n        from: account,\r\n        value: this.state.price,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          message.success({\r\n            content: \"交易已经上链\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n          obj.setState({\r\n            onLoading: false,\r\n            onSale: true\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false,\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    } else {\r\n      contract.methods.acceptShill(this.props.match.params.id).send({\r\n        from: account,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          message.success({\r\n            content: \"交易已经上链\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n          obj.setState({\r\n            onLoading: false,\r\n            onSale: true\r\n          });\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false,\r\n          })\r\n          message.error({\r\n            content: `Error: ${error.message}`,\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n    const {classes} = this.props\r\n    const showBtn = () => {\r\n      if (this.state.showRecommend) {\r\n        return (\r\n          <div>\r\n            {this.state.isEncrypt ? (\r\n              <Grid container justifyContent=\"space-around\" >\r\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" className={classes.btnMain} disabled>\r\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                    <font size=\"4\"> 下 载 </font>\r\n                  </Typography>\r\n                </Button>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '2rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} disabled>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 铸造  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            ) : (\r\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" className={classes.btnMain} onClick={this.downloadIPFS}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                      <font size=\"4\"> 下 载 </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '2rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />}disabled>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 铸造  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            )}\r\n          </div>\r\n        )\r\n      } else if (!this.state.approved) {\r\n        return (\r\n          <div>\r\n            {this.state.isEncrypt ? (\r\n              <Grid container justifyContent=\"space-around\" >\r\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} disabled>\r\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                    <font size=\"4\"> 下 载 </font>\r\n                  </Typography>\r\n                </Button>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} onClick={this.approve}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 授权合约  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            ) : (\r\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} onClick={this.downloadIPFS}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                      <font size=\"4\"> 下载 </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} onClick={this.approve}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 授权合约  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            )}\r\n          </div>\r\n        )\r\n      } else {\r\n        return (\r\n          <div>\r\n            {this.state.isEncrypt ? (\r\n              <Grid container justifyContent=\"space-around\" >\r\n                <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} disabled>\r\n                  <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                    <font size=\"4\"> 下 载 </font>\r\n                  </Typography>\r\n                </Button>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} onClick={this.shill}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 铸造  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            ) : (\r\n              <Grid container direction=\"row\" justifyContent=\"space-around\" >\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"contained\" color=\"primary\" className={classes.btnMain} onClick={this.downloadIPFS}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom style={{ color: '#FFFFFF' }}>\r\n                      <font size=\"4\"> 下 载 </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Button size=\"large\" style={{ fontSize: '3rem' }} variant=\"outlined\" color=\"secondary\" target=\"_blank\" className={classes.btnSecond} startIcon={<FireOutlined />} onClick={this.shill}>\r\n                    <Typography variant=\"button\" component=\"h2\" gutterBottom >\r\n                      <font size=\"4\"> 铸造  </font>\r\n                    </Typography>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            )}\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n\r\n    if(this.state.showProgress){\r\n      return(\r\n        <Spin spinning={this.state.onLoading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <div style={{ textAlign: 'center', marginTop: '2%', marginLeft: 40 }}>\r\n              <Typography color=\"textPrimary\" gutterBottom style={{ marginRight: 50, marginTop: 20, fontSize: 24 }}>\r\n                <b>正在下载文件</b>\r\n              </Typography>\r\n            </div>\r\n            <div style={{ textAlign: 'center', marginTop: '10%' }}>\r\n              <Progress type=\"circle\" percent={this.state.percentage} width={200} />\r\n            </div>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    } else {\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large'>\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <Container component=\"main\" className={classes.container}>\r\n              <Button\r\n                startIcon={<ArrowLeftOutlined style={{ fontSize: '2rem' }} />}\r\n                href='/#/collections'\r\n                style={{ marginTop: 20, marginBottom: 10, fontSize: '2rem' }}\r\n              >\r\n                回到我的收藏馆\r\n              </Button>\r\n              <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"center\" xs={12}>\r\n                <Typography color=\"inherit\" noWrap className={classes.title}>\r\n                  🔥 NFT 🔥\r\n                </Typography>\r\n              </Grid>\r\n\r\n              <div className={classes.paper}>\r\n                {this.state.loadItem ? (\r\n                  <Grid container spacing={5} className={classes.content}>\r\n                    <Grid item>\r\n                      <Skeleton variant=\"rect\" width={300} height={500} style={{ width: 370, marginLeft: 50, marginBottom: 50 }} />\r\n                    </Grid>\r\n                    <Grid item style={{ marginLeft: '5%' }}>\r\n                      <Skeleton animation=\"wave\" variant=\"text\" width={200} height={30} />\r\n                      <Skeleton animation=\"wave\" variant=\"text\" width={400} height={70} />\r\n                      <Skeleton animation=\"wave\" variant=\"rect\" width={500} height={300} style={{ marginBottom: 50 }} />\r\n                    </Grid>\r\n                  </Grid>\r\n                ):(\r\n                  <Grid container direction=\"row\" justifyContent=\"space-between\" className={classes.content}>\r\n                    <Grid item style={{ maxWidth: 200 }}>\r\n                      <Paper className={classes.imagePaper}>\r\n                        <img className={classes.imageStyle} src={this.state.Cover}></img>\r\n                      </Paper>\r\n                    </Grid>\r\n\r\n                    <Grid xs={2}></Grid>\r\n\r\n                    <Grid item xs className={classes.content2} >\r\n                      <Typography color=\"inherit\" align=\"left\" color=\"textSecondary\" noWrap style={{ fontFamily: 'Teko', fontSize: 16, marginTop: '2%' }}>\r\n                        #{this.props.match.params.id}\r\n                      </Typography>\r\n                      <Typography color=\"inherit\" align=\"left\" noWrap style={{ fontFamily: 'Teko', fontSize: 34, marginTop: '2%' }}>\r\n                        <b>{this.state.Name}</b>\r\n                      </Typography>\r\n                      <Typography align=\"justify\" color=\"textSecondary\" paragraph style={{ marginTop: '2%', maxWidth: '100%', fontSize: 16 }}>\r\n                        {this.state.Description}\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ marginTop: '6%', maxWidth: '100%', fontSize: 24 }}>\r\n                        点火价格: {this.state.priceString}\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 18 }}>\r\n                        最大分享次数: {this.state.maxShillTimes} 次\r\n                      </Typography>\r\n                      <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 18 }}>\r\n                        剩余分享次数: {this.state.remainShillTimes} 次\r\n                      </Typography>\r\n                      {this.state.isEncrypt ?\r\n                        (\r\n                          <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 16 }}>\r\n                            加密作品\r\n                          </Typography>\r\n                        ) : (\r\n                          <Typography align=\"left\" color=\"textPrimary\" paragraph style={{ maxWidth: '100%', fontSize: 16 }}>\r\n                            开源作品\r\n                          </Typography>\r\n                        )}\r\n                      {showBtn()}\r\n                    </Grid>\r\n                  </Grid>\r\n                  \r\n                )}\r\n\r\n                {this.state.showRecommend ? (\r\n                  <Grid style={{marginTop: 50}}>\r\n                    <Typography variant=\"h4\" gutterBottom >\r\n                      此NFT的子节点已经售完，我们给您推荐了其他还能购买的节点：\r\n                    </Typography>\r\n                    <Link onClick={this.handleClickLink} style={{ fontSize: 20, textDecoration: 'underline' }}>\r\n                      {window.location.host + '/#/NFT/Spark/' + this.state.recommendNFT}\r\n                    </Link>\r\n                  </Grid>\r\n                ) : (\r\n                  <div></div>\r\n                )}\r\n              </div>\r\n            </Container>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, {withTheme: true})(NFTSpark)","import './App.css';\r\nimport React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport TopBar from './TopBar';\r\n\r\nconst styles = theme => ({\r\n  icon: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  titleFont: {\r\n    fontFamily: 'Teko',\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n  },\r\n  btnMain: {\r\n    color: '#FFFFFF',\r\n    borderColor: '#e3f2fd',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    '&:hover':{\r\n      color: '#FFFFFF',\r\n    },\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  btnSecond: {\r\n    // marginTop: theme.spacing(3),\r\n    color: '#FFFFFF',\r\n    borderColor: '#e3f2fd',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    '&:hover':{\r\n      color: '#FFFFFF',\r\n    },\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n      width: 95\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(7),\r\n    maxWidth: '150%',\r\n\r\n  },\r\n\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    marginTop: 20,\r\n    lineHeight: 1.5,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n    },\r\n  },\r\n\r\n  shouldKnow: {\r\n    fontFamily: 'Teko',\r\n    textAlign: 'center',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 40,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 40,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 60,\r\n    },\r\n  },\r\n});\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#FDFEFE',\r\n    },\r\n    secondary: {\r\n      main: '#2196f3',\r\n    }\r\n  },\r\n});\r\n\r\nclass IntroPublish extends Component {\r\n  render() {\r\n    const { classes } = this.props\r\n    return (\r\n      <div>\r\n\r\n        <ThemeProvider theme={theme}>\r\n          <TopBar />\r\n          <Container component=\"main\" className={classes.container}>\r\n            <div className={classes.paper}>\r\n              <Typography color=\"inherit\" noWrap className={classes.shouldKnow}>\r\n                <b>发布须知</b>\r\n              </Typography>\r\n              <Typography variant=\"h4\" paragraph className={classes.content}>\r\n                在去发布您的作品之前，您需要了解以下信息，它们将有助于您了解完整的发布流程：\r\n              </Typography>\r\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\r\n                <b>1.</b> 您的作品将被存储在IPFS（InterPlanetary File System）中，而存储地址将被记录在以太坊上，与您的NFT绑定在一起\r\n              </Typography>\r\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\r\n                <b>2.</b> 您可以选择是将您的作品开源得保存在IPFS上，或者加密保存在IPFS上。针对加密的作品，只有持有您发行的NFT的读者才能访问。 <br />\r\n              </Typography>\r\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\r\n                <b>3.</b> 如果您选择加密保存在IPFS上，您需要在将作品基本信息上传到链上后，再设置作品的地址。这个过程我们会引导您完成，请勿担心。 <br />\r\n              </Typography>\r\n              <Typography color=\"textSecondary\" paragraph className={classes.content}>\r\n                <b>4.</b> 当您将作品发布在我们平台时，我们默认您会支持二次创作，处于您宣传网络中的读者有权将他们持有的NFT对应的地址替换为他们自己的二次创作作品。 <br />\r\n              </Typography>\r\n              <Grid container justifyContent=\"center\" style={{ fontFamily: 'Teko', marginTop: 70 }}>\r\n                <Grid item xs={4} >\r\n                  <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnMain} href='/#/encryptedPublish'>\r\n                    <b>加密发布</b>\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item xs={3} >\r\n                  <Button size=\"large\" variant=\"contained\" color=\"secondary\" className={classes.btnSecond} href='/#/publish'>\r\n                    <b>开源发布</b>\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </div>\r\n          </Container>\r\n        </ThemeProvider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(IntroPublish);","import React, { Component } from 'react'\r\nimport './App.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport { blue } from '@material-ui/core/colors'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Container from '@material-ui/core/Container'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { message } from 'antd'\r\nimport { InboxOutlined } from '@ant-design/icons'\r\nimport Dragger from 'antd/lib/upload/Dragger'\r\nimport { CloudUploadOutlined } from '@ant-design/icons'\r\nimport { Input, InputNumber, Select, Spin } from 'antd'\r\nimport 'antd/dist/antd.css'\r\nimport TopBar from './TopBar'\r\nimport axios from 'axios'\r\nimport contract from './contract'\r\nimport web3 from './web3'\r\nimport ReactLoading from 'react-loading'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Link } from \"@material-ui/core\"\r\nimport * as tokens from './tokens_list.json'\r\n\r\nconst {\r\n  pinata_api_key,\r\n  pinata_secret_api_key,\r\n} = require('./project.secret')\r\nconst FormData = require('form-data')\r\nconst bs58 = require('bs58')\r\nvar CryptoJS = require(\"crypto-js\")\r\nconst { Option } = Select\r\nconst abi = require('erc-20-abi')\r\n\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#2196f3',\r\n    },\r\n    secondary: {\r\n      main: '#FDFEFE',\r\n    },\r\n  },\r\n})\r\n\r\n\r\nconst styles = theme => ({\r\n  main: {\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: '60%'\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: 500\r\n    },\r\n  },\r\n  titleCon: {\r\n    marginTop: 50,\r\n    fontFamily: 'Ubuntu',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 30\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      fontSize: 40\r\n    },\r\n  },\r\n  titlePub: {\r\n    marginTop: \"3%\",\r\n    fontFamily: 'Ubuntu',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 30\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      fontSize: 40\r\n    },\r\n  },\r\n  paperImg: {\r\n\r\n    backgroundColor: '#EFEBE9',\r\n    width: 330,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      marginLeft: '5%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      marginLeft: '30%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      marginLeft: '30%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      marginLeft: '40%',\r\n      marginTop: 30,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      marginLeft: '45%',\r\n      marginTop: 30,\r\n    },\r\n  },\r\n  btnPub: {\r\n    margin: theme.spacing(1),\r\n    borderRadius: 25,\r\n    color: '#FFFFFF',\r\n    backgroundColor: '#2196f3',\r\n    marginBottom: 20,\r\n    marginTop: 40,\r\n    height: 45,\r\n    minWidth: 200,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      width: '50%',\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 16,\r\n      width: '30%',\r\n    },\r\n    [theme.breakpoints.up('md')]: {\r\n      fontSize: 16,\r\n      width: '30%',\r\n    },\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: blue[500],\r\n    width: 60,\r\n    height: 60\r\n  },\r\n  form: {\r\n    width: '150%',\r\n    marginTop: theme.spacing(7),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  fileBtn: {\r\n    padding: '10px 30px 10px 30px',\r\n    background: '#66C1E4',\r\n    border: 'none',\r\n    color: '#FFF',\r\n    boxShadow: '1px 1px 1px #4C6E91',\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n    fontSize: 20,\r\n    borderRadius: 25,\r\n    color: '#FFFFFF',\r\n    backgroundColor: '#2196f3'\r\n  },\r\n  input: {\r\n    height: 40,\r\n    borderRadius: 5,\r\n  },\r\n  inputNum: {\r\n    height: 40,\r\n    borderRadius: 5,\r\n    width: '100%',\r\n    fontSize: 20,\r\n  }\r\n})\r\n\r\n\r\nclass EncryptedPublish extends Component {\r\n  backend = 'https://api.sparklink.io' //http://192.168.0.64:3000\r\n  state = {\r\n    name: '',\r\n    bonusFee: 0,\r\n    price: 0,\r\n    buffer: null,\r\n    file: null,\r\n    ipfsHashCover: '',\r\n    ipfsMeta: '',\r\n    fileType: '',\r\n    fileIpfs: '',\r\n    description: '',\r\n    shareTimes: 0,\r\n    onLoading: false,\r\n    rootNFTId: '',\r\n    issueId: '',\r\n    allowSubmitPDF: false,\r\n    usedAcc: '',\r\n    sig: '',\r\n    finished: false,\r\n    open: false,\r\n    coverURL: '',\r\n    jumped: false,\r\n    data: [],\r\n    token_addr: null,\r\n    token_symbol: 'MATIC',\r\n    decimal: 0,\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (!window.ethereum) {\r\n      alert(\"请先安装metamask\")\r\n      window.location.href = '/#/introPublish'\r\n      return\r\n    }\r\n\r\n    const chainId = await window.ethereum.request({ method: 'eth_chainId' })\r\n    if (chainId !== '0x89') {\r\n      alert(\"请切换至Polygon 主网络\")\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{\r\n          chainId: '0x89'\r\n        }]\r\n      })\r\n    }\r\n  }\r\n\r\n  handleGetPubName = (event) => {\r\n    this.setState({\r\n      name: event.target.value,\r\n    })\r\n  }\r\n\r\n  handleGetBonusFee = (value) => {\r\n    this.setState({\r\n      bonusFee: value,\r\n    })\r\n  }\r\n\r\n  handleGetPrice = (value) => {\r\n    this.setState({\r\n      price: value,\r\n    })\r\n  }\r\n\r\n  handleGetShareTimes = (value) => {\r\n    this.setState({\r\n      shareTimes: value,\r\n    })\r\n  }\r\n\r\n  handleGetDescription = (e) => {\r\n    this.setState({\r\n      description: e.target.value,\r\n    })\r\n  }\r\n\r\n  handleGetNFTId = (value) => {\r\n    this.setState({\r\n      rootNFTId: String(value),\r\n    })\r\n  }\r\n\r\n  handleClose = (e) => {\r\n    this.setState({\r\n      open: false,\r\n    })\r\n  }\r\n\r\n  handleClickOpen = (e) => {\r\n    this.setState({\r\n      open: true,\r\n    })\r\n  }\r\n\r\n  handleSearch = async (value) => {\r\n    if (value) {\r\n      value = value.toLowerCase()\r\n      var tokens_list = tokens.tokens\r\n      var matched_data = []\r\n      let reg = new RegExp(value)\r\n      for (let token of tokens_list) {\r\n        var symbol_lower_case = token.symbol.toLowerCase()\r\n        var showed_text = `\\\"${token.symbol}\\\"` + \"   \" + token.address\r\n        var info = {\r\n          value: token.address,\r\n          text: showed_text\r\n        }\r\n        if (reg.test(symbol_lower_case) && !matched_data.includes(info)) {\r\n          matched_data.push(info)\r\n        }\r\n      }\r\n      if (value.includes('0x') && value.length == 42) {\r\n        var info = {\r\n          value: value,\r\n          text: value\r\n        }\r\n        matched_data = [info]\r\n      }\r\n      this.setState({\r\n        data: matched_data\r\n      })\r\n    } else {\r\n      this.setState({ data: [] })\r\n    }\r\n  }\r\n\r\n  handleSelectChange = async (value) => {\r\n    var tokens_list = tokens.tokens\r\n    let address\r\n    let token_symbol\r\n    let token_decimal\r\n    for (let token of tokens_list) {\r\n      if (value === token.address) {\r\n        address = value\r\n        token_symbol = token.symbol\r\n        token_decimal = token.decimals\r\n      }\r\n    }\r\n    if (token_symbol == undefined) {\r\n\r\n      try {\r\n        const token_contract = new web3.eth.Contract(abi, value)\r\n        token_symbol = await token_contract.methods.symbol().call()\r\n        token_decimal = await token_contract.methods.decimals().call()\r\n        address = value\r\n      } catch (error) {\r\n        message.error(\"你提供的地址不是erc20代币，请重新输入\")\r\n      }\r\n\r\n    }\r\n    // console.debug(token_symbol)\r\n    this.setState({\r\n      token_addr: address,\r\n      token_symbol: token_symbol,\r\n      decimal: token_decimal\r\n    })\r\n  }\r\n\r\n  jump = async (event) => {\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    this.setState({\r\n      usedAcc: account\r\n    })\r\n\r\n    const owner = await contract.methods.ownerOf(this.state.rootNFTId).call()\r\n    var issueId = await contract.methods.getIssueIdByNFTId(this.state.rootNFTId).call()\r\n\r\n    var bonus = await contract.methods.getRoyaltyFeeByIssueId(issueId).call()\r\n\r\n    if (account == owner.toLowerCase()) {\r\n      this.setState({\r\n        onLoading: false,\r\n        allowSubmitPDF: true,\r\n        jumped: true,\r\n        bonusFee: bonus\r\n      })\r\n    } else {\r\n      message.warning({\r\n        content: \"您并不是此NFT的持有者\",\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  submit = async (event) => {\r\n    /*TODO: call smart contract publish() and wait for publish success event\r\n     * then call backend to get a secret key. Then encrypt the pdf file and upload it to IPFS\r\n     * Finally, form a new metadata json file and send its ipfs hash to backend and publish it\r\n    */\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n    const account = accounts[0]\r\n    this.setState({\r\n      usedAcc: account\r\n    })\r\n    let obj = this\r\n    if (this.state.price === 0 || this.state.bonusFee === 0 || this.state.shareTimes === 0 || this.state.token_addr === null) {\r\n      message.error({\r\n        content: \"你有信息尚未填写\",\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    } else {\r\n\r\n      this.setState({\r\n        onLoading: true\r\n      })\r\n      var price_with_decimal = this.state.price * (10 ** this.state.decimal)\r\n      price_with_decimal = price_with_decimal.toString()\r\n      var ipfsToContract = '0x0000000000000000000000000000000000000000000000000000000000000000'\r\n      console.debug('price_with_decimal: ', price_with_decimal)\r\n      var gasPrice = await web3.eth.getGasPrice()\r\n      var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n      contract.methods.publish(price_with_decimal, this.state.bonusFee, this.state.shareTimes, ipfsToContract, this.state.token_addr).send({\r\n        from: this.state.usedAcc,\r\n        gasPrice: new_gas_price\r\n      })\r\n        .on('receipt', function (receipt) {\r\n          console.log(receipt)\r\n          var publish_event = receipt.events.Publish\r\n          var returned_values = publish_event.returnValues\r\n          var root_nft_id = String(returned_values.rootNFTId)\r\n          console.debug(typeof root_nft_id)\r\n          var issue_id = returned_values.issue_id\r\n          obj.setState({\r\n            onLoading: false,\r\n            rootNFTId: root_nft_id,\r\n            issueId: issue_id,\r\n            allowSubmitPDF: true\r\n          })\r\n          message.success({\r\n            content: \"作品基本信息已提交成功\",\r\n            className: 'custom-class',\r\n            style: {\r\n              marginTop: '10vh',\r\n            },\r\n          })\r\n        })\r\n        .on('error', function (error) {\r\n          obj.setState({\r\n            onLoading: false,\r\n          })\r\n          if (error.message.includes('not mined')) {\r\n            message.warning({\r\n              content: \"交易已提交，当前网络较拥堵，请稍等后去我的收藏中查看\",\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n          } else {\r\n            console.debug(error.message)\r\n            message.error({\r\n              content: `Error: ${error.message}`,\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n          }\r\n        })\r\n\r\n    }\r\n\r\n  }\r\n\r\n  checkDetail = async (event) => {\r\n    var new_url = '/#/NFT/' + this.state.rootNFTId\r\n    window.open(new_url, '_self')\r\n  }\r\n\r\n  submitWork = async () => {\r\n    if (this.state.ipfsHashCover === '' || this.state.fileIpfs === '') {\r\n      message.error({\r\n        content: \"你有信息尚未填写\",\r\n        className: 'custom-class',\r\n        style: {\r\n          marginTop: '10vh',\r\n        },\r\n      })\r\n    } else {\r\n\r\n      var img_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.ipfsHashCover\r\n      this.setState({\r\n        coverURL: img_url\r\n      })\r\n      console.debug(\"coverURL: \", this.state.coverURL)\r\n      var trimmed_des = this.state.description.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \" \")\r\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n      const account = accounts[0]\r\n      if (account !== this.state.usedAcc) {\r\n        message.warning({\r\n          content: \"账户发生变化，请切换回原账户\",\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n        return\r\n      }\r\n      var file_url = 'https://coldcdn.com/api/cdn/v5ynur/ipfs/' + this.state.fileIpfs\r\n      var JSONBody = {\r\n        \"name\": this.state.name,\r\n        \"description\": trimmed_des,\r\n        \"image\": this.state.coverURL,\r\n        \"attributes\": [\r\n          {\r\n            \"display_type\": \"boost_percentage\",\r\n            \"trait_type\": \"Bonuse Percentage\",\r\n            \"value\": this.state.bonusFee\r\n          },\r\n          {\r\n            \"trait_type\": \"File Address\",\r\n            \"value\": file_url\r\n          },\r\n          {\r\n            \"value\": this.state.fileType\r\n          },\r\n          {\r\n            \"trait_type\": \"Encrypted\",\r\n            \"value\": \"TRUE\"\r\n          }\r\n        ]\r\n      }\r\n      console.debug(JSONBody)\r\n      const url = `https://api.pinata.cloud/pinning/pinJSONToIPFS`\r\n      let obj = this\r\n      this.setState({\r\n        onLoading: true\r\n      })\r\n\r\n      try {\r\n        const response = await axios.post(url, JSONBody, {\r\n          headers: {\r\n            pinata_api_key: pinata_api_key,\r\n            pinata_secret_api_key: pinata_secret_api_key\r\n          },\r\n        })\r\n        console.debug(\"metadata: \", response.data.IpfsHash)\r\n        const bytes = bs58.decode(response.data.IpfsHash)\r\n        const bytesToContract = bytes.toString('hex').substring(4,)\r\n        console.log(bytesToContract)\r\n        console.log(response.data.IpfsHash)\r\n        this.setState({\r\n          ipfsMeta: bytesToContract\r\n        })\r\n\r\n        var ipfsToContract = '0x' + bytesToContract\r\n\r\n        var gasPrice = await web3.eth.getGasPrice()\r\n        var new_gas_price = Math.floor(parseInt(gasPrice) * 1.5).toString()\r\n\r\n        contract.methods.setURI(obj.state.rootNFTId, ipfsToContract).send({\r\n          from: obj.state.usedAcc,\r\n          gasPrice: new_gas_price\r\n        })\r\n          .on('receipt', function (receipt) {\r\n            console.debug(receipt.events.SetURI)\r\n            message.success({\r\n              content: \"作品基本信息已提交成功\",\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n            obj.setState({\r\n              allowSubmitPDF: false,\r\n              finished: true,\r\n              onLoading: false\r\n            })\r\n          })\r\n          .on('error', function (error) {\r\n            obj.setState({\r\n              onLoading: false\r\n            })\r\n            message.error({\r\n              content: `Error: ${error.message}`,\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n          })\r\n\r\n      } catch (error) {\r\n        message.error({\r\n          content: `Error: ${error.message}`,\r\n          className: 'custom-class',\r\n          style: {\r\n            marginTop: '10vh',\r\n          },\r\n        })\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props\r\n    let obj = this\r\n    const { TextArea } = Input\r\n    const options = this.state.data.map(d => <Option key={d.value}>{d.text}</Option>)\r\n    const prop = {\r\n      name: 'file',\r\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\r\n      headers: {\r\n        pinata_api_key: pinata_api_key,\r\n        pinata_secret_api_key: pinata_secret_api_key\r\n      },\r\n      data: this.state.buffer,\r\n      beforeUpload: file => {\r\n        return new Promise((resolve, reject) => {\r\n          try {\r\n            const reader = new FileReader()\r\n            reader.readAsArrayBuffer(file)\r\n            reader.onload = (e) => {\r\n              var b = e.target.result\r\n              let params = new FormData()\r\n              params.append('file', b)\r\n              this.setState({\r\n                buffer: params\r\n              })\r\n            }\r\n            resolve()\r\n          } catch (e) {\r\n            message.error('Read file error')\r\n            reject()\r\n          }\r\n        })\r\n      },\r\n      async onChange(info) {\r\n        const { status } = info.file\r\n        // text/plain image/jpeg application/pdf\r\n        if (status === 'done') {\r\n          message.success(`${info.file.name} file uploaded successfully.`)\r\n          obj.setState({\r\n            ipfsHashCover: info.file.response.IpfsHash\r\n          })\r\n\r\n        } else if (status === 'error') {\r\n          message.error(`${info.file.name} file upload failed.`)\r\n        }\r\n      },\r\n      onDrop(e) {\r\n        message.error(`Only image file supported`)\r\n        console.log('Dropped files', e.dataTransfer.files)\r\n      },\r\n    }\r\n\r\n    const propFile = {\r\n      name: 'file',\r\n      action: `https://api.pinata.cloud/pinning/pinFileToIPFS`,\r\n      headers: {\r\n        pinata_api_key: pinata_api_key,\r\n        pinata_secret_api_key: pinata_secret_api_key\r\n      },\r\n      beforeUpload: file => {\r\n        return new Promise(async (resolve, reject) => {\r\n          try {\r\n            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\r\n            const signer = accounts[0]\r\n            var message = {\r\n              account: signer,\r\n              nft_id: obj.state.rootNFTId\r\n            }\r\n            const sig = await web3.eth.personal.sign(JSON.stringify(message), signer)\r\n            console.debug(sig)\r\n            var payload = {\r\n              \"nft_id\": obj.state.rootNFTId,\r\n              \"account\": signer,\r\n              \"signature\": sig\r\n            }\r\n            var payload_str = JSON.stringify(payload)\r\n            console.log(payload_str)\r\n            var req_key_url = this.backend + '/api/v1/key/claim'\r\n            try {\r\n              const res = await axios.post(req_key_url, payload_str, {\r\n                headers: {\r\n                  'Content-Type': 'application/json'\r\n                }\r\n              })\r\n              var secret_key = res.data.key//res.data.key\r\n              console.debug(secret_key)\r\n              // if (file.type === 'text/plain') {\r\n              const reader = new FileReader()\r\n              reader.readAsArrayBuffer(file)\r\n              reader.onload = (e) => {\r\n                var b = e.target.result\r\n                var wordArray = CryptoJS.lib.WordArray.create(b)\r\n                const str = CryptoJS.enc.Hex.stringify(wordArray)\r\n                var cipher_text = CryptoJS.AES.encrypt(str, secret_key).toString()\r\n                var myblob = new Blob([cipher_text])\r\n                resolve(myblob)\r\n              }\r\n\r\n            } catch (error) {\r\n              if (error.response.status == 400) {\r\n                if (error.response.data.message.includes(\"signature invalid\")) {\r\n                  message.error({\r\n                    content: \"您的签名有误，请查看签名账号是否正确\",\r\n                    className: 'custom-class',\r\n                    style: {\r\n                      marginTop: '10vh',\r\n                    },\r\n                  })\r\n                } else if (error.response.data.message.includes(\"param invalid\")) {\r\n                  message.error({\r\n                    content: \"参数错误\",\r\n                    className: 'custom-class',\r\n                    style: {\r\n                      marginTop: '10vh',\r\n                    },\r\n                  })\r\n                } else if (error.response.data.message.includes(\"not owned\")) {\r\n                  message.error({\r\n                    content: \"您并不拥有此nft\",\r\n                    className: 'custom-class',\r\n                    style: {\r\n                      marginTop: '10vh',\r\n                    },\r\n                  })\r\n                } else if (error.response.data.message.includes(\"not found\")) {\r\n                  message.error({\r\n                    content: \"此nft还未生成\",\r\n                    className: 'custom-class',\r\n                    style: {\r\n                      marginTop: '10vh',\r\n                    },\r\n                  })\r\n                }\r\n              } else {\r\n                message.error({\r\n                  content: \"请求文件加密密钥失败\",\r\n                  className: 'custom-class',\r\n                  style: {\r\n                    marginTop: '10vh',\r\n                  },\r\n                })\r\n              }\r\n            }\r\n\r\n\r\n          } catch (e) {\r\n            message.error({\r\n              content: \"Read file error\",\r\n              className: 'custom-class',\r\n              style: {\r\n                marginTop: '10vh',\r\n              },\r\n            })\r\n            reject()\r\n          }\r\n        })\r\n      },\r\n      onChange(info) {\r\n        const { status } = info.file\r\n        if (status === 'done') {\r\n          var file_type = info.file.name.split('\\.')\r\n          var file_suffix = file_type[file_type.length - 1]\r\n          obj.setState({\r\n            fileIpfs: info.file.response.IpfsHash,\r\n            fileType: file_suffix\r\n          })\r\n          console.debug(\"encrypted file hash: \", info.file.response.IpfsHash)\r\n          message.success(`${info.file.name} file uploaded successfully.`)\r\n        }\r\n\r\n      },\r\n      onDrop(e) {\r\n        console.log('Dropped files', e.dataTransfer.files)\r\n      },\r\n    }\r\n\r\n    if (this.state.allowSubmitPDF) {\r\n\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large' >\r\n          <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\r\n\r\n            <div className={classes.paper}>\r\n              <Typography className={classes.titlePub}>\r\n                <b>上传作品文件</b>\r\n              </Typography>\r\n              <form className={classes.form} noValidate>\r\n                {this.state.jumped ? (\r\n                  <div>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\r\n                      <Input\r\n                        placeholder=\"作品名称\"\r\n                        allowClear\r\n                        id=\"pubName\"\r\n                        onChange={this.handleGetPubName}\r\n                        value={this.state.name}\r\n                        className={classes.input}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\r\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\r\n                      <TextArea\r\n                        rows={4}\r\n                        id=\"Description\"\r\n                        onChange={this.handleGetDescription}\r\n                      />\r\n                    </Grid>\r\n                  </div>\r\n                ) : (\r\n                  <div></div>\r\n                )}\r\n                <label style={{ fontSize: 18, marginTop: 50 }}>封面图片 *</label>\r\n                <p style={{ fontSize: 12 }}>请在下方区域上传您的封面图片 <br />\r\n                  封面文件支持这些格式：JPEG/JPG/PNG</p>\r\n                <Dragger {...prop} style={{ width: '100%', minHeight: 100 }} id=\"Uploader\" accept=\".png, .jpg, .jpeg\" >\r\n                  <p className=\"ant-upload-drag-icon\">\r\n                    <InboxOutlined />\r\n                  </p>\r\n                  <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\r\n                  <p className=\"ant-upload-hint\">\r\n                    支持单个文件的上传，支持多种类型文件的上传\r\n                  </p>\r\n                </Dragger>\r\n\r\n                <label style={{ fontSize: 18, marginTop: 50 }}>作品文件 *</label>\r\n                <p style={{ fontSize: 12 }}>请在下方区域上传您的作品文件 </p>\r\n                <Dragger {...propFile} style={{ width: '100%', minHeight: 100 }} id=\"Uploader2\">\r\n                  <p className=\"ant-upload-drag-icon\">\r\n                    <InboxOutlined />\r\n                  </p>\r\n                  <p className=\"ant-upload-text\">上传文件请点击或者拖拽文件到此处</p>\r\n                  <p className=\"ant-upload-hint\">\r\n                    支持单个文件的上传和多个文件的上传，支持多种类型文件的上传\r\n                  </p>\r\n                </Dragger>\r\n                <div style={{ textAlign: 'center' }}>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    startIcon={<CloudUploadOutlined />}\r\n                    className={classes.btnPub}\r\n                    onClick={this.submitWork}\r\n                  >\r\n                    发布作品\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </Container>\r\n\r\n        </Spin>\r\n      )\r\n\r\n    } else if (this.state.finished) {\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large'>\r\n\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <div style={{ textAlign: 'center' }}>\r\n              <Typography className={classes.titleCon}>\r\n                <b> 🎉 恭喜您发布成功</b>\r\n              </Typography>\r\n\r\n              <Paper className={classes.paperImg}>\r\n                <img style={{ width: 300, marginTop: 20, marginBottom: 50 }} src={this.state.coverURL}></img>\r\n              </Paper>\r\n              <Typography variant=\"h4\" style={{ marginTop: 20, fontFamily: 'Ubuntu' }}>\r\n                <b>您获得的NFT是： #{this.state.rootNFTId}</b>\r\n              </Typography>\r\n\r\n              <Button\r\n                variant=\"contained\"\r\n                className={classes.button}\r\n                style={{ marginTop: 50, width: 200, height: 50, marginBottom: 50 }}\r\n                onClick={this.checkDetail}\r\n              >\r\n                查看详情\r\n              </Button>\r\n            </div>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    } else {\r\n      return (\r\n        <Spin spinning={this.state.onLoading} size='large' >\r\n\r\n          <ThemeProvider theme={theme}>\r\n            <TopBar />\r\n            <Container component=\"main\" maxWidth=\"xs\" className={classes.main}>\r\n              <div className={classes.paper}>\r\n                <Typography className={classes.titlePub}>\r\n                  <b>发布作品信息</b>\r\n                </Typography>\r\n                <form className={classes.form} noValidate>\r\n                  <Grid container spacing={2}>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginBottom: 10 }}>作品名字 *</label>\r\n                      <Input\r\n                        placeholder=\"作品名称\"\r\n                        allowClear\r\n                        id=\"pubName\"\r\n                        onChange={this.handleGetPubName}\r\n                        value={this.state.name}\r\n                        className={classes.input}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>收益比例 *</label>\r\n                      <p style={{ fontSize: 14 }}>当您的作品被他人分享并获利时，您希望从他的分享利润中获得多少比例的收益</p>\r\n                      <InputNumber\r\n                        id=\"bonusFee\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        max={100}\r\n                        formatter={value => `${value}%`}\r\n                        parser={value => value.replace('%', '')}\r\n                        onChange={this.handleGetBonusFee}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>通行代币 *</label>\r\n                      <p style={{ fontSize: 14 }}>请选择您支持的支付货币 (输入代币符号或地址)</p>\r\n                      <Select\r\n                        showSearch\r\n                        value={this.state.token_addr}\r\n                        placeholder={\"请输入代币符号或地址\"}\r\n                        // className={classes.input}\r\n                        style={{ width: \"100%\" }}\r\n                        size=\"large\"\r\n                        defaultActiveFirstOption={false}\r\n                        showArrow={false}\r\n                        filterOption={false}\r\n                        onSearch={this.handleSearch}\r\n                        onChange={this.handleSelectChange}\r\n                        notFoundContent={null}\r\n                      >\r\n                        {options}\r\n                      </Select>\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>售卖价格 ({this.state.token_symbol})*</label>\r\n                      <InputNumber\r\n                        id=\"price\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        onChange={this.handleGetPrice}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>最高分享次数 (MAX： 65535)*</label>\r\n                      <p style={{ fontSize: 14 }}>您希望每一个帮助您传播的用户最多能够分享多少次？</p>\r\n                      <InputNumber\r\n                        id=\"shareTimes\"\r\n                        defaultValue={0}\r\n                        min={0}\r\n                        max={65535}\r\n                        onChange={this.handleGetShareTimes}\r\n                        className={classes.inputNum}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item style={{ width: \"100%\" }}>\r\n                      <label style={{ fontSize: 18, marginTop: 20 }}>作品描述 *</label>\r\n                      <p style={{ fontSize: 14 }}>请用简单的话语对您的作品进行描述，精准有效的描述能帮助其他用户更准确得了解您的作品</p>\r\n                      <TextArea\r\n                        rows={4}\r\n                        id=\"Description\"\r\n                        onChange={this.handleGetDescription}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                </form>\r\n                <Grid container alignItems=\"center\" spacing={4} style={{ marginTop: 20, marginBottom: 50 }}>\r\n                  <Grid item xs style={{ textAlign: 'center' }}>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      className={classes.button}\r\n                      startIcon={<CloudUploadOutlined />}\r\n                      style={{ width: 200, height: 50, marginBottom: 20, marginTop: 20 }}\r\n                      onClick={this.submit}\r\n                    >\r\n                      提交信息\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs style={{ textAlign: 'center' }}>\r\n                    <Link onClick={this.handleClickOpen} style={{ fontSize: 10, textDecoration: 'underline' }}>\r\n                      已经上传过基本信息？\r\n                    </Link>\r\n                  </Grid>\r\n                </Grid>\r\n                <Dialog\r\n                  open={this.state.open}\r\n                  onClose={this.handleClose}\r\n                  aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                  <DialogTitle id=\"form-dialog-title\">填写 NFT ID</DialogTitle>\r\n                  <DialogContent>\r\n                    <DialogContentText>\r\n                      请在下方区域填写您要绑定内容的 NFT ID\r\n                    </DialogContentText>\r\n                    <label style={{ fontSize: 14, marginBottom: 10 }}>NFT ID *</label>\r\n                    <InputNumber\r\n                      defaultValue={0}\r\n                      min={0}\r\n                      onChange={this.handleGetNFTId}\r\n                    />\r\n                  </DialogContent>\r\n                  <DialogActions>\r\n                    <Button onClick={this.handleClose} color=\"primary\">\r\n                      取消\r\n                    </Button>\r\n                    <Button variant=\"contained\" onClick={this.jump} color=\"primary\" >\r\n                      去上传作品\r\n                    </Button>\r\n                  </DialogActions>\r\n                </Dialog>\r\n              </div>\r\n            </Container>\r\n          </ThemeProvider>\r\n        </Spin>\r\n      )\r\n    }\r\n\r\n\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(EncryptedPublish)","import './App.css';\r\nimport React, { Component } from 'react';\r\nimport { createTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport TopBar from './TopBar';\r\n\r\nconst styles = theme => ({\r\n  icon: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  titleFont: {\r\n    fontFamily: 'Teko',\r\n  },\r\n  btn: {\r\n    color: '#424949',\r\n    borderWidth: 2,\r\n    borderColor: '#e3f2fd',\r\n    fontSize: 16,\r\n  },\r\n  btnMain: {\r\n    color: '#FFFFFF',\r\n    borderColor: '#e3f2fd',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  btnSecond: {\r\n    // marginTop: theme.spacing(3),\r\n    color: '#03A9F4',\r\n    borderColor: '#03A9F4',\r\n    borderWidth: 2,\r\n    borderRadius: 25,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 5,\r\n      width: 95\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 10,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 16,\r\n      width: 150\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n      width: 300,\r\n      height: 70\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(7),\r\n    maxWidth: '150%',\r\n\r\n  },\r\n\r\n  content: {\r\n    fontFamily: 'Teko',\r\n    marginTop: 20,\r\n    lineHeight: 1.5,\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 30,\r\n    },\r\n  },\r\n\r\n  shouldKnow: {\r\n    fontFamily: 'Teko',\r\n    textAlign: 'center',\r\n    [theme.breakpoints.between('xs', 'sm')]: {\r\n      fontSize: 16,\r\n    },\r\n    [theme.breakpoints.between('sm', 'md')]: {\r\n      fontSize: 20,\r\n    },\r\n    [theme.breakpoints.between('md', 'lg')]: {\r\n      fontSize: 40,\r\n    },\r\n    [theme.breakpoints.between('lg', 'xl')]: {\r\n      fontSize: 40,\r\n    },\r\n    [theme.breakpoints.up('xl')]: {\r\n      fontSize: 60,\r\n    },\r\n  },\r\n});\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#FDFEFE',\r\n    },\r\n    secondary: {\r\n      main: '#2196f3',\r\n    }\r\n  },\r\n});\r\n\r\nclass Buy extends Component {\r\n  render() {\r\n    const { classes } = this.props\r\n    return (\r\n      <div>\r\n        <ThemeProvider theme={theme}>\r\n          <TopBar />\r\n          <Container component=\"main\" className={classes.container}>\r\n            <div className={classes.paper}>\r\n              <Typography color=\"inherit\" noWrap className={classes.shouldKnow}>\r\n                <b>敬请期待</b>\r\n              </Typography>\r\n            </div>\r\n          </Container>\r\n        </ThemeProvider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Buy);","import React from 'react';\r\nimport { HashRouter, Route, Switch } from 'react-router-dom';\r\n\r\nimport App from './App';\r\nimport Publish from './Publish';\r\nimport NFTInfo from './NFTInfo';\r\nimport SellSingle from './SellSingle';\r\nimport BuySingle from './BuySingle';\r\nimport Collections from './Collections';\r\nimport Spark from './NFTSpark';\r\nimport IntroPublish from './IntroPublish';\r\nimport EncryptedPublish from './EncryptedPublish';\r\nimport Buy from './Buy';\r\n\r\nconst BasicRoute = () => (\r\n  <HashRouter >\r\n    <Switch>\r\n      <Route exact path=\"/\" component={App} />\r\n      <Route exact path=\"/introPublish\" component={IntroPublish} />\r\n      <Route exact path=\"/buy\" component={Buy} />\r\n      <Route exact path=\"/publish\" component={Publish} />\r\n      <Route exact path=\"/encryptedPublish\" component={EncryptedPublish} />\r\n      <Route exact path=\"/sellSingle/:NFTId\" component={SellSingle} />\r\n      <Route exact path=\"/buySingle/:NFTId\" component={BuySingle} />\r\n      <Route exact path=\"/collections\" component={Collections} />\r\n      <Route exact path=\"/NFT/:id\" component={NFTInfo} />\r\n      <Route exact path=\"/NFT/spark/:id\" component={Spark} />\r\n    </Switch>\r\n  </HashRouter>\r\n);\r\n\r\n\r\nexport default BasicRoute;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport 'bootstrap/dist/css/bootstrap-theme.css';\r\nimport Router from './Router';\r\n\r\nReactDOM.render(\r\n  <Router />,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\n"],"sourceRoot":""}