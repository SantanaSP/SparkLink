(this["webpackJsonppublish-token"]=this["webpackJsonppublish-token"]||[]).push([[0],{371:function(e,t){e.exports={pinata_api_key:"3da01378391b7f0b7be4",pinata_secret_api_key:"b9f43c3c12fb3956453db6a8b8594b603af6ef74f8eeac0eb83934a38bea4c03"}},446:function(e,t,n){},460:function(e,t){},469:function(e,t){},487:function(e,t){},489:function(e,t){},508:function(e,t){},509:function(e,t){},578:function(e,t){},580:function(e,t){},612:function(e,t){},614:function(e,t){},615:function(e,t){},620:function(e,t){},622:function(e,t){},628:function(e,t){},630:function(e,t){},643:function(e,t){},655:function(e,t){},658:function(e,t){},663:function(e,t){},671:function(e,t){},76:function(e,t,n){},766:function(e,t){},962:function(e,t,n){"use strict";n.r(t);var a,i=n(0),s=n(37),r=n.n(s),o=(n(446),n(11)),c=n(15),l=n(19),d=n(20),p=n(2),b=n.p+"static/media/books.6e483aa8.png",m=(n(76),n(211),n(993)),u=n(992),h=n(425),j=n(994),f=n(23),x=n(266),g=n(995),O=n(9),y=n.n(O),w=n(27),k=n(990),T=n(260),v=n.n(T),S=n(262),F=n.n(S),N=n(159),I=n.n(N);try{a=new I.a(window.ethereum)}catch(ft){a=new I.a("ws://localhost:8546")}var z=a,C=n(1),_=(Object(h.a)({breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}}),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={isConnected:!1,user_address:""},e.sleep=function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.getAccount=Object(w.a)(y.a.mark((function t(){var n,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:n=t.sent,a=n[0],alert("\u60a8\u5df2\u7ecf\u8fde\u63a5metamask"),e.setState({isConnected:!0}),e.setState({user_address:a}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.debug(t.t0),e.setState({isConnected:!1});case 14:case"end":return t.stop()}}),t,null,[[0,10]])}))),e}return Object(c.a)(n,[{key:"componentWillMount",value:function(){var e=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.eth.getAccounts();case 2:0==e.sent.length?this.setState({isConnected:!1}):this.setState({isConnected:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return Object(C.jsx)("div",{children:Object(C.jsx)(k.a,{children:Object(C.jsxs)(u.a,{container:!0,direction:"row",justifyContent:"flex-start",children:[Object(C.jsx)(u.a,{item:!0,className:e.titleGrid,children:Object(C.jsx)(x.a,{component:"h1",color:"inherit",noWrap:!0,className:e.title,children:Object(C.jsx)("b",{children:"SparkLink"})})}),Object(C.jsxs)(u.a,{item:!0,className:e.btnGrid,children:[Object(C.jsx)(m.a,{size:"large",className:e.btn,href:"/#/",children:Object(C.jsx)("b",{children:"\u9996\u9875"})}),Object(C.jsx)(m.a,{size:"large",className:e.btn,href:"/#/introPublish",children:Object(C.jsx)("b",{children:"\u53d1\u5e03"})}),Object(C.jsx)(m.a,{size:"large",className:e.btn,href:"/#/collections",children:Object(C.jsx)("b",{children:"\u6211\u7684NFTs"})}),Object(C.jsx)(m.a,{size:"large",href:"https://github.com/SparkNFT",target:"_blank",children:Object(C.jsx)(v.a,{className:e.icon1})}),this.state.isConnected?Object(C.jsx)(m.a,{color:"primary",className:e.btnConnected,children:Object(C.jsx)(F.a,{className:e.icon2})}):Object(C.jsx)(m.a,{className:e.btn,onClick:this.getAccount,children:Object(C.jsx)(F.a,{className:e.icon2})})]})]})})})}}]),n}(i.Component)),L=Object(f.a)((function(e){var t,n,a,i,s;return{icon1:(t={},Object(p.a)(t,e.breakpoints.down("xl"),{fontSize:19}),Object(p.a)(t,e.breakpoints.up("xl"),{fontSize:27}),t),icon2:(n={},Object(p.a)(n,e.breakpoints.down("xl"),{fontSize:22}),Object(p.a)(n,e.breakpoints.up("xl"),{fontSize:32}),n),titleGrid:{marginTop:25,marginBottom:10,marginLeft:"5%",textAlign:"center"},title:(a={minWidth:100,fontSize:25,fontFamily:"Teko"},Object(p.a)(a,e.breakpoints.between("xs","sm"),{fontSize:25}),Object(p.a)(a,e.breakpoints.between("sm","md"),{fontSize:25}),Object(p.a)(a,e.breakpoints.between("md","lg"),{fontSize:35}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{fontSize:35}),Object(p.a)(a,e.breakpoints.up("xl"),{fontSize:45}),a),btnGrid:(i={marginBottom:10,minWidth:370},Object(p.a)(i,e.breakpoints.between("sm","md"),{marginTop:10}),Object(p.a)(i,e.breakpoints.between("md","lg"),{marginTop:25,marginLeft:"20%"}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{marginTop:25,marginLeft:"50%"}),Object(p.a)(i,e.breakpoints.up("xl"),{marginTop:25,marginLeft:"60%"}),i),btn:(s={color:"#424949",borderColor:"#e3f2fd",fontSize:15},Object(p.a)(s,e.breakpoints.between("xs","sm"),{fontSize:15}),Object(p.a)(s,e.breakpoints.between("sm","md"),{fontSize:15,width:100}),Object(p.a)(s,e.breakpoints.between("md","lg"),{fontSize:15,width:100}),Object(p.a)(s,e.breakpoints.up("xl"),{fontSize:25}),s),btnConnected:{color:"#03A9F4",borderColor:"#e3f2fd",fontSize:16},avatar:{margin:e.spacing(1),backgroundColor:"#2196f3",width:10,height:10}}}),{withTheme:!0})(_),B=Object(h.a)({palette:{primary:{main:"#FDFEFE"},secondary:{main:"#2196f3"}}}),A=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(C.jsx)("div",{children:Object(C.jsx)(j.a,{theme:B,children:Object(C.jsxs)("div",{className:e.page,children:[Object(C.jsx)(L,{}),Object(C.jsx)(g.a,{component:"main",className:e.container,children:Object(C.jsx)("div",{className:e.paper,children:Object(C.jsxs)(u.a,{container:!0,justifyContent:"center",children:[Object(C.jsxs)(u.a,{item:!0,style:{minWidth:"50%"},children:[Object(C.jsx)(x.a,{color:"inherit",noWrap:!0,className:e.title,children:Object(C.jsx)("b",{children:"SparkLink"})}),Object(C.jsx)(x.a,{color:"inherit",noWrap:!0,className:e.title2,children:Object(C.jsx)("b",{children:"\u4eba\u4eba\u4f20\u64ad\uff0c\u4e92\u76f8\u652f\u6301\uff0c\u4eff\u82e5\u661f\u661f\u4e4b\u706b\uff0c\u70b9\u4eae\u4e00\u7247\u4e16\u754c\u3002"})}),Object(C.jsx)(x.a,{color:"inherit",noWrap:!0,className:e.title3,children:"\u53d1\u5e03\u4f60\u7231\u7684 & \u652f\u6301\u4f60\u7231\u7684 & \u4f20\u64ad\u4f60\u7231\u7684"})]}),Object(C.jsx)(u.a,{item:!0,xs:5,children:Object(C.jsx)("img",{src:b,className:e.books})}),Object(C.jsxs)(u.a,{container:!0,justifyContent:"center",spacing:5,children:[Object(C.jsx)(u.a,{item:!0,children:Object(C.jsx)(m.a,{size:"large",variant:"contained",color:"secondary",className:e.btnMain,href:"/#/introPublish",children:Object(C.jsx)("b",{children:"\u53bb\u53d1\u5e03"})})}),Object(C.jsx)(u.a,{item:!0,children:Object(C.jsx)(m.a,{size:"large",variant:"outlined",color:"secondary",className:e.btnSecond,href:"/#/buy",children:Object(C.jsx)("b",{children:"\u53bb\u8d2d\u4e70"})})})]})]})})})]})})})}}]),n}(i.Component),W=Object(f.a)((function(e){var t,n,a,i,s;return{title:(t={fontFamily:"Teko",marginTop:"25%"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{fontSize:25}),Object(p.a)(t,e.breakpoints.between("sm","md"),{fontSize:25}),Object(p.a)(t,e.breakpoints.between("md","lg"),{fontSize:35}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{fontSize:100}),Object(p.a)(t,e.breakpoints.up("xl"),{fontSize:150}),t),title2:(n={fontFamily:"Teko"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:10}),Object(p.a)(n,e.breakpoints.between("sm","md"),{fontSize:15}),Object(p.a)(n,e.breakpoints.between("md","lg"),{fontSize:25}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{fontSize:35}),Object(p.a)(n,e.breakpoints.up("xl"),{fontSize:55}),n),title3:(a={fontFamily:"Teko"},Object(p.a)(a,e.breakpoints.between("xs","sm"),{fontSize:8}),Object(p.a)(a,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(a,e.breakpoints.between("md","lg"),{fontSize:15}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{fontSize:25}),Object(p.a)(a,e.breakpoints.up("xl"),{fontSize:45}),a),icon:{marginRight:e.spacing(2)},titleFont:{fontFamily:"Teko"},btnMain:(i={color:"#FFFFFF",borderColor:"#e3f2fd",borderWidth:2,borderRadius:25},Object(p.a)(i,e.breakpoints.between("xs","sm"),{fontSize:5}),Object(p.a)(i,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(i,e.breakpoints.between("md","lg"),{fontSize:16}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{fontSize:16,width:150}),Object(p.a)(i,e.breakpoints.up("xl"),{fontSize:30,width:300,height:70}),i),btnSecond:(s={color:"#03A9F4",borderColor:"#03A9F4",borderWidth:2,borderRadius:25},Object(p.a)(s,e.breakpoints.between("xs","sm"),{fontSize:5}),Object(p.a)(s,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(s,e.breakpoints.between("md","lg"),{fontSize:16}),Object(p.a)(s,e.breakpoints.between("lg","xl"),{fontSize:16,width:150}),Object(p.a)(s,e.breakpoints.up("xl"),{fontSize:30,width:300,height:70}),s),paper:{marginTop:e.spacing(7),textAlign:"center"},container:{maxWidth:"100%"},books:{width:"90%",height:"auto"}}}),{withTheme:!0})(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(746),n(747);var P=n(424),E=n(44),R=n(88),M=n(210),D=n(427),U=n(1010),G=n(116),q=n.n(G),H=n(162),J=n.n(H),V=n(1007),K=n(1008),Y=(n(362),n(42)),$=n.n(Y),Q=new z.eth.Contract([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint64",name:"NFT_id",type:"uint64"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint128",name:"amount",type:"uint128"}],name:"Claim",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint64",name:"NFT_id",type:"uint64"},{indexed:!1,internalType:"uint128",name:"transfer_price",type:"uint128"}],name:"DeterminePrice",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint64",name:"NFT_id",type:"uint64"},{indexed:!1,internalType:"uint128",name:"transfer_price",type:"uint128"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"DeterminePriceAndApprove",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint64",name:"NFT_id",type:"uint64"},{indexed:!1,internalType:"string",name:"content",type:"string"}],name:"Label",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"issue_id",type:"uint32"},{indexed:!0,internalType:"address",name:"publisher",type:"address"},{indexed:!1,internalType:"uint64",name:"rootNFTId",type:"uint64"}],name:"Publish",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint64",name:"NFT_id",type:"uint64"},{indexed:!1,internalType:"bytes32",name:"old_URI",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"new_URI",type:"bytes32"}],name:"SetURI",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"acceptShill",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"claimProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"},{internalType:"uint128",name:"_price",type:"uint128"}],name:"determinePrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"},{internalType:"uint128",name:"_price",type:"uint128"},{internalType:"address",name:"_to",type:"address"}],name:"determinePriceAndApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getDepthByNFTId",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getEditionIdByNFTId",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getFatherByNFTId",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getIssueIdByNFTId",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"getLossRatio",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getProfitByNFTId",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getRemainShillTimesByNFTId",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_issue_id",type:"uint32"}],name:"getRootNFTIdByIssueId",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint32",name:"_issue_id",type:"uint32"}],name:"getRoyaltyFeeByIssueId",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getShillPriceByNFTId",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_issue_id",type:"uint32"}],name:"getShillTimesByIssueId",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_issue_id",type:"uint32"}],name:"getTotalAmountByIssueId",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"getTransferPriceByNFTId",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"isEditionExisting",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_issue_id",type:"uint32"}],name:"isIssueExisting",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"}],name:"isRootNFT",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"},{internalType:"string",name:"content",type:"string"}],name:"label",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint128",name:"_first_sell_price",type:"uint128"},{internalType:"uint8",name:"_royalty_fee",type:"uint8"},{internalType:"uint8",name:"_shill_times",type:"uint8"},{internalType:"bytes32",name:"_ipfs_hash",type:"bytes32"}],name:"publish",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint64",name:"_NFT_id",type:"uint64"},{internalType:"bytes32",name:"ipfs_hash",type:"bytes32"}],name:"setURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"payable",type:"function"}],"0x7187211744c67F8cE89fEAc63b85D8D17417bDfE"),X=n(65),Z=n.n(X),ee=n(969),te=(n(765),n(371)),ne=te.pinata_api_key,ae=te.pinata_secret_api_key,ie=n(372),se=n(373),re=(n(247),Object(h.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}})),oe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={name:"",bonusFee:0,price:0,buffer:null,ipfsHashCover:"",ipfsMeta:"",fileIpfs:"",description:"",shareTimes:0,onLoading:!1,rootNFTId:"",usedAcc:"",sig:"",fileType:"",finished:!1,coverURL:""},e.handleGetPubName=function(t){e.setState({name:t.target.value})},e.handleGetBonusFee=function(t){e.setState({bonusFee:t})},e.handleGetPrice=function(t){e.setState({price:t})},e.handleGetShareTimes=function(t){e.setState({shareTimes:t})},e.handleGetDescription=function(t){e.setState({description:t.target.value})},e.submit=function(){var t=Object(w.a)(y.a.mark((function t(n){var a,i,s,r,o,c,l,d,p,b,m,u,h,j,f,x;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.price&&0!==e.state.bonusFee&&0!==e.state.shareTimes&&""!==e.state.ipfsHashCover&&""!==e.state.fileIpfs){t.next=4;break}alert("\u4f60\u6709\u4fe1\u606f\u5c1a\u672a\u586b\u5199"),t.next=43;break;case 4:return e.setState({onLoading:!0}),a="https://gateway.pinata.cloud/ipfs/"+e.state.ipfsHashCover,e.setState({coverURL:a}),console.debug("coverURL: ",e.state.coverURL),i=e.state.description.replace(/(\r\n\t|\n|\r\t)/gm," "),t.next=11,window.ethereum.request({method:"eth_requestAccounts"});case 11:return s=t.sent,r=s[0],e.setState({usedAcc:r}),o="https://gateway.pinata.cloud/ipfs/"+e.state.fileIpfs,c={name:e.state.name,description:i,image:e.state.coverURL,attributes:[{display_type:"boost_percentage",trait_type:"Bonuse Percentage",value:e.state.bonusFee},{trait_type:"File Address",value:o},{value:e.state.fileType},{trait_type:"Encrypted",value:"FALSE"}]},"https://api.pinata.cloud/pinning/pinJSONToIPFS",t.prev=17,t.next=20,$.a.post("https://api.pinata.cloud/pinning/pinJSONToIPFS",c,{headers:{pinata_api_key:ne,pinata_secret_api_key:ae}});case 20:return l=t.sent,console.debug("metadata: ",l.data.IpfsHash),d=se.decode(l.data.IpfsHash),p=d.toString("hex").substring(4),e.setState({ipfsMeta:p}),b=z.utils.toWei(e.state.price.toString()),m="0x"+p,t.next=29,Q.methods.publish(b,e.state.bonusFee,e.state.shareTimes,m).send({from:e.state.usedAcc});case 29:u=t.sent,console.log(u),h=u.events.Publish,j=h.returnValues,f=j.rootNFTId,x=j.issue_id,e.setState({onLoading:!1,rootNFTId:f,issueId:x,finished:!0}),alert("\u5df2\u7ecf\u6210\u529f\u53d1\u5e03\u4f5c\u54c1"),t.next=43;break;case 39:t.prev=39,t.t0=t.catch(17),console.debug(t.t0),alert("\u4f3c\u4e4e\u9047\u5230\u4e86\u4e9b\u5c0f\u95ee\u9898\uff1a ".concat(t.t0));case 43:case"end":return t.stop()}}),t,null,[[17,39]])})));return function(e){return t.apply(this,arguments)}}(),e.checkDetail=function(){var t=Object(w.a)(y.a.mark((function t(n){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a="/#/NFT/"+e.state.rootNFTId,window.open(a,"_self");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=4;break}return alert("\u8bf7\u5148\u5b89\u88c5metamask"),window.location.href="/#/introPublish",e.abrupt("return");case 4:window.ethereum.request({method:"eth_chainId"}).then((function(e){if("0x89"!==e)return alert("\u8bf7\u5207\u6362\u81f3Polygon \u4e3b\u7f51\u7edc"),void(window.location.href="/#/introPublish")}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,n=this,a=V.a.TextArea,i={name:"file",action:"https://api.pinata.cloud/pinning/pinFileToIPFS",headers:{pinata_api_key:ne,pinata_secret_api_key:ae},data:this.state.buffer,beforeUpload:function(t){return new Promise((function(n,a){try{var i=new FileReader;i.readAsArrayBuffer(t),i.onload=function(t){var n=t.target.result,a=new ie;a.append("file",n),e.setState({buffer:a})},n()}catch(s){D.b.error("Read file error"),a()}}))},onChange:function(e){return Object(w.a)(y.a.mark((function t(){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"done"===(a=e.file.status)?(D.b.success("".concat(e.file.name," file uploaded successfully.")),n.setState({ipfsHashCover:e.file.response.IpfsHash})):"error"===a&&D.b.error("".concat(e.file.name," file upload failed."));case 2:case"end":return t.stop()}}),t)})))()},onDrop:function(e){D.b.error("Only image file supported"),console.log("Dropped files",e.dataTransfer.files)}},s={name:"file",action:"https://api.pinata.cloud/pinning/pinFileToIPFS",headers:{pinata_api_key:ne,pinata_secret_api_key:ae},data:this.state.buffer,beforeUpload:function(t){return new Promise((function(n,a){try{var i=new FileReader;i.readAsArrayBuffer(t),i.onload=function(t){var n=t.target.result,a=new ie;a.append("file",n),e.setState({buffer:a})},n()}catch(s){D.b.error("Read file error"),a()}}))},onChange:function(e){return Object(w.a)(y.a.mark((function t(){var a,i,s;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"done"===(a=e.file.status)?(D.b.success("".concat(e.file.name," file uploaded successfully.")),i=e.file.name.split("."),s=i[i.length-1],console.debug(s),console.debug("file ipfs hash: ",e.file.response.IpfsHash),n.setState({fileIpfs:e.file.response.IpfsHash,fileType:s})):"error"===a&&D.b.error("".concat(e.file.name," file upload failed."));case 2:case"end":return t.stop()}}),t)})))()},onDrop:function(e){D.b.error("Only image file supported"),console.log("Dropped files",e.dataTransfer.files)}};return this.state.onLoading?Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:re,children:[Object(C.jsx)(L,{}),Object(C.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(C.jsx)(Z.a,{type:"bars",color:"#2196f3",width:"40%"})})]})}):this.state.finished?Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:re,children:[Object(C.jsx)(L,{}),Object(C.jsxs)("div",{style:{textAlign:"center"},children:[Object(C.jsx)(x.a,{className:t.titleCon,children:Object(C.jsx)("b",{children:" \ud83c\udf89 \u606d\u559c\u60a8\u53d1\u5e03\u6210\u529f"})}),Object(C.jsx)(ee.a,{className:t.paperImg,children:Object(C.jsx)("img",{style:{width:300,marginTop:20,marginBottom:50},src:this.state.coverURL})}),Object(C.jsx)(x.a,{variant:"h4",style:{marginTop:20,fontFamily:"Ubuntu"},children:Object(C.jsxs)("b",{children:["\u60a8\u83b7\u5f97\u7684\u6839\u7ed3\u70b9NFT\u662f\uff1a #",this.state.rootNFTId]})}),Object(C.jsx)(m.a,{variant:"contained",className:t.button,style:{marginTop:50,width:200,height:50,marginBottom:50},onClick:this.checkDetail,children:"\u67e5\u770b\u8be6\u60c5"})]})]})}):Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:re,children:[Object(C.jsx)(L,{}),Object(C.jsx)(g.a,{component:"main",maxWidth:"xs",className:t.main,children:Object(C.jsxs)("div",{className:t.paper,children:[Object(C.jsx)(x.a,{className:t.titlePub,children:Object(C.jsx)("b",{children:"\u53d1\u5e03\u4f5c\u54c1\u4fe1\u606f"})}),Object(C.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(C.jsxs)(u.a,{container:!0,spacing:2,children:[Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginBottom:10},children:"\u4f5c\u54c1\u540d\u5b57 *"}),Object(C.jsx)(V.a,{placeholder:"\u4f5c\u54c1\u540d\u79f0",allowClear:!0,id:"pubName",onChange:this.handleGetPubName,value:this.state.name,className:t.input})]}),Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u6536\u76ca\u6bd4\u4f8b *"}),Object(C.jsx)("p",{style:{fontSize:14},children:"\u5f53\u60a8\u7684\u4f5c\u54c1\u88ab\u6210\u529f\u5206\u4eab\u65f6\uff0c\u60a8\u5e0c\u671b\u4ece\u5206\u4eab\u4ef7\u683c\u4e2d\u83b7\u5f97\u591a\u5c11\u6bd4\u4f8b\u7684\u6536\u76ca"}),Object(C.jsx)(K.a,{id:"bonusFee",defaultValue:0,min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},onChange:this.handleGetBonusFee,className:t.inputNum})]}),Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u552e\u5356\u4ef7\u683c (MATIC)*"}),Object(C.jsx)(K.a,{id:"price",defaultValue:0,min:0,onChange:this.handleGetPrice,className:t.inputNum})]}),Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u6700\u9ad8\u5206\u4eab\u6b21\u6570 *"}),Object(C.jsx)("p",{style:{fontSize:14},children:"\u60a8\u5e0c\u671b\u6bcf\u4e00\u4e2a\u5e2e\u52a9\u60a8\u4f20\u64ad\u7684\u7528\u6237\u6700\u591a\u80fd\u591f\u5206\u4eab\u591a\u5c11\u6b21\uff1f"}),Object(C.jsx)(K.a,{id:"shareTimes",defaultValue:0,min:0,onChange:this.handleGetShareTimes,className:t.inputNum})]}),Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u4f5c\u54c1\u63cf\u8ff0 *"}),Object(C.jsx)("p",{style:{fontSize:14},children:"\u8bf7\u7528\u7b80\u5355\u7684\u8bdd\u8bed\u5bf9\u60a8\u7684\u4f5c\u54c1\u8fdb\u884c\u63cf\u8ff0\uff0c\u7cbe\u51c6\u6709\u6548\u7684\u63cf\u8ff0\u80fd\u5e2e\u52a9\u5176\u4ed6\u7528\u6237\u66f4\u51c6\u786e\u5f97\u4e86\u89e3\u60a8\u7684\u4f5c\u54c1"}),Object(C.jsx)(a,{rows:6,id:"Description",onChange:this.handleGetDescription})]})]}),Object(C.jsx)("label",{style:{fontSize:18,marginTop:50},children:"\u5c01\u9762\u56fe\u7247 *"}),Object(C.jsxs)("p",{style:{fontSize:14},children:["\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u4e0a\u4f20\u60a8\u7684\u5c01\u9762\u56fe\u7247 ",Object(C.jsx)("br",{}),"\u5c01\u9762\u6587\u4ef6\u652f\u6301\u8fd9\u4e9b\u683c\u5f0f\uff1aJPEG/JPG/PNG"]}),Object(C.jsxs)(q.a,Object(R.a)(Object(R.a)({},i),{},{style:{width:"100%",minHeight:200},id:"Uploader",accept:".png, .jpg, .jpeg",children:[Object(C.jsx)("p",{className:"ant-upload-drag-icon",children:Object(C.jsx)(U.a,{})}),Object(C.jsx)("p",{className:"ant-upload-text",children:"\u4e0a\u4f20\u6587\u4ef6\u8bf7\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904"}),Object(C.jsx)("p",{className:"ant-upload-hint",children:"\u652f\u6301\u5355\u4e2a\u6587\u4ef6\u7684\u4e0a\u4f20\uff0c\u652f\u6301\u591a\u79cd\u7c7b\u578b\u6587\u4ef6\u7684\u4e0a\u4f20"})]})),Object(C.jsx)("label",{style:{fontSize:18,marginTop:50},children:"\u4f5c\u54c1\u6587\u4ef6 *"}),Object(C.jsx)("p",{style:{fontSize:14},children:"\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u4e0a\u4f20\u60a8\u7684\u4f5c\u54c1\u6587\u4ef6 "}),Object(C.jsxs)(q.a,Object(R.a)(Object(R.a)({},s),{},{style:{width:"100%",minHeight:200},id:"Uploader2",children:[Object(C.jsx)("p",{className:"ant-upload-drag-icon",children:Object(C.jsx)(U.a,{})}),Object(C.jsx)("p",{className:"ant-upload-text",children:"\u4e0a\u4f20\u6587\u4ef6\u8bf7\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904"}),Object(C.jsx)("p",{className:"ant-upload-hint",children:"\u4ec5\u652f\u6301\u5355\u4e2a\u6587\u4ef6\u7684\u4e0a\u4f20\uff0c\u652f\u6301\u591a\u79cd\u7c7b\u578b\u6587\u4ef6\u7684\u4e0a\u4f20"})]}))]}),Object(C.jsx)(m.a,{variant:"contained",className:t.button,startIcon:Object(C.jsx)(J.a,{}),style:{marginTop:50,width:200,height:50,marginBottom:50},onClick:this.submit,children:"\u63d0\u4ea4\u4fe1\u606f"})]})})]})})}}]),n}(i.Component),ce=Object(f.a)((function(e){var t,n,a,i;return{main:(t={},Object(p.a)(t,e.breakpoints.between("xs","sm"),{width:"60%"}),Object(p.a)(t,e.breakpoints.up("sm"),{width:500}),t),titleCon:(n={marginTop:50,fontFamily:"Ubuntu"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:30}),Object(p.a)(n,e.breakpoints.up("sm"),{fontSize:40}),n),paperImg:(a={backgroundColor:"#EFEBE9",width:330},Object(p.a)(a,e.breakpoints.between("xs","sm"),{marginLeft:"5%",marginTop:30}),Object(p.a)(a,e.breakpoints.between("sm","md"),{marginLeft:"30%",marginTop:30}),Object(p.a)(a,e.breakpoints.between("md","lg"),{marginLeft:"30%",marginTop:30}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{marginLeft:"40%",marginTop:30}),Object(p.a)(a,e.breakpoints.up("xl"),{marginLeft:"45%",marginTop:30}),a),titlePub:(i={marginTop:"3%",fontFamily:"Ubuntu"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{fontSize:30}),Object(p.a)(i,e.breakpoints.up("sm"),{fontSize:40}),i),btn:{color:"#424949",borderWidth:2,borderColor:"#e3f2fd",fontSize:16},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:M.a[500],width:60,height:60},form:{width:"150%",marginTop:e.spacing(7)},submit:{margin:e.spacing(3,0,2)},fileBtn:{padding:"10px 30px 10px 30px",background:"#66C1E4",border:"none",color:"#FFF",boxShadow:"1px 1px 1px #4C6E91"},button:{margin:e.spacing(1),fontSize:20,borderRadius:25,color:"#FFFFFF",backgroundColor:"#2196f3"},input:{height:40,borderRadius:5},inputNum:{height:40,borderRadius:5,width:"100%",fontSize:20}}}),{withTheme:!0})(oe),le=n(78),de=n(997),pe=n(422),be=n.n(pe),me=n(423),ue=n.n(me),he=n(101),je=n.n(he),fe=(n(956),n(421)),xe=n.n(fe),ge=n(205),Oe=n(206),ye=n.n(Oe),we=n(996),ke=n(420),Te=n.n(ke),ve=n(960),Se=n(247),Fe=(n(84),n(84),Object(h.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}})),Ne=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).gateway="https://gateway.pinata.cloud/ipfs/",e.backend="https://api.sparklink.io",e.ipfs_node="http://18.162.56.46:5001",e.state={Name:"",Description:"",BonusFee:0,Cover:"",contract:null,childrenNum:0,spark:!1,dataUrl:null,account:null,Profit:"",issueId:0,fileType:"",isEncrypt:!1,onLoading:!1,loadItem:!0,encrypted:"\u672a\u77e5"},e.downloadIPFS=function(){var t=Object(w.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"GET",Object(le.a)(e),"",e.state.dataUrl,e.setState({onLoading:!0}),console.log("onload"+e.state.onLoading),e.finishDownload();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.finishDownload=function(){var t=Object(le.a)(e),n=e.state.dataUrl;if(e.state.isEncrypt){var a={method:"get",url:n,headers:{}};$()(a).then(function(){var n=Object(w.a)(y.a.mark((function n(a){var i,s,r,o;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=a.data,n.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return s=n.sent,r=s[0],o={account:r,root_nft_id:e.props.match.params.id},o=JSON.stringify(o),n.next=9,e.signDataAndDecrypt(r,i);case 9:t.setState({onLoading:!1});case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}else $()({url:n,method:"GET",responseType:"blob"}).then((function(n){var a=window.URL.createObjectURL(new Blob([n.data])),i=document.createElement("a");i.href=a,i.style.display="none";var s="."+t.state.fileType,r=e.state.Name+s;i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a),t.setState({onLoading:!1}),console.log("set close")})).catch((function(e){t.setState({onLoading:!1}),alert("\u4e0b\u8f7d\u5931\u8d25\uff1a"+e)}))},e.claim=Object(w.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({onLoading:!0}),t.prev=1,t.next=4,Q.methods.claimProfit(e.props.match.params.id).send({from:e.state.account});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),e.setState({onLoading:!1});case 9:e.setState({onLoading:!1});case 10:case"end":return t.stop()}}),t,null,[[1,6]])}))),e.signDataAndDecrypt=function(){var t=Object(w.a)(y.a.mark((function t(n,a){var i,s,r,o,c,l,d,p,b,m,u,h,j,f,x,g;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={account:n,nft_id:e.props.match.params.id},s=JSON.stringify(i),t.next=4,z.eth.personal.sign(s,n).then((function(e){r=e}));case 4:return console.log(r),o={account:n,nft_id:e.props.match.params.id,signature:r},console.log(r),c=JSON.stringify(o),console.log(c),l=e.backend+"/api/v1/key/claim",console.log(l),t.prev=11,t.next=14,$.a.post(l,c,{headers:{"Content-Type":"application/json"}});case 14:d=t.sent,console.log(d),200==d.status?(p=d.data.key,b=Se.TripleDES.decrypt(a,p),m=b.toString(Se.enc.Utf8),u=Se.enc.Hex.parse(m),h=e.wordArrayToByteArray(u,u.length),j=new Uint8Array(h),f=new Blob([j]),x="."+e.state.fileType,console.debug(e.state),ve.saveAs(f,e.state.Name+x)):(g=d.data.message,alert("\u83b7\u53d6\u5bc6\u94a5\u5931\u8d25  "+g)),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(11),console.log(t.t0),alert("\u83b7\u53d6\u5bc6\u94a5\u5931\u8d25("+t.t0+")");case 23:case"end":return t.stop()}}),t,null,[[11,19]])})));return function(e,n){return t.apply(this,arguments)}}(),e.wordToByteArray=function(e,t){var n=[];return t>0&&n.push(e>>>24),t>1&&n.push(e>>>16&255),t>2&&n.push(e>>>8&255),t>3&&n.push(255&e),n},e.wordArrayToByteArray=function(t,n){t.hasOwnProperty("sigBytes")&&t.hasOwnProperty("words")&&(n=t.sigBytes,t=t.words);for(var a,i=[],s=0;n>0;)n-=(a=e.wordToByteArray(t[s],Math.min(4,n))).length,i.push(a),s++;return[].concat.apply([],i)},e.showLoading=function(){if(e.state.onLoading)return Object(C.jsx)("div",{children:Object(C.jsx)(Z.a,{type:"bars",color:"#2196f3",height:200,width:200})})},e.spark=function(){e.state.spark?document.getElementById("isSpark").innerHTML="\u70b9\u706b\u2014\u5206\u4eab":document.getElementById("isSpark").innerHTML="\u9690\u85cf",e.setState({spark:!e.state.spark})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,a,i,s,r,o,c,l,d,p,b,m,u,h,j,f,x=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,window.ethereum){e.next=5;break}return alert("\u8bf7\u5148\u5b89\u88c5metamask"),window.location.href="/#/collections",e.abrupt("return");case 5:return window.ethereum.request({method:"eth_chainId"}).then((function(e){if("0x89"!==e)return alert("\u8bf7\u5207\u6362\u81f3Polygon \u4e3b\u7f51\u7edc"),void(window.location.href="/#/collections")})),n=new I.a(window.ethereum),a=Q,this.setState({contract:Q}),a.methods.ownerOf(this.props.match.params.id).call().then((function(e){window.ethereum.request({method:"eth_requestAccounts"}).then((function(a){var i=a[0];t.setState({account:i}),n.utils.toChecksumAddress(i)!==e&&(alert("\u8fd9\u679anft\u4e0d\u5c5e\u4e8e\u4f60"),window.location.href="/#/")}))})),a.methods.getProfitByNFTId(this.props.match.params.id).call().then((function(e){x.setState({Profit:n.utils.fromWei(e)+"MATIC"})})),e.next=13,a.methods.tokenURI(this.props.match.params.id).call();case 13:return i=e.sent,s=i.split("/"),e.next=17,a.methods.getIssueIdByNFTId(this.props.match.params.id).call();case 17:return r=e.sent,e.next=20,a.methods.getRoyaltyFeeByIssueId(r).call();case 20:return o=e.sent,c=s[s.length-1],console.debug("meta here: ",c),l="https://gateway.pinata.cloud/ipfs/"+c,e.prev=24,e.next=27,$()({method:"get",url:l,timeout:5e3});case 27:for(d=e.sent,p=d.data,0,b="",m=!1,u=p.attributes[2].value,h="\u672a\u77e5",j=0;j<p.attributes.length;j++)"Bonuse Percentage"===p.attributes[j].trait_type&&p.attributes[j].value,"File Address"===p.attributes[j].trait_type&&(b=p.attributes[j].value),"Encrypted"===p.attributes[j].trait_type&&("FALSE"===p.attributes[j].value?(m=!1,h="\u5426"):(m=!0,h="\u662f"));this.setState({Name:p.name,Description:p.description,BonusFee:o,Cover:p.image,dataUrl:b,isEncrypt:m,encrypted:h,fileType:u,loadItem:!1}),console.debug(p),e.next=46;break;case 39:e.prev=39,e.t0=e.catch(24),this.setState({Name:"SparkNFT"}),this.setState({Description:"\u6682\u65f6\u65e0\u6cd5\u83b7\u53d6\u5230\u8be5nft\u7684\u76f8\u5173\u63cf\u8ff0"}),this.setState({BonusFee:o}),this.setState({Cover:"https://via.placeholder.com/100x140.png?text=SparkNFT"}),this.setState({dataUrl:"fileAddr_PlaceHolder",loadItem:!1});case 46:f=this.backend+"/api/v1/nft/info?nft_id="+this.props.match.params.id,$.a.get(f).then((function(e){var t=e.data.children_count;x.setState({childrenNum:t})})).catch((function(e){void 0!==e.response?400==e.response.status&&e.response.data.message.includes("children not found")?console.debug("no children"):(console.debug(f),alert("\u83b7\u53d6nft\u5b50\u8282\u70b9\u60c5\u51b5\u9875\u9762\u5931\u8d25("+e+")")):alert("\u670d\u52a1\u5668\u672a\u54cd\u5e94\u53f6\u5b50\u8282\u70b9\u6570\u91cf\u8bf7\u6c42")}));case 48:case"end":return e.stop()}}),e,this,[[24,39]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.props.classes;this.gateway;return this.state.onLoading?Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:Fe,children:[Object(C.jsx)(L,{}),Object(C.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(C.jsx)(Z.a,{type:"bars",color:"#2196f3",width:"40%"})})]})}):Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:Fe,children:[Object(C.jsx)(L,{}),Object(C.jsxs)(g.a,{component:"main",className:n.container,children:[Object(C.jsxs)(u.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"flex-start",children:[Object(C.jsx)(u.a,{children:Object(C.jsx)(m.a,{startIcon:Object(C.jsx)(je.a,{style:{fontSize:"2rem"}}),href:"/#/collections",style:{marginTop:20,marginBottom:10,fontSize:"2rem"},children:"\u56de\u5230\u6211\u7684\u6536\u85cf\u9986"})}),Object(C.jsx)(u.a,{xs:9}),Object(C.jsxs)(u.a,{container:!0,direction:"row",className:n.cbutton,children:[Object(C.jsx)(u.a,{children:Object(C.jsx)(m.a,{style:{marginTop:10,marginRight:30,marginBottom:20},size:"large",variant:"contained",color:"primary",className:n.btnMain,startIcon:Object(C.jsx)(Te.a,{}),onClick:this.claim,children:Object(C.jsx)(x.a,{id:"isSpark",variant:"button",component:"h3",gutterBottom:!0,children:Object(C.jsx)("font",{size:"3",color:"white",children:"\u9886\u6536\u76ca"})})})}),Object(C.jsx)(u.a,{children:Object(C.jsx)(m.a,{style:{marginTop:10,marginBottom:20},size:"large",variant:"outlined",color:"secondary",className:n.btnSecond,startIcon:Object(C.jsx)(xe.a,{}),href:"/#/sellSingle/"+this.props.match.params.id,children:Object(C.jsx)(x.a,{variant:"button",component:"h2",gutterBottom:!0,children:Object(C.jsx)("font",{size:"3",children:"\u552e\u5356"})})})})]})]}),Object(C.jsxs)("div",{className:n.paper,children:[this.state.loadItem?Object(C.jsxs)(u.a,{container:!0,className:n.content,spacing:5,children:[Object(C.jsx)(u.a,{item:!0,xs:4,children:Object(C.jsx)(de.a,{variant:"rect",width:300,height:500,style:{width:370,marginLeft:50,marginBottom:50}})}),Object(C.jsxs)(u.a,{item:!0,xs:!0,style:{marginLeft:"5%"},children:[Object(C.jsx)(de.a,{animation:"wave",variant:"text",width:200,height:30}),Object(C.jsx)(de.a,{animation:"wave",variant:"text",width:400,height:70}),Object(C.jsx)(de.a,{animation:"wave",variant:"rect",width:500,height:300,style:{marginBottom:50}})]})]}):Object(C.jsxs)(u.a,{container:!0,spacing:5,className:n.content,children:[Object(C.jsxs)(u.a,{style:{maxWidth:200},children:[Object(C.jsx)(ee.a,{className:n.imagePapaer,children:Object(C.jsx)("img",{className:n.imageStyle,src:this.state.Cover})}),Object(C.jsx)(u.a,{children:Object(C.jsxs)("font",{size:"3",children:["\u76ee\u524d\u6536\u76ca:",this.state.Profit]})})]}),Object(C.jsx)(u.a,{xs:1}),Object(C.jsxs)(u.a,{className:n.content2,children:[Object(C.jsxs)(x.a,(e={color:"inherit",align:"left"},Object(p.a)(e,"color","textSecondary"),Object(p.a)(e,"noWrap",!0),Object(p.a)(e,"style",{fontFamily:"Teko",fontSize:16,marginTop:"2%"}),Object(p.a)(e,"children",["#",this.props.match.params.id]),e)),Object(C.jsx)(x.a,{color:"inherit",align:"left",noWrap:!0,style:{fontFamily:"Teko",fontSize:34,marginTop:"2%"},children:Object(C.jsx)("b",{children:this.state.Name})}),Object(C.jsx)(x.a,{align:"left",color:"textSecondary",paragraph:!0,style:{marginTop:"2%",maxWidth:"100%",fontSize:16},children:this.state.Description}),Object(C.jsxs)(x.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"6%",maxWidth:"100%",fontSize:24},children:["\u5206\u7ea2\u6bd4\u4f8b: ",this.state.BonusFee," %"]}),Object(C.jsxs)(x.a,{align:"left",color:"textPrimary",paragraph:!0,style:{maxWidth:"65%",fontSize:12},children:["\u5f53\u524d\u62e5\u6709\u7684\u5b50\u8282\u70b9\u6570\u91cf: ",this.state.childrenNum]}),Object(C.jsxs)(x.a,{align:"left",color:"textPrimary",paragraph:!0,style:{maxWidth:"65%",fontSize:12},children:["NFT\u4f5c\u54c1\u662f\u5426\u52a0\u5bc6: ",this.state.encrypted]}),Object(C.jsxs)(u.a,{container:!0,direction:"row",className:n.cbutton2,children:[Object(C.jsx)(u.a,{children:Object(C.jsx)(m.a,{size:"small",variant:"contained",color:"primary",target:"_blank",className:n.btnMain,startIcon:Object(C.jsx)(be.a,{}),onClick:this.downloadIPFS,children:Object(C.jsx)("font",{size:"3",color:"white",children:"\u4e0b\u8f7d"})})}),Object(C.jsx)(u.a,{children:Object(C.jsx)(m.a,{size:"small",variant:"outlined",color:"secondary",target:"_blank",className:n.btnSecond,startIcon:Object(C.jsx)(ue.a,{}),onClick:this.spark,children:Object(C.jsx)("font",{size:"3",children:"\u70b9\u706b\u5206\u4eab"})})})]})]})]}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{})]}),Object(C.jsx)(u.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"flex-start",children:Object(C.jsx)(u.a,{xs:8,children:Object(C.jsxs)("div",{style:{marginTop:0},children:[function(){var e=window.location.host+"/#/NFT/Spark/"+t.props.match.params.id;if(t.state.spark)return Object(C.jsx)(u.a,{container:!0,children:Object(C.jsx)(u.a,{item:!0,xs:!0,children:Object(C.jsxs)(x.a,{color:"inherit",align:"center",noWrap:!0,className:n.share,children:["\u8bf7\u5c06\u4e0b\u65b9\u94fe\u63a5\u5206\u4eab\u7ed9\u4e70\u65b9\uff0c",Object(C.jsx)("br",{})," \u4e70\u65b9\u4f1a\u8fdb\u5165\u6b64\u94fe\u63a5\u6765\u8d2d\u4e70\u8fd9\u4e2aNFT ",Object(C.jsx)("br",{}),e,Object(C.jsx)(ge.CopyToClipboard,{text:e,onCopy:function(){return t.setState({copied:!0})},children:Object(C.jsx)(we.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(C.jsx)(ye.a,{})})})]})})})}(),this.showLoading()]})})}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{})]})]})})}}]),n}(i.Component),Ie=Object(f.a)((function(e){var t,n,a,i,s,r,o,c;return{container:{maxWidth:1500},icon:{marginRight:e.spacing(2)},paper:{marginTop:e.spacing(1),textAlign:"center",maxWidth:1370},btn:{color:"#424949",borderWidth:2,borderColor:"#e3f2fd",fontSize:16},btnMain:{marginTop:e.spacing(3),color:"#FFFFFF",borderWidth:2,borderColor:"#e3f2fd",fontSize:16,borderRadius:25,width:120,maxWidth:"20rem",minWidth:"10rem"},btnSecond:{marginTop:e.spacing(3),color:"#03A9F4",borderWidth:3,borderColor:"#03A9F4",fontSize:16,borderRadius:25,width:120,maxWidth:"20rem",minWidth:"10rem"},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"100%"},cardContent:{flexGrow:1},content:(t={fontFamily:"Teko"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("sm","md"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("md","lg"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.up("xl"),{justifyContent:"center",alignItems:"flex-start"}),t),content2:(n={fontFamily:"Teko"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{marginLeft:10,maxWidth:500}),Object(p.a)(n,e.breakpoints.between("sm","md"),{marginLeft:90,maxWidth:500}),Object(p.a)(n,e.breakpoints.between("md","lg"),{marginLeft:80,maxWidth:500}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{marginLeft:50,maxWidth:500}),Object(p.a)(n,e.breakpoints.up("xl"),{marginLeft:60,maxWidth:500}),n),cbutton:(a={fontFamily:"Teko"},Object(p.a)(a,e.breakpoints.between("xs","sm"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("sm","md"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("md","lg"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.up("xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),a),cbutton2:(i={fontFamily:"Teko"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(i,e.breakpoints.between("sm","md"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(i,e.breakpoints.between("md","lg"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{justifyContent:"space-evenly",alignItems:"flex-start"}),Object(p.a)(i,e.breakpoints.up("xl"),{justifyContent:"space-evenly",alignItems:"flex-start"}),i),dbutton:(s={fontFamily:"Teko"},Object(p.a)(s,e.breakpoints.between("xs","sm"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(s,e.breakpoints.between("sm","md"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(s,e.breakpoints.between("md","lg"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(s,e.breakpoints.between("lg","xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(s,e.breakpoints.up("xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),s),imageStyle:(r={},Object(p.a)(r,e.breakpoints.between("xs","sm"),{width:280,height:365,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.between("sm","md"),{width:290,height:385,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.between("md","lg"),{width:300,height:420,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.between("lg","xl"),{width:300,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.up("xl"),{width:300,marginTop:20,marginBottom:50}),r),imagePapaer:(o={},Object(p.a)(o,e.breakpoints.between("xs","sm"),{backgroundColor:"#EFEBE9",width:330,height:420,marginLeft:25}),Object(p.a)(o,e.breakpoints.between("sm","md"),{backgroundColor:"#EFEBE9",width:340,height:440,marginLeft:25}),Object(p.a)(o,e.breakpoints.between("md","lg"),{backgroundColor:"#EFEBE9",width:350,height:465,marginLeft:25}),Object(p.a)(o,e.breakpoints.between("lg","xl"),{backgroundColor:"#EFEBE9",width:350,marginLeft:10}),Object(p.a)(o,e.breakpoints.up("xl"),{backgroundColor:"#EFEBE9",width:350,marginLeft:10}),o),share:(c={fontFamily:"Teko",marginBottom:"10%"},Object(p.a)(c,e.breakpoints.between("xs","sm"),{fontSize:14}),Object(p.a)(c,e.breakpoints.between("sm","md"),{fontSize:16}),Object(p.a)(c,e.breakpoints.between("md","lg"),{fontSize:18}),Object(p.a)(c,e.breakpoints.between("lg","xl"),{fontSize:20}),Object(p.a)(c,e.breakpoints.up("xl"),{fontSize:20}),c)}}),{withTheme:!0})(Ne),ze=n(1009),Ce=n(998),_e=n(999),Le=n(1e3),Be=n(1001),Ae=n(142),We=n.n(Ae),Pe=Object(h.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}}),Ee=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).gateway="https://gateway.pinata.cloud/ipfs/",a.backend="https://api.sparklink.io",a.state={name:"",bonusFee:0,coverURL:"",description:"",price:0,ipfsHashMeta:"",shareTimes:0,open:!1,toAddress:"",NFTId:"",onSale:!1,copied:!1,onLoading:!1,owner:"",currentAcc:"",childrenNum:0,loadItem:!0},a.handleClickOpen=function(e){a.setState({open:!0})},a.handleClose=function(e){a.setState({open:!1})},a.handleGetPrice=function(e){a.setState({price:e})},a.handleGetAddr=function(e){a.setState({toAddress:e.target.value})},a.handleClickLink=function(e){var t="/#/NFT/"+a.state.NFTId;window.open(t,"_self")},a.sell=function(){var e=Object(w.a)(y.a.mark((function e(t){var n,i,s,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({open:!1}),e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:n=e.sent,i=n[0],s=z.utils.toWei(a.state.price.toString()),r=Object(le.a)(a),a.setState({onLoading:!0}),Q.methods.determinePriceAndApprove(a.state.NFTId,s,a.state.toAddress).send({from:i}).then((function(e){r.setState({onSale:!0,onLoading:!1}),alert("\u5df2\u7ecf\u6210\u529f\u6388\u6743\u4e70\u65b9")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.ethereum.request({method:"eth_chainId"}).then((function(e){if("0x89"!==e)return alert("\u8bf7\u5207\u6362\u81f3Polygon \u4e3b\u7f51\u7edc"),void(window.location.href="/#/")})),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,a,i,s,r,o=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return t=e.sent,n=t[0],a=this,this.setState({currentAcc:n}),this.setState({NFTId:this.props.match.params.NFTId}),console.debug(this.state.NFTId),e.next=10,Q.methods.getIssueIdByNFTId(this.state.NFTId).call();case 10:return i=e.sent,e.next=13,Q.methods.getRoyaltyFeeByIssueId(i).call();case 13:return s=e.sent,e.next=16,Q.methods.tokenURI(this.props.match.params.NFTId).call().then((function(e){var t=e.split("/");o.setState({ipfsHashMeta:t[t.length-1]});var n=o.gateway+o.state.ipfsHashMeta;$()({method:"get",url:n,timeout:2e3}).then((function(e){for(var t=e.data,n=0,i=0;i<t.attributes.length;i++)0!==i?3!==i||t.attributes[i].value:n=t.attributes[i].value;a.setState({loadItem:!1,name:t.name,description:t.description,bonusFee:n,coverURL:t.image})})).catch((function(e){var t="SparkNFT#"+o.props.match.params.NFTId;a.setState({loadItem:!1,name:t,description:"\u6682\u65f6\u65e0\u6cd5\u83b7\u53d6\u5230\u8be5nft\u7684\u76f8\u5173\u63cf\u8ff0",bonusFee:s,coverURL:"https://via.placeholder.com/100x140.png?text=SparkNFT"}),console.debug(e)}))}));case 16:return e.next=18,Q.methods.ownerOf(this.props.match.params.NFTId).call().then((function(e){o.setState({owner:e.toLowerCase()})}));case 18:return e.next=20,Q.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call().then((function(e){"0"==e?o.setState({onSale:!1}):o.setState({onSale:!0})}));case 20:r=this.backend+"/api/v1/nft/info?nft_id="+this.state.NFTId,$.a.get(r).then((function(e){var t=e.data.children_count;a.setState({childrenNum:t})})).catch((function(e){console.debug(e.message),void 0!==e.response?(console.log(e.response),404==e.response.status&&e.response.data.message.includes("NFT not found")?console.debug("\u5e76\u6ca1\u6709\u627e\u5230\u6b64nft"):alert("\u83b7\u53d6nft\u5b50\u8282\u70b9\u60c5\u51b5\u9875\u9762\u5931\u8d25("+e+")")):alert("\u670d\u52a1\u5668\u672a\u54cd\u5e94,\u5b50\u8282\u70b9\u6570\u91cf\u83b7\u53d6\u5931\u8d25")}));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.props.classes,a=function(){return t.state.currentAcc==t.state.owner?Object(C.jsx)(m.a,{variant:"outlined",color:"primary",startIcon:Object(C.jsx)(We.a,{style:{fontSize:22}}),className:n.btnSell,onClick:t.handleClickOpen,children:"\u552e\u5356"}):Object(C.jsx)(m.a,{variant:"outlined",startIcon:Object(C.jsx)(We.a,{style:{fontSize:22}}),className:n.btnSell,disabled:!0,children:"\u552e\u5356"})};return this.state.onLoading?Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:Pe,children:[Object(C.jsx)(L,{}),Object(C.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(C.jsx)(Z.a,{type:"bars",color:"#2196f3",width:"40%"})})]})}):Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:Pe,children:[Object(C.jsx)(L,{}),Object(C.jsxs)(g.a,{component:"main",className:n.container,children:[Object(C.jsx)(m.a,{startIcon:Object(C.jsx)(je.a,{style:{fontSize:22}}),onClick:this.handleClickLink,style:{marginTop:50,marginBottom:100,fontSize:22},children:"\u8fd4\u56de"}),Object(C.jsx)("div",{className:n.paper,children:this.state.loadItem?Object(C.jsxs)(u.a,{container:!0,spacing:5,className:n.content,children:[Object(C.jsx)(u.a,{item:!0,xs:4,children:Object(C.jsx)(de.a,{variant:"rect",width:300,height:500,className:n.img})}),Object(C.jsxs)(u.a,{item:!0,xs:!0,style:{marginLeft:"5%",maxWidth:500,minWidth:350},children:[Object(C.jsx)(de.a,{animation:"wave",variant:"text",width:"70%",height:30}),Object(C.jsx)(de.a,{animation:"wave",variant:"text",width:"100%",height:70}),Object(C.jsx)(de.a,{animation:"wave",variant:"rect",width:"100%",height:300,style:{marginBottom:50}}),a()]})]}):Object(C.jsxs)(u.a,{container:!0,className:n.content,spacing:5,children:[Object(C.jsx)(u.a,{item:!0,xs:4,style:{maxWidth:600},children:Object(C.jsx)(ee.a,{className:n.imgPaper,children:Object(C.jsx)("img",{style:{width:300,marginTop:20,marginBottom:50},src:this.state.coverURL})})}),Object(C.jsxs)(u.a,{item:!0,xs:!0,className:n.content2,children:[Object(C.jsxs)(x.a,(e={color:"inherit",align:"left"},Object(p.a)(e,"color","textSecondary"),Object(p.a)(e,"noWrap",!0),Object(p.a)(e,"style",{fontFamily:"Teko",fontSize:16,marginTop:"2%"}),Object(p.a)(e,"children",["#",this.state.NFTId]),e)),Object(C.jsx)(x.a,{color:"inherit",align:"left",noWrap:!0,style:{fontFamily:"Teko",fontSize:30,marginTop:"2%"},children:Object(C.jsx)("b",{children:this.state.name})}),Object(C.jsx)(x.a,{align:"left",color:"textSecondary",paragraph:!0,style:{marginTop:"2%",maxWidth:"100%",fontSize:16},children:this.state.description}),Object(C.jsxs)(x.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"6%",maxWidth:"65%",fontSize:20},children:["\u521b\u4f5c\u8005\u5206\u7ea2\u6bd4\u4f8b: ",this.state.bonusFee," %"]}),Object(C.jsxs)(x.a,{align:"left",color:"textPrimary",paragraph:!0,style:{maxWidth:"65%",fontSize:12},children:["\u5f53\u524d\u62e5\u6709\u7684\u5b50\u8282\u70b9\u6570\u91cf: ",this.state.childrenNum]}),a(),Object(C.jsxs)(ze.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(C.jsx)(Ce.a,{id:"form-dialog-title",children:"\u586b\u5199\u552e\u5356\u4fe1\u606f"}),Object(C.jsxs)(_e.a,{children:[Object(C.jsx)(Le.a,{children:"\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u586b\u5199\u4f60\u5e0c\u671b\u552e\u5356\u7684\u4ef7\u683c\uff0c\u4ee5\u53ca\u552e\u5356\u5bf9\u8c61\u7684\u94b1\u5305\u5730\u5740\u3002"}),Object(C.jsx)("label",{style:{fontSize:14,marginBottom:10},children:"\u552e\u5356\u4ef7\u683c (MATIC)*"}),Object(C.jsx)(K.a,{defaultValue:0,min:0,onChange:this.handleGetPrice,className:n.inputNum}),Object(C.jsx)("label",{style:{fontSize:14,marginBottom:10,marginTop:10},children:"\u4e70\u65b9\u94b1\u5305\u5730\u5740 *"}),Object(C.jsx)(V.a,{placeholder:"\u4e70\u65b9\u94b1\u5305\u5730\u5740",allowClear:!0,id:"pubName",onChange:this.handleGetAddr,className:n.input})]}),Object(C.jsxs)(Be.a,{children:[Object(C.jsx)(m.a,{onClick:this.handleClose,color:"primary",children:"\u53d6\u6d88"}),Object(C.jsx)(m.a,{variant:"contained",onClick:this.sell,color:"primary",children:"\u5356\u51fa"})]})]})]})]})}),Object(C.jsx)("div",{style:{marginTop:50},children:function(){var e=window.location.host+"/#/buySingle/"+t.state.NFTId;if(t.state.onSale)return Object(C.jsx)(u.a,{container:!0,children:Object(C.jsx)(u.a,{item:!0,xs:!0,children:Object(C.jsxs)(x.a,{color:"inherit",align:"center",noWrap:!0,className:n.share,children:["\u8bf7\u5c06\u4e0b\u65b9\u94fe\u63a5\u5206\u4eab\u7ed9\u4e70\u65b9\uff0c",Object(C.jsx)("br",{})," \u4e70\u65b9\u4f1a\u8fdb\u5165\u6b64\u94fe\u63a5\u6765\u8d2d\u4e70\u8fd9\u4e2aNFT ",Object(C.jsx)("br",{}),e,Object(C.jsx)(ge.CopyToClipboard,{text:e,onCopy:function(){return t.setState({copied:!0})},children:Object(C.jsx)(we.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(C.jsx)(ye.a,{})})})]})})})}()})]})]})})}}]),n}(i.Component),Re=Object(f.a)((function(e){var t,n,a,i,s;return{container:{maxWidth:1500},paper:{marginTop:e.spacing(1),textAlign:"center",maxWidth:1500},btnSell:{margin:e.spacing(1),fontSize:16,borderRadius:10,borderWidth:2,borderColor:"#2196f3",color:"#2196f3",marginLeft:"10%",width:100},inputNum:{height:40,borderRadius:5,width:550,fontSize:20},input:{height:40,borderRadius:5},loader:{textAlign:"center"},content:(t={fontFamily:"Teko"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("sm","md"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("md","lg"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.up("xl"),{justifyContent:"center",alignItems:"flex-start"}),t),img:(n={width:300,marginBottom:50},Object(p.a)(n,e.breakpoints.between("xs","sm"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("sm","md"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("md","lg"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{marginLeft:"30%"}),Object(p.a)(n,e.breakpoints.up("xl"),{marginLeft:"40%"}),n),imgPaper:(a={width:350,marginBottom:50,backgroundColor:"#EFEBE9"},Object(p.a)(a,e.breakpoints.between("sm","md"),{marginLeft:"20%"}),Object(p.a)(a,e.breakpoints.between("md","lg"),{marginLeft:"20%"}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{marginLeft:"30%"}),Object(p.a)(a,e.breakpoints.up("xl"),{marginLeft:"35%"}),a),content2:(i={fontFamily:"Teko",textAlign:"center"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{maxWidth:500}),Object(p.a)(i,e.breakpoints.between("sm","md"),{marginLeft:90,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("md","lg"),{marginLeft:80,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{marginLeft:50,maxWidth:500}),Object(p.a)(i,e.breakpoints.up("xl"),{marginLeft:60,maxWidth:500}),i),share:(s={fontFamily:"Teko",marginBottom:"10%"},Object(p.a)(s,e.breakpoints.between("xs","sm"),{fontSize:14}),Object(p.a)(s,e.breakpoints.between("sm","md"),{fontSize:16}),Object(p.a)(s,e.breakpoints.between("md","lg"),{fontSize:18}),Object(p.a)(s,e.breakpoints.between("lg","xl"),{fontSize:20}),Object(p.a)(s,e.breakpoints.up("xl"),{fontSize:20}),s)}}),{withTheme:!0})(Ee),Me=Object(h.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}}),De=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).gateway="https://gateway.pinata.cloud/ipfs/",a.backend="https://api.sparklink.io",a.state={name:"",bonusFee:0,coverURL:"",description:"",price:0,ipfsHashMeta:"",open:!1,address:"",NFTId:"",onSale:!1,owner:"",approvedAddr:"",currentAcc:"",onLoading:!1,childrenNum:0,loadItem:!0,encrypted:"\u672a\u77e5"},a.handleBuy=function(){var e=Object(w.a)(y.a.mark((function e(t){var n,i,s,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:n=e.sent,i=n[0],s=z.utils.toWei(a.state.price.toString()),r=Object(le.a)(a),a.setState({onLoading:!0}),Q.methods.safeTransferFrom(a.state.owner,i,a.state.NFTId).send({from:i,value:s}).then((function(e){r.setState({onLoading:!1}),alert("\u4ea4\u6613\u5df2\u7ecf\u4e0a\u94fe")}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleGetPrice=function(e){a.setState({price:e})},a.handleGetAddr=function(e){a.setState({address:e.target.value})},a}return Object(c.a)(n,[{key:"componentWillMount",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,a,i,s,r,o=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return t=e.sent,n=t[0],a=this,this.setState({currentAcc:n}),this.setState({NFTId:this.props.match.params.NFTId}),e.next=9,Q.methods.getIssueIdByNFTId(this.state.NFTId).call();case 9:return i=e.sent,e.next=12,Q.methods.getRoyaltyFeeByIssueId(i).call();case 12:return s=e.sent,Q.methods.tokenURI(this.props.match.params.NFTId).call().then((function(e){var t=e.split("/");o.setState({ipfsHashMeta:t[t.length-1]});var n=o.gateway+o.state.ipfsHashMeta;$()({method:"get",url:n,timeout:3e3}).then((function(e){for(var t=e.data,n=0,i="\u672a\u77e5",s=0;s<t.attributes.length;s++)0!==s?3!==s||(i="TRUE"===t.attributes[s].value.toUpperCase()?"\u662f":"\u5426"):n=t.attributes[s].value;a.setState({loadItem:!1,name:t.name,description:t.description,bonusFee:n,coverURL:t.image,encrypted:i})})).catch((function(e){var t="SparkNFT#"+o.props.match.params.NFTId;a.setState({loadItem:!1,name:t,description:"\u6682\u65f6\u65e0\u6cd5\u83b7\u53d6\u5230\u8be5nft\u7684\u76f8\u5173\u63cf\u8ff0",bonusFee:s,coverURL:"https://via.placeholder.com/100x140.png?text=SparkNFT"})}))})),e.next=16,Q.methods.getTransferPriceByNFTId(this.props.match.params.NFTId).call().then((function(e){o.setState({price:e/1e18})}));case 16:return e.next=18,Q.methods.ownerOf(this.props.match.params.NFTId).call().then((function(e){o.setState({owner:e})}));case 18:return e.next=20,Q.methods.getApproved(this.props.match.params.NFTId).call().then((function(e){o.setState({approvedAddr:e.toLowerCase()})}));case 20:r=this.backend+"/api/v1/nft/info?nft_id="+this.state.NFTId,$.a.get(r).then((function(e){var t=e.data.children_count;a.setState({childrenNum:t})})).catch((function(e){console.debug(e.message),void 0!==e.response?(console.log(e.response),400==e.response.status&&e.response.data.message.includes("children not found")?console.debug("no children"):alert("\u83b7\u53d6nft\u5b50\u8282\u70b9\u60c5\u51b5\u9875\u9762\u5931\u8d25("+e+")")):alert("\u670d\u52a1\u5668\u672a\u54cd\u5e94,\u5b50\u8282\u70b9\u6570\u91cf\u83b7\u53d6\u5931\u8d25")}));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.props.classes,a=function(){return t.state.approvedAddr==t.state.currentAcc?Object(C.jsx)(m.a,{variant:"outlined",color:"primary",startIcon:Object(C.jsx)(We.a,{style:{fontSize:22}}),className:n.btnSell,onClick:t.handleBuy,children:"\u8d2d\u4e70"}):Object(C.jsx)(m.a,{variant:"outlined",startIcon:Object(C.jsx)(We.a,{style:{fontSize:22}}),className:n.btnDisable,disabled:!0,children:"\u8d2d\u4e70"})};return this.state.onLoading?Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:Me,children:[Object(C.jsx)(L,{}),Object(C.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(C.jsx)(Z.a,{type:"bars",color:"#2196f3",width:"40%"})})]})}):Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:Me,children:[Object(C.jsx)(L,{}),Object(C.jsxs)(g.a,{component:"main",className:n.container,children:[Object(C.jsx)(m.a,{startIcon:Object(C.jsx)(je.a,{style:{fontSize:22}}),href:"/",style:{marginTop:50,marginBottom:100,fontSize:22},children:"\u56de\u5230\u9996\u9875"}),Object(C.jsx)("div",{className:n.paper,children:this.state.loadItem?Object(C.jsxs)(u.a,{container:!0,spacing:5,className:n.content,children:[Object(C.jsx)(u.a,{item:!0,xs:4,children:Object(C.jsx)(de.a,{variant:"rect",width:300,height:500,className:n.img})}),Object(C.jsxs)(u.a,{item:!0,xs:!0,style:{marginLeft:"5%",maxWidth:500,minWidth:350},children:[Object(C.jsx)(de.a,{animation:"wave",variant:"text",width:"70%",height:30}),Object(C.jsx)(de.a,{animation:"wave",variant:"text",width:"100%",height:70}),Object(C.jsx)(de.a,{animation:"wave",variant:"rect",width:"100%",height:300,style:{marginBottom:50}}),a()]})]}):Object(C.jsxs)(u.a,{container:!0,className:n.content,spacing:5,children:[Object(C.jsx)(u.a,{item:!0,xs:4,style:{maxWidth:600},children:Object(C.jsx)(ee.a,{className:n.imgPaper,children:Object(C.jsx)("img",{style:{width:300,marginTop:20,marginBottom:50},src:this.state.coverURL})})}),Object(C.jsxs)(u.a,{item:!0,xs:!0,className:n.content2,children:[Object(C.jsxs)(x.a,(e={color:"inherit",align:"left"},Object(p.a)(e,"color","textSecondary"),Object(p.a)(e,"noWrap",!0),Object(p.a)(e,"style",{fontFamily:"Teko",fontSize:16,marginTop:"2%"}),Object(p.a)(e,"children",["#",this.state.NFTId]),e)),Object(C.jsx)(x.a,{color:"inherit",align:"left",noWrap:!0,style:{fontFamily:"Teko",fontSize:34},children:Object(C.jsx)("b",{children:this.state.name})}),Object(C.jsx)(x.a,{align:"left",color:"textSecondary",paragraph:!0,style:{marginTop:"2%",maxWidth:"100%",fontSize:16},children:this.state.description}),Object(C.jsxs)(x.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"2%",maxWidth:"65%",fontSize:20},children:["\u521b\u4f5c\u8005\u5206\u7ea2\u6bd4\u4f8b: ",this.state.bonusFee," %"]}),Object(C.jsxs)(x.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"2%",maxWidth:"100%",fontSize:18},children:["\u552e\u4ef7: ",this.state.price," MATIC"]}),Object(C.jsxs)(x.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"1%",maxWidth:"65%",fontSize:12},children:["\u5f53\u524d\u62e5\u6709\u8005: ",this.state.owner]}),Object(C.jsxs)(x.a,{align:"left",color:"textPrimary",paragraph:!0,style:{maxWidth:"65%",fontSize:12},children:["\u5f53\u524d\u62e5\u6709\u7684\u5b50\u8282\u70b9\u6570\u91cf: ",this.state.childrenNum]}),Object(C.jsxs)(x.a,{align:"left",color:"textPrimary",paragraph:!0,style:{maxWidth:"65%",fontSize:12},children:["NFT\u4f5c\u54c1\u662f\u5426\u52a0\u5bc6: ",this.state.encrypted]}),a()]})]})})]})]})})}}]),n}(i.Component),Ue=Object(f.a)((function(e){var t,n,a,i;return{container:{maxWidth:1500},paper:{marginTop:e.spacing(1),textAlign:"center",maxWidth:1500},btnSell:{margin:e.spacing(1),fontSize:16,borderRadius:10,borderWidth:2,borderColor:"#2196f3",color:"#2196f3",marginLeft:"10%",width:100},btnDisable:{margin:e.spacing(1),fontSize:16,borderRadius:10,borderWidth:3,borderColor:"#909497",color:"#909497",marginLeft:"10%",width:100},inputNum:{height:40,borderRadius:5,width:550,fontSize:20},input:{height:40,borderRadius:5},content:(t={fontFamily:"Teko"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("sm","md"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("md","lg"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(t,e.breakpoints.up("xl"),{justifyContent:"center",alignItems:"flex-start"}),t),img:(n={width:300,marginBottom:50},Object(p.a)(n,e.breakpoints.between("xs","sm"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("sm","md"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("md","lg"),{marginLeft:"20%"}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{marginLeft:"30%"}),Object(p.a)(n,e.breakpoints.up("xl"),{marginLeft:"40%"}),n),imgPaper:(a={width:350,marginBottom:50,backgroundColor:"#EFEBE9"},Object(p.a)(a,e.breakpoints.between("sm","md"),{marginLeft:"20%"}),Object(p.a)(a,e.breakpoints.between("md","lg"),{marginLeft:"20%"}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{marginLeft:"30%"}),Object(p.a)(a,e.breakpoints.up("xl"),{marginLeft:"35%"}),a),content2:(i={fontFamily:"Teko",textAlign:"center"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{maxWidth:500}),Object(p.a)(i,e.breakpoints.between("sm","md"),{marginLeft:90,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("md","lg"),{marginLeft:80,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{marginLeft:50,maxWidth:500}),Object(p.a)(i,e.breakpoints.up("xl"),{marginLeft:60,maxWidth:500}),i)}}),{withTheme:!0})(De),Ge=n(1002),qe=n(1005),He=n(1004),Je=n(1003),Ve=Object(h.a)({palette:{primary:{main:"#FDFEFE"},secondary:{main:"#2196f3"}}}),Ke=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).gateway="https://gateway.pinata.cloud/ipfs/",e.backend="https://api.sparklink.io",e.cards=[],e.state={isLogin:!1,user_address:null,name:"",viewable:!1,cards:[],onloading:!1,SkeletoNumber:0},e.getAccount=Object(w.a)(y.a.mark((function t(){var n,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:n=t.sent,a=n[0],e.setState({name:"22"}),e.setState({isLogin:!0}),e.setState({user_address:a});case 7:case"end":return t.stop()}}),t)}))),e.loadNft=Object(w.a)(y.a.mark((function t(){var n,a,i,s,r,o,c,l,d,p;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.ethereum.isConnected()){t.next=3;break}return alert("\u8bf7\u5148\u94fe\u63a5metamask"),t.abrupt("return");case 3:return t.next=5,window.ethereum.request({method:"eth_chainId"});case 5:if("0x89"===t.sent){t.next=9;break}return alert("\u8bf7\u5207\u6362\u81f3Polygon \u4e3b\u7f51\u7edc"),t.abrupt("return");case 9:return document.getElementById("viewButton").innerHTML="\u6b63\u5728\u52a0\u8f7d\u3002\u3002",n=Q,a=[],t.next=14,window.ethereum.request({method:"eth_requestAccounts"});case 14:return i=t.sent,s=i[0],t.next=18,Q.methods.balanceOf(s).call();case 18:if(r=t.sent,console.log("nft_number: ",r),0!=r){t.next=24;break}return alert("\u6682\u65e0\u53ef\u5c55\u793aNFTs"),document.getElementById("viewButton").innerHTML="\u67e5\u770b\u6211\u7684\u6536\u85cf",t.abrupt("return");case 24:return t.next=26,e.getNft(n);case 26:if(0!==(o=t.sent).length){t.next=31;break}return alert("\u6682\u65e0\u53ef\u5c55\u793aNFTs"),document.getElementById("viewButton").innerHTML="\u67e5\u770b\u6211\u7684\u6536\u85cf",t.abrupt("return");case 31:return t.next=33,e.getMetadata(n,o);case 33:for(c=t.sent,l=0;l<o.length;l++)d={id:o[l],title:c[l].name,description:c[l].description,bonusFee:c[l].attributes.value,image:c[l].image},a.push(d);document.getElementById("viewButton").innerHTML="\u73a9\u5f97\u5c3d\u5174\uff01",p=a.reverse(),e.setState({viewable:!0}),e.setState({cards:p}),e.setState({onloading:!1,SkeletoNumber:0});case 40:case"end":return t.stop()}}),t)}))),e.getMetadata=function(){var e=Object(w.a)(y.a.mark((function e(t,n){var a,i,s,r,o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=y.a.mark((function e(i){var s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.tokenURI(n[i]).call();case 2:return s=e.sent,r=s.split("/"),o=r[r.length-1],c="https://gateway.pinata.cloud/ipfs/"+o,e.next=8,$()({method:"get",url:c,timeout:2e3}).then((function(e){console.log("meta: ",e.data),a.push(e.data)})).catch((function(e){console.log("time out"),console.debug(c);var t={name:"SparkNFT#"+n[i],description:"\u6682\u65f6\u65e0\u6cd5\u83b7\u53d6\u5230\u8be5nft\u7684\u76f8\u5173\u63cf\u8ff0",image:"https://testnets.opensea.io/static/images/placeholder.png",attributes:[{display_type:"boost_percentage",trait_type:"Bonuse Percentage",value:0},{trait_type:"File Address",value:"file_url"}]};a.push(t)}));case 8:case"end":return e.stop()}}),e)})),s=0;case 3:if(!(s<n.length)){e.next=8;break}return e.delegateYield(i(s),"t0",5);case 5:s++,e.next=3;break;case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.getNft=function(){var t=Object(w.a)(y.a.mark((function t(n){var a,i,s,r,o,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return a=t.sent,i=a[0],s=[],r=z.utils.toChecksumAddress(i),o=e.backend+"/api/v1/nft/list?owner="+r,console.debug("owner: ",r),t.prev=8,t.next=11,$.a.get(o);case 11:return c=t.sent,console.debug(c),s=c.data.nft,e.setState({onloading:!0,SkeletoNumber:s.length}),t.abrupt("return",s);case 18:return t.prev=18,t.t0=t.catch(8),t.abrupt("return",[]);case 21:case"end":return t.stop()}}),t,null,[[8,18]])})));return function(e){return t.apply(this,arguments)}}(),e.renderDescription=function(e){return e.length<=150?e:e.substring(0,150)+".........."},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.classes,t=this;return window.ethereum.on("chainChanged",(function(e){window.location.reload()})),Object(C.jsxs)("div",{children:[Object(C.jsxs)(j.a,{theme:Ve,children:[Object(C.jsx)(L,{}),Object(C.jsx)(g.a,{component:"main",className:e.container,children:Object(C.jsx)("div",{className:e.paper,children:Object(C.jsx)(u.a,{container:!0,justifyContent:"center",children:Object(C.jsxs)(u.a,{item:!0,xs:10,children:[Object(C.jsx)(x.a,{color:"inherit",noWrap:!0,className:e.title,children:Object(C.jsx)("b",{children:"\u6211\u7684\u6536\u85cf\u9986"})}),Object(C.jsx)(x.a,{color:"inherit",noWrap:!0,className:e.title2,children:Object(C.jsx)("b",{children:"An ERC721 Token Trying to Solve Existing Publishing Dilemma"})}),Object(C.jsx)(u.a,{container:!0,justifyContent:"center",spacing:5,children:Object(C.jsx)(u.a,{children:Object(C.jsx)(m.a,{size:"large",variant:"contained",color:"secondary",id:"viewButton",className:e.btnMain,onClick:this.loadNft,children:Object(C.jsx)("b",{children:"\u67e5\u770b\u6211\u7684\u6536\u85cf"})})})})]})})})})]}),Object(C.jsx)("main",{children:Object(C.jsx)(g.a,{className:e.cardGrid,maxWidth:"md",children:Object(C.jsx)(u.a,{container:!0,spacing:4,children:(this.state.onloading?Array.from(new Array(this.state.SkeletoNumber)):this.state.cards).map((function(n){return function(n){return Object(C.jsx)(u.a,{item:!0,xs:12,sm:6,md:4,children:n?Object(C.jsxs)(Ge.a,{className:e.card,children:[Object(C.jsx)(Je.a,{className:e.cardMedia,image:n.image,title:"Image title"}),Object(C.jsxs)(He.a,{className:e.cardContent,children:[Object(C.jsx)(x.a,{gutterBottom:!0,variant:"h5",component:"h2",children:Object(C.jsx)("b",{children:n.title})}),Object(C.jsx)(x.a,{children:t.renderDescription(n.description)})]}),Object(C.jsxs)(qe.a,{children:[Object(C.jsx)(m.a,{size:"small",variant:"contained",color:"primary",href:"/#/NFT/"+n.id,children:Object(C.jsx)("b",{children:"\u67e5\u770b "})}),Object(C.jsx)(u.a,{xs:3}),Object(C.jsx)(x.a,{variant:"body2",gutterBottom:!0,children:Object(C.jsxs)("b",{children:["NFT id: ",n.id," "]})})]})]}):Object(C.jsxs)(Ge.a,{className:e.card,children:[Object(C.jsx)(de.a,{variant:"rect",style:{marginLeft:70},width:260,height:288}),Object(C.jsx)(de.a,{width:"60%",style:{marginTop:40},height:33}),Object(C.jsx)(de.a,{height:33}),Object(C.jsx)(de.a,{height:33}),Object(C.jsx)(de.a,{height:33})]})})}(n)}))})})})]})}}]),n}(i.Component),Ye=Object(f.a)((function(e){var t,n;return{icon:{marginRight:e.spacing(2)},titleFont:{fontFamily:"Teko"},btn:{color:"#424949",borderWidth:8,borderColor:"#e3f2fd",fontSize:16},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(36,0,6)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"100%"},cardContent:{flexGrow:2},paper:{marginTop:e.spacing(7),textAlign:"center"},container:{maxWidth:"100%"},btnMain:{marginTop:e.spacing(3),color:"#FFFFFF",borderWidth:2,borderColor:"#e3f2fd",fontSize:16,borderRadius:25,width:150},btnSecond:{marginTop:e.spacing(3),color:"#03A9F4",borderWidth:3,borderColor:"#03A9F4",fontSize:16,borderRadius:25,width:150},title:(t={fontFamily:"Teko",marginTop:"5%"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{fontSize:35}),Object(p.a)(t,e.breakpoints.between("sm","md"),{fontSize:40}),Object(p.a)(t,e.breakpoints.between("md","lg"),{fontSize:55}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{fontSize:90}),Object(p.a)(t,e.breakpoints.up("xl"),{fontSize:110}),t),title2:(n={fontFamily:"Teko"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:16}),Object(p.a)(n,e.breakpoints.between("sm","md"),{fontSize:25}),Object(p.a)(n,e.breakpoints.between("md","lg"),{fontSize:35}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{fontSize:45}),Object(p.a)(n,e.breakpoints.up("xl"),{fontSize:55}),n)}}),{withTheme:!0})(Ke),$e=n(207),Qe=n(1006),Xe=Object(h.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}}),Ze=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).gateway="https://gateway.pinata.cloud/ipfs/",a.backend="https://api.sparklink.io",a.state={Name:"",Description:"",BonusFee:0,Cover:"",contract:null,price:"",priceString:"",Leaf:0,onLoading:!1,loadItem:!0,open:!1},a.shill=function(){var e=Object(w.a)(y.a.mark((function e(t){var n,i,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return n=e.sent,i=n[0],s=Q,a.setState({onLoading:!0}),e.next=8,s.methods.acceptShill(a.props.match.params.id).send({from:i,value:a.state.price});case 8:e.sent,alert("\u4ea4\u6613\u5df2\u4e0a\u94fe"),a.setState({onLoading:!1,onSale:!0});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loadLoadingState=function(){a.setState({onloading:!0})},a.handleClickLink=function(e){var t="/#/NFT/Spark/"+a.state.recommendNFT;window.open(t)},console.log(a.state.loadItem),window.ethereum?(window.ethereum.isConnected()||window.ethereum.request({method:"eth_requestAccounts"}),window.ethereum.request({method:"eth_chainId"}).then((function(e){"0x89"===e||alert("\u8bf7\u5207\u6362\u81f3Polygon \u4e3b\u7f51\u7edc")})),a):(alert("\u8bf7\u5148\u5b89\u88c5metamask"),Object($e.a)(a))}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,a,i,s,r,o,c,l=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Q,this,e.next=4,t.methods.tokenURI(this.props.match.params.id).call();case 4:return n=e.sent,a=n.split("/"),this.setState({hash:a[a.length-1]}),$.a.get(n).then((function(e){var t,n=e.data;console.log(n);for(var a=0;a<n.attributes.length;a++)"bonusFee"===n.attributes[a].trait_type&&(t=n.attributes[a].value);l.setState({Name:n.name}),l.setState({Description:n.description}),l.setState({BonusFee:t}),l.setState({Cover:n.image})})),e.next=10,t.methods.getShillPriceByNFTId(this.props.match.params.id).call();case 10:return i=e.sent,this.setState({price:i}),s=z.utils.fromWei(i,"ether"),s+=" MATIC",this.setState({priceString:s}),r=this.backend+"/api/v1/nft/info?nft_id="+this.props.match.params.id,e.prev=16,e.next=19,$.a.get(r);case 19:o=e.sent,c=o.data.children_count,o.data.suggest_next_nft===this.props.match.params.id||"0"===o.data.suggest_next_nft?this.setState({childrenNum:c,recommendNFT:o.data.suggest_next_nft,showRecommend:!1}):this.setState({childrenNum:c,recommendNFT:o.data.suggest_next_nft,showRecommend:!0}),e.next=31;break;case 24:if(e.prev=24,e.t0=e.catch(16),void 0!==e.t0.response){e.next=29;break}return alert("\u670d\u52a1\u5668\u672a\u54cd\u5e94"),e.abrupt("return");case 29:console.log(e.t0.response),400===e.t0.response.status&&e.t0.response.data.message.includes("children not found")?console.debug("no children"):alert("\u83b7\u53d6nft\u5b50\u8282\u70b9\u60c5\u51b5\u9875\u9762\u5931\u8d25("+e.t0+")");case 31:return e.prev=31,this.setState({loadItem:!1}),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[16,24,31,34]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this.props.classes;return this.state.onLoading?Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:Xe,children:[Object(C.jsx)(L,{}),Object(C.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(C.jsx)(Z.a,{type:"bars",color:"#2196f3",width:"40%"})})]})}):Object(C.jsxs)("div",{children:[Object(C.jsx)(j.a,{theme:Xe,children:Object(C.jsx)(L,{})}),Object(C.jsx)("main",{children:Object(C.jsxs)(g.a,{component:"main",className:t.container,children:[Object(C.jsxs)(u.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"flex-start",children:[Object(C.jsx)(u.a,{children:Object(C.jsx)(m.a,{startIcon:Object(C.jsx)(je.a,{style:{fontSize:"2rem"}}),href:"/#/collections",style:{marginTop:20,marginBottom:10,fontSize:"2rem"},children:"\u56de\u5230\u6211\u7684\u6536\u85cf\u9986"})}),Object(C.jsx)(u.a,{xs:9})]}),Object(C.jsx)(u.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",xs:12,children:Object(C.jsx)(x.a,{color:"inherit",noWrap:!0,className:t.title,children:"\ud83d\udd25 NFT \ud83d\udd25"})}),Object(C.jsxs)("div",{className:t.paper,children:[this.state.loadItem?Object(C.jsxs)(u.a,{container:!0,spacing:5,className:t.content,children:[Object(C.jsx)(u.a,{item:!0,children:Object(C.jsx)(de.a,{variant:"rect",width:300,height:500,style:{width:370,marginLeft:50,marginBottom:50}})}),Object(C.jsxs)(u.a,{item:!0,style:{marginLeft:"5%"},children:[Object(C.jsx)(de.a,{animation:"wave",variant:"text",width:200,height:30}),Object(C.jsx)(de.a,{animation:"wave",variant:"text",width:400,height:70}),Object(C.jsx)(de.a,{animation:"wave",variant:"rect",width:500,height:300,style:{marginBottom:50}})]})]}):Object(C.jsxs)(u.a,{container:!0,spacing:5,className:t.content,children:[Object(C.jsx)(u.a,{item:!0,style:{maxWidth:200},children:Object(C.jsx)(ee.a,{className:t.imagePapaer,children:Object(C.jsx)("img",{className:t.imageStyle,src:this.state.Cover})})}),Object(C.jsx)(u.a,{xs:1}),Object(C.jsxs)(u.a,{item:!0,xs:!0,className:t.content2,children:[Object(C.jsxs)(x.a,(e={color:"inherit",align:"left"},Object(p.a)(e,"color","textSecondary"),Object(p.a)(e,"noWrap",!0),Object(p.a)(e,"style",{fontFamily:"Teko",fontSize:16,marginTop:"2%"}),Object(p.a)(e,"children",["#",this.props.match.params.id]),e)),Object(C.jsx)(x.a,{color:"inherit",align:"left",noWrap:!0,style:{fontFamily:"Teko",fontSize:34,marginTop:"2%"},children:Object(C.jsx)("b",{children:this.state.Name})}),Object(C.jsx)(x.a,{align:"left",color:"textSecondary",paragraph:!0,style:{marginTop:"2%",maxWidth:"100%",fontSize:16},children:this.state.Description}),Object(C.jsxs)(x.a,{align:"left",color:"textPrimary",paragraph:!0,style:{marginTop:"6%",maxWidth:"100%",fontSize:24},children:["\u70b9\u706b\u4ef7\u683c: ",this.state.priceString]}),Object(C.jsx)(u.a,{container:!0,direction:"row",className:t.cbutton,children:Object(C.jsx)(u.a,{children:Object(C.jsxs)(u.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",children:[Object(C.jsx)(u.a,{xs:2}),this.state.showRecommend?Object(C.jsx)(u.a,{children:Object(C.jsx)(m.a,{size:"large",style:{fontSize:"2rem"},variant:"outlined",color:"secondary",target:"_blank",className:t.btnSecond,disabled:!0,children:Object(C.jsxs)(x.a,{variant:"button",component:"h2",gutterBottom:!0,children:[Object(C.jsx)("font",{size:"4",children:"\ud83d\udd25   "}),"\xa0  ",Object(C.jsx)("font",{size:"3",children:"\u94f8\u9020  "})]})})}):Object(C.jsx)(u.a,{children:Object(C.jsx)(m.a,{size:"large",style:{fontSize:"3rem"},variant:"outlined",color:"secondary",target:"_blank",className:t.btnSecond,onClick:this.shill,children:Object(C.jsxs)(x.a,{variant:"button",component:"h2",gutterBottom:!0,children:[Object(C.jsx)("font",{size:"4",children:"\ud83d\udd25   "}),"\xa0  ",Object(C.jsx)("font",{size:"3",children:"\u94f8\u9020  "})]})})})]})})})]})]}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),this.state.showRecommend?Object(C.jsxs)(u.a,{children:[Object(C.jsx)(x.a,{variant:"h4",gutterBottom:!0,children:"\u6b64NFT\u7684\u5b50\u8282\u70b9\u5df2\u7ecf\u552e\u5b8c\uff0c\u6211\u4eec\u7ed9\u60a8\u63a8\u8350\u4e86\u5176\u4ed6\u8fd8\u80fd\u8d2d\u4e70\u7684\u8282\u70b9\uff1a"}),Object(C.jsx)(Qe.a,{onClick:this.handleClickLink,style:{fontSize:20,textDecoration:"underline"},children:window.location.host+"/#/NFT/Spark/"+this.state.recommendNFT})]}):Object(C.jsx)("div",{})]}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{})]})})]})}}]),n}(i.Component),et=Object(f.a)((function(e){var t,n,a,i,s,r,o;return{container:{maxWidth:1500},icon:{marginRight:e.spacing(2)},btn:{color:"#424949",borderWidth:2,borderColor:"#e3f2fd",fontSize:16},paper:{marginTop:e.spacing(1),textAlign:"center",maxWidth:1370},btnMain:{marginTop:e.spacing(3),color:"#FFFFFF",borderWidth:2,borderColor:"#e3f2fd",fontSize:16,borderRadius:25,width:150,maxWidth:"20rem",minWidth:"10rem"},btnSecond:{marginTop:e.spacing(3),color:"#03A9F4",borderWidth:3,borderColor:"#03A9F4",fontSize:16,borderRadius:25,width:150,maxWidth:"20rem",minWidth:"10rem"},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"100%"},cardContent:{flexGrow:1},title:(t={fontFamily:"Teko"},Object(p.a)(t,e.breakpoints.between("xs","sm"),{fontSize:48}),Object(p.a)(t,e.breakpoints.between("sm","md"),{fontSize:60}),Object(p.a)(t,e.breakpoints.between("md","lg"),{fontSize:70}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{fontSize:75}),Object(p.a)(t,e.breakpoints.up("xl"),{fontSize:80}),t),title2:(n={fontFamily:"Teko"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:16}),Object(p.a)(n,e.breakpoints.between("sm","md"),{fontSize:25}),Object(p.a)(n,e.breakpoints.between("md","lg"),{fontSize:35}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{fontSize:45}),Object(p.a)(n,e.breakpoints.up("xl"),{fontSize:55}),n),content:(a={fontFamily:"Teko"},Object(p.a)(a,e.breakpoints.between("xs","sm"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("sm","md"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("md","lg"),{justifyContent:"flex-start",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(a,e.breakpoints.up("xl"),{justifyContent:"center",alignItems:"flex-start"}),a),content2:(i={fontFamily:"Teko"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{marginLeft:10,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("sm","md"),{marginLeft:90,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("md","lg"),{marginLeft:80,maxWidth:500}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{marginLeft:50,maxWidth:500}),Object(p.a)(i,e.breakpoints.up("xl"),{marginLeft:60,maxWidth:500}),i),cbutton:(s={fontFamily:"Teko"},Object(p.a)(s,e.breakpoints.between("xs","sm"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(s,e.breakpoints.between("sm","md"),{justifyContent:"center",alignItems:"flex-start"}),Object(p.a)(s,e.breakpoints.between("md","lg"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(s,e.breakpoints.between("lg","xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),Object(p.a)(s,e.breakpoints.up("xl"),{justifyContent:"flex-end",alignItems:"flex-start"}),s),imageStyle:(r={},Object(p.a)(r,e.breakpoints.between("xs","sm"),{width:280,height:365,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.between("sm","md"),{width:290,height:385,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.between("md","lg"),{width:300,height:420,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.between("lg","xl"),{width:300,marginTop:20,marginBottom:50}),Object(p.a)(r,e.breakpoints.up("xl"),{width:300,marginTop:20,marginBottom:50}),r),imagePapaer:(o={},Object(p.a)(o,e.breakpoints.between("xs","sm"),{backgroundColor:"#EFEBE9",width:330,height:420,marginLeft:10}),Object(p.a)(o,e.breakpoints.between("sm","md"),{backgroundColor:"#EFEBE9",width:340,height:440,marginLeft:10}),Object(p.a)(o,e.breakpoints.between("md","lg"),{backgroundColor:"#EFEBE9",width:350,height:465,marginLeft:10}),Object(p.a)(o,e.breakpoints.between("lg","xl"),{backgroundColor:"#EFEBE9",width:350,marginLeft:10}),Object(p.a)(o,e.breakpoints.up("xl"),{backgroundColor:"#EFEBE9",width:350,marginLeft:10}),o)}}),{withTheme:!0})(Ze),tt=Object(h.a)({palette:{primary:{main:"#FDFEFE"},secondary:{main:"#2196f3"}}}),nt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:tt,children:[Object(C.jsx)(L,{}),Object(C.jsx)(g.a,{component:"main",className:e.container,children:Object(C.jsxs)("div",{className:e.paper,children:[Object(C.jsx)(x.a,{color:"inherit",noWrap:!0,className:e.shouldKnow,children:Object(C.jsx)("b",{children:"\u53d1\u5e03\u987b\u77e5"})}),Object(C.jsx)(x.a,{variant:"h4",paragraph:!0,className:e.content,children:"\u5728\u53bb\u53d1\u5e03\u60a8\u7684\u4f5c\u54c1\u4e4b\u524d\uff0c\u60a8\u9700\u8981\u4e86\u89e3\u4ee5\u4e0b\u4fe1\u606f\uff0c\u5b83\u4eec\u5c06\u6709\u52a9\u4e8e\u60a8\u4e86\u89e3\u5b8c\u6574\u7684\u53d1\u5e03\u6d41\u7a0b\uff1a"}),Object(C.jsxs)(x.a,{color:"textSecondary",paragraph:!0,className:e.content,children:[Object(C.jsx)("b",{children:"1."})," \u60a8\u7684\u4f5c\u54c1\u5c06\u88ab\u5b58\u50a8\u5728IPFS\uff08InterPlanetary File System\uff09\u4e2d\uff0c\u800c\u5b58\u50a8\u5730\u5740\u5c06\u88ab\u8bb0\u5f55\u5728\u4ee5\u592a\u574a\u4e0a\uff0c\u4e0e\u60a8\u7684NFT\u7ed1\u5b9a\u5728\u4e00\u8d77"]}),Object(C.jsxs)(x.a,{color:"textSecondary",paragraph:!0,className:e.content,children:[Object(C.jsx)("b",{children:"2."})," \u60a8\u53ef\u4ee5\u9009\u62e9\u662f\u5c06\u60a8\u7684\u4f5c\u54c1\u5f00\u6e90\u5f97\u4fdd\u5b58\u5728IPFS\u4e0a\uff0c\u6216\u8005\u52a0\u5bc6\u4fdd\u5b58\u5728IPFS\u4e0a\u3002\u9488\u5bf9\u52a0\u5bc6\u7684\u4f5c\u54c1\uff0c\u53ea\u6709\u6301\u6709\u60a8\u53d1\u884c\u7684NFT\u7684\u8bfb\u8005\u624d\u80fd\u8bbf\u95ee\u3002 ",Object(C.jsx)("br",{})]}),Object(C.jsxs)(x.a,{color:"textSecondary",paragraph:!0,className:e.content,children:[Object(C.jsx)("b",{children:"3."})," \u5982\u679c\u60a8\u9009\u62e9\u52a0\u5bc6\u4fdd\u5b58\u5728IPFS\u4e0a\uff0c\u60a8\u9700\u8981\u5728\u5c06\u4f5c\u54c1\u57fa\u672c\u4fe1\u606f\u4e0a\u4f20\u5230\u94fe\u4e0a\u540e\uff0c\u518d\u8bbe\u7f6e\u4f5c\u54c1\u7684\u5730\u5740\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u6211\u4eec\u4f1a\u5f15\u5bfc\u60a8\u5b8c\u6210\uff0c\u8bf7\u52ff\u62c5\u5fc3\u3002 ",Object(C.jsx)("br",{})]}),Object(C.jsxs)(x.a,{color:"textSecondary",paragraph:!0,className:e.content,children:[Object(C.jsx)("b",{children:"4."})," \u5f53\u60a8\u5c06\u4f5c\u54c1\u53d1\u5e03\u5728\u6211\u4eec\u5e73\u53f0\u65f6\uff0c\u6211\u4eec\u9ed8\u8ba4\u60a8\u4f1a\u652f\u6301\u4e8c\u6b21\u521b\u4f5c\uff0c\u5904\u4e8e\u60a8\u5ba3\u4f20\u7f51\u7edc\u4e2d\u7684\u8bfb\u8005\u6709\u6743\u5c06\u4ed6\u4eec\u6301\u6709\u7684NFT\u5bf9\u5e94\u7684\u5730\u5740\u66ff\u6362\u4e3a\u4ed6\u4eec\u81ea\u5df1\u7684\u4e8c\u6b21\u521b\u4f5c\u4f5c\u54c1\u3002 ",Object(C.jsx)("br",{})]}),Object(C.jsxs)(u.a,{container:!0,justifyContent:"center",style:{fontFamily:"Teko",marginTop:70},children:[Object(C.jsx)(u.a,{item:!0,xs:4,children:Object(C.jsx)(m.a,{size:"large",variant:"contained",color:"secondary",className:e.btnMain,href:"/#/encryptedPublish",children:Object(C.jsx)("b",{children:"\u52a0\u5bc6\u53d1\u5e03"})})}),Object(C.jsx)(u.a,{item:!0,xs:3,children:Object(C.jsx)(m.a,{size:"large",variant:"outlined",color:"secondary",className:e.btnSecond,href:"/#/publish",children:Object(C.jsx)("b",{children:"\u5f00\u6e90\u53d1\u5e03"})})})]})]})})]})})}}]),n}(i.Component),at=Object(f.a)((function(e){var t,n,a,i;return{icon:{marginRight:e.spacing(2)},titleFont:{fontFamily:"Teko"},btn:{color:"#424949",borderWidth:2,borderColor:"#e3f2fd",fontSize:16},btnMain:(t={color:"#FFFFFF",borderColor:"#e3f2fd",borderWidth:2,borderRadius:25},Object(p.a)(t,e.breakpoints.between("xs","sm"),{fontSize:5}),Object(p.a)(t,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(t,e.breakpoints.between("md","lg"),{fontSize:16}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{fontSize:16,width:150}),Object(p.a)(t,e.breakpoints.up("xl"),{fontSize:30,width:300,height:70}),t),btnSecond:(n={color:"#03A9F4",borderColor:"#03A9F4",borderWidth:2,borderRadius:25},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:5,width:95}),Object(p.a)(n,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(n,e.breakpoints.between("md","lg"),{fontSize:16}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{fontSize:16,width:150}),Object(p.a)(n,e.breakpoints.up("xl"),{fontSize:30,width:300,height:70}),n),paper:{marginTop:e.spacing(7),maxWidth:"150%"},content:(a={fontFamily:"Teko",marginTop:20,lineHeight:1.5},Object(p.a)(a,e.breakpoints.between("xs","sm"),{fontSize:16}),Object(p.a)(a,e.breakpoints.between("sm","md"),{fontSize:20}),Object(p.a)(a,e.breakpoints.between("md","lg"),{fontSize:20}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{fontSize:20}),Object(p.a)(a,e.breakpoints.up("xl"),{fontSize:30}),a),shouldKnow:(i={fontFamily:"Teko",textAlign:"center"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{fontSize:16}),Object(p.a)(i,e.breakpoints.between("sm","md"),{fontSize:20}),Object(p.a)(i,e.breakpoints.between("md","lg"),{fontSize:40}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{fontSize:40}),Object(p.a)(i,e.breakpoints.up("xl"),{fontSize:60}),i)}}),{withTheme:!0})(nt),it=n(371),st=it.pinata_api_key,rt=it.pinata_secret_api_key,ot=n(372),ct=n(373),lt=n(247),dt=Object(h.a)({palette:{primary:{main:"#2196f3"},secondary:{main:"#FDFEFE"}}}),pt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).backend="https://api.sparklink.io",e.state={name:"",bonusFee:0,price:0,buffer:null,file:null,ipfsHashCover:"",ipfsMeta:"",fileType:"",fileIpfs:"",description:"",shareTimes:0,onLoading:!1,rootNFTId:"",issueId:"",allowSubmitPDF:!1,usedAcc:"",sig:"",finished:!1,open:!1,coverURL:"",jumped:!1},e.handleGetPubName=function(t){e.setState({name:t.target.value})},e.handleGetBonusFee=function(t){e.setState({bonusFee:t})},e.handleGetPrice=function(t){e.setState({price:t})},e.handleGetShareTimes=function(t){e.setState({shareTimes:t})},e.handleGetDescription=function(t){e.setState({description:t.target.value})},e.handleGetNFTId=function(t){e.setState({rootNFTId:String(t)})},e.handleClose=function(t){e.setState({open:!1})},e.handleClickOpen=function(t){e.setState({open:!0})},e.jump=function(){var t=Object(w.a)(y.a.mark((function t(n){var a,i,s,r,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:return a=t.sent,i=a[0],e.setState({usedAcc:i}),t.next=7,Q.methods.ownerOf(e.state.rootNFTId).call();case 7:return s=t.sent,t.next=10,Q.methods.getIssueIdByNFTId(e.state.rootNFTId).call();case 10:return r=t.sent,t.next=13,Q.methods.getRoyaltyFeeByIssueId(r).call();case 13:o=t.sent,i==s.toLowerCase()?e.setState({onLoading:!1,allowSubmitPDF:!0,jumped:!0,bonusFee:o}):alert("\u60a8\u5e76\u4e0d\u662f\u6b64NFT\u7684\u6301\u6709\u8005");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.submit=function(){var t=Object(w.a)(y.a.mark((function t(n){var a,i,s,r,o,c,l,d;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:if(a=t.sent,i=a[0],e.setState({usedAcc:i}),0!==e.state.price&&0!==e.state.bonusFee&&0!==e.state.shareTimes){t.next=9;break}alert("\u4f60\u6709\u4fe1\u606f\u5c1a\u672a\u586b\u5199"),t.next=23;break;case 9:return e.setState({onLoading:!0}),s=z.utils.toWei(e.state.price.toString()),"0x0000000000000000000000000000000000000000000000000000000000000000",t.next=14,Q.methods.publish(s,e.state.bonusFee,e.state.shareTimes,"0x0000000000000000000000000000000000000000000000000000000000000000").send({from:e.state.usedAcc});case 14:r=t.sent,console.log(r),o=r.events.Publish,c=o.returnValues,l=String(c.rootNFTId),console.debug(typeof l),d=c.issue_id,e.setState({onLoading:!1,rootNFTId:l,issueId:d,allowSubmitPDF:!0}),alert("\u5df2\u7ecf\u6210\u529f\u53d1\u5e03\u4f5c\u54c1");case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.checkDetail=function(){var t=Object(w.a)(y.a.mark((function t(n){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a="/#/NFT/"+e.state.rootNFTId,window.open(a,"_self");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.submitWork=Object(w.a)(y.a.mark((function t(){var n,a,i,s,r,o,c,l,d,p,b;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.state.ipfsHashCover&&""!==e.state.fileIpfs){t.next=4;break}alert("\u4f60\u6709\u6587\u4ef6\u5c1a\u672a\u586b\u5199"),t.next=43;break;case 4:return n="https://gateway.pinata.cloud/ipfs/"+e.state.ipfsHashCover,e.setState({coverURL:n}),console.debug("coverURL: ",e.state.coverURL),a=e.state.description.replace(/(\r\n\t|\n|\r\t)/gm," "),t.next=10,window.ethereum.request({method:"eth_requestAccounts"});case 10:if(i=t.sent,i[0]===e.state.usedAcc){t.next=15;break}return alert("\u8d26\u6237\u53d1\u751f\u53d8\u5316\uff0c\u8bf7\u5207\u6362\u56de\u539f\u8d26\u6237"),t.abrupt("return");case 15:return s="https://gateway.pinata.cloud/ipfs/"+e.state.fileIpfs,r={name:e.state.name,description:a,image:e.state.coverURL,attributes:[{display_type:"boost_percentage",trait_type:"Bonuse Percentage",value:e.state.bonusFee},{trait_type:"File Address",value:s},{value:e.state.fileType},{trait_type:"Encrypted",value:"TRUE"}]},console.debug(r),"https://api.pinata.cloud/pinning/pinJSONToIPFS",o=Object(le.a)(e),e.setState({onLoading:!0}),t.prev=21,t.next=24,$.a.post("https://api.pinata.cloud/pinning/pinJSONToIPFS",r,{headers:{pinata_api_key:st,pinata_secret_api_key:rt}});case 24:return c=t.sent,console.debug("metadata: ",c.data.IpfsHash),l=ct.decode(c.data.IpfsHash),d=l.toString("hex").substring(4),console.log(d),console.log(c.data.IpfsHash),e.setState({ipfsMeta:d}),p="0x"+d,t.next=34,Q.methods.setURI(o.state.rootNFTId,p).send({from:o.state.usedAcc});case 34:b=t.sent,console.debug(b.events.SetURI),alert("\u5df2\u7ecf\u6210\u529f\u53d1\u5e03\u4f5c\u54c1"),e.setState({allowSubmitPDF:!1,finished:!0,onLoading:!1}),t.next=43;break;case 40:t.prev=40,t.t0=t.catch(21),alert("\u4f3c\u4e4e\u9047\u5230\u4e86\u4e9b\u5c0f\u95ee\u9898\uff1a ".concat(t.t0));case 43:case"end":return t.stop()}}),t,null,[[21,40]])}))),e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=4;break}return alert("\u8bf7\u5148\u5b89\u88c5metamask"),window.location.href="/#/introPublish",e.abrupt("return");case 4:window.ethereum.request({method:"eth_chainId"}).then((function(e){if("0x89"!==e)return alert("\u8bf7\u5207\u6362\u81f3Polygon \u4e3b\u7f51\u7edc"),void(window.location.href="/#/introPublish")}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,n=this,a=V.a.TextArea,i={name:"file",action:"https://api.pinata.cloud/pinning/pinFileToIPFS",headers:{pinata_api_key:st,pinata_secret_api_key:rt},data:this.state.buffer,beforeUpload:function(t){return new Promise((function(n,a){try{var i=new FileReader;i.readAsArrayBuffer(t),i.onload=function(t){var n=t.target.result,a=new ot;a.append("file",n),e.setState({buffer:a})},n()}catch(s){D.b.error("Read file error"),a()}}))},onChange:function(e){return Object(w.a)(y.a.mark((function t(){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"done"===(a=e.file.status)?(D.b.success("".concat(e.file.name," file uploaded successfully.")),n.setState({ipfsHashCover:e.file.response.IpfsHash})):"error"===a&&D.b.error("".concat(e.file.name," file upload failed."));case 2:case"end":return t.stop()}}),t)})))()},onDrop:function(e){D.b.error("Only image file supported"),console.log("Dropped files",e.dataTransfer.files)}},s={name:"file",action:"https://api.pinata.cloud/pinning/pinFileToIPFS",headers:{pinata_api_key:st,pinata_secret_api_key:rt},beforeUpload:function(t){return new Promise(function(){var a=Object(w.a)(y.a.mark((function a(i,s){var r,o,c,l,d,p,b,m,u,h;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return r=a.sent,o=r[0],c={account:o,nft_id:n.state.rootNFTId},a.next=8,z.eth.personal.sign(JSON.stringify(c),o);case 8:return l=a.sent,console.debug(l),d={nft_id:n.state.rootNFTId,account:o,signature:l},p=JSON.stringify(d),console.log(p),b=e.backend+"/api/v1/key/claim",a.prev=14,a.next=17,$.a.post(b,p,{headers:{"Content-Type":"application/json"}});case 17:m=a.sent,u=m.data.key,console.debug(u),(h=new FileReader).readAsArrayBuffer(t),h.onload=function(e){var t=e.target.result,n=lt.lib.WordArray.create(t),a=lt.enc.Hex.stringify(n),s=lt.TripleDES.encrypt(a,u).toString(),r=new Blob([s]);i(r)},a.next=28;break;case 25:a.prev=25,a.t0=a.catch(14),400==a.t0.response.status?a.t0.response.data.message.includes("signature invalid")?alert("\u60a8\u7684\u7b7e\u540d\u6709\u8bef\uff0c\u8bf7\u67e5\u770b\u7b7e\u540d\u8d26\u53f7\u662f\u5426\u6b63\u786e"):a.t0.response.data.message.includes("param invalid")?alert("\u53c2\u6570\u9519\u8bef"):a.t0.response.data.message.includes("not owned")?alert("\u60a8\u5e76\u4e0d\u62e5\u6709\u6b64nft"):a.t0.response.data.message.includes("not found")&&alert("\u6b64nft\u8fd8\u672a\u751f\u6210"):alert("\u8bf7\u6c42\u6587\u4ef6\u52a0\u5bc6\u5bc6\u94a5\u5931\u8d25");case 28:a.next=35;break;case 30:a.prev=30,a.t1=a.catch(0),console.log(a.t1),c.error("Read file error"),s();case 35:case"end":return a.stop()}}),a,null,[[0,30],[14,25]])})));return function(e,t){return a.apply(this,arguments)}}())},onChange:function(e){if("done"===e.file.status){var t=e.file.name.split("."),a=t[t.length-1];n.setState({fileIpfs:e.file.response.IpfsHash,fileType:a}),console.debug("encrypted file hash: ",e.file.response.IpfsHash),D.b.success("".concat(e.file.name," file uploaded successfully."))}},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}};return this.state.onLoading?Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:dt,children:[Object(C.jsx)(L,{}),Object(C.jsx)("div",{style:{marginLeft:"35%",marginTop:"10%"},children:Object(C.jsx)(Z.a,{type:"bars",color:"#2196f3",width:"40%"})})]})}):this.state.allowSubmitPDF?Object(C.jsx)("div",{children:Object(C.jsx)(g.a,{component:"main",maxWidth:"xs",className:t.main,children:Object(C.jsxs)("div",{className:t.paper,children:[Object(C.jsx)(x.a,{className:t.titlePub,children:Object(C.jsx)("b",{children:"\u4e0a\u4f20\u4f5c\u54c1\u6587\u4ef6"})}),Object(C.jsxs)("form",{className:t.form,noValidate:!0,children:[this.state.jumped?Object(C.jsxs)("div",{children:[Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginBottom:10},children:"\u4f5c\u54c1\u540d\u5b57 *"}),Object(C.jsx)(V.a,{placeholder:"\u4f5c\u54c1\u540d\u79f0",allowClear:!0,id:"pubName",onChange:this.handleGetPubName,value:this.state.name,className:t.input})]}),Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u4f5c\u54c1\u63cf\u8ff0 *"}),Object(C.jsx)("p",{style:{fontSize:14},children:"\u8bf7\u7528\u7b80\u5355\u7684\u8bdd\u8bed\u5bf9\u60a8\u7684\u4f5c\u54c1\u8fdb\u884c\u63cf\u8ff0\uff0c\u7cbe\u51c6\u6709\u6548\u7684\u63cf\u8ff0\u80fd\u5e2e\u52a9\u5176\u4ed6\u7528\u6237\u66f4\u51c6\u786e\u5f97\u4e86\u89e3\u60a8\u7684\u4f5c\u54c1"}),Object(C.jsx)(a,{rows:4,id:"Description",onChange:this.handleGetDescription})]})]}):Object(C.jsx)("div",{}),Object(C.jsx)("label",{style:{fontSize:18,marginTop:50},children:"\u5c01\u9762\u56fe\u7247 *"}),Object(C.jsxs)("p",{style:{fontSize:12},children:["\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u4e0a\u4f20\u60a8\u7684\u5c01\u9762\u56fe\u7247 ",Object(C.jsx)("br",{}),"\u5c01\u9762\u6587\u4ef6\u652f\u6301\u8fd9\u4e9b\u683c\u5f0f\uff1aJPEG/JPG/PNG"]}),Object(C.jsxs)(q.a,Object(R.a)(Object(R.a)({},i),{},{style:{width:"100%",minHeight:100},id:"Uploader",accept:".png, .jpg, .jpeg",children:[Object(C.jsx)("p",{className:"ant-upload-drag-icon",children:Object(C.jsx)(U.a,{})}),Object(C.jsx)("p",{className:"ant-upload-text",children:"\u4e0a\u4f20\u6587\u4ef6\u8bf7\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904"}),Object(C.jsx)("p",{className:"ant-upload-hint",children:"\u652f\u6301\u5355\u4e2a\u6587\u4ef6\u7684\u4e0a\u4f20\uff0c\u652f\u6301\u591a\u79cd\u7c7b\u578b\u6587\u4ef6\u7684\u4e0a\u4f20"})]})),Object(C.jsx)("label",{style:{fontSize:18,marginTop:50},children:"\u4f5c\u54c1\u6587\u4ef6 *"}),Object(C.jsx)("p",{style:{fontSize:12},children:"\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u4e0a\u4f20\u60a8\u7684\u4f5c\u54c1\u6587\u4ef6 "}),Object(C.jsxs)(q.a,Object(R.a)(Object(R.a)({},s),{},{style:{width:"100%",minHeight:100},id:"Uploader2",children:[Object(C.jsx)("p",{className:"ant-upload-drag-icon",children:Object(C.jsx)(U.a,{})}),Object(C.jsx)("p",{className:"ant-upload-text",children:"\u4e0a\u4f20\u6587\u4ef6\u8bf7\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904"}),Object(C.jsx)("p",{className:"ant-upload-hint",children:"\u652f\u6301\u5355\u4e2a\u6587\u4ef6\u7684\u4e0a\u4f20\u548c\u591a\u4e2a\u6587\u4ef6\u7684\u4e0a\u4f20\uff0c\u652f\u6301\u591a\u79cd\u7c7b\u578b\u6587\u4ef6\u7684\u4e0a\u4f20"})]})),Object(C.jsx)("div",{style:{textAlign:"center"},children:Object(C.jsx)(m.a,{variant:"contained",startIcon:Object(C.jsx)(J.a,{}),className:t.btnPub,onClick:this.submitWork,children:"\u53d1\u5e03\u4f5c\u54c1"})})]})]})})}):this.state.finished?Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:dt,children:[Object(C.jsx)(L,{}),Object(C.jsxs)("div",{style:{textAlign:"center"},children:[Object(C.jsx)(x.a,{className:t.titleCon,children:Object(C.jsx)("b",{children:" \ud83c\udf89 \u606d\u559c\u60a8\u53d1\u5e03\u6210\u529f"})}),Object(C.jsx)(ee.a,{className:t.paperImg,children:Object(C.jsx)("img",{style:{width:300,marginTop:20,marginBottom:50},src:this.state.coverURL})}),Object(C.jsx)(x.a,{variant:"h4",style:{marginTop:20,fontFamily:"Ubuntu"},children:Object(C.jsxs)("b",{children:["\u60a8\u83b7\u5f97\u7684\u6839\u7ed3\u70b9NFT\u662f\uff1a #",this.state.rootNFTId]})}),Object(C.jsx)(m.a,{variant:"contained",className:t.button,style:{marginTop:50,width:200,height:50,marginBottom:50},onClick:this.checkDetail,children:"\u67e5\u770b\u8be6\u60c5"})]})]})}):Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:dt,children:[Object(C.jsx)(L,{}),Object(C.jsx)(g.a,{component:"main",maxWidth:"xs",className:t.main,children:Object(C.jsxs)("div",{className:t.paper,children:[Object(C.jsx)(x.a,{className:t.titlePub,children:Object(C.jsx)("b",{children:"\u53d1\u5e03\u4f5c\u54c1\u4fe1\u606f"})}),Object(C.jsx)("form",{className:t.form,noValidate:!0,children:Object(C.jsxs)(u.a,{container:!0,spacing:2,children:[Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginBottom:10},children:"\u4f5c\u54c1\u540d\u5b57 *"}),Object(C.jsx)(V.a,{placeholder:"\u4f5c\u54c1\u540d\u79f0",allowClear:!0,id:"pubName",onChange:this.handleGetPubName,value:this.state.name,className:t.input})]}),Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u6536\u76ca\u6bd4\u4f8b *"}),Object(C.jsx)("p",{style:{fontSize:14},children:"\u5f53\u60a8\u7684\u4f5c\u54c1\u88ab\u6210\u529f\u5206\u4eab\u65f6\uff0c\u60a8\u5e0c\u671b\u4ece\u5206\u4eab\u4ef7\u683c\u4e2d\u83b7\u5f97\u591a\u5c11\u6bd4\u4f8b\u7684\u6536\u76ca"}),Object(C.jsx)(K.a,{id:"bonusFee",defaultValue:0,min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},onChange:this.handleGetBonusFee,className:t.inputNum})]}),Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u552e\u5356\u4ef7\u683c (MATIC)*"}),Object(C.jsx)(K.a,{id:"price",defaultValue:0,min:0,onChange:this.handleGetPrice,className:t.inputNum})]}),Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u6700\u9ad8\u5206\u4eab\u6b21\u6570 *"}),Object(C.jsx)("p",{style:{fontSize:14},children:"\u60a8\u5e0c\u671b\u6bcf\u4e00\u4e2a\u5e2e\u52a9\u60a8\u4f20\u64ad\u7684\u7528\u6237\u6700\u591a\u80fd\u591f\u5206\u4eab\u591a\u5c11\u6b21\uff1f"}),Object(C.jsx)(K.a,{id:"shareTimes",defaultValue:0,min:0,onChange:this.handleGetShareTimes,className:t.inputNum})]}),Object(C.jsxs)(u.a,{item:!0,style:{width:"100%"},children:[Object(C.jsx)("label",{style:{fontSize:18,marginTop:20},children:"\u4f5c\u54c1\u63cf\u8ff0 *"}),Object(C.jsx)("p",{style:{fontSize:14},children:"\u8bf7\u7528\u7b80\u5355\u7684\u8bdd\u8bed\u5bf9\u60a8\u7684\u4f5c\u54c1\u8fdb\u884c\u63cf\u8ff0\uff0c\u7cbe\u51c6\u6709\u6548\u7684\u63cf\u8ff0\u80fd\u5e2e\u52a9\u5176\u4ed6\u7528\u6237\u66f4\u51c6\u786e\u5f97\u4e86\u89e3\u60a8\u7684\u4f5c\u54c1"}),Object(C.jsx)(a,{rows:4,id:"Description",onChange:this.handleGetDescription})]})]})}),Object(C.jsxs)(u.a,{container:!0,alignItems:"center",spacing:4,style:{marginTop:20,marginBottom:50},children:[Object(C.jsx)(u.a,{item:!0,xs:!0,style:{textAlign:"center"},children:Object(C.jsx)(m.a,{variant:"contained",className:t.button,startIcon:Object(C.jsx)(J.a,{}),style:{width:200,height:50,marginBottom:20,marginTop:20},onClick:this.submit,children:"\u63d0\u4ea4\u4fe1\u606f"})}),Object(C.jsx)(u.a,{item:!0,xs:!0,style:{textAlign:"center"},children:Object(C.jsx)(Qe.a,{onClick:this.handleClickOpen,style:{fontSize:10,textDecoration:"underline"},children:"\u5df2\u7ecf\u4e0a\u4f20\u8fc7\u57fa\u672c\u4fe1\u606f\uff1f"})})]}),Object(C.jsxs)(ze.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(C.jsx)(Ce.a,{id:"form-dialog-title",children:"\u586b\u5199 NFT ID"}),Object(C.jsxs)(_e.a,{children:[Object(C.jsx)(Le.a,{children:"\u8bf7\u5728\u4e0b\u65b9\u533a\u57df\u586b\u5199\u60a8\u8981\u7ed1\u5b9a\u5185\u5bb9\u7684 NFT ID"}),Object(C.jsx)("label",{style:{fontSize:14,marginBottom:10},children:"NFT ID *"}),Object(C.jsx)(K.a,{defaultValue:0,min:0,onChange:this.handleGetNFTId})]}),Object(C.jsxs)(Be.a,{children:[Object(C.jsx)(m.a,{onClick:this.handleClose,color:"primary",children:"\u53d6\u6d88"}),Object(C.jsx)(m.a,{variant:"contained",onClick:this.jump,color:"primary",children:"\u53bb\u4e0a\u4f20\u4f5c\u54c1"})]})]})]})})]})})}}]),n}(i.Component),bt=Object(f.a)((function(e){var t,n,a,i,s;return{main:(t={},Object(p.a)(t,e.breakpoints.between("xs","sm"),{width:"60%"}),Object(p.a)(t,e.breakpoints.up("sm"),{width:500}),t),titleCon:(n={marginTop:50,fontFamily:"Ubuntu"},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:30}),Object(p.a)(n,e.breakpoints.up("sm"),{fontSize:40}),n),titlePub:(a={marginTop:"3%",fontFamily:"Ubuntu"},Object(p.a)(a,e.breakpoints.between("xs","sm"),{fontSize:30}),Object(p.a)(a,e.breakpoints.up("sm"),{fontSize:40}),a),paperImg:(i={backgroundColor:"#EFEBE9",width:330},Object(p.a)(i,e.breakpoints.between("xs","sm"),{marginLeft:"5%",marginTop:30}),Object(p.a)(i,e.breakpoints.between("sm","md"),{marginLeft:"30%",marginTop:30}),Object(p.a)(i,e.breakpoints.between("md","lg"),{marginLeft:"30%",marginTop:30}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{marginLeft:"40%",marginTop:30}),Object(p.a)(i,e.breakpoints.up("xl"),{marginLeft:"45%",marginTop:30}),i),btnPub:(s={margin:e.spacing(1),borderRadius:25,color:"#FFFFFF",backgroundColor:"#2196f3",marginBottom:20,marginTop:40,height:45,minWidth:200},Object(p.a)(s,e.breakpoints.between("xs","sm"),{width:"50%"}),Object(p.a)(s,e.breakpoints.between("sm","md"),{fontSize:16,width:"30%"}),Object(p.a)(s,e.breakpoints.up("md"),{fontSize:16,width:"30%"}),s),btn:{color:"#424949",borderWidth:2,borderColor:"#e3f2fd",fontSize:16},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:M.a[500],width:60,height:60},form:{width:"150%",marginTop:e.spacing(7)},submit:{margin:e.spacing(3,0,2)},fileBtn:{padding:"10px 30px 10px 30px",background:"#66C1E4",border:"none",color:"#FFF",boxShadow:"1px 1px 1px #4C6E91"},button:{margin:e.spacing(1),fontSize:20,borderRadius:25,color:"#FFFFFF",backgroundColor:"#2196f3"},input:{height:40,borderRadius:5},inputNum:{height:40,borderRadius:5,width:"100%",fontSize:20}}}),{withTheme:!0})(pt),mt=Object(h.a)({palette:{primary:{main:"#FDFEFE"},secondary:{main:"#2196f3"}}}),ut=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(C.jsx)("div",{children:Object(C.jsxs)(j.a,{theme:mt,children:[Object(C.jsx)(L,{}),Object(C.jsx)(g.a,{component:"main",className:e.container,children:Object(C.jsx)("div",{className:e.paper,children:Object(C.jsx)(x.a,{color:"inherit",noWrap:!0,className:e.shouldKnow,children:Object(C.jsx)("b",{children:"\u656c\u8bf7\u671f\u5f85"})})})})]})})}}]),n}(i.Component),ht=Object(f.a)((function(e){var t,n,a,i;return{icon:{marginRight:e.spacing(2)},titleFont:{fontFamily:"Teko"},btn:{color:"#424949",borderWidth:2,borderColor:"#e3f2fd",fontSize:16},btnMain:(t={color:"#FFFFFF",borderColor:"#e3f2fd",borderWidth:2,borderRadius:25},Object(p.a)(t,e.breakpoints.between("xs","sm"),{fontSize:5}),Object(p.a)(t,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(t,e.breakpoints.between("md","lg"),{fontSize:16}),Object(p.a)(t,e.breakpoints.between("lg","xl"),{fontSize:16,width:150}),Object(p.a)(t,e.breakpoints.up("xl"),{fontSize:30,width:300,height:70}),t),btnSecond:(n={color:"#03A9F4",borderColor:"#03A9F4",borderWidth:2,borderRadius:25},Object(p.a)(n,e.breakpoints.between("xs","sm"),{fontSize:5,width:95}),Object(p.a)(n,e.breakpoints.between("sm","md"),{fontSize:10}),Object(p.a)(n,e.breakpoints.between("md","lg"),{fontSize:16}),Object(p.a)(n,e.breakpoints.between("lg","xl"),{fontSize:16,width:150}),Object(p.a)(n,e.breakpoints.up("xl"),{fontSize:30,width:300,height:70}),n),paper:{marginTop:e.spacing(7),maxWidth:"150%"},content:(a={fontFamily:"Teko",marginTop:20,lineHeight:1.5},Object(p.a)(a,e.breakpoints.between("xs","sm"),{fontSize:16}),Object(p.a)(a,e.breakpoints.between("sm","md"),{fontSize:20}),Object(p.a)(a,e.breakpoints.between("md","lg"),{fontSize:20}),Object(p.a)(a,e.breakpoints.between("lg","xl"),{fontSize:20}),Object(p.a)(a,e.breakpoints.up("xl"),{fontSize:30}),a),shouldKnow:(i={fontFamily:"Teko",textAlign:"center"},Object(p.a)(i,e.breakpoints.between("xs","sm"),{fontSize:16}),Object(p.a)(i,e.breakpoints.between("sm","md"),{fontSize:20}),Object(p.a)(i,e.breakpoints.between("md","lg"),{fontSize:40}),Object(p.a)(i,e.breakpoints.between("lg","xl"),{fontSize:40}),Object(p.a)(i,e.breakpoints.up("xl"),{fontSize:60}),i)}}),{withTheme:!0})(ut),jt=function(){return Object(C.jsx)(P.a,{children:Object(C.jsxs)(E.c,{children:[Object(C.jsx)(E.a,{exact:!0,path:"/",component:W}),Object(C.jsx)(E.a,{exact:!0,path:"/introPublish",component:at}),Object(C.jsx)(E.a,{exact:!0,path:"/buy",component:ht}),Object(C.jsx)(E.a,{exact:!0,path:"/publish",component:ce}),Object(C.jsx)(E.a,{exact:!0,path:"/encryptedPublish",component:bt}),Object(C.jsx)(E.a,{exact:!0,path:"/sellSingle/:NFTId",component:Re}),Object(C.jsx)(E.a,{exact:!0,path:"/buySingle/:NFTId",component:Ue}),Object(C.jsx)(E.a,{exact:!0,path:"/collections",component:Ye}),Object(C.jsx)(E.a,{exact:!0,path:"/NFT/:id",component:Ie}),Object(C.jsx)(E.a,{exact:!0,path:"/NFT/spark/:id",component:et})]})})};r.a.render(Object(C.jsx)(jt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[962,1,2]]]);
//# sourceMappingURL=main.2024a907.chunk.js.map